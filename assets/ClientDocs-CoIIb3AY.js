import{u as P}from"./useForm-B0KXMGch.js";import{u as w}from"./useToast-CzWLUixe.js";import{d as B,B as S,C as T,a as k,w as p,k as h,i as d,e as v,b as n,h as y,u as i,o as U}from"./index-mc8yIoJz.js";import{h as D}from"./errorHandler-DijQ3xmc.js";const F={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},W={class:"mt-4 d-flex"},E=B({__name:"ClientDocs",setup(I){const{isValid:c,validate:f}=P("formRef"),{init:m}=w(),t=S({document_type:null,forWho:null,document:[]}),u=[],V=[{text:"Travel Packet(Passport Copy",value:"Passport_Copy"},{text:"Travel Packet(Passport  Photo",value:"Passport_Photo"},{text:"Visa",value:"Visa"},{text:"Gun Permits",value:"Gun Permits"},{text:"CITES Documentation",value:"CITES Documentation"}],g=async l=>{try{const e=new FormData;e.append("document_type",t.document_type.value),e.append("forWho",t.forWho.value),e.append("document",t.document[0]);const o={method:l,maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/client/client-docs-vset/",headers:{"Content-Type":"multipart/form-data"},data:e},s=await h.request(o);console.log(JSON.stringify(s.data)),(s.status===200||s.status===201)&&m({message:s.data.message,color:"success"})}catch(e){if(e.response){const o=D(e);m({message:`
`+o.map((s,r)=>`${r+1}. ${s}`).join(`
`),color:"danger"})}else console.log(e),m({message:"Something went wrong",color:"danger"})}},b=()=>{g("patch")},_=()=>{g("post")},x=async()=>{const l={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/client/companion-observer-list/"},e=await h.request(l);(e.status===200||e.status===201)&&(u.push({text:"Me",value:"Me"}),u.push(...e.data.observer_and_companion.map(o=>({text:o.user.first_name+" "+o.user.last_name,value:o.id}))))};return T(()=>{x()}),(l,e)=>{const o=d("VaSelect"),s=d("VaFileUpload"),r=d("VaButton"),C=d("VaForm");return U(),k(C,{ref:"formRef"},{default:p(()=>[v("div",F,[n(o,{modelValue:t.document_type,"onUpdate:modelValue":e[0]||(e[0]=a=>t.document_type=a),placeholder:"Select Counrty",label:"Document Type",options:V,searchable:"","highlight-matched-text":""},null,8,["modelValue"]),n(o,{modelValue:t.forWho,"onUpdate:modelValue":e[1]||(e[1]=a=>t.forWho=a),placeholder:"Document Owner",label:"Owner",options:u,searchable:"","highlight-matched-text":""},null,8,["modelValue"]),n(s,{modelValue:t.document,"onUpdate:modelValue":e[2]||(e[2]=a=>t.document=a),"upload-button-text":"Upload your photo",color:"secondary",label:"Upload Photo",dropzone:"",undo:"",size:"10mb",type:"gallery","file-types":"image/jpeg, image/png","undo-duration":"500",rules:[a=>a.length>0||"Photo is required"],"max-files":1},null,8,["modelValue","rules"])]),v("div",W,[n(r,{icon:"save",class:"mr-3 mb-2",disabled:!i(c),onClick:e[3]||(e[3]=a=>i(f)()&&_())},{default:p(()=>e[5]||(e[5]=[y(" Save ")])),_:1},8,["disabled"]),n(r,{class:"mr-3 mb-2",icon:"save",disabled:!i(c),color:"warning",onClick:e[4]||(e[4]=a=>i(f)()&&b())},{default:p(()=>e[6]||(e[6]=[y(" save ")])),_:1},8,["disabled"])])]),_:1},512)}}});export{E as default};
//# sourceMappingURL=ClientDocs-CoIIb3AY.js.map
