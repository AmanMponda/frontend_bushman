import{d as K,_ as q,a as V,g as S,w as m,b as o,i as l,e,a4 as N,t as i,F as O,q as D,h as _,o as f,m as p,y as z,l as Q,A as R,B as G,C as j,D as W,s as y,v as $,x as A}from"./index-DdnbDYw8.js";import{u as U}from"./useForm-wORNMcUf.js";import{u as E}from"./useToast-DuJOzJbk.js";import{M as x}from"./ModuleTable-D6ahfMQS.js";import{u as Y}from"./payment-cards-DsUtlebI.js";import{f as Z}from"./format-Cn4G_mmc.js";import{u as C}from"./price-list-store-aSxmm9Gg.js";import{h as J}from"./errorHandler-BXe9Gc4p.js";import{v as X}from"./utils-BWc0LXoO.js";import{u as F}from"./quota-store-B4PnRpB3.js";import{u as T}from"./settings-store-CN-RqZEX.js";import{S as tt}from"./SalesPackageForm-BUmYqR-x.js";import{d as H}from"./pdfDownloader-DiRJnS-k.js";import"./regulatrory-store-Ba4pPGzO.js";const at=K({components:{},props:{priceListItem:{type:Object,required:!0}},data(){return{cardStore:Y(),format:Z}},computed:{loading(){return this.cardStore.loading}},mounted(){this.cardStore.load()}}),et={class:"va-h6 captalized-text text-center"},dt={class:"captalized-text"},ct={class:"va-table-responsive"},st={class:"va-table va-table--hoverable"},ot={key:0},rt={key:1},nt={class:"va-table-responsive"},lt={class:"va-table va-table--hoverable"},it={class:"va-table-responsive"},ut={class:"va-table va-table--hoverable"},ft={class:"va-table-responsive"},vt={class:"va-table va-table--hoverable"};function bt(t,a,d,r,n,s){var k,P,B,h,c,w,I;const u=l("VaSkeleton"),v=l("VaSkeletonGroup"),b=l("VaDivider"),g=l("VaBadge"),L=l("VaAlert");return t.cardStore.loading?(f(),V(v,{key:0},{default:m(()=>[o(u,{class:"mb-4",height:"160px",variant:"squared"}),o(u,{class:"mb-4",height:"160px",variant:"squared"}),o(u,{height:"360px",variant:"squared"})]),_:1})):(f(),S(O,{key:1},[a[17]||(a[17]=e("h1",{class:"va-h4 captalized-text text-center"},"Price List Details",-1)),e("p",et,i(t.format(t.priceListItem.price_list_type.price_list.start_date,"MMMM yyyy"))+"-"+i(t.format(t.priceListItem.price_list_type.price_list.end_date,"MMMM yyyy")),1),o(b),e("h6",dt,i((P=(k=t.priceListItem.sales_package)==null?void 0:k.area)==null?void 0:P.name)+"("+i(t.priceListItem.sales_package.area.description)+") ",1),e("div",ct,[e("table",st,[e("thead",null,[e("tr",null,[a[0]||(a[0]=e("th",null,"Package Name",-1)),a[1]||(a[1]=e("th",null,"Hunting Type",-1)),e("th",null,"Amount("+i((B=t.priceListItem.price_list_type.currency)==null?void 0:B.name)+")",1),a[2]||(a[2]=e("th",null,"Duration(Days)",-1)),a[3]||(a[3]=e("th",null,"Licence",-1)),a[4]||(a[4]=e("th",null,"Licence duration(Days)",-1)),a[5]||(a[5]=e("th",null,"Status",-1))])]),e("tbody",null,[e("tr",null,[e("td",null,i(t.priceListItem.sales_package.name),1),e("td",null,i(t.priceListItem.price_list_type.hunting_type.name),1),e("td",null,i(t.priceListItem.price_list_type.amount),1),e("td",null,i(t.priceListItem.price_list_type.duration),1),e("td",null,i((h=t.priceListItem.sales_package.regulatory_package)==null?void 0:h.name),1),e("td",null,i((c=t.priceListItem.sales_package.regulatory_package)==null?void 0:c.duration),1),(w=t.priceListItem.price_list_type)!=null&&w.is_active?(f(),S("td",ot,[o(g,{text:"Active",color:"success"})])):(f(),S("td",rt,[o(g,{text:"Inactive",color:"danger"})]))])])])]),o(b),a[18]||(a[18]=e("h6",{class:"captalized-text"},"Spieces",-1)),e("div",nt,[e("table",lt,[a[6]||(a[6]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Scientific Name"),e("th",null,"Quantity")])],-1)),e("tbody",null,[(f(!0),S(O,null,D(t.priceListItem.sales_package.species,M=>(f(),S("tr",{key:M.id},[e("td",null,i(M.species.name),1),e("td",null,i(M.species.scientific_name),1),e("td",null,i(M.quantity),1)]))),128))])])]),o(b),a[19]||(a[19]=e("h6",{class:"captalized-text"},"Companion Hunter Costs",-1)),e("div",it,[e("table",ut,[e("thead",null,[e("tr",null,[e("th",null,"Amount("+i(t.priceListItem.price_list_type.currency.name)+")",1)])]),e("tbody",null,[(f(!0),S(O,null,D(t.priceListItem.componions_hunter,M=>(f(),S("tr",{key:M.id},[e("td",null,i(M.amount),1)]))),128))])])]),o(b),a[20]||(a[20]=e("h6",{class:"captalized-text"},"SAFARI EXTRAS",-1)),e("div",ft,[e("table",vt,[e("thead",null,[e("tr",null,[a[7]||(a[7]=e("th",null,"Service",-1)),e("th",null,"Amount ("+i(t.priceListItem.price_list_type.currency.name)+")",1)])]),e("tbody",null,[e("tr",null,[a[8]||(a[8]=e("td",null,"Observer",-1)),e("td",null,i(t.priceListItem.price_list_type.currency.name)+i((I=t.priceListItem.observer[0])==null?void 0:I.amount)+" per day/ person ",1)]),a[9]||(a[9]=e("tr",null,[e("td",null,"Change of Area Fees"),e("td",null,"$5")],-1)),a[10]||(a[10]=e("tr",null,[e("td",null,"Baiting vehicle/ Photographic vehicle"),e("td",null,"$4")],-1)),a[11]||(a[11]=e("tr",null,[e("td",null,"Baiting vehicle with Professional Hunter"),e("td",null,"$7")],-1)),a[12]||(a[12]=e("tr",null,[e("td",null,"WIFI Charges"),e("td",null,"$30 per day")],-1)),a[13]||(a[13]=e("tr",null,[e("td",null,"Firearm Hire"),e("td",null,"$100 per day")],-1)),a[14]||(a[14]=e("tr",null,[e("td",null,"Ammo Purchase"),e("td",null,"$2.5 per Round")],-1))])])]),o(L,{color:"#e6e6e6",title:"*All hunts confirmation is subject to quota availability.!",class:"mb-6"},{default:m(()=>a[15]||(a[15]=[_(" Other safari packages are available on request and can be customized depending on client requirement. ")])),_:1}),o(b),a[21]||(a[21]=N('<h2 class="captalized-text text-center va-h6" data-v-78c3cb3f>More Information</h2><h6 class="captalized-text" data-v-78c3cb3f>Trophy Fees</h6><div class="va-table-responsive" data-v-78c3cb3f><table class="va-table va-table--hoverable" data-v-78c3cb3f><thead data-v-78c3cb3f><tr data-v-78c3cb3f><th data-v-78c3cb3f>Species</th><th data-v-78c3cb3f>Species Availability</th><th data-v-78c3cb3f>10 Days</th><th data-v-78c3cb3f>14 Days</th><th data-v-78c3cb3f>21 Days</th><th data-v-78c3cb3f>Price (USD)</th></tr></thead><tbody data-v-78c3cb3f><tr data-v-78c3cb3f><td data-v-78c3cb3f>1st Buffalo</td><td data-v-78c3cb3f>MS BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>41</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>2nd Buffalo</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>43</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>3rd Buffalo</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>45</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>4th Buffalo</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>45</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Baboon</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>4</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Bushbuck Chobe</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>11</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Bushbuck Masai</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>12</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Bushpig</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>7.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Civet Cat</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Cat Genet</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Crocodile</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>2.9</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Dik Dik</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Common Dukier</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Harveyâ€™s Red Duiker</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>9.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Patterson Eland</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>4.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Elephant 100 Pounds</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>35</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Elephant &gt; 100 Pounds</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>40</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Gerenuk</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>5.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Gazella Grant</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Gazella Thomson</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Gazella Roberts</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>2.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Hartebeest (COKE&#39;S)</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Hippo</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>3</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Spotted Hyena</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Striped Hyena</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>2</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Impala</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Jackal</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Klipspringer</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>1.7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Kudu (Greater)</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>4.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Kudu (Lesser)</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>6</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Leopard</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>9.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Lion</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>13</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Ostrich</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>2</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Fringe Eared Oryx</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>6.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Porcupine</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Ratel Honey Badger</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>9.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Bohor Reedbuck</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>15</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Mountain Reedbuck Common</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>15</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Roan</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>6</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Serval Cat</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Steinbuck</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>7</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Suni</td><td data-v-78c3cb3f>BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.25</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Topi</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Warthog</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Wildbeest</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.65</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Waterbuck - Deffessa</td><td data-v-78c3cb3f>MS</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.5</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Wild Cat</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f></td><td data-v-78c3cb3f>8</td></tr><tr data-v-78c3cb3f><td data-v-78c3cb3f>Zebra</td><td data-v-78c3cb3f>MS, BK</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>*</td><td data-v-78c3cb3f>1.8</td></tr></tbody></table></div>',3)),o(b),o(L,{color:"#e6e6e6",title:"UPGRADE FEES!",class:"mb-6"},{default:m(()=>a[16]||(a[16]=[_(" *If 4th Buffalo is taken upgrade fees of USD 5,000 (plus trophy fees) ")])),_:1})],64))}const pt=q(at,[["render",bt],["__scopeId","data-v-78c3cb3f"]]),mt=K({components:{SalesPackageForm:tt,VaForm:W,VaInput:j,VaSelect:G,VaButton:R},setup(){const t=y(),{isValid:a,validate:d,resetValidation:r,reset:n}=U(t),{init:s}=E(),u=y(!1),v=$({id:null,hunting_type_id:null,package:[],amount:null,currency:null,duration:null,season:null,end_date:null,species:null,quantity:null,companion_amount:null,observer_amount:null}),b=$({id:null,client_id:null,contact:"",contact_type:null,contactable:!1}),g=w=>{v.package=v.package.filter(I=>I!==w)},L=y([]),k=y([]),P=y([]),B=y([]),h=y([]),c=y(0);return{formRef:t,form:v,contactForm:b,showEditForm:u,countries:L,nationality:k,categoryOptions:P,contactsTypes:B,clients:h,step:c,init:s,isValidForm:a,validateForm:d,resetValidationForm:r,resetForm:n,deleteChip:g,validators:X}},data(){return{preferred_species:[],speciesOptions:[],speciesObjects:[],areasOptions:[],huntingTypesOptions:[],salesQuotasOptions:[],speciesItemOptions:[],currencyOptions:[],savingPriceList:!1,durationsOptions:[{value:1,text:"1 day"},{value:2,text:"2 days"},{value:3,text:"3 days"},{value:4,text:"4 days"},{value:5,text:"5 days"},{value:6,text:"6 days"},{value:7,text:"7 days"},{value:8,text:"8 days"},{value:9,text:"9 days"},{value:10,text:"10 days"},{value:11,text:"11 days"},{value:12,text:"12 days"},{value:13,text:"13 days"},{value:14,text:"14 days"},{value:15,text:"15 days"},{value:16,text:"16 days"},{value:17,text:"17 days"},{value:18,text:"18 days"},{value:19,text:"19 days"},{value:20,text:"20 days"},{value:21,text:"21 days"}],seasonsOptions:[]}},computed:{...Q(C,["salesPackages","packageOptions","latestPackage","loadingpackages"]),...z(C,{_shM:"showModal"})},watch:{},mounted(){this.getAreas(),this.getHuntingTypes(),this.getQuotaList(),this.getCurrencyList(),this.getSalesPackages(),this.getSeasonList()},methods:{...p(F,["getSpeciesList"]),...p(F,["getAllSpeciesPerQuotaPerArea"]),...p(F,["getAreaList"]),...p(T,["getHuntingsTypes"]),...p(T,["getCurrencies","getSeasons"]),...p(F,["getQuotas"]),...p(C,["createPriceList"]),...p(C,["getSalesPackageList"]),onAreaChange(t){console.log(t)},async submit(){var a;this.savingPriceList=!0;const t={huntingTypeId:this.form.hunting_type_id.value,sales_package_ids:(a=this.form.package)==null?void 0:a.filter(d=>(d==null?void 0:d.value)!==void 0).map(d=>d==null?void 0:d.value),amount:this.form.amount,currency:this.form.currency.value,duration:this.form.duration.value,season_id:this.form.season.value.id,start_at:this.form.season.value.start_at,end_at:this.form.season.value.end_at,is_active:1,area_id:3,user_id:1,companionAmount:this.form.companion_amount,observerAmount:this.form.observer_amount};this.savingPriceList=!1;try{const d=await this.createPriceList(t);d.status===201?(this.init({message:d.data.message,color:"success"}),this.resetForm(),this.resetValidationForm(),this.speciesObjects=[],this.savingPriceList=!1):(console.log(d),this.savingPriceList=!1)}catch(d){this.savingPriceList=!1,J(d.response),console.log(d),this.init({message:d.message,color:"danger"})}},async getSpeciesItems(){try{const t=await this.getSpeciesList();this.speciesOptions=t.data.map(a=>({value:a.id,text:a.name}))}catch(t){console.log(t)}},async getSeasonList(){try{const t=await this.getSeasons();this.seasonsOptions=t.data.map(a=>({value:a,text:a.name}))}catch(t){console.log(t)}},_showModal(){this._shM=!0},async getSalesPackages(){try{await this.getSalesPackageList(!0)}catch(t){console.log(t)}},deleteFromStorage(t){this.speciesObjects.splice(t,1),console.log("Species item deleted:",t)},async getAreas(){try{const t=await this.getAreaList();this.areasOptions=t.data.map(a=>({value:a.id,text:a.name}))}catch(t){console.log(t)}},async getHuntingTypes(){try{const t=await this.getHuntingsTypes();this.huntingTypesOptions=t.data.map(a=>({value:a.id,text:a.name}))}catch(t){console.log(t)}},onChangePackage(t){console.log(t.filter(a=>(a==null?void 0:a.value)!==void 0).map(a=>a==null?void 0:a.value))},async getQuotaList(){try{const t=await this.getQuotas(null);this.salesQuotasOptions=t.data.map(a=>({value:a.id,text:a.name}))}catch(t){console.log(t)}},async getCurrencyList(){try{const t=await this.getCurrencies();this.currencyOptions=t.data.map(a=>({value:a.id,text:a.name}))}catch(t){console.log(t)}}}}),gt={class:"p-1"},ht={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},yt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},St={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Vt={class:"mt-4 d-flex p-2"};function Lt(t,a,d,r,n,s){const u=l("VaChip"),v=l("VaIcon"),b=l("VaSelect"),g=l("VaInput"),L=l("VaButton"),k=l("VaForm"),P=l("VaInnerLoading"),B=l("SalesPackageForm"),h=l("VaModal");return f(),S(O,null,[o(P,{loading:t.savingPriceList,size:60},{default:m(()=>[o(k,{ref:"formRef"},{default:m(()=>[e("div",gt,[a[11]||(a[11]=e("h3",{class:"font-bold text-lg mb-2"},"Price list Infos",-1)),e("div",ht,[o(b,{modelValue:t.form.package,"onUpdate:modelValue":[a[1]||(a[1]=c=>t.form.package=c),t.onChangePackage],options:t.packageOptions,multiple:"",clearable:"",placeholder:"Select Package list here",rules:[c=>c||"Package is required"],label:"Packages","required-mark":""},{content:m(({value:c})=>[(f(!0),S(O,null,D(c,w=>(f(),V(u,{key:w,size:"small",color:"info",class:"mr-1 my-1",closeable:"","onUpdate:modelValue":I=>t.deleteChip(w)},{default:m(()=>[_(i(w.text),1)]),_:2},1032,["onUpdate:modelValue"]))),128))]),append:m(()=>[o(v,{name:"add",class:"ml-2",onClick:a[0]||(a[0]=c=>t._showModal())})]),_:1},8,["modelValue","options","rules","onUpdate:modelValue"]),o(b,{modelValue:t.form.hunting_type_id,"onUpdate:modelValue":a[2]||(a[2]=c=>t.form.hunting_type_id=c),placeholder:"Select Hunting Type",label:"Hunting Type",rules:[c=>c||"Hunting type is required"],options:t.huntingTypesOptions,searchable:"","required-mark":"","highlight-matched-text":""},null,8,["modelValue","rules","options"]),o(b,{modelValue:t.form.season,"onUpdate:modelValue":a[3]||(a[3]=c=>t.form.season=c),options:t.seasonsOptions,"required-mark":"",label:"Select season",placeholder:"Select season"},null,8,["modelValue","options"])]),a[12]||(a[12]=e("h3",{class:"font-bold text-lg mb-2"},"Charges",-1)),e("div",yt,[o(g,{modelValue:t.form.amount,"onUpdate:modelValue":a[4]||(a[4]=c=>t.form.amount=c),type:"text",placeholder:"Enter Amount",rules:[c=>c&&c.length>0||"Amount is required"],label:"Amount","required-mark":""},null,8,["modelValue","rules"]),o(b,{modelValue:t.form.currency,"onUpdate:modelValue":a[5]||(a[5]=c=>t.form.currency=c),placeholder:"Select Currency",label:"Currency",rules:[c=>c||"Currency is required"],options:t.currencyOptions,searchable:"","highlight-matched-text":"","required-mark":""},null,8,["modelValue","rules","options"]),o(b,{modelValue:t.form.duration,"onUpdate:modelValue":a[6]||(a[6]=c=>t.form.duration=c),type:"text",options:t.durationsOptions,"required-mark":"",placeholder:"Enter Duration eg: 21 days",rules:[c=>c||"Duration is required"],label:"Duration(days)"},null,8,["modelValue","options","rules"])]),a[13]||(a[13]=e("h3",{class:"font-bold text-lg mb-2"},"Companion's and Observer's Charges(Optional)",-1)),e("div",St,[o(g,{modelValue:t.form.companion_amount,"onUpdate:modelValue":a[7]||(a[7]=c=>t.form.companion_amount=c),type:"text",placeholder:"Enter Companion Amount",label:"Companion Cost(Per Person)"},null,8,["modelValue"]),o(g,{modelValue:t.form.observer_amount,"onUpdate:modelValue":a[8]||(a[8]=c=>t.form.observer_amount=c),type:"text",placeholder:"Enter observer Amount",label:"Observer Cost(Per Person)"},null,8,["modelValue"])])]),e("div",Vt,[t.showEditForm?A("",!0):(f(),V(L,{key:0,icon:"save",class:"mr-3 mb-2",loading:t.savingPriceList,disabled:!t.isValidForm,onClick:a[9]||(a[9]=c=>t.validateForm()&&t.submit())},{default:m(()=>a[14]||(a[14]=[_(" Save ")])),_:1},8,["loading","disabled"]))])]),_:1},512)]),_:1},8,["loading"]),o(h,{modelValue:t._shM,"onUpdate:modelValue":a[10]||(a[10]=c=>t._shM=c),"ok-text":"Apply","close-button":"",size:"large","hide-default-actions":!0},{default:m(()=>[o(B)]),_:1},8,["modelValue"])],64)}const kt=q(mt,[["render",Lt]]),Pt={name:"",start_date:null,end_date:null},Bt=K({name:"QuotaPage",components:{ModuleTable:x,PricesListDetails:pt,CreatePricesListForm:kt},setup(){const t=y(null),a=y(null),d=[{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"package_name",sortable:!0},{key:"area",sortable:!0},{key:"hunting_type",sortable:!0},{key:"amount",sortable:!0},{key:"duration",sortable:!0,label:"Duration (Days)"},{key:"status",sortable:!0},{key:"actions",width:80}],{isValid:r,validate:n,resetValidation:s,reset:u}=U(a);return{isValidSForm:r,validateSForm:n,resetValidationSForm:s,resetSForm:u,formRef:t,sformRef:a,columns:d}},data(){const t=[],a=[],d=$({id:null,name:"",scientific_name:""}),r=[];return{items:t,printableDataList:a,item:null,editedItemId:null,editedItem:null,createdItem:{...Pt},toast:E(),sform:d,speciesOptions:[],areasOptions:[],huntingTypeOptions:[],speciesObjects:[],showModal:!1,quotasOptions:r,showPriceList:!0,ShowCreateNewPriceListForm:!1,loading:!1,currentQuota:null,quotaItems:[],excellFile:[],itemsByHuntingType:[],huntingTypeValue:null,areaValue:null,quotaValue:null,poriceListPdf:"",downloadPdf:H}},computed:{...Q(T,["logo"])},mounted(){this.getPriceLists(),this.getAreas(),this.getQuota(),this.getHuntingTypesOptions(),this.loadLogo()},methods:{...p(C,["getPriceList"]),...p(C,["getPriceListByHuntingType"]),...p(C,["getPriceListById"]),...p(F,["getQuotas"]),...p(F,["getAreaList"]),...p(F,["generateQuotaYear"]),...p(T,["getHuntingsTypes"]),...p(T,["loadLogo"]),async toggleShowPriceListMethod(t){console.log("=== Eye button clicked ==="),console.log("Row data received:",t),console.log("Current showPriceList:",this.showPriceList);const a=t==null?void 0:t.id;if(!a){console.error("No price list ID found in row data");return}try{console.log("Fetching price list detail for ID:",a);const d=await this.getPriceListById(a);this.item=d.data.data||d.data,console.log("Fetched price list detail:",this.item),this.showPriceList=!1,console.log("Switched to detail view")}catch(d){console.error("Error fetching price list detail:",d)}},async onDownloadPdf(){var r,n;const t=this.poriceListPdf;console.log("onDownloadPdf clicked, poriceListPdf length:",t?t.length:0);const a=s=>typeof s=="string"&&/^https?:\/\//i.test(s),d=s=>typeof s=="string"&&s.length>200&&/^[A-Za-z0-9+/=\r\n]+$/.test(s);if(!t||!a(t)&&!d(t)){try{(r=this.toast)==null||r.init({message:"PDF not available for this selection",color:"warning"})}catch{console.warn("PDF not available")}return}try{await H(t,`price-list-${Date.now()}.pdf`)}catch(s){try{(n=this.toast)==null||n.init({message:"Failed to download PDF",color:"danger"})}catch{console.error("Failed to download PDF",s)}}},goBack(){this.showPriceList=!this.showPriceList,this.ShowCreateNewPriceListForm=!1,this.getPriceLists()},showCreateNewPriceListFormMethod(){this.ShowCreateNewPriceListForm=!this.ShowCreateNewPriceListForm,this.showPriceList=!1},deleteFromStorage(t){this.speciesObjects.splice(t,1),console.log("Species item deleted:",t)},async addNewSpecies(){},formatDate(t){const a=t.getFullYear(),d=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${d}-${r}`},async getPriceLists(){this.loading=!0;try{const t=s=>s==null?"":typeof s=="object"&&"value"in s?s.value:s,a=t(this.huntingTypeValue)||"",d=t(this.areaValue)||"",r=t(this.quotaValue)||"";console.log("Filter params:",{huntingTypeId:a,areaId:d,quotaId:r}),console.log("huntingTypeValue:",this.huntingTypeValue),console.log("areaValue:",this.areaValue);const n=await this.getPriceList(a,d,r);if(console.log("API response:",n),console.log("Response data structure:",n==null?void 0:n.data),n.status===200){this.loading=!1;const s=n==null?void 0:n.data,u=Array.isArray(s)?s:(s==null?void 0:s.data)??[];console.log("Data array:",u),this.printableDataList=s,this.poriceListPdf=(s==null?void 0:s.pdf)||"",Array.isArray(u)?this.items=u.map(v=>({id:v.id,package_name:v.package_name,area:v.area,hunting_type:v.hunting_type,amount:v.amount,duration:v.duration,status:v.status})):(console.error("Data is not an array:",u),this.items=[]),console.log("Updated items:",this.items)}}catch(t){this.loading=!1,console.error("Error in getPriceLists:",t)}},async getPriceListByHuntingTypes(t){var a;try{const d=await this.getPriceListByHuntingType(t);this.itemsByHuntingType=(a=d==null?void 0:d.data)==null?void 0:a.map(r=>({id:r==null?void 0:r.id,item:r})),console.log(this.itemsByHuntingType)}catch(d){console.log(d)}},async getAreas(){var t;try{const a=await this.getAreaList(),d={value:"",text:"All"};this.areasOptions=(t=a==null?void 0:a.data)==null?void 0:t.map(r=>({value:r.id,text:r.name})),this.areasOptions.unshift(d),this.areaValue=this.areasOptions[0]}catch(a){console.log(a)}},async getQuota(){try{const t=await this.getQuotas(null);if(t.status===200){const a=t.data[0],d=this.generateQuotaYear(a.start_date,a.end_date);this.quotaValue={value:a.id,text:`${d} - ${a.name}`,name:a.name,start_date:a.start_date,end_date:a.end_date},this.currentQuota=a;const r={value:"",text:"All"};this.quotasOptions=t.data.map(n=>{const s=this.generateQuotaYear(n.start_date,n.end_date);return{value:n.id,text:`${s} - ${n.name}`,name:n.name,start_date:n.start_date,end_date:n.end_date}}),this.quotasOptions.unshift(r)}}catch(t){console.log(t)}},async getHuntingTypesOptions(){var a;const t=await this.getHuntingsTypes();if(t.status===200){const d={value:"",text:"All"};this.huntingTypeOptions=(a=t==null?void 0:t.data)==null?void 0:a.map(r=>({value:r.id,text:r.name})),this.huntingTypeOptions.unshift(d),this.huntingTypeValue=this.huntingTypeOptions[0]}}}}),wt={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between"},Mt={class:"flex flex-col md:flex-row gap-2 justify-start"},Ct={class:"grid sm:grid-cols-3 gap-6 mb-6"};function Ft(t,a,d,r,n,s){const u=l("VaButton"),v=l("VaButtonGroup"),b=l("VaDivider"),g=l("VaSelect"),L=l("ModuleTable"),k=l("PricesListDetails"),P=l("CreatePricesListForm"),B=l("VaCard");return f(),V(B,{class:"p-6"},{default:m(()=>[e("div",wt,[e("div",Mt,[t.showPriceList?A("",!0):(f(),V(u,{key:0,class:"px-2 py-2",icon:"arrow_back",size:"small",onClick:t.goBack},{default:m(()=>a[2]||(a[2]=[_(" Go Back ")])),_:1},8,["onClick"]))]),t.ShowCreateNewPriceListForm?A("",!0):(f(),V(v,{key:0},{default:m(()=>[o(u,{class:"px-2 py-2",color:"primary",label:"Add New Quota",icon:"add","border-color":"primary",round:"",preset:"secondary",size:"small",onClick:t.showCreateNewPriceListFormMethod},{default:m(()=>a[3]||(a[3]=[_(" Add a new Price List ")])),_:1},8,["onClick"])]),_:1}))]),o(b),t.ShowCreateNewPriceListForm?A("",!0):(f(),S(O,{key:0},[t.showPriceList?(f(),V(L,{key:0,items:t.items,columns:t.columns,loading:t.loading,onOnView:t.toggleShowPriceListMethod},{"filter-elements-and-download-btn":m(()=>[e("div",Ct,[o(g,{modelValue:t.huntingTypeValue,"onUpdate:modelValue":[a[0]||(a[0]=h=>t.huntingTypeValue=h),t.getPriceLists],options:t.huntingTypeOptions,placeholder:"Filter By Hunting Type"},null,8,["modelValue","options","onUpdate:modelValue"]),o(g,{modelValue:t.areaValue,"onUpdate:modelValue":[a[1]||(a[1]=h=>t.areaValue=h),t.getPriceLists],options:t.areasOptions,placeholder:"Filter By Area"},null,8,["modelValue","options","onUpdate:modelValue"]),o(u,{class:"px-2 py-0",color:"primary",label:"Download",icon:"download",size:"small",onClick:t.onDownloadPdf},{default:m(()=>a[4]||(a[4]=[_(" Download ")])),_:1},8,["onClick"])])]),_:1},8,["items","columns","loading","onOnView"])):(f(),V(k,{key:1,"price-list-item":t.item},null,8,["price-list-item"]))],64)),t.ShowCreateNewPriceListForm?(f(),V(P,{key:1})):A("",!0)]),_:1})}const zt=q(Bt,[["render",Ft]]);export{zt as default};
//# sourceMappingURL=ManagePriceList-BjdRc2MB.js.map
