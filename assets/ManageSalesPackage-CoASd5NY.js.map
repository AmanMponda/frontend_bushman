{"version":3,"file":"ManageSalesPackage-CoASd5NY.js","sources":["../../src/pages/module-settings/components/SalesPackageDetails.vue","../../src/pages/module-settings/components/SalesPackageDetails.vue","../../src/pages/module-settings/ManageSalesPackage.vue","../../src/pages/module-settings/ManageSalesPackage.vue"],"sourcesContent":["<template>\n  <div class=\"species-details\">\n    <h1 class=\"title\">Sales Package Details</h1>\n\n    <div class=\"header\">\n      <h2>Packages Name: {{ item.name || 'N/A' }}</h2>\n      <p class=\"description\"><strong>Description:</strong> {{ item.description || 'No description available' }}</p>\n    </div>\n\n    <div class=\"area-info\">\n      <h3>Area Information</h3>\n      <p><strong>Area Name:</strong> {{ item.area?.name || 'N/A' }}</p>\n      <p><strong>Area Description:</strong> {{ item.area?.description || 'No description available' }}</p>\n      <!-- <p><strong>Address:</strong> {{ item.area?.address || 'N/A' }}</p>\n      <p><strong>Location ID:</strong> {{ item.area?.location || 'N/A' }}</p> -->\n    </div>\n\n    <div class=\"regulatory-package-info\">\n      <h3>Licence Information</h3>\n      <p><strong>Package Name:</strong> {{ item.regulatory_package?.name || 'N/A' }}</p>\n      <p><strong>Duration:</strong> {{ item.regulatory_package?.duration || 'N/A' }} days</p>\n      <p><strong>Created Date:</strong> {{ item.regulatory_package?.created_at || 'N/A' }}</p>\n      <!-- <p><strong>Updated Date:</strong> {{ item.regulatory_package?.updated_date || 'N/A' }}</p>\n      <p><strong>User ID:</strong> {{ item.regulatory_package?.user || 'N/A' }}</p> -->\n    </div>\n\n    <div class=\"va-table-responsive\">\n      <table class=\"va-table va-table--clickable\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Species Name</th>\n            <th>Scientific Name</th>\n            <!-- <th>Description</th> -->\n            <th>Quantity</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"species in item.species\" :key=\"species.id\">\n            <td>{{ species.id || 'N/A' }}</td>\n            <td>{{ species.species?.name || 'N/A' }}</td>\n            <td>{{ species.species?.scientific_name || 'N/A' }}</td>\n            <!-- <td>{{ species.species?.description || 'No description available' }}</td> -->\n            <td>{{ species.quantity !== null ? species.quantity : 'N/A' }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  props: {\n    item: {\n      type: Object,\n      required: true,\n    },\n  },\n}\n</script>\n\n<style scoped>\n.species-details {\n  font-family: 'Arial', sans-serif;\n  /* max-width: 800px; */\n  margin: auto;\n  padding: 20px;\n}\n\n.title {\n  color: #2c3e50;\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.header {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin-bottom: 20px;\n}\n\n.area-info,\n.regulatory-package-info {\n  margin: 20px 0;\n  padding: 10px;\n  /* border: 1px solid #3498db; */\n  border-radius: 5px;\n  background-color: #eaf3f8;\n}\n\nh3 {\n  color: #2980b9;\n}\n\n.description {\n  font-size: 1em;\n  margin: 10px 0;\n  line-height: 1.5;\n  color: #444;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\nth,\ntd {\n  padding: 12px 15px;\n  border: 1px solid #ddd;\n  text-align: left;\n}\n\nth {\n  /* background-color: #3498db; */\n  /* color: white; */\n}\n\ntr:nth-child(even) {\n  /* background-color: #f2f2f2; */\n}\n\ntd {\n  color: #555;\n}\n</style>\n","<template>\n  <div class=\"species-details\">\n    <h1 class=\"title\">Sales Package Details</h1>\n\n    <div class=\"header\">\n      <h2>Packages Name: {{ item.name || 'N/A' }}</h2>\n      <p class=\"description\"><strong>Description:</strong> {{ item.description || 'No description available' }}</p>\n    </div>\n\n    <div class=\"area-info\">\n      <h3>Area Information</h3>\n      <p><strong>Area Name:</strong> {{ item.area?.name || 'N/A' }}</p>\n      <p><strong>Area Description:</strong> {{ item.area?.description || 'No description available' }}</p>\n      <!-- <p><strong>Address:</strong> {{ item.area?.address || 'N/A' }}</p>\n      <p><strong>Location ID:</strong> {{ item.area?.location || 'N/A' }}</p> -->\n    </div>\n\n    <div class=\"regulatory-package-info\">\n      <h3>Licence Information</h3>\n      <p><strong>Package Name:</strong> {{ item.regulatory_package?.name || 'N/A' }}</p>\n      <p><strong>Duration:</strong> {{ item.regulatory_package?.duration || 'N/A' }} days</p>\n      <p><strong>Created Date:</strong> {{ item.regulatory_package?.created_at || 'N/A' }}</p>\n      <!-- <p><strong>Updated Date:</strong> {{ item.regulatory_package?.updated_date || 'N/A' }}</p>\n      <p><strong>User ID:</strong> {{ item.regulatory_package?.user || 'N/A' }}</p> -->\n    </div>\n\n    <div class=\"va-table-responsive\">\n      <table class=\"va-table va-table--clickable\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Species Name</th>\n            <th>Scientific Name</th>\n            <!-- <th>Description</th> -->\n            <th>Quantity</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"species in item.species\" :key=\"species.id\">\n            <td>{{ species.id || 'N/A' }}</td>\n            <td>{{ species.species?.name || 'N/A' }}</td>\n            <td>{{ species.species?.scientific_name || 'N/A' }}</td>\n            <!-- <td>{{ species.species?.description || 'No description available' }}</td> -->\n            <td>{{ species.quantity !== null ? species.quantity : 'N/A' }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  props: {\n    item: {\n      type: Object,\n      required: true,\n    },\n  },\n}\n</script>\n\n<style scoped>\n.species-details {\n  font-family: 'Arial', sans-serif;\n  /* max-width: 800px; */\n  margin: auto;\n  padding: 20px;\n}\n\n.title {\n  color: #2c3e50;\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.header {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin-bottom: 20px;\n}\n\n.area-info,\n.regulatory-package-info {\n  margin: 20px 0;\n  padding: 10px;\n  /* border: 1px solid #3498db; */\n  border-radius: 5px;\n  background-color: #eaf3f8;\n}\n\nh3 {\n  color: #2980b9;\n}\n\n.description {\n  font-size: 1em;\n  margin: 10px 0;\n  line-height: 1.5;\n  color: #444;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\nth,\ntd {\n  padding: 12px 15px;\n  border: 1px solid #ddd;\n  text-align: left;\n}\n\nth {\n  /* background-color: #3498db; */\n  /* color: white; */\n}\n\ntr:nth-child(even) {\n  /* background-color: #f2f2f2; */\n}\n\ntd {\n  color: #555;\n}\n</style>\n","<template>\n  <VaCard>\n    <VaCardContent>\n      <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between\">\n        <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n          <VaButton\n            v-if=\"!showPackageList || showDetailsPage || showEditPackageForm\"\n            class=\"px-2 py-2\"\n            icon=\"arrow_back\"\n            size=\"small\"\n            @click=\"goBack\"\n          >\n            Go Back\n          </VaButton>\n        </div>\n        <VaButtonGroup v-if=\"!showCreateNewPackageForm && !showDetailsPage && !showEditPackageForm\">\n          <VaButton\n            class=\"px-2 py-2\"\n            color=\"primary\"\n            label=\"Add New Quota\"\n            icon=\"add\"\n            :border-color=\"'primary'\"\n            round\n            preset=\"secondary\"\n            size=\"small\"\n            @click=\"showCreateNewPackaeListFormMethod\"\n          >\n            Add a package\n          </VaButton>\n        </VaButtonGroup>\n      </div>\n      <VaDivider />\n\n      <template v-if=\"showDetailsPage\">\n        <SalesPackageDetails :item=\"selectItem\"> </SalesPackageDetails>\n      </template>\n\n      <template v-else-if=\"showCreateNewPackageForm && !showDetailsPage\">\n        <SalesPackageForm> </SalesPackageForm>\n      </template>\n\n      <template v-else-if=\"showEditPackageForm\">\n        <SalesPackageForm :edit-mode=\"true\" :edit-item=\"selectItem\" @saved=\"onEditSaved\"> </SalesPackageForm>\n      </template>\n\n      <template v-else-if=\"showPackageList\">\n        <VaDataTable :items=\"packages\" :columns=\"columns as any\" :loading=\"loading\" hoverable striped>\n          <template #cell(actions)=\"{ rowData }\">\n            <div class=\"flex gap-2\">\n              <VaButton preset=\"plain\" icon=\"visibility\" title=\"View\" @click=\"showDetails(rowData)\" />\n              <VaButton preset=\"plain\" icon=\"edit\" color=\"warning\" title=\"Edit\" @click=\"editPackage(rowData)\" />\n              <VaButton preset=\"plain\" icon=\"delete\" color=\"danger\" title=\"Delete\" @click=\"confirmDelete(rowData)\" />\n            </div>\n          </template>\n        </VaDataTable>\n      </template>\n    </VaCardContent>\n  </VaCard>\n\n  <!-- Delete Confirmation Modal -->\n  <VaModal v-model=\"showDeleteModal\" hide-default-actions>\n    <template #header>\n      <h3 class=\"va-h6\">Confirm Delete</h3>\n    </template>\n    <p>\n      Are you sure you want to delete <strong>{{ itemToDelete?.name }}</strong\n      >?\n    </p>\n    <template #footer>\n      <div class=\"flex gap-2 justify-end\">\n        <VaButton preset=\"secondary\" @click=\"showDeleteModal = false\">Cancel</VaButton>\n        <VaButton color=\"danger\" :loading=\"deleting\" @click=\"deletePackage\">Delete</VaButton>\n      </div>\n    </template>\n  </VaModal>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, ref } from 'vue'\nimport handleErrors from '../../utils/errorHandler'\nimport { validators } from '../../services/utils'\nimport { useForm, useToast } from 'vuestic-ui'\nimport { mapActions, mapState } from 'pinia'\nimport { useQuotaStore } from '../../stores/quota-store'\nimport { useSettingsStore } from '../../stores/settings-store'\nimport { usePriceListStore } from '../../stores/price-list-store'\nimport { useRegulatoryPackageStore } from '../../stores/regulatrory-store'\nimport SalesPackageDetails from './components/SalesPackageDetails.vue'\nimport SalesPackageForm from './components/SalesPackageForm.vue'\n\nexport default defineComponent({\n  components: {\n    SalesPackageDetails,\n    SalesPackageForm,\n  },\n  setup() {\n    const formRef = ref()\n    // const contactFormRef = ref()\n    // const showAddSalesInquiriesForm = ref(false)\n    // const btnIcon = ref('add')\n\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(formRef)\n\n    const { init } = useToast()\n    const showEditForm = ref(false)\n\n    const form = reactive({\n      //   id: null as any,\n      //   hunting_type_id: null as any,\n      package_name: '',\n      description: '',\n      //   sales_quota_id: null as any,\n      //   amount: 0,\n      // samount: 0,\n      //   currency: null as any,\n      //   duration: 0,\n      //   start_date: null as any,\n      //   end_date: null as any,\n      species: null as any,\n      quantity: 1,\n      area: null as any,\n      licence: null as any,\n      //   companion_days: 0,\n      //   companion_amount: 0,\n      //   observer_days: 0,\n      //   observer_amount: 0,\n    })\n\n    const contactForm = reactive({\n      id: null as any,\n      client_id: null as any,\n      contact: '',\n      contact_type: null as any,\n      contactable: false,\n    })\n\n    const countries = ref([]) as any\n    const nationality = ref([]) as any\n    const categoryOptions = ref([]) as any\n    const contactsTypes = ref([]) as any\n    const clients = ref([]) as any\n    const step = ref(0) as any\n\n    return {\n      formRef,\n      form,\n      contactForm,\n      showEditForm,\n      countries,\n      nationality,\n      categoryOptions,\n      contactsTypes,\n      clients,\n      step,\n      // steps,\n      init,\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      resetForm,\n\n      validators,\n      // getCountries,\n      // // deleteSalesInquireItem,\n      // getCategories,\n      // getNationalities,\n      // getContactTypes,\n      // contactFieldType,\n      // togel,\n      // toggle,\n    }\n  },\n  data() {\n    const columns = [\n      { key: 'id', sortable: true, sortingOptions: ['desc', 'asc'] },\n      { key: 'name', sortable: true },\n      { key: 'area_name', label: 'Area', sortable: true },\n      { key: 'regulatory_package_name', label: 'Licence', sortable: true },\n      { key: 'actions', sortable: true },\n    ]\n\n    return {\n      // modules: [ClientSideRowModelModule],\n      defaultColDef: {\n        editable: true,\n      },\n      columnDefs: [{ field: 'name' }, { field: 'quantity' }],\n      preferred_species: [] as any,\n      speciesOptions: [] as any,\n      speciesObjects: [] as any,\n      areasOptions: [] as any,\n      huntingTypesOptions: [] as any,\n      salesQuotasOptions: [] as any,\n      speciesItemOptions: [] as any,\n      currencyOptions: [] as any,\n      showPackageList: true,\n      showCreateNewPackageForm: false,\n      showEditPackageForm: false,\n      packages: [] as any,\n      columns,\n      loading: false,\n      saving: false,\n      regulatoryPackagesOptions: [] as any,\n      loadingLicenceOptions: false,\n      loadingSpeciesOptions: false,\n      isChanged: false,\n      originalQuantities: reactive({} as any), // to keep track of original quantities\n      quntityChangedsaved: false,\n      showDetailsPage: false,\n      selectItem: null as any,\n      showDeleteModal: false,\n      itemToDelete: null as any,\n      deleting: false,\n    }\n  },\n  computed: {\n    ...mapState(useSettingsStore, ['licenceAreaSpecies', 'laodinglicenceAreaSpecies']),\n    itemChanged(): any {\n      return (id: any) => {\n        const originalValue = this.originalQuantities[id]\n        const currentValue = this.licenceAreaSpecies.find((item: any) => item.id === id).quantity\n        console.log('Original value:', originalValue, 'Current value:', currentValue)\n        return (originalValue && originalValue !== currentValue) || this.isChanged\n      }\n    },\n  },\n\n  mounted() {\n    // this.getAllSpeciesPerQuotaPerArea()\n    // this.getAreas()\n    // this.getHuntingTypes()\n    // this.getQuotaList()\n    // this.getCurrencyList()\n    this.loading = true\n    this.getSpeciesItems()\n    this.getSalesPackages()\n    this.getLicencePackages()\n    this.getAreas()\n  },\n\n  methods: {\n    ...mapActions(useQuotaStore, ['getSpeciesList']),\n    ...mapActions(useQuotaStore, ['getAllSpeciesPerQuotaPerArea']),\n    ...mapActions(useQuotaStore, ['getAreaList']),\n    ...mapActions(useSettingsStore, ['getHuntingsTypes']),\n    ...mapActions(useSettingsStore, ['getCurrencies']),\n    ...mapActions(useQuotaStore, ['getQuotas']),\n    ...mapActions(usePriceListStore, [\n      'createPriceList',\n      'createSalesPackage',\n      'getSalesPackageList',\n      'updateSalesPackage',\n      'deleteSalesPackage',\n    ]),\n    ...mapActions(useRegulatoryPackageStore, ['getRegulatoryPackages']),\n    ...mapActions(useSettingsStore, ['getHuntingLicenseAreaSpecies']),\n\n    // addNewSpeciesItemToStorage() {},\n    // CreateSalesInquiry\n\n    // ...mapActions(useSalesInquiriesStore, ['createSalesInquiry']),\n\n    showCreateNewPackaeListFormMethod() {\n      this.showCreateNewPackageForm = true\n      this.showPackageList = false\n    },\n\n    goBack() {\n      this.showCreateNewPackageForm = false\n      this.showPackageList = true\n      this.showDetailsPage = false\n      this.showEditPackageForm = false\n      this.getSalesPackages()\n    },\n\n    editPackage(rowData: any) {\n      this.selectItem = rowData.selfItem\n      this.showEditPackageForm = true\n      this.showPackageList = false\n    },\n\n    onEditSaved() {\n      this.showEditPackageForm = false\n      this.showPackageList = true\n      this.getSalesPackages()\n    },\n\n    confirmDelete(rowData: any) {\n      this.itemToDelete = rowData\n      this.showDeleteModal = true\n    },\n\n    async deletePackage() {\n      if (!this.itemToDelete) return\n\n      this.deleting = true\n      try {\n        const response = await this.deleteSalesPackage(this.itemToDelete.id, true)\n        if (response.status === 200 || response.status === 204) {\n          this.init({\n            message: 'Package deleted successfully.',\n            color: 'success',\n          })\n          this.showDeleteModal = false\n          this.itemToDelete = null\n          this.getSalesPackages()\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error.response)\n        this.init({\n          message: errors.join(', ') || 'Failed to delete package.',\n          color: 'danger',\n        })\n      } finally {\n        this.deleting = false\n      }\n    },\n\n    async submit() {\n      this.saving = true\n\n      // Filter out species with quantity 0 or less\n      const speciesWithQuantity = this.licenceAreaSpecies.filter((species: any) => species.quantity > 0)\n\n      if (speciesWithQuantity.length === 0) {\n        this.init({\n          message: 'Please add at least one species with quantity greater than 0.',\n          color: 'warning',\n        })\n        this.saving = false\n        return\n      }\n\n      const requestdata = {\n        name: this.form.package_name,\n        description: this.form.description,\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n        speciesObjectList: speciesWithQuantity,\n      }\n\n      try {\n        const response = await this.createSalesPackage(requestdata)\n        if (response.status === 201) {\n          this.saving = false\n          console.log(response)\n          this.init({ message: response.data.message, color: 'success' })\n\n          // this.resetForm()\n          // this.resetValidationForm()\n          this.licenceAreaSpecies = []\n        }\n      } catch (error: any) {\n        this.saving = false\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: '\\n' + errors.map((error, index) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      }\n    },\n\n    async getSpeciesItems() {\n      this.loadingSpeciesOptions = true\n      try {\n        const response = await this.getSpeciesList()\n\n        // Add the species items from the response\n        if (response.status === 200) {\n          this.loadingSpeciesOptions = false\n          this.speciesItemOptions = response.data.map((item: { id: any; name: any }) => {\n            return {\n              value: item.id,\n              text: item.name,\n            }\n          })\n        }\n\n        // Combine default option with species items\n        // this.speciesOptions = this.speciesOptions.concat(speciesItems)\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    showDetails(data: any) {\n      console.log('Show details for:', data)\n      this.showDetailsPage = true\n      this.selectItem = data.selfItem || data\n      // this.showEditForm = true\n    },\n\n    async getSalesPackages() {\n      this.loading = true\n      try {\n        const response = await this.getSalesPackageList()\n        if (response.status === 200) {\n          this.packages = response.data.map((item: any) => {\n            return {\n              id: item.id,\n              name: item.name,\n              area_name: item?.area?.name ?? 'N/A',\n              regulatory_package_name: item?.regulatory_package?.name ?? 'N/A',\n              selfItem: item,\n            }\n          })\n          this.loading = false\n        }\n      } catch (error) {\n        this.loading = false\n      }\n    },\n\n    async getLicencePackages() {\n      this.loadingLicenceOptions = true\n      try {\n        const response = await this.getRegulatoryPackages()\n        if (response.status === 200) {\n          this.loadingLicenceOptions = false\n          const data = response.data\n          this.regulatoryPackagesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name,\n          }))\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getAreas() {\n      try {\n        const response = await this.getAreaList()\n        this.areasOptions = response.data.map((item: { id: any; name: any }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getLicenceAreaSpeciesList() {\n      const payload = {\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n      }\n\n      try {\n        const response = await this.getHuntingLicenseAreaSpecies(payload)\n        if (response.status === 200) {\n          const data = response.data\n          this.speciesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name,\n          }))\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: '\\n' + errors.map((error, index) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      }\n    },\n\n    onChange(id: any, newValue: any) {\n      console.log('Quantity changed:', id, newValue)\n      // this.isChanged = true\n\n      // Set the original value if it hasn't been set yet\n      if (!(id in this.originalQuantities)) {\n        const item = this.licenceAreaSpecies.find((item: any) => item.id === id)\n        this.originalQuantities[id] = item.quantity // Direct assignment\n      }\n\n      const updatedItem = this.licenceAreaSpecies.find((item: any) => item.id === id)\n      if (updatedItem) {\n        updatedItem.quantity = newValue // Update the quantity with newValue\n        // then update  list\n        this.licenceAreaSpecies = [...this.licenceAreaSpecies]\n      }\n      this.init({\n        message: `Quantity for ${updatedItem.name} has been updated to ${newValue} quantity(s).`,\n        color: 'success',\n        position: 'bottom-right',\n      })\n\n      console.log('updated item list:', this.licenceAreaSpecies)\n    },\n\n    addNewSpeciesItemToStorage() {\n      // Check if all required fields in this.sform are not null\n      if (!this.form.species || !this.form.quantity) {\n        this.init({\n          message: 'Please fill all required fields.',\n          color: 'warning',\n        })\n        return // Exit the method if any field is null\n      }\n\n      // Ensure quantity is a positive number\n      if (Number(this.form.quantity) <= 0) {\n        // Uncomment the toast message if needed\n        // this.toast.init({\n        //   message: 'Quantity must be greater than zero.',\n        //   color: 'warning',\n        // });\n\n        this.init({\n          message: 'Quantity must be greater than zero.',\n          color: 'warning',\n        })\n\n        return\n      }\n\n      // Check if the species item already exists\n      const exists = this.speciesObjects.some(\n        (species: { species_id: any }) => species.species_id === this.form.species.value,\n      )\n\n      if (!exists) {\n        this.speciesObjects.push({\n          id: this.form.species.value,\n          name: this.form.species.text,\n          // amount: this.form.samount,\n          quantity: this.form.quantity,\n        })\n        // console.log('New species item added:', this.speciesObjects)\n      } else {\n        console.log('Species item already exists:', this.form.species.value)\n      }\n\n      // this.resetSForm()\n    },\n\n    deleteFromStorage(index: number) {\n      this.speciesObjects.splice(index, 1)\n      console.log('Species item deleted:', index)\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import '@vuestic/ag-grid-theme';\n</style>\n","<template>\n  <VaCard>\n    <VaCardContent>\n      <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between\">\n        <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n          <VaButton\n            v-if=\"!showPackageList || showDetailsPage || showEditPackageForm\"\n            class=\"px-2 py-2\"\n            icon=\"arrow_back\"\n            size=\"small\"\n            @click=\"goBack\"\n          >\n            Go Back\n          </VaButton>\n        </div>\n        <VaButtonGroup v-if=\"!showCreateNewPackageForm && !showDetailsPage && !showEditPackageForm\">\n          <VaButton\n            class=\"px-2 py-2\"\n            color=\"primary\"\n            label=\"Add New Quota\"\n            icon=\"add\"\n            :border-color=\"'primary'\"\n            round\n            preset=\"secondary\"\n            size=\"small\"\n            @click=\"showCreateNewPackaeListFormMethod\"\n          >\n            Add a package\n          </VaButton>\n        </VaButtonGroup>\n      </div>\n      <VaDivider />\n\n      <template v-if=\"showDetailsPage\">\n        <SalesPackageDetails :item=\"selectItem\"> </SalesPackageDetails>\n      </template>\n\n      <template v-else-if=\"showCreateNewPackageForm && !showDetailsPage\">\n        <SalesPackageForm> </SalesPackageForm>\n      </template>\n\n      <template v-else-if=\"showEditPackageForm\">\n        <SalesPackageForm :edit-mode=\"true\" :edit-item=\"selectItem\" @saved=\"onEditSaved\"> </SalesPackageForm>\n      </template>\n\n      <template v-else-if=\"showPackageList\">\n        <VaDataTable :items=\"packages\" :columns=\"columns as any\" :loading=\"loading\" hoverable striped>\n          <template #cell(actions)=\"{ rowData }\">\n            <div class=\"flex gap-2\">\n              <VaButton preset=\"plain\" icon=\"visibility\" title=\"View\" @click=\"showDetails(rowData)\" />\n              <VaButton preset=\"plain\" icon=\"edit\" color=\"warning\" title=\"Edit\" @click=\"editPackage(rowData)\" />\n              <VaButton preset=\"plain\" icon=\"delete\" color=\"danger\" title=\"Delete\" @click=\"confirmDelete(rowData)\" />\n            </div>\n          </template>\n        </VaDataTable>\n      </template>\n    </VaCardContent>\n  </VaCard>\n\n  <!-- Delete Confirmation Modal -->\n  <VaModal v-model=\"showDeleteModal\" hide-default-actions>\n    <template #header>\n      <h3 class=\"va-h6\">Confirm Delete</h3>\n    </template>\n    <p>\n      Are you sure you want to delete <strong>{{ itemToDelete?.name }}</strong\n      >?\n    </p>\n    <template #footer>\n      <div class=\"flex gap-2 justify-end\">\n        <VaButton preset=\"secondary\" @click=\"showDeleteModal = false\">Cancel</VaButton>\n        <VaButton color=\"danger\" :loading=\"deleting\" @click=\"deletePackage\">Delete</VaButton>\n      </div>\n    </template>\n  </VaModal>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, ref } from 'vue'\nimport handleErrors from '../../utils/errorHandler'\nimport { validators } from '../../services/utils'\nimport { useForm, useToast } from 'vuestic-ui'\nimport { mapActions, mapState } from 'pinia'\nimport { useQuotaStore } from '../../stores/quota-store'\nimport { useSettingsStore } from '../../stores/settings-store'\nimport { usePriceListStore } from '../../stores/price-list-store'\nimport { useRegulatoryPackageStore } from '../../stores/regulatrory-store'\nimport SalesPackageDetails from './components/SalesPackageDetails.vue'\nimport SalesPackageForm from './components/SalesPackageForm.vue'\n\nexport default defineComponent({\n  components: {\n    SalesPackageDetails,\n    SalesPackageForm,\n  },\n  setup() {\n    const formRef = ref()\n    // const contactFormRef = ref()\n    // const showAddSalesInquiriesForm = ref(false)\n    // const btnIcon = ref('add')\n\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(formRef)\n\n    const { init } = useToast()\n    const showEditForm = ref(false)\n\n    const form = reactive({\n      //   id: null as any,\n      //   hunting_type_id: null as any,\n      package_name: '',\n      description: '',\n      //   sales_quota_id: null as any,\n      //   amount: 0,\n      // samount: 0,\n      //   currency: null as any,\n      //   duration: 0,\n      //   start_date: null as any,\n      //   end_date: null as any,\n      species: null as any,\n      quantity: 1,\n      area: null as any,\n      licence: null as any,\n      //   companion_days: 0,\n      //   companion_amount: 0,\n      //   observer_days: 0,\n      //   observer_amount: 0,\n    })\n\n    const contactForm = reactive({\n      id: null as any,\n      client_id: null as any,\n      contact: '',\n      contact_type: null as any,\n      contactable: false,\n    })\n\n    const countries = ref([]) as any\n    const nationality = ref([]) as any\n    const categoryOptions = ref([]) as any\n    const contactsTypes = ref([]) as any\n    const clients = ref([]) as any\n    const step = ref(0) as any\n\n    return {\n      formRef,\n      form,\n      contactForm,\n      showEditForm,\n      countries,\n      nationality,\n      categoryOptions,\n      contactsTypes,\n      clients,\n      step,\n      // steps,\n      init,\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      resetForm,\n\n      validators,\n      // getCountries,\n      // // deleteSalesInquireItem,\n      // getCategories,\n      // getNationalities,\n      // getContactTypes,\n      // contactFieldType,\n      // togel,\n      // toggle,\n    }\n  },\n  data() {\n    const columns = [\n      { key: 'id', sortable: true, sortingOptions: ['desc', 'asc'] },\n      { key: 'name', sortable: true },\n      { key: 'area_name', label: 'Area', sortable: true },\n      { key: 'regulatory_package_name', label: 'Licence', sortable: true },\n      { key: 'actions', sortable: true },\n    ]\n\n    return {\n      // modules: [ClientSideRowModelModule],\n      defaultColDef: {\n        editable: true,\n      },\n      columnDefs: [{ field: 'name' }, { field: 'quantity' }],\n      preferred_species: [] as any,\n      speciesOptions: [] as any,\n      speciesObjects: [] as any,\n      areasOptions: [] as any,\n      huntingTypesOptions: [] as any,\n      salesQuotasOptions: [] as any,\n      speciesItemOptions: [] as any,\n      currencyOptions: [] as any,\n      showPackageList: true,\n      showCreateNewPackageForm: false,\n      showEditPackageForm: false,\n      packages: [] as any,\n      columns,\n      loading: false,\n      saving: false,\n      regulatoryPackagesOptions: [] as any,\n      loadingLicenceOptions: false,\n      loadingSpeciesOptions: false,\n      isChanged: false,\n      originalQuantities: reactive({} as any), // to keep track of original quantities\n      quntityChangedsaved: false,\n      showDetailsPage: false,\n      selectItem: null as any,\n      showDeleteModal: false,\n      itemToDelete: null as any,\n      deleting: false,\n    }\n  },\n  computed: {\n    ...mapState(useSettingsStore, ['licenceAreaSpecies', 'laodinglicenceAreaSpecies']),\n    itemChanged(): any {\n      return (id: any) => {\n        const originalValue = this.originalQuantities[id]\n        const currentValue = this.licenceAreaSpecies.find((item: any) => item.id === id).quantity\n        console.log('Original value:', originalValue, 'Current value:', currentValue)\n        return (originalValue && originalValue !== currentValue) || this.isChanged\n      }\n    },\n  },\n\n  mounted() {\n    // this.getAllSpeciesPerQuotaPerArea()\n    // this.getAreas()\n    // this.getHuntingTypes()\n    // this.getQuotaList()\n    // this.getCurrencyList()\n    this.loading = true\n    this.getSpeciesItems()\n    this.getSalesPackages()\n    this.getLicencePackages()\n    this.getAreas()\n  },\n\n  methods: {\n    ...mapActions(useQuotaStore, ['getSpeciesList']),\n    ...mapActions(useQuotaStore, ['getAllSpeciesPerQuotaPerArea']),\n    ...mapActions(useQuotaStore, ['getAreaList']),\n    ...mapActions(useSettingsStore, ['getHuntingsTypes']),\n    ...mapActions(useSettingsStore, ['getCurrencies']),\n    ...mapActions(useQuotaStore, ['getQuotas']),\n    ...mapActions(usePriceListStore, [\n      'createPriceList',\n      'createSalesPackage',\n      'getSalesPackageList',\n      'updateSalesPackage',\n      'deleteSalesPackage',\n    ]),\n    ...mapActions(useRegulatoryPackageStore, ['getRegulatoryPackages']),\n    ...mapActions(useSettingsStore, ['getHuntingLicenseAreaSpecies']),\n\n    // addNewSpeciesItemToStorage() {},\n    // CreateSalesInquiry\n\n    // ...mapActions(useSalesInquiriesStore, ['createSalesInquiry']),\n\n    showCreateNewPackaeListFormMethod() {\n      this.showCreateNewPackageForm = true\n      this.showPackageList = false\n    },\n\n    goBack() {\n      this.showCreateNewPackageForm = false\n      this.showPackageList = true\n      this.showDetailsPage = false\n      this.showEditPackageForm = false\n      this.getSalesPackages()\n    },\n\n    editPackage(rowData: any) {\n      this.selectItem = rowData.selfItem\n      this.showEditPackageForm = true\n      this.showPackageList = false\n    },\n\n    onEditSaved() {\n      this.showEditPackageForm = false\n      this.showPackageList = true\n      this.getSalesPackages()\n    },\n\n    confirmDelete(rowData: any) {\n      this.itemToDelete = rowData\n      this.showDeleteModal = true\n    },\n\n    async deletePackage() {\n      if (!this.itemToDelete) return\n\n      this.deleting = true\n      try {\n        const response = await this.deleteSalesPackage(this.itemToDelete.id, true)\n        if (response.status === 200 || response.status === 204) {\n          this.init({\n            message: 'Package deleted successfully.',\n            color: 'success',\n          })\n          this.showDeleteModal = false\n          this.itemToDelete = null\n          this.getSalesPackages()\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error.response)\n        this.init({\n          message: errors.join(', ') || 'Failed to delete package.',\n          color: 'danger',\n        })\n      } finally {\n        this.deleting = false\n      }\n    },\n\n    async submit() {\n      this.saving = true\n\n      // Filter out species with quantity 0 or less\n      const speciesWithQuantity = this.licenceAreaSpecies.filter((species: any) => species.quantity > 0)\n\n      if (speciesWithQuantity.length === 0) {\n        this.init({\n          message: 'Please add at least one species with quantity greater than 0.',\n          color: 'warning',\n        })\n        this.saving = false\n        return\n      }\n\n      const requestdata = {\n        name: this.form.package_name,\n        description: this.form.description,\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n        speciesObjectList: speciesWithQuantity,\n      }\n\n      try {\n        const response = await this.createSalesPackage(requestdata)\n        if (response.status === 201) {\n          this.saving = false\n          console.log(response)\n          this.init({ message: response.data.message, color: 'success' })\n\n          // this.resetForm()\n          // this.resetValidationForm()\n          this.licenceAreaSpecies = []\n        }\n      } catch (error: any) {\n        this.saving = false\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: '\\n' + errors.map((error, index) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      }\n    },\n\n    async getSpeciesItems() {\n      this.loadingSpeciesOptions = true\n      try {\n        const response = await this.getSpeciesList()\n\n        // Add the species items from the response\n        if (response.status === 200) {\n          this.loadingSpeciesOptions = false\n          this.speciesItemOptions = response.data.map((item: { id: any; name: any }) => {\n            return {\n              value: item.id,\n              text: item.name,\n            }\n          })\n        }\n\n        // Combine default option with species items\n        // this.speciesOptions = this.speciesOptions.concat(speciesItems)\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    showDetails(data: any) {\n      console.log('Show details for:', data)\n      this.showDetailsPage = true\n      this.selectItem = data.selfItem || data\n      // this.showEditForm = true\n    },\n\n    async getSalesPackages() {\n      this.loading = true\n      try {\n        const response = await this.getSalesPackageList()\n        if (response.status === 200) {\n          this.packages = response.data.map((item: any) => {\n            return {\n              id: item.id,\n              name: item.name,\n              area_name: item?.area?.name ?? 'N/A',\n              regulatory_package_name: item?.regulatory_package?.name ?? 'N/A',\n              selfItem: item,\n            }\n          })\n          this.loading = false\n        }\n      } catch (error) {\n        this.loading = false\n      }\n    },\n\n    async getLicencePackages() {\n      this.loadingLicenceOptions = true\n      try {\n        const response = await this.getRegulatoryPackages()\n        if (response.status === 200) {\n          this.loadingLicenceOptions = false\n          const data = response.data\n          this.regulatoryPackagesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name,\n          }))\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getAreas() {\n      try {\n        const response = await this.getAreaList()\n        this.areasOptions = response.data.map((item: { id: any; name: any }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getLicenceAreaSpeciesList() {\n      const payload = {\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n      }\n\n      try {\n        const response = await this.getHuntingLicenseAreaSpecies(payload)\n        if (response.status === 200) {\n          const data = response.data\n          this.speciesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name,\n          }))\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: '\\n' + errors.map((error, index) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      }\n    },\n\n    onChange(id: any, newValue: any) {\n      console.log('Quantity changed:', id, newValue)\n      // this.isChanged = true\n\n      // Set the original value if it hasn't been set yet\n      if (!(id in this.originalQuantities)) {\n        const item = this.licenceAreaSpecies.find((item: any) => item.id === id)\n        this.originalQuantities[id] = item.quantity // Direct assignment\n      }\n\n      const updatedItem = this.licenceAreaSpecies.find((item: any) => item.id === id)\n      if (updatedItem) {\n        updatedItem.quantity = newValue // Update the quantity with newValue\n        // then update  list\n        this.licenceAreaSpecies = [...this.licenceAreaSpecies]\n      }\n      this.init({\n        message: `Quantity for ${updatedItem.name} has been updated to ${newValue} quantity(s).`,\n        color: 'success',\n        position: 'bottom-right',\n      })\n\n      console.log('updated item list:', this.licenceAreaSpecies)\n    },\n\n    addNewSpeciesItemToStorage() {\n      // Check if all required fields in this.sform are not null\n      if (!this.form.species || !this.form.quantity) {\n        this.init({\n          message: 'Please fill all required fields.',\n          color: 'warning',\n        })\n        return // Exit the method if any field is null\n      }\n\n      // Ensure quantity is a positive number\n      if (Number(this.form.quantity) <= 0) {\n        // Uncomment the toast message if needed\n        // this.toast.init({\n        //   message: 'Quantity must be greater than zero.',\n        //   color: 'warning',\n        // });\n\n        this.init({\n          message: 'Quantity must be greater than zero.',\n          color: 'warning',\n        })\n\n        return\n      }\n\n      // Check if the species item already exists\n      const exists = this.speciesObjects.some(\n        (species: { species_id: any }) => species.species_id === this.form.species.value,\n      )\n\n      if (!exists) {\n        this.speciesObjects.push({\n          id: this.form.species.value,\n          name: this.form.species.text,\n          // amount: this.form.samount,\n          quantity: this.form.quantity,\n        })\n        // console.log('New species item added:', this.speciesObjects)\n      } else {\n        console.log('Species item already exists:', this.form.species.value)\n      }\n\n      // this.resetSForm()\n    },\n\n    deleteFromStorage(index: number) {\n      this.speciesObjects.splice(index, 1)\n      console.log('Species item deleted:', index)\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import '@vuestic/ag-grid-theme';\n</style>\n"],"names":["_sfc_main$1","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_cache","_createElementVNode","_toDisplayString","$props","_createTextVNode","_a","_b","_c","_d","_e","_Fragment","_renderList","species","_sfc_main","defineComponent","SalesPackageDetails","SalesPackageForm","formRef","ref","isValidForm","validateForm","resetValidationForm","resetForm","useForm","init","useToast","showEditForm","form","reactive","contactForm","countries","nationality","categoryOptions","contactsTypes","clients","step","validators","mapState","useSettingsStore","id","originalValue","currentValue","item","mapActions","useQuotaStore","usePriceListStore","useRegulatoryPackageStore","rowData","response","error","errors","handleErrors","speciesWithQuantity","requestdata","index","data","payload","newValue","updatedItem","_createVNode","_component_VaCard","_component_VaCardContent","_ctx","_createBlock","_component_VaButton","_withCtx","_createCommentVNode","_component_VaButtonGroup","_component_VaDivider","_component_SalesPackageDetails","_component_SalesPackageForm","_component_VaDataTable","$event","_component_VaModal"],"mappings":"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"}