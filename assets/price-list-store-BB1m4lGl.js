import{j as d,k as c}from"./index-ChBN8f7M.js";const m=d("price-list",{state:()=>({itemsByHuntingType:[],priceList:[],salesPackages:[],packageOptions:[],latestPackage:null,showModal:!1,loadingpackages:!1}),actions:{async getPriceList(s="",e="",t="",n="",i=""){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/",a={};s!==""&&s!==null&&s!==void 0&&(a.hunting_type_id=s),e!==""&&e!==null&&e!==void 0&&(a.area_id=e),t!==""&&t!==null&&t!==void 0&&(a.season_id=t),n!==""&&n!==null&&n!==void 0&&(a.min_amount=n),i!==""&&i!==null&&i!==void 0&&(a.max_amount=i),console.log("API URL:",r,"params:",a);const o={method:"get",maxBodyLength:1/0,url:r,params:a,headers:{"Content-Type":"application/json"}},l=await c.request(o);console.log("API response data:",l.data);const u=l.data,g=Array.isArray(u)?u:(u==null?void 0:u.data)??[];return Array.isArray(g)&&g.length>0?this.priceList=g:this.priceList=[],l},async getPriceListByHuntingType(s="",e="",t=""){const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/",i={};s!==""&&s!==null&&s!==void 0&&(i.hunting_type_id=s),e!==""&&e!==null&&e!==void 0&&(i.area_id=e),t!==""&&t!==null&&t!==void 0&&(i.season_id=t);const r={method:"get",maxBodyLength:1/0,url:n,params:i,headers:{"Content-Type":"application/json"}},a=await c.request(r),o=a.data,l=Array.isArray(o)?o:(o==null?void 0:o.data)??[];return this.itemsByHuntingType=l,a},async getPriceListById(s){const e=`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/${s}/`;console.log("Fetching price list detail, URL:",e);const t={method:"get",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"}},n=await c.request(t);return console.log("Price list detail response:",n.data),n},async updatePriceList(s,e){const t={start_date:e.start_date||e.start_at||null,end_date:e.end_date||e.end_at||null,is_active:e.is_active===!0||e.is_active===1,area_id:e.area_id||e.area||null,user_id:e.user_id||null,amount:e.amount,currency:e.currency,hunting_type_id:e.huntingTypeId||e.hunting_type_id,duration:e.duration,companion_amount:e.companionAmount??e.companion_amount??null,companion_days:e.companionDays??e.companion_days??null,observer_amount:e.observerAmount??e.observer_amount??null,observer_days:e.observerDays??e.observer_days??null,description:e.description,sales_quota_id:e.salesQuotaId,season_id:e.season_id||null,species_object_list:e.speciesObjectList};try{e.sales_package_ids&&Array.isArray(e.sales_package_ids)&&(t.price_type_packages=e.sales_package_ids.map(a=>({sales_package_id:a})))}catch{}e.upgrade_fees&&e.upgrade_fees.length>0&&(t.upgrade_fees=e.upgrade_fees),console.log("=== STORE UPDATE PRICE LIST ==="),console.log("Price List ID:",s),console.log("Final Request Body:",JSON.stringify(t,null,2)),console.log("Observer Amount in Body:",t.observer_amount),console.log("Observer Days in Body:",t.observer_days),console.log("Companion Amount in Body:",t.companion_amount),console.log("Companion Days in Body:",t.companion_days),console.log("===============================");const n=JSON.stringify(t),i={method:"put",maxBodyLength:1/0,url:`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/${s}/`,headers:{"Content-Type":"application/json"},data:n};return await c.request(i)},async deletePriceList(s,e=!1){const n={method:"delete",maxBodyLength:1/0,url:`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/${s}/${e?"?force=true":""}`,headers:{"Content-Type":"application/json"}};return await c.request(n)},async getSalesPackageList(s=!1){this.loadingpackages=!0;const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"}},t=await c.request(e);return t.status===200&&(this.loadingpackages=!1,s?(this.latestPackage={value:t.data[0].id,text:t.data[0].name},this.packageOptions=t.data.map(n=>({value:n.id,text:n.name}))):this.salesPackages=t.data.map(n=>{var i,r;return{id:n.id,name:n.name,area_name:((i=n==null?void 0:n.area)==null?void 0:i.name)??"N/A",regulatory_package_name:((r=n==null?void 0:n.regulatory_package)==null?void 0:r.name)??"N/A",selfItem:n}})),t},async createSalesPackage(s){const e=JSON.stringify({name:s.name,area_id:s.areaId,regulatory_package_id:s.licenceId,description:s.description,species_object_list:s.speciesObjectList}),t={method:"post",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"},data:e},n=await c.request(t);return n.status===201&&(this.showModal=!1,this.getSalesPackageList()),n},async updateSalesPackage(s,e){const t=JSON.stringify({name:e.name,area_id:e.areaId,regulatory_package_id:e.licenceId,description:e.description,species_object_list:e.speciesObjectList}),n={method:"put",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/"+s+"/",headers:{"Content-Type":"application/json"},data:t},i=await c.request(n);return i.status===200&&this.getSalesPackageList(),i},async deleteSalesPackage(s,e=!1){const n={method:"delete",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/"+s+"/"+(e?"?force=true":""),headers:{"Content-Type":"application/json"}},i=await c.request(n);return(i.status===200||i.status===204)&&this.getSalesPackageList(),i},async createPriceList(s){const e={start_date:s.start_date||s.start_at||null,end_date:s.end_date||s.end_at||null,is_active:s.is_active===!0||s.is_active===1,area_id:s.area_id||s.area||null,user_id:s.user_id||null,amount:s.amount,currency:s.currency,hunting_type_id:s.huntingTypeId||s.hunting_type_id,duration:s.duration,companion_amount:s.companionAmount??s.companion_amount??null,companion_days:s.companionDays??s.companion_days??null,observer_amount:s.observerAmount??s.observer_amount??null,observer_days:s.observerDays??s.observer_days??null,description:s.description,sales_quota_id:s.salesQuotaId,season_id:s.season_id||null,species_object_list:s.speciesObjectList};try{s.sales_package_ids&&Array.isArray(s.sales_package_ids)&&(e.price_type_packages=s.sales_package_ids.map(r=>({sales_package_id:r})))}catch{}try{console.debug("createPriceList requestBody:",JSON.parse(JSON.stringify(e)))}catch{}s.upgrade_fees&&s.upgrade_fees.length>0&&(e.upgrade_fees=s.upgrade_fees);const t=JSON.stringify(e),n={method:"post",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/create-price-list/",headers:{"Content-Type":"application/json"},data:t};return await c.request(n)},async getCompletePriceListPdf(s="",e="",t="",n="",i=""){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/",a={};s!==""&&s!==null&&s!==void 0&&(a.hunting_type_id=s),e!==""&&e!==null&&e!==void 0&&(a.area_id=e),t!==""&&t!==null&&t!==void 0&&(a.season_id=t),n!==""&&n!==null&&n!==void 0&&(a.min_amount=n),i!==""&&i!==null&&i!==void 0&&(a.max_amount=i);const o={method:"get",maxBodyLength:1/0,url:r,params:a,headers:{"Content-Type":"application/json"}};return await c.request(o)}}});export{m as u};
//# sourceMappingURL=price-list-store-BB1m4lGl.js.map
