{"version":3,"file":"quota-store-CMlQgx_Z.js","sources":["../../src/stores/quota-store.ts"],"sourcesContent":["import { defineStore } from 'pinia'\nimport axios from 'axios'\nimport { format } from 'date-fns'\n\nexport const useQuotaStore = defineStore('quota', {\n  state: () => {\n    return {\n      quotas: [] as any,\n    }\n  },\n\n  actions: {\n    generateQuotaYear(startDate: any, endDate: any) {\n      const startYear = new Date(startDate).getFullYear()\n      const nextYear = new Date(endDate).getFullYear()\n      const quotaYear = `${startYear}/${nextYear}`\n\n      // Return an object with start_date, end_date, and the generated quota_year\n      return quotaYear\n    },\n    // 1. end date: Date has wrong format. Use one of these formats instead: YYYY-MM-DD.\n    async getQuotas(id: any) {\n      let url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_QUOTAS_URL\n      if (id !== null) {\n        url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_QUOTAS_URL + '?quota_id=' + id\n      }\n\n      //   const axios = require('axios')\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        this.quotas = response.data.data\n        return response\n      } else {\n        return response\n      }\n    },\n    async createQuota(quota: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_QUOTAS_URL\n\n      // [\n      //   {\n      //     id: 1,\n      //     quantity: 20,\n      //   },\n      // ]\n\n      const q_data = JSON.stringify({\n        name: quota.name,\n        description: quota.description,\n        start_date: format(quota.start_date, 'yyyy-MM-dd'),\n        end_date: format(quota.end_date, 'yyyy-MM-dd'),\n      })\n      // const data = JSON.stringify({\n      //   name: quota.name,\n      //   description: quota.description,\n      //   start_date: quota.start_date?.toISOString().split('T')[0],\n      //   end_date: quota.end_date.toISOString().split('T')[0],\n      // })\n\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: q_data,\n      }\n\n      const response = await axios.request(config)\n      if (response.status === 201) {\n        return response\n      } else {\n        return response\n      }\n    },\n\n    async createQuotaAreaSpecies(request_data: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_QUOTAS_AREA_SPECIES_URL\n      const data = JSON.stringify({\n        quota_id: request_data.quota_id,\n        species_objects: request_data.speciesObjects,\n        quantity: request_data.quantity,\n        area_id: request_data.area_id,\n      })\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: data,\n      }\n\n      const response = await axios.request(config)\n      if (response.status === 201) {\n        return response\n      } else {\n        return response\n      }\n    },\n    async updateQuota(quota: any) {\n      const url =\n        import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_QUOTAS_URL + '?quota_id=' + quota.id\n\n      const data = JSON.stringify({\n        name: quota.name,\n        start_date: quota.start_date,\n        end_date: quota.end_date,\n      })\n\n      const config = {\n        method: 'patch',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: data,\n      }\n\n      const response = await axios.request(config)\n\n      if (response.status === 200) {\n        return response\n      } else {\n        return response\n      }\n    },\n    async deleteQuota(quota_id: any) {\n      const url =\n        import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_QUOTAS_URL + '?quota_id=' + quota_id\n      const config = {\n        method: 'delete',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      const response = await axios.request(config)\n      if (response.status === 204) {\n        return response\n      } else {\n        return response\n      }\n    },\n\n    // getquata area all specific quota\n\n    async getAllSpeciesPerQuotaPerArea(quota_id: any, area_id: any, species_id: any) {\n      console.log(quota_id, area_id, species_id)\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url:\n          import.meta.env.VITE_APP_BASE_URL +\n          import.meta.env.VITE_APP_SALES_QUOTAS_AREA_SPECIES_URL +\n          '?quota_id=' +\n          quota_id +\n          '&area_id=' +\n          area_id +\n          '&species_id=' +\n          species_id,\n      }\n\n      const response = await axios.request(config)\n      return response\n    },\n\n    async getSpeciesList() {\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SPECIES_URL,\n      }\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        return response\n      } else {\n        return response\n      }\n    },\n\n    async getAreaList() {\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_HUTING_AREAS_URL,\n      }\n\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        return response\n      } else {\n        return response\n      }\n    },\n  },\n})\n"],"names":["useQuotaStore","defineStore","startDate","endDate","startYear","nextYear","id","url","config","response","axios","quota","q_data","format","request_data","data","quota_id","area_id","species_id"],"mappings":"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"}