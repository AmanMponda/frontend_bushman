import{j as d,k as i}from"./index-DdnbDYw8.js";import{f as u}from"./utils-BWc0LXoO.js";import{f as l}from"./format-Cn4G_mmc.js";const v=d("sales_inquiries",{state:()=>({salesInquiries:[],results:[],loadingresults:!1,priceBreakDown:null,addCompanions:!1,observers:[],showObserversModal:!1,showCompanionsModal:!1,companions:[],savingSafariExtras:!1,clientSafariExtras:[],showSafariExtrasModal:!1,showAccommodationModal:!1,accommodations:[],chartersPrices:[],showChartersPriceModal:!1,savingCharterPrices:!1,loadingCharterPrices:!1}),actions:{async getSalesInquiries(t,r){const n=r?l(new Date(r),"yyyy-MM-dd"):"",s={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries/?season_id="+t+"&preferred_date="+n,headers:{"Content-Type":"application/json"}};return await i.request(s)},async createSalesInquiry(t){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries/",n=t!=null&&t.preferredDate?l(new Date(t.preferredDate),"yyyy-MM-dd"):null,e=t.startDate?l(new Date(t.startDate),"yyyy-MM-dd"):null,s=t.endDate?l(new Date(t.endDate),"yyyy-MM-dd"):null,a=JSON.stringify({categories:"Hunter",full_name:t==null?void 0:t.fullName,contacts:t==null?void 0:t.contacts,nationality:t==null?void 0:t.nationality,country:t==null?void 0:t.country,price_list_id:t==null?void 0:t.priceListId,no_of_hunters:t==null?void 0:t.noOfHunters,no_of_days:t==null?void 0:t.noOfDays,no_of_companions:t==null?void 0:t.noOfCompanions,no_of_observers:t==null?void 0:t.noOfObservers,preferred_species:t==null?void 0:t.species,area_id:t==null?void 0:t.areaId,season:t==null?void 0:t.season.value,preferred_date:n,start_date:e,end_date:s,identity_number:t==null?void 0:t.identityNumber}),o={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:a};return await i.request(o)},async getallSalesConfirmation(){this.loadingresults=!0;const r={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-vset/",headers:{"Content-Type":"application/json"}};try{const n=await i.request(r);return n.data.length>0&&n.status===200?(this.loadingresults=!1,this.results=n.data.map(e=>{var s,a,o,c,h,m,f;return{name:(a=(s=e==null?void 0:e.sales_inquiry)==null?void 0:s.entity)==null?void 0:a.full_name,area:(h=(c=(o=e==null?void 0:e.sales_inquiry)==null?void 0:o.area[0])==null?void 0:c.area)==null?void 0:h.name,airport_name:(m=e==null?void 0:e.itinerary)==null?void 0:m.airport_name,charter_in:u(e.itinerary.charter_in),charter_out:u(e.itinerary.charter_out),arrival:u(e.itinerary.arrival),status:((f=e==null?void 0:e.status)==null?void 0:f.status)??"No Status",selfitem:e}}),n):(this.loadingresults=!1,this.results=[],n)}catch(n){return console.log(n),this.loadingresults=!1,this.results=[],n}},async createSalesConfirmationFinalization(t){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-vset/",n=JSON.stringify({sales_inquiry_id:t.salesInquiryId,package_id:t.packageId,airport_name:t.airportName,charter_in:t.charterIn,charter_out:t.charterOut,arrival:t.arrival,installments:t.installments,regulatory_package_id:t.regulatoryPackageId}),e={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:n};return await i.request(e)},async getSalesPriceBreakdown(t){const n={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-price-break-down/?package_id="+t.packageId+"&sales_inquiry_id="+t.salesInquiryId,headers:{"Content-Type":"application/json"}};try{const e=await i.request(n);return this.priceBreakDown=e.data,e}catch(e){return console.log(e),e}},async updatesalesConfirmationStatus(t){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-status-vset/",n=new FormData;n.append("doc_type_id",t.docTypeId),n.append("entity_id",t.entityId),n.append("contract_doc",t.contractDoc),n.append("payment_doc",t.paymentDoc),n.append("sales_confirmation_proposal_id",t.salesConfirmationProposalId),n.append("status_id",t.statusId),n.append("area_id",t.areaId),n.append("quota_id",t.quotaId);const e={method:"patch",maxBodyLength:1/0,url:r,headers:{"Content-Type":"multipart/form-data"},data:n};return await i.request(e)},async createSalesConfirmationProposalObservers(t){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-proposal-observers-vset/",n={full_name:t.fullName,nationality_id:t.nationalityId,country_id:t.countryId,identity_number:t.identityNumber,sales_inquiry_id:t.salesInquiryId,contacts:t.contacts,charter_in:t.charter_in,charter_out:t.charter_out,arrival_airport:t.arrival_airport},e=JSON.stringify(n),s={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:e},a=await i.request(s);return a.status===201&&(this.addCompanions=!0,this.showObserversModal=!1),a},async getObservers(t){const n={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-proposal-observers-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}};try{const e=await i.request(n);return e.status===200&&(this.observers=e.data.map(s=>({id:s.id,full_name:s.observer.full_name,nationality:s.observer.nationality.name}))),e}catch(e){return console.log(e),e}},async createSalesConfirmationCompanion(t){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-companion-vset/",n={full_name:t.fullName,nationality_id:t.nationalityId,country_id:t.countryId,identity_number:t.identityNumber,sales_inquiry_id:t.salesInquiryId,regulatory_package_id:t.regulatoryPackageId,contacts:t.contacts,charter_in:t.charter_in,arrival_airport:t.arrival_airport,charter_out:t.charter_out},e=JSON.stringify(n),s={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:e},a=await i.request(s);return a.status===201&&(this.addCompanions=!0,this.showCompanionsModal=!1),a},async getCompanions(t,r=!1){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-companion-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}};try{const s=await i.request(e);return r===!1?(s.status===200&&(this.companions=s.data.map(a=>({id:a.id,full_name:a.companion.full_name,nationality:a.companion.nationality.name}))),s):(this.companions=s.data.map(a=>({text:a.companion.full_name,value:a.companion.id})),s)}catch(s){return console.log(s),s}},async createsafariExtras(t){this.savingSafariExtras=!0;const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/client-safari-extras-vset/",n=JSON.stringify({safary_extras:t}),e={method:"post",maxBodyLength:1/0,url:r,data:n,headers:{"Content-Type":"application/json"}},s=await i.request(e);return s.status===201?(this.showSafariExtrasModal=!1,this.savingSafariExtras=!1,s):(this.savingSafariExtras=!1,s)},async getClienSafariExtras(t){var s;const n={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/client-safari-extras-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}};this.clientSafariExtras=[];const e=await i.request(n);return e.status===200&&(this.clientSafariExtras=(s=e==null?void 0:e.data)==null?void 0:s.map(a=>({name:a.safari_extras.name,amount:`${a.safari_extras.currency.symbol} ${a.safari_extras.amount}`}))),e},async getAccommodation(t){const n={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-accommodation-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}},e=await i.request(n);return e.status===200&&(this.accommodations=e.data.map(s=>({id:s.id,name:s.entity.full_name,type_name:s.type.name,check_in:u(s.check_in),check_out:u(s.check_out)}))),e},async createAccommodation(t){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-accommodation-vset/",n=JSON.stringify(t),e={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:n},s=await i.request(e);return s.status===201&&(this.showAccommodationModal=!1,this.getAccommodation(t.sales_inquiry_id)),s},async getChartersPrice(t){const n={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-charters-price-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}},e=await i.request(n);e.status===200&&(this.chartersPrices=e.data.map(s=>{var a,o,c;return{id:s.id,name:s.charters_price_list.name,amount:`${(o=(a=s==null?void 0:s.charters_price_list)==null?void 0:a.currency)==null?void 0:o.symbol} ${(c=s==null?void 0:s.charters_price_list)==null?void 0:c.amount}`}}))},async createChartersPrice(t){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-charters-price-vset/",n=JSON.stringify(t),e={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:n},s=await i.request(e);return s.status===201&&(this.showChartersPriceModal=!1,this.getChartersPrice(t.sales_inquiry_id)),s}}});export{v as u};
//# sourceMappingURL=sales-store-zxdaEAsS.js.map
