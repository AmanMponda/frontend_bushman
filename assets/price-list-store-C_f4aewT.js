import{j as p,k as c}from"./index-mc8yIoJz.js";const u=p("price-list",{state:()=>({itemsByHuntingType:[],priceList:[],salesPackages:[],packageOptions:[],latestPackage:null,showModal:!1,loadingpackages:!1}),actions:{async getPriceList(e="",a="",t=""){const s="http://localhost:8000/api/v1.0/settings/price-lists/",n={};e!==""&&e!==null&&e!==void 0&&(n.hunting_type_id=e),a!==""&&a!==null&&a!==void 0&&(n.area_id=a),t!==""&&t!==null&&t!==void 0&&(n.quota_id=t),console.log("API URL:",s,"params:",n);const o={method:"get",maxBodyLength:1/0,url:s,params:n,headers:{"Content-Type":"application/json"}},r=await c.request(o);console.log("API response data:",r.data);const i=r.data,l=Array.isArray(i)?i:(i==null?void 0:i.data)??[];return Array.isArray(l)&&l.length>0?this.priceList=l:this.priceList=[],r},async getPriceListByHuntingType(e="",a="",t=""){const s="http://localhost:8000/api/v1.0/settings/price-lists/",n={};e!==""&&e!==null&&e!==void 0&&(n.hunting_type_id=e),a!==""&&a!==null&&a!==void 0&&(n.area_id=a),t!==""&&t!==null&&t!==void 0&&(n.quota_id=t);const o={method:"get",maxBodyLength:1/0,url:s,params:n,headers:{"Content-Type":"application/json"}},r=await c.request(o),i=r.data,l=Array.isArray(i)?i:(i==null?void 0:i.data)??[];return this.itemsByHuntingType=l,r},async getPriceListById(e){const a=`http://localhost:8000/api/v1.0/settings/price-lists/${e}`;console.log("Fetching price list detail, URL:",a);const t={method:"get",maxBodyLength:1/0,url:a,headers:{"Content-Type":"application/json"}},s=await c.request(t);return console.log("Price list detail response:",s.data),s},async getSalesPackageList(e=!1){this.loadingpackages=!0;const a={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"}},t=await c.request(a);return t.status===200&&(this.loadingpackages=!1,e?(this.latestPackage={value:t.data[0].id,text:t.data[0].name},this.packageOptions=t.data.map(s=>({value:s.id,text:s.name}))):this.salesPackages=t.data.map(s=>{var n,o;return{id:s.id,name:s.name,area_name:((n=s==null?void 0:s.area)==null?void 0:n.name)??"N/A",regulatory_package_name:((o=s==null?void 0:s.regulatory_package)==null?void 0:o.name)??"N/A",selfItem:s}})),t},async createSalesPackage(e){const a=JSON.stringify({name:e.name,area_id:e.areaId,regulatory_package_id:e.licenceId,description:e.description,species_object_list:e.speciesObjectList}),t={method:"post",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"},data:a},s=await c.request(t);return s.status===201&&(this.showModal=!1,this.getSalesPackageList()),s},async createPriceList(e){const a=JSON.stringify({area:e.area,hunting_type_id:e.huntingTypeId,sales_package_ids:e.sales_package_ids,description:e.description,sales_quota_id:e.salesQuotaId,amount:e.amount,currency:e.currency,duration:e.duration,companion_days:e.companionDays,companion_amount:e.companionAmount,observer_days:e.observerDays,observer_amount:e.observerAmount,season_id:e.season_id,start_date:e.start_at,end_date:e.end_at,is_active:e.is_active,area_id:e.area_id,user_id:e.user_id,species_object_list:e.speciesObjectList}),t={method:"post",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/create-price-list/",headers:{"Content-Type":"application/json"},data:a};return await c.request(t)}}});export{u};
//# sourceMappingURL=price-list-store-C_f4aewT.js.map
