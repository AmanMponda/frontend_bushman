import{j as m,k as o}from"./index-CfFSTcA4.js";import{f as l}from"./utils-BWc0LXoO.js";import{f as p}from"./format-Cn4G_mmc.js";const g=m("sales_inquiries",{state:()=>({salesInquiries:[],results:[],loadingresults:!1,priceBreakDown:null,addCompanions:!1,observers:[],showObserversModal:!1,showCompanionsModal:!1,companions:[],savingSafariExtras:!1,clientSafariExtras:[],showSafariExtrasModal:!1,showAccommodationModal:!1,accommodations:[],chartersPrices:[],showChartersPriceModal:!1,savingCharterPrices:!1,loadingCharterPrices:!1}),actions:{async getSalesInquiries(a,n){const e=n?p(new Date(n),"yyyy-MM-dd"):"",s={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries/?season_id="+a+"&preferred_date="+e,headers:{"Content-Type":"application/json"}};return await o.request(s)},async createSalesInquiry(a){const e={method:"post",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries/",headers:{"Content-Type":"application/json"},data:JSON.stringify(a)};return await o.request(e)},async getallSalesConfirmation(){this.loadingresults=!0;const n={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-vset/",headers:{"Content-Type":"application/json"}};try{const e=await o.request(n);return e.data.length>0&&e.status===200?(this.loadingresults=!1,this.results=e.data.map(t=>{var s,r,i,c,u,d,h;return{name:(r=(s=t==null?void 0:t.sales_inquiry)==null?void 0:s.entity)==null?void 0:r.full_name,area:(u=(c=(i=t==null?void 0:t.sales_inquiry)==null?void 0:i.area[0])==null?void 0:c.area)==null?void 0:u.name,airport_name:(d=t==null?void 0:t.itinerary)==null?void 0:d.airport_name,charter_in:l(t.itinerary.charter_in),charter_out:l(t.itinerary.charter_out),arrival:l(t.itinerary.arrival),status:((h=t==null?void 0:t.status)==null?void 0:h.status)??"No Status",selfitem:t}}),e):(this.loadingresults=!1,this.results=[],e)}catch(e){return console.log(e),this.loadingresults=!1,this.results=[],e}},async createSalesConfirmationFinalization(a){const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-vset/",e=JSON.stringify({sales_inquiry_id:a.salesInquiryId,package_id:a.packageId,airport_name:a.airportName,charter_in:a.charterIn,charter_out:a.charterOut,arrival:a.arrival,installments:a.installments,regulatory_package_id:a.regulatoryPackageId}),t={method:"post",maxBodyLength:1/0,url:n,headers:{"Content-Type":"application/json"},data:e};return await o.request(t)},async getSalesPriceBreakdown(a){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-price-break-down/?package_id="+a.packageId+"&sales_inquiry_id="+a.salesInquiryId,headers:{"Content-Type":"application/json"}};try{const t=await o.request(e);return this.priceBreakDown=t.data,t}catch(t){return console.log(t),t}},async updatesalesConfirmationStatus(a){const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-status-vset/",e=new FormData;e.append("doc_type_id",a.docTypeId),e.append("entity_id",a.entityId),e.append("contract_doc",a.contractDoc),e.append("payment_doc",a.paymentDoc),e.append("sales_confirmation_proposal_id",a.salesConfirmationProposalId),e.append("status_id",a.statusId),e.append("area_id",a.areaId),e.append("quota_id",a.quotaId);const t={method:"patch",maxBodyLength:1/0,url:n,headers:{"Content-Type":"multipart/form-data"},data:e};return await o.request(t)},async createSalesConfirmationProposalObservers(a){const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-proposal-observers-vset/",e={full_name:a.fullName,nationality_id:a.nationalityId,country_id:a.countryId,identity_number:a.identityNumber,sales_inquiry_id:a.salesInquiryId,contacts:a.contacts,charter_in:a.charter_in,charter_out:a.charter_out,arrival_airport:a.arrival_airport},t=JSON.stringify(e),s={method:"post",maxBodyLength:1/0,url:n,headers:{"Content-Type":"application/json"},data:t},r=await o.request(s);return r.status===201&&(this.addCompanions=!0,this.showObserversModal=!1),r},async getObservers(a){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-proposal-observers-vset/?sales_inquiry_id="+a,headers:{"Content-Type":"application/json"}};try{const t=await o.request(e);return t.status===200&&(this.observers=t.data.map(s=>({id:s.id,full_name:s.observer.full_name,nationality:s.observer.nationality.name}))),t}catch(t){return console.log(t),t}},async createSalesConfirmationCompanion(a){const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-companion-vset/",e={full_name:a.fullName,nationality_id:a.nationalityId,country_id:a.countryId,identity_number:a.identityNumber,sales_inquiry_id:a.salesInquiryId,regulatory_package_id:a.regulatoryPackageId,contacts:a.contacts,charter_in:a.charter_in,arrival_airport:a.arrival_airport,charter_out:a.charter_out},t=JSON.stringify(e),s={method:"post",maxBodyLength:1/0,url:n,headers:{"Content-Type":"application/json"},data:t},r=await o.request(s);return r.status===201&&(this.addCompanions=!0,this.showCompanionsModal=!1),r},async getCompanions(a,n=!1){const t={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-companion-vset/?sales_inquiry_id="+a,headers:{"Content-Type":"application/json"}};try{const s=await o.request(t);return n===!1?(s.status===200&&(this.companions=s.data.map(r=>({id:r.id,full_name:r.companion.full_name,nationality:r.companion.nationality.name}))),s):(this.companions=s.data.map(r=>({text:r.companion.full_name,value:r.companion.id})),s)}catch(s){return console.log(s),s}},async createsafariExtras(a){this.savingSafariExtras=!0;const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/client-safari-extras-vset/",e=JSON.stringify({safary_extras:a}),t={method:"post",maxBodyLength:1/0,url:n,data:e,headers:{"Content-Type":"application/json"}},s=await o.request(t);return s.status===201?(this.showSafariExtrasModal=!1,this.savingSafariExtras=!1,s):(this.savingSafariExtras=!1,s)},async getClienSafariExtras(a){var s;const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/client-safari-extras-vset/?sales_inquiry_id="+a,headers:{"Content-Type":"application/json"}};this.clientSafariExtras=[];const t=await o.request(e);return t.status===200&&(this.clientSafariExtras=(s=t==null?void 0:t.data)==null?void 0:s.map(r=>({name:r.safari_extras.name,amount:`${r.safari_extras.currency.symbol} ${r.safari_extras.amount}`}))),t},async getAccommodation(a){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-accommodation-vset/?sales_inquiry_id="+a,headers:{"Content-Type":"application/json"}},t=await o.request(e);return t.status===200&&(this.accommodations=t.data.map(s=>({id:s.id,name:s.entity.full_name,type_name:s.type.name,check_in:l(s.check_in),check_out:l(s.check_out)}))),t},async createAccommodation(a){const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-accommodation-vset/",e=JSON.stringify(a),t={method:"post",maxBodyLength:1/0,url:n,headers:{"Content-Type":"application/json"},data:e},s=await o.request(t);return s.status===201&&(this.showAccommodationModal=!1,this.getAccommodation(a.sales_inquiry_id)),s},async getChartersPrice(a){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-charters-price-vset/?sales_inquiry_id="+a,headers:{"Content-Type":"application/json"}},t=await o.request(e);t.status===200&&(this.chartersPrices=t.data.map(s=>{var r,i,c;return{id:s.id,name:s.charters_price_list.name,amount:`${(i=(r=s==null?void 0:s.charters_price_list)==null?void 0:r.currency)==null?void 0:i.symbol} ${(c=s==null?void 0:s.charters_price_list)==null?void 0:c.amount}`}}))},async createChartersPrice(a){const n="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-charters-price-vset/",e=JSON.stringify(a),t={method:"post",maxBodyLength:1/0,url:n,headers:{"Content-Type":"application/json"},data:e},s=await o.request(t);return s.status===201&&(this.showChartersPriceModal=!1,this.getChartersPrice(a.sales_inquiry_id)),s}}});export{g as u};
//# sourceMappingURL=sales-store-CArtnMbj.js.map
