import{d as le,m as w,s as C,_ as ie,g as I,e as s,b as o,i,w as l,F as L,o as f,l as me,v as X,a as U,x as P,q as oe,h as $,t as p,y as ae,z as qe,A as Ce,B as $e,C as Pe,D as we,c as Fe,E as Ae,k as ge}from"./index-YknbmV_z.js";import{u as ne}from"./useForm-BD4PJEC-.js";import{u as ue}from"./useToast-BEDWU_wG.js";import{h as ce}from"./errorHandler-DijQ3xmc.js";import{v as Le}from"./utils-BWc0LXoO.js";import{u as R}from"./sales-store-BA52ZQPc.js";import{u as E}from"./settings-store-CFkNIGsP.js";import{u as ye}from"./quota-store-D1n978KD.js";import{u as Ie}from"./price-list-store-Cj5i_qWO.js";import{u as De}from"./regulatrory-store-DnWNnLOw.js";import{S as Te,C as Ue,O as Ee}from"./SalesClientSafariExtrasForm-BDXpnsoG.js";import{u as Se}from"./account-store-BhhW1WDs.js";import{f as ke}from"./format-Cn4G_mmc.js";import{d as Ne}from"./pdfDownloader-DiRJnS-k.js";import"./SafariExtrasForm-DHLRdedh.js";const Oe=le({name:"SalesInquiriesList",emits:["download-btn-pressed","view-btn-pressed"],data(){return{loading:C(!1),columns:[{key:"id",label:"ID",width:80},{key:"name"},{key:"country"},{key:"nationality"},{key:"preference.preferred_date",label:"Preferred date",width:80},{key:"preference.start_date",label:"Start date",width:80},{key:"preference.end_date",label:"End date",width:80},{key:"actions",width:80}],salesInquiryItems:[],perPage:10,currentPage:1,filter:"",filtered:[],seasonValue:null,seasonOptions:[],dateValue:null,mothValue:null}},computed:{pages(){return this.perPage&&this.perPage!==0?Math.ceil(this.filtered.length/this.perPage):this.filtered.length}},mounted(){this.getSalesInquiryList(),this.getSeasonOptions()},methods:{...w(R,["getSalesInquiries"]),...w(E,["getSeasons"]),async getSalesInquiryList(){var e;this.loading=!0;try{const t=await this.getSalesInquiries(((e=this.seasonValue)==null?void 0:e.value)??"",this.dateValue??"");if(t.status===200){this.loading=!1;const m=Array.isArray(t.data)?t.data:t.data.data||[];this.salesInquiryItems=m.map(n=>{var y,S,c,v,h,V,u,_,g,r,d,N,O,Z,x,H,K;return{id:n.id,selfitem:n,code:(n==null?void 0:n.code)||"",inquiry_type:(n==null?void 0:n.inquiry_type)||"",name:((y=n==null?void 0:n.entity)==null?void 0:y.full_name)||"N/A",country:((c=(S=n==null?void 0:n.entity)==null?void 0:S.country)==null?void 0:c.name)||"N/A",nationality:((h=(v=n==null?void 0:n.entity)==null?void 0:v.nationality)==null?void 0:h.name)||"N/A",contacts:((u=(V=n==null?void 0:n.entity)==null?void 0:V.contacts)==null?void 0:u.map(D=>{var W;return{id:D.id,name:D==null?void 0:D.contact,contactable:D==null?void 0:D.contactable,type:((W=D==null?void 0:D.contact_type)==null?void 0:W.name)||""}}))||[],preference:{no_of_hunters:((_=n==null?void 0:n.formatted_preferences)==null?void 0:_.no_of_hunters)||0,no_of_observers:((g=n==null?void 0:n.formatted_preferences)==null?void 0:g.no_of_observers)||0,no_of_days:((r=n==null?void 0:n.formatted_preferences)==null?void 0:r.no_of_days)||0,no_of_companions:((d=n==null?void 0:n.formatted_preferences)==null?void 0:d.no_of_companions)||0,special_requests:((N=n==null?void 0:n.formatted_preferences)==null?void 0:N.special_requests)||"",start_date:((O=n==null?void 0:n.formatted_preferences)==null?void 0:O.start_date)||"",end_date:((Z=n==null?void 0:n.formatted_preferences)==null?void 0:Z.end_date)||"",budget_estimation:((x=n==null?void 0:n.formatted_preferences)==null?void 0:x.budget_estimation)||"",preferred_date:((H=n==null?void 0:n.formatted_preferences)==null?void 0:H.preferred_date)||""},package_details:(n==null?void 0:n.package_details)||null,custom_details:(n==null?void 0:n.custom_details)||null,season:((K=n==null?void 0:n.season)==null?void 0:K.name)||"N/A"}}),this.filtered=this.salesInquiryItems}}catch(t){this.loading=!1,console.log(t)}},async getSeasonOptions(){const e=await this.getSeasons();e.status===200&&(this.seasonOptions=e.data.map(t=>({value:t.id,text:t.name})))},btnDownloadClicked(e){console.log(e),this.$emit("download-btn-pressed",e)},btnViewClicked(e){console.log(e),this.$emit("view-btn-pressed",e)}}}),Be={class:"grid sm:grid-cols-3 gap-6 mb-6"},Me={colspan:"6"},Re={class:"flex justify-center mt-4"};function je(e,t,m,n,y,S){const c=i("VaSelect"),v=i("VaDateInput"),h=i("VaInput"),V=i("VaButton"),u=i("VaPagination"),_=i("VaDataTable");return f(),I(L,null,[s("div",Be,[o(c,{modelValue:e.seasonValue,"onUpdate:modelValue":[t[0]||(t[0]=g=>e.seasonValue=g),e.getSalesInquiryList],options:e.seasonOptions,placeholder:"Filter By Season"},null,8,["modelValue","options","onUpdate:modelValue"]),o(v,{modelValue:e.dateValue,"onUpdate:modelValue":[t[1]||(t[1]=g=>e.dateValue=g),e.getSalesInquiryList],placeholder:"Filter By Date",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),o(h,{modelValue:e.filter,"onUpdate:modelValue":[t[2]||(t[2]=g=>e.filter=g),e.getSalesInquiryList],placeholder:"Search",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),o(_,{striped:"",loading:e.loading,items:e.salesInquiryItems,columns:e.columns,"per-page":e.perPage,"current-page":e.currentPage,filter:e.filter,onFiltered:t[4]||(t[4]=g=>e.filtered=g.items)},{"cell(actions)":l(({rowData:g})=>[o(V,{preset:"plain",icon:"visibility",class:"mr-2",onClick:r=>e.btnViewClicked(g)},null,8,["onClick"]),o(V,{preset:"plain",icon:"download",onClick:r=>e.btnDownloadClicked(g)},null,8,["onClick"])]),bodyAppend:l(()=>[s("tr",null,[s("td",Me,[s("div",Re,[o(u,{modelValue:e.currentPage,"onUpdate:modelValue":t[3]||(t[3]=g=>e.currentPage=g),pages:e.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["loading","items","columns","per-page","current-page","filter"])],64)}const ze=ie(Oe,[["render",je]]),He=le({props:{item:{type:Object,required:!0}},setup(){const{init:e}=ue(),t=C(null),{isValid:m,validate:n,resetValidation:y,reset:S}=ne(t),c=C(!0),v=V=>{console.log(V),(V.value=="prior"||V.value=="after")&&(c.value=!1)},h=X({airport_name:null,charter_in:null,charter_out:null,arrival:null,installment_narration:null,installment_due_amount:null,installment_amount_type:null,installment_due_days:0,due_days_type:null});return{iformRef:t,isValidForm:m,validateForm:n,resetValidationForm:y,resetForm:S,form:h,init:e,onInputChange:v,isNotUpBookingSelected:c}},data(){return{packages:[],installments:[],regulatoryPackages:[],saving:!1}},computed:{...me(R,["priceBreakDown"])},mounted(){this.getPL(),this.getLicencePackages()},methods:{...w(R,["createSalesConfirmationFinalization"]),...w(Ie,["getPriceList","getSalesPackageList"]),...w(R,["getSalesPriceBreakdown","getObservers"]),...w(De,["getRegulatoryPackages"]),async getPL(){const e=await this.getPriceList();e.status===200?this.packages=e.data.data.map(t=>({value:t.sales_package.id,text:(t==null?void 0:t.sales_package.name)+" - "+t.price_list_type.hunting_type.name})):console.log("Error getting price list")},createInstallmentList(){this.form.installment_narration&&this.form.installment_due_amount?this.installments.push({narration:this.form.installment_narration,amount:this.form.installment_due_amount,amount_type:this.form.installment_amount_type.value,days:this.form.installment_due_days,due_days_type:this.form.due_days_type.value}):this.init({message:"Add at least one installment plan",color:"warning"})},deleteInstallment(e){this.installments.splice(e,1)},async getSalesPriceBreakdownForClient(){const e={salesInquiryId:this.item.id,packageId:this.item.price_list.price_list.sales_package.id};await this.getSalesPriceBreakdown(e)},async onSubmit(){this.saving=!0;const e={charterIn:this.form.charter_in,charterOut:this.form.charter_out,arrival:this.form.arrival,airportName:this.form.airport_name,packageId:this.item.price_list.price_list.sales_package.id,salesInquiryId:this.item.id,regulatoryPackageId:this.item.price_list.price_list.sales_package.regulatory_package.id,installments:this.installments};try{const t=await this.createSalesConfirmationFinalization(e);t.status===201?(this.saving=!1,this.init({message:t.data.message,color:"success"}),this.resetForm(),this.resetValidationForm(),this.installments=[]):this.init({message:t.data.message,color:"error"})}catch(t){this.saving=!1;const m=ce(t.response);this.init({message:`
`+m.map((n,y)=>`${y+1}. ${n}`).join(`
`),color:"danger"})}},async getLicencePackages(){try{const e=await this.getRegulatoryPackages();if(e.status===200){const t=e.data;this.regulatoryPackages=t.map(m=>({value:m.id,text:m.name}))}}catch(e){console.log(e)}}}}),Qe={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},Ge={class:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4"},Ye={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4"},We={key:0,class:"mb-4"},Je={class:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4"},Ze={class:"flex items-center"},Ke={class:"va-table-responsive"},Xe={class:"va-table va-table--striped"},xe={class:"flex justify-end"};function et(e,t,m,n,y,S){const c=i("VaInput"),v=i("VaDateInput"),h=i("VaTextarea"),V=i("VaSelect"),u=i("VaButton"),_=i("VaForm"),g=i("VaCardContent"),r=i("VaCard");return f(),U(r,{class:"w-full"},{default:l(()=>[o(g,null,{default:l(()=>[o(_,{ref:"iformRef"},{default:l(()=>[t[14]||(t[14]=s("h3",{class:"font-bold text-lg mb-2"},"Main Hunter safari information",-1)),s("div",Qe,[o(c,{modelValue:e.form.airport_name,"onUpdate:modelValue":t[0]||(t[0]=d=>e.form.airport_name=d),type:"text",placeholder:" Enter Airport Name",rules:[d=>d&&d.length>0||" Airport Name is required"],label:"Airport Name"},null,8,["modelValue","rules"]),o(v,{modelValue:e.form.arrival,"onUpdate:modelValue":t[1]||(t[1]=d=>e.form.arrival=d),placeholder:"Select Arrival Date",rules:[d=>d||"Arrival Date is required"],label:"Arrival Date"},null,8,["modelValue","rules"]),o(v,{modelValue:e.form.charter_in,"onUpdate:modelValue":t[2]||(t[2]=d=>e.form.charter_in=d),placeholder:"Choose charter in date",rules:[d=>d||"Arrival Date is required"],label:"Charter In Date"},null,8,["modelValue","rules"]),o(v,{modelValue:e.form.charter_out,"onUpdate:modelValue":t[3]||(t[3]=d=>e.form.charter_out=d),placeholder:"Choose charter out date",rules:[d=>d||"Arrival Date is required"],label:"Charter Out Date"},null,8,["modelValue","rules"])]),t[15]||(t[15]=s("h3",{class:"font-bold text-lg mb-2"}," Create Client Installment plan ",-1)),s("div",Ge,[o(h,{modelValue:e.form.installment_narration,"onUpdate:modelValue":t[4]||(t[4]=d=>e.form.installment_narration=d),type:"text",placeholder:"Description",rules:[d=>d&&d.length>0||" Installment Description is required"]},null,8,["modelValue","rules"])]),s("div",Ye,[o(c,{modelValue:e.form.installment_due_amount,"onUpdate:modelValue":t[5]||(t[5]=d=>e.form.installment_due_amount=d),type:"number",label:"Amount",placeholder:"Amount",rules:[d=>d&&d>0||" Installment Amount is required"]},null,8,["modelValue","rules"]),o(V,{modelValue:e.form.installment_amount_type,"onUpdate:modelValue":[t[6]||(t[6]=d=>e.form.installment_amount_type=d),e.onInputChange],options:[{value:"PERCENT",text:"PERCENT"},{value:"LAPS",text:"LAPS "}],label:"Amount type",rules:[d=>d||"Due amoun type is required"],placeholder:"Select Due amount type"},null,8,["modelValue","rules","onUpdate:modelValue"]),o(c,{modelValue:e.form.installment_due_days,"onUpdate:modelValue":t[7]||(t[7]=d=>e.form.installment_due_days=d),type:"number",label:"Days",rules:[d=>d&&d>0||" Installment Days is required"],placeholder:"Days"},null,8,["modelValue","rules"]),o(V,{modelValue:e.form.due_days_type,"onUpdate:modelValue":[t[8]||(t[8]=d=>e.form.due_days_type=d),e.onInputChange],label:"Due days type",options:[{value:"UPON_SALES_CONFIRMATION",text:"UPON_SALES_CONFIRMATION"},{value:"PRIOR_SAFARI",text:"PRIOR_SAFARI "}],rules:[d=>d||"Due days type is required"],placeholder:"Select Due days type"},null,8,["modelValue","rules","onUpdate:modelValue"]),o(u,{icon:"add",onClick:t[9]||(t[9]=d=>e.createInstallmentList())})]),e.installments.length>0?(f(),I("div",We,[t[12]||(t[12]=s("h3",{class:"font-bold text-lg mb-2"},"Installment Plans",-1)),s("div",Je,[s("div",Ze,[s("div",Ke,[s("table",Xe,[t[11]||(t[11]=s("thead",null,[s("tr",null,[s("th",null,"Description"),s("th",null,"Amount"),s("th",null,"installment In (PERCENT/LAPS)"),s("th",null,"Days"),s("th",null,"Due Days Limit"),s("th",null,"Actions")])],-1)),s("tbody",null,[(f(!0),I(L,null,oe(e.installments,d=>(f(),I("tr",{key:d.id},[s("td",null,p(d.narration),1),s("td",null,p(d.amount),1),s("td",null,p(d.amount_type),1),s("td",null,p(d.days),1),s("td",null,p(d.due_days_type),1),s("td",null,[o(u,{plain:"",icon:"delete",onClick:N=>e.deleteInstallment(d.id)},null,8,["onClick"])])]))),128))])])])])])])):P("",!0),s("div",xe,[o(u,{save:"",icon:"save",loading:e.saving,disabled:!e.isValidForm||e.saving||e.installments.length<0,onClick:t[10]||(t[10]=d=>e.validateForm()&&e.onSubmit())},{default:l(()=>t[13]||(t[13]=[$(" save")])),_:1},8,["loading","disabled"])])]),_:1},512)]),_:1})]),_:1})}const tt=ie(He,[["render",et],["__scopeId","data-v-48b7cc01"]]),st=le({components:{},setup(){const{init:e}=ue(),t=C(),m=X({name:""}),{isValid:n,validate:y,resetValidation:S,reset:c}=ne(t);return{formRef:t,isValidForm:n,validateForm:y,resetValidationForm:S,init:e,resetForm:c,form:m}},data(){},computed:{...ae(E,{saving:"savingAccommodationType"})},methods:{...w(E,["createAccommodationType"]),async submit(){const e={name:this.form.name};try{(await this.createAccommodationType(e)).status===201?(this.init({message:"Accommodation Type Created Successfully",color:"success"}),this.resetForm()):this.init({message:"Error Creating Accommodation Type",color:"danger"})}catch(t){this.saving=!1;const m=ce(t.response);this.init({message:`
`+m.map((n,y)=>`${y+1}. ${n}`).join(`
`),color:"danger"})}}}}),ot={class:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4"};function at(e,t,m,n,y,S){const c=i("VaInput"),v=i("VaForm"),h=i("VaButton");return f(),I(L,null,[o(v,{ref:"formRef"},{default:l(()=>[s("div",ot,[o(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=V=>e.form.name=V),label:"Accommodation Type Name",placeholder:"Enter Accommodation Type Name",type:"text",required:"",rules:[V=>!!V||"This field is required"]},null,8,["modelValue","rules"])])]),_:1},512),o(h,{type:"submit",icon:"save",loading:e.saving,disabled:!e.isValidForm||e.saving,onClick:t[1]||(t[1]=V=>e.validateForm()&&e.submit())},{default:l(()=>t[2]||(t[2]=[$("Save")])),_:1},8,["loading","disabled"])],64)}const nt=ie(st,[["render",at],["__scopeId","data-v-917def3f"]]),lt=le({components:{AccomodationTypeForm:nt},props:{item:{type:Object,required:!0}},setup(){const{init:e}=ue(),t=C(null),{isValid:m,validate:n,resetValidation:y,reset:S}=ne(t),c=X({type_id:null,address_street:"",address_city:"",address_zipcode:"",entity_id:null,booking_number:"",check_in:"",check_out:"",account_id:null,amount:"",currency:null});return{init:e,form:c,formRef:t,isValidForm:m,validateForm:n,resetValidationForm:y,resetForm:S}},data(){return{}},computed:{...me(E,["salesInquiryEntities","currencies","accommodationTypes"]),...me(Se,["companyAccounts"]),...ae(E,{_shtyMd:"showAccommodationTypeModal"})},mounted(){this.getSalesInquiryEntities(this.item.id),this.getCompanyAccounts(),this.getCurrencies(),this.getAccommodationTypes(!0)},methods:{...w(E,["getSalesInquiryEntities","getCurrencies","getAccommodationTypes"]),...w(Se,["getCompanyAccounts"]),...w(R,["createAccommodation"]),async submitForm(){const e=new Date(this.form.check_in),t=new Date(this.form.check_out),m={type_id:this.form.type_id.value,address_street:this.form.address_street,address_city:this.form.address_city,address_zipcode:this.form.address_zipcode,entity_id:this.form.entity_id.value,sales_inquiry_id:this.item.id,booking_number:this.form.booking_number,check_in:ke(e,"yyyy-MM-dd HH:mm:ss"),check_out:ke(t,"yyyy-MM-dd HH:mm:ss"),account_id:this.form.account_id.value,amount:this.form.amount,currency:this.form.currency.value};try{const n=await this.createAccommodation(m);n.status===201&&this.init({message:n.data.message,color:"success"})}catch(n){console.error(n);const y=ce(n.response);this.init({message:`
`+y.map((S,c)=>`${c+1}. ${S}`).join(`
`),color:"danger"})}},_showModal(){this._shtyMd=!0}}}),it={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"};function rt(e,t,m,n,y,S){const c=i("VaSelect"),v=i("VaIcon"),h=i("VaInput"),V=i("VaButton"),u=i("VaForm"),_=i("AccomodationTypeForm"),g=i("VaModal");return f(),I(L,null,[s("div",null,[o(u,{ref:"formRef",onSubmit:qe(e.submitForm,["prevent"])},{default:l(()=>[s("div",it,[s("div",null,[o(c,{modelValue:e.form.entity_id,"onUpdate:modelValue":t[0]||(t[0]=r=>e.form.entity_id=r),options:e.salesInquiryEntities,label:"Accommodation For?",placeholder:"Select client",required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},null,8,["modelValue","options","rules"])]),s("div",null,[o(c,{modelValue:e.form.type_id,"onUpdate:modelValue":t[2]||(t[2]=r=>e.form.type_id=r),options:e.accommodationTypes,label:"Accommodation Type ",placeholder:"Enter type",required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},{append:l(()=>[o(v,{name:"add",class:"ml-2",onClick:t[1]||(t[1]=r=>e._showModal())})]),_:1},8,["modelValue","options","rules"])]),s("div",null,[o(h,{modelValue:e.form.address_street,"onUpdate:modelValue":t[3]||(t[3]=r=>e.form.address_street=r),label:"Accommodation Street Address",placeholder:"Enter street address",required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},null,8,["modelValue","rules"])]),s("div",null,[o(h,{modelValue:e.form.address_city,"onUpdate:modelValue":t[4]||(t[4]=r=>e.form.address_city=r),label:"Accommodation City",placeholder:"Enter city",required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},null,8,["modelValue","rules"])]),s("div",null,[o(h,{modelValue:e.form.address_zipcode,"onUpdate:modelValue":t[5]||(t[5]=r=>e.form.address_zipcode=r),label:"Accommodation Zip Code",placeholder:"Enter zip code",required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},null,8,["modelValue","rules"])]),s("div",null,[o(h,{modelValue:e.form.booking_number,"onUpdate:modelValue":t[6]||(t[6]=r=>e.form.booking_number=r),label:"Booking Number (Optional)",placeholder:"Enter booking number"},null,8,["modelValue"])]),s("div",null,[o(h,{modelValue:e.form.check_in,"onUpdate:modelValue":t[7]||(t[7]=r=>e.form.check_in=r),label:"Check In",placeholder:"Select check-in date",type:"datetime-local",required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},null,8,["modelValue","rules"])]),s("div",null,[o(h,{modelValue:e.form.check_out,"onUpdate:modelValue":t[8]||(t[8]=r=>e.form.check_out=r),label:"Check Out",placeholder:"Select check-out date",type:"datetime-local",required:"","required-mark":"",rules:[r=>!!r||"This field is required",r=>new Date(r)>new Date(e.form.check_in)||"Check out date must be after check-in date"]},null,8,["modelValue","rules"])]),s("div",null,[o(c,{modelValue:e.form.account_id,"onUpdate:modelValue":t[9]||(t[9]=r=>e.form.account_id=r),options:e.companyAccounts,label:"Account",placeholder:"Select account",required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},null,8,["modelValue","options","rules"])]),s("div",null,[o(h,{modelValue:e.form.amount,"onUpdate:modelValue":t[10]||(t[10]=r=>e.form.amount=r),label:"Amount",placeholder:"Enter amount",type:"number",required:"","required-mark":"",rules:[r=>r&&r>0||"Amount must be greater than zero"]},null,8,["modelValue","rules"])]),s("div",null,[o(c,{modelValue:e.form.currency,"onUpdate:modelValue":t[11]||(t[11]=r=>e.form.currency=r),label:"Currency",options:e.currencies,required:"","required-mark":"",rules:[r=>!!r||"This field is required"]},null,8,["modelValue","options","rules"])])]),o(V,{icon:"save",disabled:!e.isValidForm,onClick:t[12]||(t[12]=r=>e.validateForm()&&e.submitForm())},{default:l(()=>t[14]||(t[14]=[$("Save")])),_:1},8,["disabled"])]),_:1},8,["onSubmit"])]),o(g,{modelValue:e._shtyMd,"onUpdate:modelValue":t[13]||(t[13]=r=>e._shtyMd=r),title:"Accommodation Type",width:"600px","show-default-actions":!1},{default:l(()=>[o(_)]),_:1},8,["modelValue"])],64)}const dt=ie(lt,[["render",rt],["__scopeId","data-v-cc2115f4"]]),mt=le({components:{},setup(){const{init:e}=ue(),t=C(),m=X({name:"",amount:null,currency_id:null,season_id:null,description:""}),{isValid:n,validate:y,resetValidation:S,reset:c}=ne(t);return{formRef:t,isValidForm:n,validateForm:y,resetValidationForm:S,init:e,resetForm:c,form:m}},data(){},computed:{...me(E,["salesChartersPriceList","salesInquiryEntities","seasons","currencies"]),...ae(E,{saving:"savingSalesChartersPriceList"})},mounted(){this.getSeasons(!0),this.getCurrencies()},methods:{...w(E,["getSalesChartersPriceList","getSalesInquiryEntities","createSalesChartersPriceList","getSeasons","getCurrencies"]),async submit(){const e={name:this.form.name,amount:this.form.amount,currency_id:this.form.currency_id.value,season_id:this.form.season_id.value,description:this.form.description};try{const t=await this.createSalesChartersPriceList(e);t.status===201?(this.init({message:t.data.message,color:"success"}),this.resetForm()):this.init({message:"Something went wrong",color:"danger"})}catch(t){this.saving=!1;const m=ce(t.response);this.init({message:`
`+m.map((n,y)=>`${y+1}. ${n}`).join(`
`),color:"danger"})}}}}),ut={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"};function ct(e,t,m,n,y,S){const c=i("VaInput"),v=i("VaSelect"),h=i("VaTextarea"),V=i("VaForm"),u=i("VaButton");return f(),I(L,null,[o(V,{ref:"formRef"},{default:l(()=>[s("div",ut,[o(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=_=>e.form.name=_),label:"Name",placeholder:"Item name",type:"text",required:"",rules:[_=>!!_||"Name is required"]},null,8,["modelValue","rules"]),o(c,{modelValue:e.form.amount,"onUpdate:modelValue":t[1]||(t[1]=_=>e.form.amount=_),label:"Amount",placeholder:"Item amount",type:"number",required:"",rules:[_=>!!_||"Amount is required"]},null,8,["modelValue","rules"]),o(v,{modelValue:e.form.currency_id,"onUpdate:modelValue":t[2]||(t[2]=_=>e.form.currency_id=_),options:e.currencies,label:"Entity",placeholder:"Select Entity",type:"text",required:"",rules:[_=>!!_||"Entity is required"]},null,8,["modelValue","options","rules"])]),s("div",pt,[o(v,{modelValue:e.form.season_id,"onUpdate:modelValue":t[3]||(t[3]=_=>e.form.season_id=_),options:e.seasons,label:"Season",placeholder:"Select Season",type:"text",required:"",rules:[_=>!!_||"Season is required"]},null,8,["modelValue","options","rules"]),o(h,{modelValue:e.form.description,"onUpdate:modelValue":t[4]||(t[4]=_=>e.form.description=_),label:"Description",placeholder:"Item description",type:"text",required:"",rules:[_=>!!_||"Description is required"]},null,8,["modelValue","rules"])])]),_:1},512),o(u,{type:"submit",icon:"save",loading:e.saving,disabled:!e.isValidForm||e.saving,onClick:t[5]||(t[5]=_=>e.validateForm()&&e.submit())},{default:l(()=>t[6]||(t[6]=[$("Save")])),_:1},8,["loading","disabled"])],64)}const ft=ie(mt,[["render",ct],["__scopeId","data-v-aca3584c"]]),gt=le({components:{ChartersPriceListForm:ft},props:{item:{type:Object,required:!0}},setup(){const{init:e}=ue(),t=C(),m=X({charters_price_list_id:null,sales_inquiry_id:null,entity_id:null}),{isValid:n,validate:y,resetValidation:S,reset:c}=ne(t);return{formRef:t,isValidForm:n,validateForm:y,resetValidationForm:S,init:e,resetForm:c,form:m}},data(){},computed:{...me(E,["salesChartersPriceList","salesInquiryEntities"]),...ae(R,{saving:"savingCharterPrices"}),...ae(E,{_shCM:"showSalesChartersPriceListModal"})},mounted(){this.getSalesChartersPriceList(!0),this.getSalesInquiryEntities(this.item.id)},methods:{...w(E,["getSalesChartersPriceList","getSalesInquiryEntities"]),...w(R,["createChartersPrice"]),async submit(){const e={charters_price_list_id:this.form.charters_price_list_id.value,sales_inquiry_id:this.item.id,entity_id:this.form.entity_id.value};try{const t=await this.createChartersPrice(e);t.status===201?(this.init({message:t.data.message,color:"success"}),this.resetForm()):this.init({message:"Something went wrong",color:"danger"})}catch(t){this.saving=!1;const m=ce(t.response);this.init({message:`
`+m.map((n,y)=>`${y+1}. ${n}`).join(`
`),color:"danger"})}},_showModal(){this._shCM=!0}}}),yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"};function ht(e,t,m,n,y,S){const c=i("VaIcon"),v=i("VaSelect"),h=i("VaForm"),V=i("VaButton"),u=i("ChartersPriceListForm"),_=i("VaModal");return f(),I(L,null,[o(h,{ref:"formRef"},{default:l(()=>[s("div",yt,[o(v,{modelValue:e.form.charters_price_list_id,"onUpdate:modelValue":t[1]||(t[1]=g=>e.form.charters_price_list_id=g),options:e.salesChartersPriceList,label:"Charters Price List",placeholder:"Item category Name",type:"text",required:"",rules:[g=>!!g||"Item Name is required"]},{append:l(()=>[o(c,{name:"add",class:"ml-2",onClick:t[0]||(t[0]=g=>e._showModal())})]),_:1},8,["modelValue","options","rules"]),o(v,{modelValue:e.form.entity_id,"onUpdate:modelValue":t[2]||(t[2]=g=>e.form.entity_id=g),options:e.salesInquiryEntities,label:"Entity",placeholder:"Select Entity",type:"text",required:"",rules:[g=>!!g||"Entity is required"]},null,8,["modelValue","options","rules"])])]),_:1},512),o(V,{type:"submit",icon:"save",loading:e.saving,disabled:!e.isValidForm||e.saving,onClick:t[3]||(t[3]=g=>e.validateForm()&&e.submit())},{default:l(()=>t[5]||(t[5]=[$("Save")])),_:1},8,["loading","disabled"]),o(_,{modelValue:e._shCM,"onUpdate:modelValue":t[4]||(t[4]=g=>e._shCM=g),width:"50%",height:"80%",scrollable:!0},{default:l(()=>[o(u)]),_:1},8,["modelValue"])],64)}const bt=ie(gt,[["render",ht],["__scopeId","data-v-b00c2471"]]),Vt=le({name:"SalesConfirmationClientDetails",components:{SalesProposalForm:tt,ObserversForm:Ee,CompanionForm:Ue,SalesClientSafariExtrasForm:Te,AccommodationForm:dt,ChartersPriceForm:bt},props:{item:{type:Object,required:!0}},setup(){const{init:e}=ue(),t=C(null),m=C(null),n=C(null);return{observerScollRef:t,companionsScollRef:m,safariExtrasRef:n,scrollTo:S=>{console.log("Scroll View:",S),console.log("Section Ref El:",t.value),S?S.scrollIntoView({behavior:"smooth"}):console.error("View is null or undefined")},init:e}},data(){const e=C(),{isValid:t,validate:m,resetValidation:n,reset:y}=ne(e),S=X({id:null,package_id:null,airport:null,departure:null,charters:null,arrival:null,hotel_booking:null});return{isValidForm:t,validateForm:m,resetValidationForm:n,resetForm:y,formRef:e,form:S,searchText:""}},computed:{...me(R,["observers","companions","clientSafariExtras","accommodations","chartersPrices"]),...ae(R,{_shM:"showSafariExtrasModal"}),...ae(R,{_shAM:"showAccommodationModal"}),...ae(R,{_shCM:"showChartersPriceModal"}),logo(){return E().logo}},mounted(){this.getObservers(this.item.id),this.getCompanions(this.item.id),this.getClienSafariExtras(this.item.id),this.getAccommodation(this.item.id),this.getChartersPrice(this.item.id)},methods:{...w(R,["getObservers","getCompanions"]),...w(R,["createsafariExtras","getClienSafariExtras","getAccommodation","getChartersPrice"]),formatDate(e){return e?new Date(e).toLocaleDateString():"Not provided"},formatCurrency(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat(e)||0)},getContactIcon(e){return{email:"email",phone_number:"phone",phone:"phone",address:"home"}[e]||"info"},safeArray(e){return e||[]},safeString(e,t="Not provided"){return e||t},gotBack(){},getOrsearchSalesInquiry(){},_showSafariExtrasModal(){this._shM=!0},_showAccommodationModal(){this._shAM=!0},_showChartersPriceModal(){this._shCM=!0}}}),_t={class:"flex justify-between items-center mb-6"},vt={class:"flex items-center gap-3"},St={class:"flex gap-2"},kt={class:"p-4 bg-gray-100 rounded-lg shadow-md overflow-y-auto"},It={class:"flex justify-between items-start"},qt={class:"text-2xl font-bold text-gray-800"},Ct={class:"text-gray-600"},$t={class:"flex items-center gap-2 mb-3"},Pt={class:"grid grid-cols-2 gap-3"},wt={class:"font-semibold"},Ft={class:"font-semibold"},At={class:"font-semibold"},Lt={class:"space-y-2"},Dt={class:"flex items-center gap-2 mb-3"},Tt={class:"grid grid-cols-2 gap-3"},Ut={class:"font-semibold"},Et={class:"font-semibold"},Nt={class:"font-semibold"},Ot={class:"font-semibold"},Bt={class:"font-semibold"},Mt={class:"font-semibold"},Rt={class:"font-semibold"},jt={class:"flex items-center gap-2 mb-3"},zt={class:"grid grid-cols-2 gap-4 mb-4"},Ht={class:"col-span-2 p-3 bg-green-50 rounded-lg"},Qt={class:"text-2xl font-bold text-green-600"},Gt={class:"font-semibold"},Yt={class:"font-semibold"},Wt={class:"font-semibold"},Jt={class:"font-semibold text-xs"},Zt={class:"flex items-center gap-2 mb-3"},Kt={key:0,class:"mb-4"},Xt={class:"flex flex-wrap gap-2"},xt={key:1},es={class:"flex items-center gap-2 mb-3"},ts={class:"text-lg font-bold"},ss={class:"custom-grabber"},os={class:"p-6"},as={ref:"observerScollRef"},ns={ref:"companionsScollRef"};function ls(e,t,m,n,y,S){var W,pe,Q;const c=i("VaBadge"),v=i("VaButton"),h=i("VaCardContent"),V=i("VaCard"),u=i("VaIcon"),_=i("VaDivider"),g=i("VaChip"),r=i("VaDataTable"),d=i("SalesProposalForm"),N=i("ObserversForm"),O=i("CompanionForm"),Z=i("VaSplit"),x=i("SalesClientSafariExtrasForm"),H=i("VaModal"),K=i("AccommodationForm"),D=i("ChartersPriceForm");return f(),I(L,null,[s("div",_t,[s("div",vt,[o(c,{text:((W=e.item)==null?void 0:W.inquiry_type)==="standard"?"Standard Package":"Custom Package",color:((pe=e.item)==null?void 0:pe.inquiry_type)==="standard"?"success":"info"},null,8,["text","color"]),o(c,{text:(Q=e.item)==null?void 0:Q.code,color:"primary"},null,8,["text"])]),s("div",St,[o(v,{preset:"primary",class:"mr-2 mb-2",round:"",icon:"add",size:"small",onClick:t[0]||(t[0]=F=>e._showChartersPriceModal())},{default:l(()=>t[8]||(t[8]=[$(" Add Charters Costs ")])),_:1}),o(v,{preset:"primary",class:"mr-2 mb-2",round:"",icon:"add",size:"small",onClick:t[1]||(t[1]=F=>e._showAccommodationModal())},{default:l(()=>t[9]||(t[9]=[$(" Add accommodation ")])),_:1}),o(v,{preset:"primary",class:"mr-2 mb-2",round:"",icon:"add",size:"small",onClick:t[2]||(t[2]=F=>e._showSafariExtrasModal())},{default:l(()=>t[10]||(t[10]=[$(" Add Safari Extras Services ")])),_:1}),o(v,{preset:"primary",class:"mr-2 mb-2",round:"",icon:"arrow_downward",size:"small",onClick:t[3]||(t[3]=F=>e.scrollTo(e.observerScollRef))},{default:l(()=>t[11]||(t[11]=[$(" Add Observers ")])),_:1}),o(v,{preset:"primary",class:"mr-2 mb-2",round:"",icon:"arrow_downward",size:"small",onClick:t[4]||(t[4]=F=>e.scrollTo(e.companionsScollRef))},{default:l(()=>t[12]||(t[12]=[$(" Add Companions ")])),_:1})])]),o(Z,{class:"split-demo h-[40rem]",limits:[["30px","20rem"],[5,"any"]]},{start:l(()=>{var F,re,G,ee,de;return[s("div",kt,[o(V,{class:"mb-4"},{default:l(()=>[o(h,null,{default:l(()=>{var k,a,b,q;return[s("div",It,[s("div",null,[s("h2",qt,p((k=e.item)==null?void 0:k.code),1),s("p",Ct,"Created: "+p(e.formatDate((a=e.item)==null?void 0:a.create_date)),1)]),o(c,{text:(q=(b=e.item)==null?void 0:b.season)==null?void 0:q.name,color:"primary",large:""},null,8,["text"])])]}),_:1})]),_:1}),o(V,{class:"mb-4"},{default:l(()=>[o(h,null,{default:l(()=>{var k,a,b,q,A,T,B,M,j;return[s("div",$t,[o(u,{name:"person",color:"primary"}),t[13]||(t[13]=s("h3",{class:"text-lg font-bold"},"Client Information",-1))]),s("div",Pt,[s("div",null,[t[14]||(t[14]=s("p",{class:"text-sm text-gray-600"},"Full Name",-1)),s("p",wt,p(e.safeString((a=(k=e.item)==null?void 0:k.entity)==null?void 0:a.full_name)),1)]),s("div",null,[t[15]||(t[15]=s("p",{class:"text-sm text-gray-600"},"Nationality",-1)),s("p",Ft,p(e.safeString((A=(q=(b=e.item)==null?void 0:b.entity)==null?void 0:q.nationality)==null?void 0:A.name)),1)]),s("div",null,[t[16]||(t[16]=s("p",{class:"text-sm text-gray-600"},"Country",-1)),s("p",At,p(e.safeString((M=(B=(T=e.item)==null?void 0:T.entity)==null?void 0:B.country)==null?void 0:M.name)),1)])]),o(_,{class:"my-3"}),t[17]||(t[17]=s("h4",{class:"font-semibold mb-2"},"Contacts",-1)),s("div",Lt,[(f(!0),I(L,null,oe(e.safeArray((j=e.item.entity)==null?void 0:j.contacts),(z,J)=>{var Y;return f(),I("div",{key:J,class:"flex items-center gap-2"},[o(u,{name:e.getContactIcon((Y=z.contact_type)==null?void 0:Y.name),size:"small",color:"info"},null,8,["name"]),s("span",null,p(z.contact),1)])}),128))])]}),_:1})]),_:1}),o(V,{class:"mb-4"},{default:l(()=>[o(h,null,{default:l(()=>{var k,a,b,q,A,T,B,M,j,z,J,Y,te,se;return[s("div",Dt,[o(u,{name:"event",color:"primary"}),t[18]||(t[18]=s("h3",{class:"text-lg font-bold"},"Hunting Preferences",-1))]),s("div",Tt,[s("div",null,[t[19]||(t[19]=s("p",{class:"text-sm text-gray-600"},"Preferred Date",-1)),s("p",Ut,p(e.formatDate((a=(k=e.item)==null?void 0:k.formatted_preferences)==null?void 0:a.preferred_date)),1)]),s("div",null,[t[20]||(t[20]=s("p",{class:"text-sm text-gray-600"},"Start Date",-1)),s("p",Et,p(e.formatDate((q=(b=e.item)==null?void 0:b.formatted_preferences)==null?void 0:q.start_date)),1)]),s("div",null,[t[21]||(t[21]=s("p",{class:"text-sm text-gray-600"},"End Date",-1)),s("p",Nt,p(e.formatDate((T=(A=e.item)==null?void 0:A.formatted_preferences)==null?void 0:T.end_date)),1)]),s("div",null,[t[22]||(t[22]=s("p",{class:"text-sm text-gray-600"},"Duration",-1)),s("p",Ot,p(((M=(B=e.item)==null?void 0:B.formatted_preferences)==null?void 0:M.no_of_days)||"N/A")+" days",1)]),s("div",null,[t[23]||(t[23]=s("p",{class:"text-sm text-gray-600"},"Hunters",-1)),s("p",Bt,p((z=(j=e.item)==null?void 0:j.formatted_preferences)==null?void 0:z.no_of_hunters),1)]),s("div",null,[t[24]||(t[24]=s("p",{class:"text-sm text-gray-600"},"Companions",-1)),s("p",Mt,p((Y=(J=e.item)==null?void 0:J.formatted_preferences)==null?void 0:Y.no_of_companions),1)]),s("div",null,[t[25]||(t[25]=s("p",{class:"text-sm text-gray-600"},"Observers",-1)),s("p",Rt,p((se=(te=e.item)==null?void 0:te.formatted_preferences)==null?void 0:se.no_of_observers),1)])])]}),_:1})]),_:1}),((F=e.item)==null?void 0:F.inquiry_type)==="standard"&&((re=e.item)!=null&&re.package_details)?(f(),U(V,{key:0,class:"mb-4"},{default:l(()=>[o(h,null,{default:l(()=>{var k,a,b,q,A,T,B,M,j,z,J,Y,te,se;return[s("div",jt,[o(u,{name:"inventory_2",color:"success"}),t[26]||(t[26]=s("h3",{class:"text-lg font-bold"},"Standard Package Details",-1))]),s("div",zt,[s("div",Ht,[t[27]||(t[27]=s("p",{class:"text-sm text-gray-600"},"Package Amount",-1)),s("p",Qt,p((a=(k=e.item)==null?void 0:k.package_details)==null?void 0:a.currency_name)+" "+p(e.formatCurrency((q=(b=e.item)==null?void 0:b.package_details)==null?void 0:q.amount)),1)]),s("div",null,[t[28]||(t[28]=s("p",{class:"text-sm text-gray-600"},"Hunting Area",-1)),s("p",Gt,p((T=(A=e.item)==null?void 0:A.package_details)==null?void 0:T.area_name),1)]),s("div",null,[t[29]||(t[29]=s("p",{class:"text-sm text-gray-600"},"Hunting Type",-1)),s("p",Yt,p((M=(B=e.item)==null?void 0:B.package_details)==null?void 0:M.hunting_type_name),1)]),s("div",null,[t[30]||(t[30]=s("p",{class:"text-sm text-gray-600"},"Duration",-1)),s("p",Wt,p((z=(j=e.item)==null?void 0:j.package_details)==null?void 0:z.duration)+" days",1)]),s("div",null,[t[31]||(t[31]=s("p",{class:"text-sm text-gray-600"},"Package Period",-1)),s("p",Jt,p(e.formatDate((Y=(J=e.item)==null?void 0:J.package_details)==null?void 0:Y.start_date))+" - "+p(e.formatDate((se=(te=e.item)==null?void 0:te.package_details)==null?void 0:se.end_date)),1)])])]}),_:1})]),_:1})):P("",!0),((G=e.item)==null?void 0:G.inquiry_type)==="custom"&&((ee=e.item)!=null&&ee.custom_details)?(f(),U(V,{key:1,class:"mb-4"},{default:l(()=>[o(h,null,{default:l(()=>{var k,a,b,q,A,T,B,M;return[s("div",Zt,[o(u,{name:"tune",color:"info"}),t[32]||(t[32]=s("h3",{class:"text-lg font-bold"},"Custom Package Details",-1))]),e.safeArray((a=(k=e.item)==null?void 0:k.custom_details)==null?void 0:a.areas).length>0?(f(),I("div",Kt,[t[33]||(t[33]=s("h4",{class:"font-semibold mb-2"},"Hunting Areas",-1)),s("div",Xt,[(f(!0),I(L,null,oe((q=(b=e.item)==null?void 0:b.custom_details)==null?void 0:q.areas,(j,z)=>(f(),U(g,{key:z,color:"info"},{default:l(()=>[$(p(j.area_name),1)]),_:2},1024))),128))])])):P("",!0),e.safeArray((T=(A=e.item)==null?void 0:A.custom_details)==null?void 0:T.species).length>0?(f(),I("div",xt,[t[34]||(t[34]=s("h4",{class:"font-semibold mb-2"},"Requested Species",-1)),o(r,{items:(M=(B=e.item)==null?void 0:B.custom_details)==null?void 0:M.species,columns:[{key:"species_name",label:"Species",sortable:!0},{key:"quantity",label:"Quantity",sortable:!0}]},null,8,["items"])])):P("",!0)]}),_:1})]),_:1})):P("",!0),e.safeArray((de=e.item)==null?void 0:de.species).length>0?(f(),U(V,{key:2,class:"mb-4"},{default:l(()=>[o(h,null,{default:l(()=>{var k,a;return[s("div",es,[o(u,{name:"pets",color:"warning"}),s("h3",ts,p(((k=e.item)==null?void 0:k.inquiry_type)==="custom"?"Additional Species":"Package Species"),1)]),o(r,{items:(a=e.item)==null?void 0:a.species.map(b=>{var q,A;return{species_name:(q=b.species)==null?void 0:q.name,scientific_name:(A=b.species)==null?void 0:A.scientific_name,quantity:b.quantity}}),columns:[{key:"species_name",label:"Species",sortable:!0},{key:"scientific_name",label:"Scientific Name",sortable:!0},{key:"quantity",label:"Quantity",sortable:!0}]},null,8,["items"])]}),_:1})]),_:1})):P("",!0)])]}),grabber:l(()=>[s("div",ss,[o(u,{name:"swap_horiz"})])]),end:l(()=>[s("div",os,[o(d,{item:e.item},null,8,["item"])]),s("section",as,[o(N,{"sales-inquiry-id":e.item.id},null,8,["sales-inquiry-id"])],512),s("section",ns,[o(O,{"sales-inquiry-id":e.item.id},null,8,["sales-inquiry-id"])],512)]),_:1}),o(H,{modelValue:e._shM,"onUpdate:modelValue":t[5]||(t[5]=F=>e._shM=F),width:"60%",height:"80%"},{default:l(()=>[o(x,{"table-selectable":!0,item:e.item},null,8,["item"])]),_:1},8,["modelValue"]),o(H,{modelValue:e._shAM,"onUpdate:modelValue":t[6]||(t[6]=F=>e._shAM=F),width:"60%",height:"80%"},{default:l(()=>[o(K,{item:e.item},null,8,["item"])]),_:1},8,["modelValue"]),o(H,{modelValue:e._shCM,"onUpdate:modelValue":t[7]||(t[7]=F=>e._shCM=F),width:"60%",height:"80%"},{default:l(()=>[o(D,{item:e.item},null,8,["item"])]),_:1},8,["modelValue"])],64)}const is=ie(Vt,[["render",ls],["__scopeId","data-v-1f41d1a1"]]),rs=le({components:{Salesinquirieslist:ze,VaForm:we,VaInput:Pe,VaSelect:$e,VaButton:Ce,SalesInquiryDetails:is},setup(){const e=C(),t=C(),m=C(!1),n=C("add"),{isValid:y,validate:S,resetValidation:c,reset:v}=ne(e),{isValid:h,validate:V,resetValidation:u,reset:_}=ne(t),{init:g}=ue(),r=C(!1),d=C("standard"),N=X({id:null,full_name:"",nick_name:"",country:null,nationality:null,category:null,email:"",phone:"",address:"",no_of_hunters:1,no_of_observers:0,priceListId:null,no_of_days:0,no_of_companions:0,species:null,quantity:0,area:null,season:null,preferred_date:null,start_date:null,end_date:null}),O=X({id:null,client_id:null,contact:"",contact_type:null,contactable:!1}),Z=()=>{m.value=!0},x=()=>{m.value=!1,r.value=!1},H=C([]),K=C([]),D=C([]),W=C([]),pe=C([]),Q=C(0),F=async()=>{const k={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/countries",headers:{"Content-Type":"application/json"}},a=await ge.request(k);a.status===200&&H.value.push(...a.data.map(b=>({value:b.id,text:b.name})))},re=async()=>{try{const k={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/entity-categories-vset/"},a=await ge.request(k);a.status===200&&D.value.push(...a.data.map(b=>({value:b.id,text:b.name})))}catch{console.warn("Categories endpoint not available")}},G=async()=>{const k={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/nationalities",headers:{"Content-Type":"application/json"}},a=await ge.request(k);a.status===200&&K.value.push(...a.data.map(b=>({value:b.id,text:b.name})))},ee=async()=>{try{const k={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/contact-types/",headers:{"Content-Type":"application/json"}},a=await ge.request(k);a.status===200&&W.value.push(...a.data.map(b=>({value:b.id,text:b.name})))}catch{console.warn("Contact types endpoint not available")}},de=Fe(()=>{var b;let k="";const a=(b=O.contact_type)==null?void 0:b.value;return a==="email"?k="email":a==="phone_number"?k="phone":k="",k});return Ae(()=>{F(),re(),G(),ee()}),{formRef:e,contactFormRef:t,showAddSalesInquiriesForm:m,btnIcon:n,form:N,contactForm:O,showDetailsPage:r,countries:H,nationality:K,categoryOptions:D,contactsTypes:W,clients:pe,step:Q,packageSelectionType:d,init:g,toggleAddSalesInquiriesForm:Z,isValidForm:y,validateForm:S,resetValidationForm:c,resetForm:v,isValidContactForm:h,validateContactForm:V,resetValidationContactForm:u,resetContactForm:_,validators:Le,getCountries:F,getCategories:re,getNationalities:G,getContactTypes:ee,contactFieldType:de,gotBack:x}},data(){return{speciesOptions:[],speciesObjects:[],areasOptions:[],seasonsOptions:[],selectedInquiryItem:null,downloadPdf:Ne,saving:!1,packagesOptions:[],originalQuantities:X({})}},computed:{...me(E,["logo","salesPackagesSpecies"]),speciesList(){return this.salesPackagesSpecies}},mounted(){this.getSpecies(),this.getAreas(),this.getSeasonList(),this.getPL()},methods:{...w(ye,["getSpeciesList"]),...w(ye,["getAreaList"]),...w(ye,["getAllSpeciesPerQuotaPerArea"]),...w(R,["createSalesInquiry"]),...w(E,["getSeasons","getSalespackagesSpecies"]),...w(Ie,["getPriceList","getPriceListById"]),async submit(){var S,c,v,h,V;if(this.saving=!0,!this.form.full_name||!this.form.country||!this.form.nationality||!this.form.email){this.init({message:"Please fill in all required fields (Name, Country, Nationality, Email).",color:"warning"}),this.saving=!1;return}if(this.packageSelectionType==="standard"){if(!this.form.priceListId){this.init({message:"Please select a standard price list.",color:"warning"}),this.saving=!1;return}}else if(this.packageSelectionType==="custom"&&this.speciesObjects.length===0){this.init({message:"Please add at least one species for custom package.",color:"warning"}),this.saving=!1;return}if(this.form.no_of_hunters<=0){this.init({message:"Number of hunters must be greater than zero.",color:"warning"}),this.saving=!1;return}const e={full_name:this.form.full_name,country_id:(S=this.form.country)==null?void 0:S.value,nationality_id:(c=this.form.nationality)==null?void 0:c.value},t=[{contact_type_id:1,contact:this.form.email,contactable:!0},{contact_type_id:2,contact:this.form.phone,contactable:!0},{contact_type_id:3,contact:this.form.address,contactable:!1}];let m=[];this.packageSelectionType==="custom"&&(m=this.speciesObjects);const n={preferred_date:this.form.preferred_date,start_date:this.form.start_date,end_date:this.form.end_date,no_of_observers:this.form.no_of_observers||0,no_of_companions:this.form.no_of_companions||0,no_of_hunters:this.packageSelectionType==="standard"?this.form.no_of_companions:this.form.no_of_hunters,no_of_days:this.packageSelectionType==="standard"?null:this.form.no_of_days},y={entity:e,contacts:t,inquiry_type:this.packageSelectionType,preferences:n};this.packageSelectionType==="standard"?(y.price_list_id=(v=this.form.priceListId)==null?void 0:v.value,y.season_id=6):(y.species=m,y.area_id=(h=this.form.area)==null?void 0:h.value,y.season_id=((V=this.form.season)==null?void 0:V.value)||null),console.log("Request payload:",JSON.stringify(y,null,2));try{const u=await this.createSalesInquiry(y);u.status===201&&(this.saving=!1,this.init({message:u.data.message,color:"success"}),this.resetForm(),this.resetValidationContactForm(),this.speciesObjects=[])}catch(u){if(this.saving=!1,console.error("Error creating sales inquiry:",u),u.response){const _=ce(u.response);this.init({message:`
`+_.map((g,r)=>`${r+1}. ${g}`).join(`
`),color:"danger"})}else u.request?this.init({message:"No response from server. Please check your network connection.",color:"danger"}):this.init({message:u.message||"An unexpected error occurred",color:"danger"})}},viewInquiries(e){this.showDetailsPage=!0,this.selectedInquiryItem=e.selfitem},addNewSpeciesItemToStorage(){if(!this.form.species||!this.form.quantity){this.init({message:"Please fill all required fields.",color:"warning"});return}if(Number(this.form.quantity)<=0){this.init({message:"Quantity must be greater than zero.",color:"warning"});return}this.speciesObjects.some(t=>t.species_id===this.form.species.value)?console.log("Species item already exists:",this.form.species.value):this.speciesObjects.push({species_id:this.form.species.value,name:this.form.species.text,quantity:this.form.quantity})},deleteFromStorage(e){this.speciesObjects.splice(e,1),console.log("Species item deleted:",e)},async getSpecies(){try{const e=await this.getSpeciesList();e.status===200&&(this.speciesOptions=e.data.map(t=>({value:t.id,text:t.name})))}catch(e){console.error("Error loading species:",e)}},async getAreas(){try{const e=await this.getAreaList();this.areasOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getSeasonList(){try{const e=await this.getSeasons();this.seasonsOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getPL(){const e=await this.getPriceList();e.status===200?(this.packagesOptions=e.data.data.map(t=>({value:t.id,text:t.package_name||`Package ${t.id}`,selfItem:t})),console.log("packagesOptions:",this.packagesOptions)):console.log("Error getting price list")},async populateSpeciesList(){var t,m,n,y,S,c;const e=E();if(!this.form.priceListId||!this.form.priceListId.value){e.salesPackagesSpecies=[];return}try{const v=await this.getPriceListById(this.form.priceListId.value);if(console.log("Price list detail response:",v),v.status===200&&v.data.success){const h=v.data.data;if(this.form.priceListId.selfItem=h,this.packageSelectionType==="standard"){if((m=(t=h.sales_package)==null?void 0:t.area)!=null&&m.name){const V=this.areasOptions.find(u=>u.text===h.sales_package.area.name);V&&(this.form.area=V)}if((n=h.price_list_type)!=null&&n.duration&&(this.form.no_of_days=h.price_list_type.duration),(S=(y=h.price_list_type)==null?void 0:y.price_list)!=null&&S.start_date){const V=new Date(h.price_list_type.price_list.start_date),u=this.seasonsOptions.find(_=>{var g;return(g=_.selfItem)!=null&&g.start_date?new Date(_.selfItem.start_date).getFullYear()===V.getFullYear():!1});u&&(this.form.season=u)}}if((c=h.sales_package)!=null&&c.species&&Array.isArray(h.sales_package.species)){const V=h.sales_package.species.map(u=>{var _,g,r;return{id:((_=u.species)==null?void 0:_.id)||u.id,name:((g=u.species)==null?void 0:g.name)||u.name||"Unknown",scientific_name:((r=u.species)==null?void 0:r.scientific_name)||u.scientific_name||"N/A",quantity:u.quantity||0,requested_quantity:0}});e.salesPackagesSpecies=V,console.log("Populated species:",V),this.init({message:`Loaded ${V.length} species from the selected package.`,color:"success",position:"bottom-right"})}else console.log("No species array found. Response structure:",h.sales_package),e.salesPackagesSpecies=[],this.init({message:"No species found in the selected package.",color:"warning",position:"bottom-right"})}}catch(v){console.error("Error fetching price list details:",v),this.init({message:"Failed to load package details. Please try again.",color:"danger",position:"bottom-right"}),e.salesPackagesSpecies=[]}},onChange(e,t){console.log("Quantity changed:",e,t);const m=this.salesPackagesSpecies.find(n=>n.id===e);m&&(m.requested_quantity=t,this.salesPackagesSpecies=[...this.salesPackagesSpecies],t>m.quantity?this.init({message:`Warning: Requested quantity (${t}) exceeds available quantity (${m.quantity}) for ${m.name}.`,color:"warning",position:"bottom-right"}):t>0&&this.init({message:`Quantity for ${m.name} has been set to ${t}.`,color:"success",position:"bottom-right"}))},onPackageTypeChange(){const e=E();this.packageSelectionType==="standard"?(this.form.priceListId=null,this.salesPackagesSpecies.forEach(t=>{t.requested_quantity=0})):(this.form.priceListId=null,this.form.area=null,this.form.no_of_days=0,this.form.season=null,e.salesPackagesSpecies=[],this.speciesObjects=[])},formatDateRange(e,t){if(!e||!t)return"N/A";const m=new Date(e),n=new Date(t),y=m.toLocaleDateString("en-US",{month:"short",year:"numeric"}),S=n.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${y} - ${S}`},formatCurrency(e){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):"$0.00"},formatChargesPer(e){return e?e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):""},getSequenceLabel(e){return{1:"1st",2:"2nd",3:"3rd"}[e]||`${e}th`}}}),ds={class:"flex flex-col md:flex-row gap-3 mb-6 justify-between items-center py-4 px-2 bg-gray-50 rounded-lg"},ms={class:"flex flex-col md:flex-row gap-3 justify-start"},us={class:"p-6 bg-white rounded-lg"},ps={class:"mb-6"},cs={class:"flex items-center gap-2 mb-4"},fs={class:"flex gap-6 mb-4"},gs={key:0,class:"grid grid-cols-1 gap-4 mb-4"},ys={key:0,class:"flex flex-col"},hs={class:"font-semibold"},bs={class:"text-sm text-gray-500"},Vs={class:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm"},_s={class:"ml-1 font-medium"},vs={class:"ml-1 font-medium"},Ss={class:"ml-1 font-medium"},ks={class:"ml-1 font-medium"},Is={key:0,class:"mt-3 pt-3 border-t"},qs={class:"flex flex-wrap gap-1"},Cs={key:1,class:"mt-2"},$s={class:"ml-1 text-xs font-medium"},Ps={key:2,class:"mt-1"},ws={class:"ml-1 text-xs font-medium"},Fs={class:"va-table-responsive"},As={class:"va-table va-table--striped"},Ls={class:"font-medium"},Ds={class:"text-sm text-gray-600"},Ts={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},Us={class:"flex justify-between items-start"},Es={class:"flex-1"},Ns={class:"font-semibold text-base capitalize"},Os={class:"text-xs text-gray-600 mt-1"},Bs={class:"mt-2 flex items-center gap-2"},Ms={class:"text-xs text-gray-500"},Rs={class:"va-table-responsive"},js={class:"va-table va-table--striped"},zs={class:"font-medium"},Hs={class:"text-sm text-gray-600"},Qs={class:"font-semibold"},Gs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ys={key:0,class:"p-4 bg-blue-50 rounded-lg"},Ws={class:"flex items-center gap-2 mb-2"},Js={class:"text-2xl font-bold text-primary"},Zs={key:1,class:"p-4 bg-green-50 rounded-lg"},Ks={class:"flex items-center gap-2 mb-2"},Xs={class:"text-2xl font-bold text-success"},xs={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},eo={class:"flex items-end"},to={class:"mt-4"},so={class:"font-semibold"},oo={class:"ml-3 text-sm text-gray-600"},ao={class:"mb-6"},no={class:"flex items-center gap-2 mb-4"},lo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},io={class:"mb-6"},ro={class:"flex items-center gap-2 mb-4"},mo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},uo={class:"mb-6"},po={class:"flex items-center gap-2 mb-4"},co={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},fo={class:"mb-6"},go={class:"flex items-center gap-2 mb-4"},yo={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ho={class:"flex justify-end gap-3 p-4"};function bo(e,t,m,n,y,S){const c=i("VaButton"),v=i("VaButtonGroup"),h=i("SalesInquiryDetails"),V=i("Salesinquirieslist"),u=i("VaIcon"),_=i("VaRadio"),g=i("VaSelect"),r=i("VaCardTitle"),d=i("VaBadge"),N=i("VaCardContent"),O=i("VaCard"),Z=i("VaAlert"),x=i("VaCounter"),H=i("VaDivider"),K=i("VaListItemLabel"),D=i("VaListItemSection"),W=i("VaListItem"),pe=i("VaList"),Q=i("VaInput"),F=i("VaDateInput"),re=i("VaForm");return f(),U(O,{class:"w-full"},{default:l(()=>[o(N,null,{default:l(()=>[s("div",ds,[s("div",ms,[e.showAddSalesInquiriesForm||e.showDetailsPage?(f(),U(c,{key:0,class:"px-6",icon:"arrow_back",size:"large",onClick:t[0]||(t[0]=G=>e.gotBack())},{default:l(()=>t[25]||(t[25]=[$(" Go Back ")])),_:1})):P("",!0)]),!e.showAddSalesInquiriesForm&&!e.showDetailsPage?(f(),U(v,{key:0},{default:l(()=>[o(c,{class:"px-6",color:"primary",label:"Add New Quota",round:"",present:"secondary","border-color":"primary",icon:"add",size:"large",onClick:t[1]||(t[1]=G=>e.toggleAddSalesInquiriesForm())},{default:l(()=>t[26]||(t[26]=[$("Create Enquiry")])),_:1})]),_:1})):P("",!0)]),e.showDetailsPage?(f(),U(h,{key:0,item:e.selectedInquiryItem},null,8,["item"])):(f(),I(L,{key:1},[e.showAddSalesInquiriesForm?(f(),U(re,{key:1,ref:"formRef",class:"space-y-6"},{default:l(()=>{var G,ee,de,k;return[s("div",us,[s("div",ps,[s("div",cs,[o(u,{name:"inventory_2",color:"primary",size:"large"}),t[27]||(t[27]=s("h3",{class:"text-xl font-bold text-gray-800"},"Package Selection",-1))]),s("div",fs,[o(_,{modelValue:e.packageSelectionType,"onUpdate:modelValue":[t[3]||(t[3]=a=>e.packageSelectionType=a),e.onPackageTypeChange],option:"standard",label:"Use Standard Package"},null,8,["modelValue","onUpdate:modelValue"]),o(_,{modelValue:e.packageSelectionType,"onUpdate:modelValue":[t[4]||(t[4]=a=>e.packageSelectionType=a),e.onPackageTypeChange],option:"custom",label:"Create Custom Package"},null,8,["modelValue","onUpdate:modelValue"])]),e.packageSelectionType==="standard"?(f(),I("div",gs,[o(g,{modelValue:e.form.priceListId,"onUpdate:modelValue":[t[5]||(t[5]=a=>e.form.priceListId=a),e.populateSpeciesList],placeholder:"Select Standard Price List",label:"Sales Package",rules:[a=>a||"Price List is required"],options:e.packagesOptions,searchable:"","highlight-matched-text":""},{content:l(({value:a})=>{var b,q,A,T;return[a?(f(),I("div",ys,[s("span",hs,p(a.text),1),s("span",bs,p(((b=a.selfItem)==null?void 0:b.area)||((q=a.selfItem)==null?void 0:q.area_package)||"N/A")+"  "+p(((A=a.selfItem)==null?void 0:A.hunting_type)||"N/A")+"  "+p(((T=a.selfItem)==null?void 0:T.duration)||0)+" days ",1)])):P("",!0)]}),_:1},8,["modelValue","rules","options","onUpdate:modelValue"]),e.form.priceListId&&e.form.priceListId.selfItem?(f(),U(O,{key:0,outlined:"",class:"mb-4"},{default:l(()=>[o(r,{class:"text-sm font-semibold"},{default:l(()=>t[28]||(t[28]=[$("Package Details")])),_:1}),o(N,null,{default:l(()=>{var a,b,q,A,T,B,M,j,z,J,Y,te,se,he,be,Ve,_e;return[s("div",Vs,[s("div",null,[t[29]||(t[29]=s("span",{class:"text-gray-600"},"Area:",-1)),s("span",_s,p(((a=e.form.priceListId.selfItem)==null?void 0:a.area)||((A=(q=(b=e.form.priceListId.selfItem)==null?void 0:b.sales_package)==null?void 0:q.area)==null?void 0:A.name)||"N/A"),1)]),s("div",null,[t[30]||(t[30]=s("span",{class:"text-gray-600"},"Hunting Type:",-1)),s("span",vs,p(((T=e.form.priceListId.selfItem)==null?void 0:T.hunting_type)||((j=(M=(B=e.form.priceListId.selfItem)==null?void 0:B.price_list_type)==null?void 0:M.hunting_type)==null?void 0:j.name)||"N/A"),1)]),s("div",null,[t[31]||(t[31]=s("span",{class:"text-gray-600"},"Duration:",-1)),s("span",Ss,p(((z=e.form.priceListId.selfItem)==null?void 0:z.duration)||((Y=(J=e.form.priceListId.selfItem)==null?void 0:J.price_list_type)==null?void 0:Y.duration)||0)+" days",1)]),s("div",null,[t[32]||(t[32]=s("span",{class:"text-gray-600"},"Base Amount:",-1)),s("span",ks,p(((te=e.form.priceListId.selfItem)==null?void 0:te.amount)||e.formatCurrency((he=(se=e.form.priceListId.selfItem)==null?void 0:se.price_list_type)==null?void 0:he.amount)),1)])]),(be=e.form.priceListId.selfItem)!=null&&be.safari_extras?(f(),I("div",Is,[t[33]||(t[33]=s("div",{class:"text-xs font-semibold text-gray-700 mb-2"},"Safari Extras Available:",-1)),s("div",qs,[(f(!0),I(L,null,oe(e.form.priceListId.selfItem.safari_extras,fe=>{var ve;return f(),U(d,{key:fe.id,text:`${fe.name} (${(ve=fe.currency)==null?void 0:ve.symbol}${fe.amount})`,color:"info",size:"small"},null,8,["text"])}),128))])])):P("",!0),(Ve=e.form.priceListId.selfItem)!=null&&Ve.componions_hunter&&e.form.priceListId.selfItem.componions_hunter.length>0?(f(),I("div",Cs,[t[34]||(t[34]=s("span",{class:"text-xs text-gray-600"},"Companion Rate:",-1)),s("span",$s,"$"+p(e.form.priceListId.selfItem.componions_hunter[0].amount),1)])):P("",!0),(_e=e.form.priceListId.selfItem)!=null&&_e.observer&&e.form.priceListId.selfItem.observer.length>0?(f(),I("div",Ps,[t[35]||(t[35]=s("span",{class:"text-xs text-gray-600"},"Observer Rate:",-1)),s("span",ws,"$"+p(e.form.priceListId.selfItem.observer[0].amount),1)])):P("",!0)]}),_:1})]),_:1})):P("",!0)])):e.packageSelectionType==="custom"?(f(),U(Z,{key:1,color:"info",class:"mb-4"},{title:l(()=>t[36]||(t[36]=[$("Custom Package")])),default:l(()=>[t[37]||(t[37]=$(" You can create a custom package by selecting species and quantities below. This will create a unique price list for this inquiry. "))]),_:1})):P("",!0),t[51]||(t[51]=s("h3",{class:"font-bold text-lg mb-2 mt-4"},"Species Included in Package",-1)),e.packageSelectionType==="standard"&&e.salesPackagesSpecies.length>0?(f(),I(L,{key:2},[o(O,{outlined:"",class:"mb-4"},{default:l(()=>[o(N,null,{default:l(()=>[s("div",Fs,[s("table",As,[t[38]||(t[38]=s("thead",null,[s("tr",null,[s("th",null,"Species Name"),s("th",null,"Scientific Name"),s("th",null,"Quantity")])],-1)),s("tbody",null,[(f(!0),I(L,null,oe(e.salesPackagesSpecies,a=>(f(),I("tr",{key:a.id},[s("td",Ls,p(a.name),1),s("td",Ds,p(a.scientific_name||"N/A"),1),s("td",null,[o(d,{color:a.quantity>0?"success":"danger",size:"medium"},{default:l(()=>[$(p(a.quantity),1)]),_:2},1032,["color"])])]))),128))])])])]),_:1})]),_:1}),(G=e.form.priceListId.selfItem)!=null&&G.safari_extras&&e.form.priceListId.selfItem.safari_extras.length>0?(f(),I(L,{key:0},[t[39]||(t[39]=s("h3",{class:"font-bold text-lg mb-2 mt-4"},"Safari Extras",-1)),o(O,{outlined:"",class:"mb-4"},{default:l(()=>[o(N,null,{default:l(()=>[s("div",Ts,[(f(!0),I(L,null,oe(e.form.priceListId.selfItem.safari_extras,a=>(f(),I("div",{key:a.id,class:"p-3 border rounded-lg hover:shadow-md transition-shadow"},[s("div",Us,[s("div",Es,[s("div",Ns,p(a.name),1),s("div",Os,p(a.description),1),s("div",Bs,[o(d,{color:"primary",size:"small"},{default:l(()=>{var b;return[$(p((b=a.currency)==null?void 0:b.symbol)+p(a.amount),1)]}),_:2},1024),s("span",Ms,p(e.formatChargesPer(a.charges_per)),1)])])])]))),128))])]),_:1})]),_:1})],64)):P("",!0),(ee=e.form.priceListId.selfItem)!=null&&ee.trophy_fees&&e.form.priceListId.selfItem.trophy_fees.length>0?(f(),I(L,{key:1},[t[41]||(t[41]=s("h3",{class:"font-bold text-lg mb-2 mt-4"},"Trophy Fees",-1)),o(O,{outlined:"",class:"mb-4"},{default:l(()=>[o(N,null,{default:l(()=>[s("div",Rs,[s("table",js,[t[40]||(t[40]=s("thead",null,[s("tr",null,[s("th",null,"Species"),s("th",null,"Scientific Name"),s("th",null,"Sequence"),s("th",null,"Price (USD)")])],-1)),s("tbody",null,[(f(!0),I(L,null,oe(e.form.priceListId.selfItem.trophy_fees,a=>{var b,q;return f(),I("tr",{key:a.id},[s("td",zs,p((b=a.species)==null?void 0:b.name),1),s("td",Hs,p(((q=a.species)==null?void 0:q.scientific_name)||"N/A"),1),s("td",null,[o(d,{color:"info",size:"small"},{default:l(()=>[$(p(e.getSequenceLabel(a.sequence_order)),1)]),_:2},1024)]),s("td",Qs,"$"+p(a.price_usd),1)])}),128))])])])]),_:1})]),_:1})],64)):P("",!0),(de=e.form.priceListId.selfItem)!=null&&de.componions_hunter&&e.form.priceListId.selfItem.componions_hunter.length>0||(k=e.form.priceListId.selfItem)!=null&&k.observer&&e.form.priceListId.selfItem.observer.length>0?(f(),I(L,{key:2},[t[46]||(t[46]=s("h3",{class:"font-bold text-lg mb-2 mt-4"},"Additional Rates",-1)),o(O,{outlined:"",class:"mb-4"},{default:l(()=>[o(N,null,{default:l(()=>[s("div",Gs,[e.form.priceListId.selfItem.componions_hunter&&e.form.priceListId.selfItem.componions_hunter.length>0?(f(),I("div",Ys,[s("div",Ws,[o(u,{name:"group",size:"small",color:"primary"}),t[42]||(t[42]=s("span",{class:"font-semibold text-base"},"Companion Hunter",-1))]),s("div",Js," $"+p(e.form.priceListId.selfItem.componions_hunter[0].amount),1),t[43]||(t[43]=s("div",{class:"text-xs text-gray-600 mt-1"},"per companion",-1))])):P("",!0),e.form.priceListId.selfItem.observer&&e.form.priceListId.selfItem.observer.length>0?(f(),I("div",Zs,[s("div",Ks,[o(u,{name:"visibility",size:"small",color:"success"}),t[44]||(t[44]=s("span",{class:"font-semibold text-base"},"Observer",-1))]),s("div",Xs," $"+p(e.form.priceListId.selfItem.observer[0].amount),1),t[45]||(t[45]=s("div",{class:"text-xs text-gray-600 mt-1"},"per observer",-1))])):P("",!0)])]),_:1})]),_:1})],64)):P("",!0)],64)):P("",!0),e.packageSelectionType==="custom"?(f(),I(L,{key:3},[t[50]||(t[50]=s("h3",{class:"font-bold text-lg mb-2 mt-4"},"Preferred Species",-1)),o(O,{outlined:"",class:"mb-4"},{default:l(()=>[o(N,null,{default:l(()=>[s("div",xs,[o(g,{modelValue:e.form.species,"onUpdate:modelValue":t[6]||(t[6]=a=>e.form.species=a),label:"Species",options:e.speciesOptions,placeholder:"Select Species",rules:[a=>!!a||"Species is required"],searchable:"","highlight-matched-text":""},null,8,["modelValue","options","rules"]),o(x,{modelValue:e.form.quantity,"onUpdate:modelValue":t[7]||(t[7]=a=>e.form.quantity=a),label:"Quantity","manual-input":"",min:1,max:100,rules:[a=>a||"Quantity is required"]},null,8,["modelValue","rules"]),s("div",eo,[o(c,{color:"primary",icon:"add",onClick:t[8]||(t[8]=a=>e.addNewSpeciesItemToStorage())},{default:l(()=>t[47]||(t[47]=[$(" Add Species ")])),_:1})])]),o(H,{class:"my-4"}),s("div",to,[t[49]||(t[49]=s("div",{class:"text-sm font-semibold mb-3"},"Selected Species",-1)),e.speciesObjects.length>0?(f(),U(pe,{key:0,class:"space-y-2"},{default:l(()=>[(f(!0),I(L,null,oe(e.speciesObjects,(a,b)=>(f(),U(W,{key:b,class:"border rounded-lg p-3 hover:shadow-md transition-shadow"},{default:l(()=>[o(D,null,{default:l(()=>[o(K,{class:"flex justify-between items-center"},{default:l(()=>[s("div",null,[s("span",so,p(a.name),1),s("span",oo,"Qty: "+p(a.quantity),1)]),o(c,{preset:"plain",icon:"delete",color:"danger",size:"small",onClick:q=>e.deleteFromStorage(b)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(f(),U(Z,{key:1,color:"secondary",border:"left",class:"mb-0"},{default:l(()=>t[48]||(t[48]=[$(" No species selected yet. Add species using the form above. ")])),_:1}))])]),_:1})]),_:1})],64)):P("",!0)]),s("div",ao,[s("div",no,[o(u,{name:"person",color:"primary",size:"large"}),t[52]||(t[52]=s("h3",{class:"text-xl font-bold text-gray-800"},"Basic Information",-1))]),s("div",lo,[o(Q,{modelValue:e.form.full_name,"onUpdate:modelValue":t[9]||(t[9]=a=>e.form.full_name=a),type:"text",placeholder:"Enter your Full name",rules:[a=>a&&a.length>0||"Full name is required"],label:"Full name"},null,8,["modelValue","rules"]),o(g,{modelValue:e.form.country,"onUpdate:modelValue":t[10]||(t[10]=a=>e.form.country=a),placeholder:"Select Country",label:"Country",rules:[a=>a||"Country is required"],options:e.countries,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options"]),o(g,{modelValue:e.form.nationality,"onUpdate:modelValue":t[11]||(t[11]=a=>e.form.nationality=a),placeholder:"Select Client nationality",label:"Client Nationality",rules:[a=>a||"Nationality is required"],options:e.nationality,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options"])])]),s("div",io,[s("div",ro,[o(u,{name:"contact_mail",color:"primary",size:"large"}),t[53]||(t[53]=s("h3",{class:"text-xl font-bold text-gray-800"},"Contact Information",-1))]),s("div",mo,[o(Q,{modelValue:e.form.email,"onUpdate:modelValue":t[12]||(t[12]=a=>e.form.email=a),type:"email",placeholder:"Enter your email",rules:[e.validators.required,e.validators.email],label:"Email"},null,8,["modelValue","rules"]),o(Q,{modelValue:e.form.phone,"onUpdate:modelValue":t[13]||(t[13]=a=>e.form.phone=a),type:"text",placeholder:"eg: +971501234567",rules:[e.validators.required,e.validators.tell],label:"Phone"},null,8,["modelValue","rules"]),o(Q,{modelValue:e.form.address,"onUpdate:modelValue":t[14]||(t[14]=a=>e.form.address=a),type:"text","max-length":30,placeholder:"Enter your address",rules:[a=>a&&a.length>0||"Address is required"],label:"Address"},null,8,["modelValue","rules"])])]),s("div",uo,[s("div",po,[o(u,{name:"groups",color:"primary",size:"large"}),t[54]||(t[54]=s("h3",{class:"text-xl font-bold text-gray-800"},"Participants and Hunting Days",-1))]),s("div",co,[o(Q,{modelValue:e.form.no_of_observers,"onUpdate:modelValue":t[15]||(t[15]=a=>e.form.no_of_observers=a),label:"Number of Observers(Optional)",placeholder:"Enter Number of Observers",type:"number",required:""},null,8,["modelValue"]),o(Q,{modelValue:e.form.no_of_days,"onUpdate:modelValue":t[16]||(t[16]=a=>e.form.no_of_days=a),label:"Number of Days",placeholder:"Enter Number of Days",type:"number",rules:[a=>e.packageSelectionType==="custom"?a||"This field is required":!0],disabled:e.packageSelectionType==="standard"&&!!e.form.priceListId,required:""},null,8,["modelValue","rules","disabled"]),o(Q,{modelValue:e.form.no_of_companions,"onUpdate:modelValue":t[17]||(t[17]=a=>e.form.no_of_companions=a),label:"Number of Companions(Optional)",placeholder:"Enter Number of Companions",type:"number",required:""},null,8,["modelValue"]),o(g,{modelValue:e.form.area,"onUpdate:modelValue":t[18]||(t[18]=a=>e.form.area=a),placeholder:"Select Area",label:"Hunting area",rules:[a=>e.packageSelectionType==="custom"?a||"Hunting area is required":!0],options:e.areasOptions,disabled:e.packageSelectionType==="standard"&&!!e.form.priceListId,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options","disabled"])])]),s("div",fo,[s("div",go,[o(u,{name:"event",color:"primary",size:"large"}),t[55]||(t[55]=s("h3",{class:"text-xl font-bold text-gray-800"},"Season and Tentative Date",-1))]),s("div",yo,[o(g,{modelValue:e.form.season,"onUpdate:modelValue":t[19]||(t[19]=a=>e.form.season=a),placeholder:"Select Season",label:"Season",rules:[a=>e.packageSelectionType==="custom"?a||"Season is required":!0],options:e.seasonsOptions,disabled:e.packageSelectionType==="standard"&&!!e.form.priceListId,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options","disabled"]),o(F,{modelValue:e.form.preferred_date,"onUpdate:modelValue":t[20]||(t[20]=a=>e.form.preferred_date=a),label:"Preferred Date",placeholder:"Select Preferred Date",rules:[a=>a||"Preferred Date is required"],required:""},null,8,["modelValue","rules"]),o(F,{modelValue:e.form.start_date,"onUpdate:modelValue":t[21]||(t[21]=a=>e.form.start_date=a),label:"Start Date",placeholder:"Select Start Date",rules:[a=>a||"Start Date is required"],required:""},null,8,["modelValue","rules"]),o(F,{modelValue:e.form.end_date,"onUpdate:modelValue":t[22]||(t[22]=a=>e.form.end_date=a),label:"End Date",placeholder:"Select End Date",rules:[a=>a||"End Date is required"],required:""},null,8,["modelValue","rules"])])])]),o(H,{class:"my-6"}),s("div",ho,[o(c,{preset:"secondary",onClick:t[23]||(t[23]=a=>e.gotBack())},{default:l(()=>t[56]||(t[56]=[$(" Cancel ")])),_:1}),o(c,{loading:e.saving,icon:"save",disabled:!e.isValidForm,onClick:t[24]||(t[24]=a=>e.validateForm()&&e.submit())},{default:l(()=>t[57]||(t[57]=[$(" Submit Enquiry ")])),_:1},8,["loading","disabled"])])]}),_:1},512)):(f(),U(V,{key:0,onDownloadBtnPressed:t[2]||(t[2]=G=>e.downloadPdf(G.selfitem.pdf)),onViewBtnPressed:e.viewInquiries},null,8,["onViewBtnPressed"]))],64))]),_:1})]),_:1})}const To=ie(rs,[["render",bo]]);export{To as default};
//# sourceMappingURL=SalesInquiries-Bsju28sa.js.map
