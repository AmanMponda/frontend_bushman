import{j as p,k as r}from"./index-D6QR9FQk.js";const h=p("price-list",{state:()=>({itemsByHuntingType:[],priceList:[],salesPackages:[],packageOptions:[],latestPackage:null,showModal:!1,loadingpackages:!1}),actions:{async getPriceList(t="",e="",n="",s="",i=""){const o="http://localhost:8000/api/v1.0/settings/price-lists/",a={};t!==""&&t!==null&&t!==void 0&&(a.hunting_type_id=t),e!==""&&e!==null&&e!==void 0&&(a.area_id=e),n!==""&&n!==null&&n!==void 0&&(a.season_id=n),s!==""&&s!==null&&s!==void 0&&(a.min_amount=s),i!==""&&i!==null&&i!==void 0&&(a.max_amount=i),console.log("API URL:",o,"params:",a);const c={method:"get",maxBodyLength:1/0,url:o,params:a,headers:{"Content-Type":"application/json"}},u=await r.request(c);console.log("API response data:",u.data);const g=u.data,l=Array.isArray(g)?g:(g==null?void 0:g.data)??[];return Array.isArray(l)&&l.length>0?this.priceList=l:this.priceList=[],u},async getPriceListByHuntingType(t="",e="",n=""){const s="http://localhost:8000/api/v1.0/settings/price-lists/",i={};t!==""&&t!==null&&t!==void 0&&(i.hunting_type_id=t),e!==""&&e!==null&&e!==void 0&&(i.area_id=e),n!==""&&n!==null&&n!==void 0&&(i.season_id=n);const o={method:"get",maxBodyLength:1/0,url:s,params:i,headers:{"Content-Type":"application/json"}},a=await r.request(o),c=a.data,u=Array.isArray(c)?c:(c==null?void 0:c.data)??[];return this.itemsByHuntingType=u,a},async getPriceListById(t){const e=`http://localhost:8000/api/v1.0/settings/price-lists/${t}/`;console.log("Fetching price list detail, URL:",e);const n={method:"get",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"}},s=await r.request(n);return console.log("Price list detail response:",s.data),s},async updatePriceList(t,e){const n={area:e.area,hunting_type_id:e.huntingTypeId,sales_package_ids:e.sales_package_ids,description:e.description,sales_quota_id:e.salesQuotaId,amount:e.amount,currency:e.currency,duration:e.duration,companion_days:e.companionDays,companion_amount:e.companionAmount,observer_days:e.observerDays,observer_amount:e.observerAmount,season_id:e.season_id,start_date:e.start_at,end_date:e.end_at,is_active:e.is_active,area_id:e.area_id,user_id:e.user_id,species_object_list:e.speciesObjectList};e.upgrade_fees&&e.upgrade_fees.length>0&&(n.upgrade_fees=e.upgrade_fees);const s=JSON.stringify(n),i={method:"put",maxBodyLength:1/0,url:`http://localhost:8000/api/v1.0/settings/price-lists/${t}/`,headers:{"Content-Type":"application/json"},data:s};return await r.request(i)},async deletePriceList(t,e=!1){const s={method:"delete",maxBodyLength:1/0,url:`http://localhost:8000/api/v1.0/settings/price-lists/${t}/${e?"?force=true":""}`,headers:{"Content-Type":"application/json"}};return await r.request(s)},async getSalesPackageList(t=!1){this.loadingpackages=!0;const e={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"}},n=await r.request(e);return n.status===200&&(this.loadingpackages=!1,t?(this.latestPackage={value:n.data[0].id,text:n.data[0].name},this.packageOptions=n.data.map(s=>({value:s.id,text:s.name}))):this.salesPackages=n.data.map(s=>{var i,o;return{id:s.id,name:s.name,area_name:((i=s==null?void 0:s.area)==null?void 0:i.name)??"N/A",regulatory_package_name:((o=s==null?void 0:s.regulatory_package)==null?void 0:o.name)??"N/A",selfItem:s}})),n},async createSalesPackage(t){const e=JSON.stringify({name:t.name,area_id:t.areaId,regulatory_package_id:t.licenceId,description:t.description,species_object_list:t.speciesObjectList}),n={method:"post",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"},data:e},s=await r.request(n);return s.status===201&&(this.showModal=!1,this.getSalesPackageList()),s},async updateSalesPackage(t,e){const n=JSON.stringify({name:e.name,area_id:e.areaId,regulatory_package_id:e.licenceId,description:e.description,species_object_list:e.speciesObjectList}),s={method:"put",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/sales-package-sets/"+t+"/",headers:{"Content-Type":"application/json"},data:n},i=await r.request(s);return i.status===200&&this.getSalesPackageList(),i},async deleteSalesPackage(t,e=!1){const s={method:"delete",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/sales-package-sets/"+t+"/"+(e?"?force=true":""),headers:{"Content-Type":"application/json"}},i=await r.request(s);return(i.status===200||i.status===204)&&this.getSalesPackageList(),i},async createPriceList(t){const e={area:t.area,hunting_type_id:t.huntingTypeId,sales_package_ids:t.sales_package_ids,description:t.description,sales_quota_id:t.salesQuotaId,amount:t.amount,currency:t.currency,duration:t.duration,companion_days:t.companionDays,companion_amount:t.companionAmount,observer_days:t.observerDays,observer_amount:t.observerAmount,season_id:t.season_id,start_date:t.start_at,end_date:t.end_at,is_active:t.is_active,area_id:t.area_id,user_id:t.user_id,species_object_list:t.speciesObjectList};t.upgrade_fees&&t.upgrade_fees.length>0&&(e.upgrade_fees=t.upgrade_fees);const n=JSON.stringify(e),s={method:"post",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/create-price-list/",headers:{"Content-Type":"application/json"},data:n};return await r.request(s)},async getCompletePriceListPdf(t="",e="",n="",s="",i=""){const o="http://localhost:8000/api/v1.0/settings/price-lists/",a={};t!==""&&t!==null&&t!==void 0&&(a.hunting_type_id=t),e!==""&&e!==null&&e!==void 0&&(a.area_id=e),n!==""&&n!==null&&n!==void 0&&(a.season_id=n),s!==""&&s!==null&&s!==void 0&&(a.min_amount=s),i!==""&&i!==null&&i!==void 0&&(a.max_amount=i);const c={method:"get",maxBodyLength:1/0,url:o,params:a,headers:{"Content-Type":"application/json"}};return await r.request(c)}}});export{h as u};
//# sourceMappingURL=price-list-store-C5Kcxwp4.js.map
