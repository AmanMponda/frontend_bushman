{"version":3,"file":"Dashboard-SF7inBjv.js","sources":["../../src/pages/client/dashboard/DataSectionItem.vue","../../src/stores/stats-store.ts","../../src/pages/client/dashboard/DataSection.vue","../../src/pages/client/dashboard/DataSection.vue"],"sourcesContent":["<template>\n  <VaCard square outlined>\n    <VaCardContent>\n      <section>\n        <header class=\"flex items-center justify-between\">\n          <div class=\"text-lg font-semibold grow\">{{ value }}</div>\n          <div\n            class=\"p-1 rounded\"\n            :style=\"{\n              backgroundColor: iconBackground,\n              color: iconColor,\n            }\"\n          >\n            <slot name=\"icon\"></slot>\n          </div>\n        </header>\n        <div>\n          <p class=\"mb-2\">{{ title }}</p>\n          <p class=\"text-xs text-secondary\">\n            <span :class=\"changeClass\">\n              <template v-if=\"up\">↑</template>\n              <template v-else>↓</template>\n              {{ changeText }}\n            </span>\n          </p>\n        </div>\n      </section>\n    </VaCardContent>\n  </VaCard>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed } from 'vue'\nimport { VaCard } from 'vuestic-ui'\n\nconst props = defineProps<{\n  title: string\n  value: string | number\n  changeText: string\n  up: boolean\n  iconBackground: string\n  iconColor: string\n}>()\n\nconst changeClass = computed(() => ({\n  'text-success': props.up,\n  'text-red-600': !props.up,\n}))\n</script>\n","// VITE_APP_SALES_CONFIRMATION_CONTRACT_VSET_URL\n\nimport { defineStore } from 'pinia'\nimport axios from 'axios'\nimport { QuotaStats } from '../interfaces/IQuota'\n// import { format } from 'date-fns'\n// import { formatDateTime } from '../services/utils'\n\nexport const useStatsStore = defineStore('stats', {\n  state: () => {\n    return {\n      loadingStats: false,\n      quotaStats: {} as QuotaStats,\n    }\n  },\n\n  actions: {\n    async getStats() {\n      this.loadingStats = true\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_QUOTA_STATS_URL\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      const response = await axios.request(config)\n\n      if (response.status === 200) {\n        // Backend returns { success: true, data: [...species], totals: {...}, pdf: \"...\" }\n        const totals = response.data.totals || {}\n        const quotaName =\n          response.data.data && response.data.data.length > 0 ? response.data.data[0].quota?.name : 'Unknown'\n\n        this.quotaStats = {\n          confirmed: totals.confirmed || 0,\n          pending: 0, // Not provided in current backend response\n          cancelled: totals.cancelled || 0,\n          taken: totals.taken || 0,\n          provisioned: totals.provisioned || 0,\n          totalQuota: totals.total_quota_balance || 0,\n          quota: quotaName,\n        }\n\n        console.log(this.quotaStats)\n        this.loadingStats = false\n        return response\n      }\n      return response\n    },\n  },\n})\n","<template>\n  <VaInnerLoading :loading=\"loadingStats\">\n    <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4\">\n      <DataSectionItem\n        v-for=\"metric in dashboardMetrics\"\n        :key=\"metric.id\"\n        :disabled=\"loadingStats\"\n        :title=\"metric.title\"\n        :value=\"metric.value\"\n        :change-text=\"metric.changeText\"\n        :up=\"metric.changeDirection === 'up'\"\n        :icon-background=\"metric.iconBackground\"\n        :icon-color=\"metric.iconColor\"\n      >\n        <template #icon>\n          <VaIcon :name=\"metric.icon\" size=\"large\" />\n        </template>\n      </DataSectionItem>\n    </div>\n  </VaInnerLoading>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport { useColors } from 'vuestic-ui'\nimport DataSectionItem from './DataSectionItem.vue'\nimport { mapActions, mapState } from 'pinia'\nimport { useStatsStore } from '../../../stores/stats-store'\nimport { DashboardMetric } from '../../../interfaces/IQuota'\n\nexport default defineComponent({\n  name: 'DataSection',\n  components: {\n    DataSectionItem,\n  },\n  setup() {\n    return {}\n  },\n\n  data() {\n    const { getColor } = useColors()\n\n    return {\n      getColor,\n    }\n  },\n\n  computed: {\n    ...mapState(useStatsStore, ['loadingStats', 'quotaStats']),\n\n    dashboardMetrics(): DashboardMetric[] {\n      return [\n        {\n          id: 'totalquota',\n          title: 'Total Quota Balance',\n          value: this.quotaStats ? this.quotaStats.totalQuota : '0',\n          icon: 'mso-folder_open',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('secondary'),\n          iconColor: this.getColor('on-info'),\n        },\n        {\n          id: 'provisioned',\n          title: 'Total provisioned ',\n          value: this.quotaStats ? this.quotaStats.provisioned : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('warning'),\n          iconColor: this.getColor('on-primary'),\n        },\n        {\n          id: 'confirmed',\n          title: ' Total Confirmed ',\n          value: this.quotaStats ? this.quotaStats.confirmed : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('success'),\n          iconColor: this.getColor('on-primary'),\n        },\n\n        {\n          id: 'cancelled',\n          title: 'Total Cancelled ',\n          value: this.quotaStats ? this.quotaStats.cancelled : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('danger'),\n          iconColor: this.getColor('on-primary'),\n        },\n\n        {\n          id: 'taken',\n          title: 'Total Taken',\n          value: this.quotaStats ? this.quotaStats.taken : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('primary'),\n          iconColor: this.getColor('on-danger'),\n        },\n      ]\n    },\n  },\n  mounted() {\n    this.getStats()\n  },\n  methods: {\n    ...mapActions(useStatsStore, ['getStats']),\n  },\n})\n</script>\n\n<style lang=\"scss\" scoped></style>\n","<template>\n  <VaInnerLoading :loading=\"loadingStats\">\n    <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4\">\n      <DataSectionItem\n        v-for=\"metric in dashboardMetrics\"\n        :key=\"metric.id\"\n        :disabled=\"loadingStats\"\n        :title=\"metric.title\"\n        :value=\"metric.value\"\n        :change-text=\"metric.changeText\"\n        :up=\"metric.changeDirection === 'up'\"\n        :icon-background=\"metric.iconBackground\"\n        :icon-color=\"metric.iconColor\"\n      >\n        <template #icon>\n          <VaIcon :name=\"metric.icon\" size=\"large\" />\n        </template>\n      </DataSectionItem>\n    </div>\n  </VaInnerLoading>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport { useColors } from 'vuestic-ui'\nimport DataSectionItem from './DataSectionItem.vue'\nimport { mapActions, mapState } from 'pinia'\nimport { useStatsStore } from '../../../stores/stats-store'\nimport { DashboardMetric } from '../../../interfaces/IQuota'\n\nexport default defineComponent({\n  name: 'DataSection',\n  components: {\n    DataSectionItem,\n  },\n  setup() {\n    return {}\n  },\n\n  data() {\n    const { getColor } = useColors()\n\n    return {\n      getColor,\n    }\n  },\n\n  computed: {\n    ...mapState(useStatsStore, ['loadingStats', 'quotaStats']),\n\n    dashboardMetrics(): DashboardMetric[] {\n      return [\n        {\n          id: 'totalquota',\n          title: 'Total Quota Balance',\n          value: this.quotaStats ? this.quotaStats.totalQuota : '0',\n          icon: 'mso-folder_open',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('secondary'),\n          iconColor: this.getColor('on-info'),\n        },\n        {\n          id: 'provisioned',\n          title: 'Total provisioned ',\n          value: this.quotaStats ? this.quotaStats.provisioned : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('warning'),\n          iconColor: this.getColor('on-primary'),\n        },\n        {\n          id: 'confirmed',\n          title: ' Total Confirmed ',\n          value: this.quotaStats ? this.quotaStats.confirmed : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('success'),\n          iconColor: this.getColor('on-primary'),\n        },\n\n        {\n          id: 'cancelled',\n          title: 'Total Cancelled ',\n          value: this.quotaStats ? this.quotaStats.cancelled : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('danger'),\n          iconColor: this.getColor('on-primary'),\n        },\n\n        {\n          id: 'taken',\n          title: 'Total Taken',\n          value: this.quotaStats ? this.quotaStats.taken : '0',\n          icon: 'pets',\n          changeText: this.quotaStats ? this.quotaStats.quota : '',\n          changeDirection: 'up',\n          iconBackground: this.getColor('primary'),\n          iconColor: this.getColor('on-danger'),\n        },\n      ]\n    },\n  },\n  mounted() {\n    this.getStats()\n  },\n  methods: {\n    ...mapActions(useStatsStore, ['getStats']),\n  },\n})\n</script>\n\n<style lang=\"scss\" scoped></style>\n"],"names":["props","__props","changeClass","computed","useStatsStore","defineStore","config","response","axios","totals","quotaName","_a","_sfc_main$1","defineComponent","DataSectionItem","getColor","useColors","mapState","mapActions","_hoisted_1","_createBlock","_component_VaInnerLoading","_ctx","_createElementVNode","_openBlock","_createElementBlock","_Fragment","_renderList","metric","_component_DataSectionItem","_withCtx","_createVNode","_component_VaIcon"],"mappings":"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"}