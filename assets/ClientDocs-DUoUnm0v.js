import{u as w}from"./useForm-XQT-jLAz.js";import{u as k}from"./useToast-DVuIP6Z-.js";import{d as D,B as P,C as S,a as T,w as u,k as g,i,e as h,b as s,h as x,u as d,o as B}from"./index-P4QeRV7n.js";import{h as U}from"./errorHandler-DijQ3xmc.js";const F={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},I={class:"mt-4 d-flex"},q=D({__name:"ClientDocs",setup(W){const{isValid:p,validate:f}=w("formRef"),{init:m}=k(),t=P({document_type:null,forWho:null,document:[]}),c=[],b=[{text:"Travel Packet (Passport Copy)",value:"Passport_Copy"},{text:"Travel Packet (Passport Photo)",value:"Passport_Photo"},{text:"Visa",value:"Visa"},{text:"Gun Permits",value:"Gun_Permits"},{text:"CITES Documentation",value:"CITES_Documentation"},{text:"Sales Invoice",value:"sales_invoice"},{text:"Receipt",value:"receipt"}],v=async l=>{try{const e=new FormData;e.append("document_type",t.document_type.value),e.append("forWho",t.forWho.value),e.append("document",t.document[0]);const o={method:l,maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/client/client-docs-vset/",headers:{"Content-Type":"multipart/form-data"},data:e},n=await g.request(o);console.log(JSON.stringify(n.data)),(n.status===200||n.status===201)&&m({message:n.data.message,color:"success"})}catch(e){if(e.response){const o=U(e);m({message:`
`+o.map((n,r)=>`${r+1}. ${n}`).join(`
`),color:"danger"})}else console.log(e),m({message:"Something went wrong",color:"danger"})}},V=()=>{v("patch")},_=()=>{v("post")},y=async()=>{const l={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/client/companion-observer-list/"},e=await g.request(l);(e.status===200||e.status===201)&&(c.push({text:"Me",value:"Me"}),c.push(...e.data.observer_and_companion.map(o=>({text:o.user.first_name+" "+o.user.last_name,value:o.id}))))};return S(()=>{y()}),(l,e)=>{const o=i("VaSelect"),n=i("VaFileUpload"),r=i("VaButton"),C=i("VaForm");return B(),T(C,{ref:"formRef"},{default:u(()=>[h("div",F,[s(o,{modelValue:t.document_type,"onUpdate:modelValue":e[0]||(e[0]=a=>t.document_type=a),placeholder:"Select Document Type",label:"Document Type",options:b,searchable:"","highlight-matched-text":""},null,8,["modelValue"]),s(o,{modelValue:t.forWho,"onUpdate:modelValue":e[1]||(e[1]=a=>t.forWho=a),placeholder:"Select Document Owner",label:"Document Owner",options:c,searchable:"","highlight-matched-text":""},null,8,["modelValue"]),s(n,{modelValue:t.document,"onUpdate:modelValue":e[2]||(e[2]=a=>t.document=a),"upload-button-text":"Upload Document",color:"secondary",label:"Upload Document",dropzone:"",undo:"",size:"50mb","file-types":"image/jpeg, image/png, image/pdf, application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","undo-duration":"500",rules:[a=>a.length>0||"Document is required"],"max-files":1},null,8,["modelValue","rules"])]),h("div",I,[s(r,{icon:"save",class:"mr-3 mb-2",disabled:!d(p),onClick:e[3]||(e[3]=a=>d(f)()&&_())},{default:u(()=>e[5]||(e[5]=[x(" Save ")])),_:1},8,["disabled"]),s(r,{class:"mr-3 mb-2",icon:"save",disabled:!d(p),color:"warning",onClick:e[4]||(e[4]=a=>d(f)()&&V())},{default:u(()=>e[6]||(e[6]=[x(" save ")])),_:1},8,["disabled"])])]),_:1},512)}}});export{q as default};
//# sourceMappingURL=ClientDocs-DUoUnm0v.js.map
