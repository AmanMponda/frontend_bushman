import{j as m,k as l}from"./index-D35lDKvM.js";const y=m("quota",{state:()=>({quotas:[]}),actions:{generateQuotaYear(e,t){const r=new Date(e).getFullYear(),s=new Date(t).getFullYear();return`${r}/${s}`},async getQuotas(e=null){let t="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-quotas";e!=null&&(t+=`/${e}`),console.log("GET URL:",t);const r={method:"get",url:t,headers:{"Content-Type":"application/json"}};try{const s=await l.request(r);return s.status===200&&(e?this.quotas=[s.data.data]:this.quotas=s.data.data),s}catch(s){throw console.error("Error getting quotas:",s),s}},async createQuota(e){var n,o,u,p,d,g;const t="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-quotas/",r=a=>{if(!a)return"";if(typeof a=="string"){if(a.match(/^\d{4}-\d{2}-\d{2}$/))return a;try{const i=new Date(a);if(!isNaN(i.getTime()))return i.toISOString().split("T")[0]}catch(i){console.error("Date parsing error:",i)}return a}if(a instanceof Date)return a.toISOString().split("T")[0];try{const i=String(a),h=new Date(i);return isNaN(h.getTime())?i:h.toISOString().split("T")[0]}catch{return""}},s=JSON.stringify({name:e.name,description:e.description||"",start_date:r(e.start_date),end_date:r(e.end_date)});console.log("Creating quota with data:",s),console.log("Raw quota data received:",e);const c={method:"post",maxBodyLength:1/0,url:t,headers:{"Content-Type":"application/json"},data:s};try{const a=await l.request(c);return console.log("Create quota response:",a),a.status===201?{status:a.status,data:a.data,message:((n=a.data)==null?void 0:n.message)||"Quota created successfully",success:!0}:{status:a.status,data:a.data,message:((o=a.data)==null?void 0:o.message)||"Request failed",success:!1}}catch(a){return console.error("Error in createQuota:",a),{status:((u=a.response)==null?void 0:u.status)||500,data:((p=a.response)==null?void 0:p.data)||a,message:((g=(d=a.response)==null?void 0:d.data)==null?void 0:g.message)||a.message||"Failed to create quota",success:!1}}},async createQuotaAreaSpecies(e){const t="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-quotas-hunting-area-species-vset/",r=JSON.stringify({quota_id:e.quota_id,species_objects:e.speciesObjects,quantity:e.quantity,area_id:e.area_id}),s={method:"post",maxBodyLength:1/0,url:t,headers:{"Content-Type":"application/json"},data:r},c=await l.request(s);return c.status===201,c},async updateQuota(e){const t=`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-quotas/${e.id}`;console.log("Update URL (PATCH with path param):",t);const r=n=>{if(!n)return"";if(typeof n=="string"&&n.match(/^\d{4}-\d{2}-\d{2}$/))return n;try{const o=new Date(n);if(!isNaN(o.getTime())){const u=o.getFullYear(),p=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0");return`${u}-${p}-${d}`}}catch(o){console.error("Date formatting error:",o)}return String(n||"")},s={name:e.name,start_date:r(e.start_date),end_date:r(e.end_date),description:e.description||""};console.log("Update data:",s);const c={method:"patch",url:t,headers:{"Content-Type":"application/json"},data:s};try{const n=await l.request(c);return console.log("Update response:",n),n}catch(n){throw console.error("Error in updateQuota:",n),n}},async deleteQuota(e){const t=`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-quotas/${e}`;console.log("Delete URL (DELETE with path param):",t);const r={method:"delete",url:t,headers:{"Content-Type":"application/json"}};try{const s=await l.request(r);return console.log("Delete response:",s),s}catch(s){throw console.error("Delete quota error:",s),s}},async getAllSpeciesPerQuotaPerArea(e,t,r){console.log("Params received:",{quota_id:e,area_id:t,species_id:r});let s="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-quotas-hunting-area-species-vset/";const c={};if(e&&e!=="null"&&e!=="undefined"&&(c.quota_id=e),t&&t!=="null"&&t!=="undefined"&&(c.area_id=t),r&&r!=="null"&&r!=="undefined"&&(c.species_id=r),Object.keys(c).length>0){const o=new URLSearchParams(c).toString();s+="?"+o}console.log("Final URL:",s);const n={method:"get",maxBodyLength:1/0,url:s,headers:{"Content-Type":"application/json"}};try{const o=await l.request(n);return console.log("API Response:",o.data),o}catch(o){throw console.error("API Error:",o),o}},async getSpeciesList(){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/species/"},t=await l.request(e);return t.status===200,t},async getAreaList(){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/hunting-areas/"},t=await l.request(e);return t.status===200,t}}});export{y as u};
//# sourceMappingURL=quota-store-CZV-NSgL.js.map
