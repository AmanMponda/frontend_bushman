{"version":3,"file":"SalesPackageForm-CcX42On6.js","sources":["../../src/pages/module-settings/components/SalesPackageForm.vue","../../src/pages/module-settings/components/SalesPackageForm.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"formRef\">\n    <div class=\"p-1\">\n      <h3 class=\"font-bold text-lg mb-4\">{{ editMode ? 'Edit Package' : 'Create New Package' }}</h3>\n      <!-- <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\"> -->\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n        <VaInput\n          v-model=\"form.package_name\"\n          type=\"text\"\n          placeholder=\"Enter Package Name\"\n          :rules=\"[(value: any) => (value && value.length > 0) || 'Package name is required']\"\n          label=\"Package name\"\n          required-mark\n        />\n        <VaSelect\n          v-model=\"form.licence\"\n          label=\"Licence\"\n          :options=\"regulatoryPackagesOptions\"\n          placeholder=\"Select Licence\"\n          required-mark\n          :rules=\"[(v: any) => !!v || 'Licence is required']\"\n          required\n        />\n\n        <VaSelect\n          v-model=\"form.area\"\n          label=\"Area\"\n          :options=\"areasOptions\"\n          placeholder=\"Select area\"\n          required-mark\n          :rules=\"[(v: any) => !!v || 'Area is required']\"\n          required\n          :disabled=\"laodinglicenceAreaSpecies || form.licence === null\"\n          :loading=\"laodinglicenceAreaSpecies\"\n          @update:modelValue=\"getLicenceAreaSpeciesList\"\n        />\n      </div>\n\n      <div class=\"grid grid-cols-1 md:grid-cols gap-4\">\n        <VaTextarea\n          v-model=\"form.description\"\n          max-length=\"120\"\n          label=\"Description\"\n          counter\n          required-mark\n          placeholder=\"Enter Description\"\n          :rules=\"[\n            (v: any) => (v && v.length > 0) || 'Required',\n            (v: any) => (v && v.length < 60) || 'Maximum 120 characters',\n          ]\"\n        />\n      </div>\n    </div>\n  </VaForm>\n\n  <h3 class=\"font-bold text-lg mb-2\">Species</h3>\n  <VaInnerLoading :loading=\"laodinglicenceAreaSpecies\" :size=\"30\">\n    <div class=\"va-table-responsive\" :disabled=\"laodinglicenceAreaSpecies\">\n      <table class=\"va-table\">\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>Quantity</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-for=\"item in licenceAreaSpecies\" :key=\"item.id\">\n            <tr>\n              <td>{{ item.name }}</td>\n              <td>\n                <VaCounter\n                  v-model=\"item.quantity\"\n                  increase-icon=\"add_circle_outline\"\n                  decrease-icon=\"remove_circle_outline\"\n                  class=\"w-100 p-0\"\n                  :success=\"quntityChangedsaved\"\n                  manual-input\n                  color=\"#6938D1\"\n                  max=\"100\"\n                  min=\"0\"\n                  max-length=\"3\"\n                  @update:modelValue=\"(value) => onChange(item.id, value)\"\n                />\n              </td>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    </div>\n  </VaInnerLoading>\n  <div class=\"mt-4 d-flex p-2\">\n    <VaButton\n      icon=\"save\"\n      :loading=\"saving\"\n      class=\"mr-3 mb-2\"\n      :disabled=\"!isValidForm\"\n      @click=\"validateForm() && submit()\"\n    >\n      {{ editMode ? 'Update' : 'Save' }}\n    </VaButton>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, ref } from 'vue'\nimport { VaForm, VaInput, VaSelect, VaButton } from 'vuestic-ui'\nimport handleErrors from '../../../utils/errorHandler'\nimport { validators } from '../../../services/utils'\n\nimport { useForm, useToast } from 'vuestic-ui'\nimport { mapActions, mapState, mapWritableState } from 'pinia'\nimport { useQuotaStore } from '../../../stores/quota-store'\nimport { useSettingsStore } from '../../../stores/settings-store'\nimport { usePriceListStore } from '../../../stores/price-list-store'\nimport { useRegulatoryPackageStore } from '../../../stores/regulatrory-store'\n\nexport default defineComponent({\n  components: {\n    VaForm,\n    VaInput,\n    VaSelect,\n    VaButton,\n  },\n  props: {\n    editMode: {\n      type: Boolean,\n      default: false,\n    },\n    editItem: {\n      type: Object,\n      default: null,\n    },\n  },\n  emits: ['saved'],\n  setup() {\n    const formRef = ref()\n\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(formRef)\n\n    const { init } = useToast()\n    const showEditForm = ref(false)\n\n    const form = reactive({\n      package_name: '',\n      description: '',\n      species: null as any,\n      quantity: 1,\n      area: null as any,\n      licence: null as any,\n    })\n\n    const contactForm = reactive({\n      id: null as any,\n      client_id: null as any,\n      contact: '',\n      contact_type: null as any,\n      contactable: false,\n    })\n\n    const countries = ref([]) as any\n    const nationality = ref([]) as any\n    const categoryOptions = ref([]) as any\n    const contactsTypes = ref([]) as any\n    const clients = ref([]) as any\n    const step = ref(0) as any\n\n    return {\n      formRef,\n      form,\n      contactForm,\n      showEditForm,\n      countries,\n      nationality,\n      categoryOptions,\n      contactsTypes,\n      clients,\n      step,\n      // steps,\n      init,\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      resetForm,\n\n      validators,\n    }\n  },\n  data() {\n    return {\n      defaultColDef: {\n        editable: true,\n      },\n      settingsStore: useSettingsStore(),\n      speciesOptions: [] as any,\n      areasOptions: [] as any,\n\n      saving: false,\n      regulatoryPackagesOptions: [] as any,\n      loadingLicenceOptions: false,\n      loading: false,\n\n      originalQuantities: reactive({} as any), // to keep track of original quantities\n      quntityChangedsaved: false,\n    }\n  },\n\n  computed: {\n    ...mapWritableState(useSettingsStore, ['licenceAreaSpecies']),\n    ...mapState(useSettingsStore, ['laodinglicenceAreaSpecies']),\n  },\n\n  mounted() {\n    this.getLicencePackages()\n    this.getAreas()\n    this.settingsStore.licenceAreaSpecies = []\n\n    // If in edit mode, populate the form with existing data\n    if (this.editMode && this.editItem) {\n      this.form.package_name = this.editItem.name || ''\n      this.form.description = this.editItem.description || ''\n\n      // Set licence and area after options are loaded\n      this.$nextTick(() => {\n        if (this.editItem.regulatory_package) {\n          this.form.licence = {\n            value: this.editItem.regulatory_package.id,\n            text: this.editItem.regulatory_package.name + '->' + this.editItem.regulatory_package.duration + ' days',\n          }\n        }\n        if (this.editItem.area) {\n          this.form.area = {\n            value: this.editItem.area.id,\n            text: this.editItem.area.name,\n          }\n          // Load species for the area\n          this.getLicenceAreaSpeciesList()\n        }\n\n        // Pre-populate species if available\n        if (this.editItem.species && this.editItem.species.length > 0) {\n          setTimeout(() => {\n            this.settingsStore.licenceAreaSpecies = this.editItem.species.map((s: any) => ({\n              id: s.species?.id || s.id,\n              name: s.species?.name || s.name,\n              quantity: s.quantity || 1,\n            }))\n          }, 500)\n        }\n      })\n    }\n  },\n\n  methods: {\n    ...mapActions(useQuotaStore, ['getSpeciesList']),\n    ...mapActions(useQuotaStore, ['getAllSpeciesPerQuotaPerArea']),\n    ...mapActions(useQuotaStore, ['getAreaList']),\n    ...mapActions(useSettingsStore, ['getHuntingsTypes']),\n    ...mapActions(useSettingsStore, ['getCurrencies']),\n    ...mapActions(useQuotaStore, ['getQuotas']),\n    ...mapActions(usePriceListStore, [\n      'createPriceList',\n      'createSalesPackage',\n      'getSalesPackageList',\n      'updateSalesPackage',\n    ]),\n    ...mapActions(useRegulatoryPackageStore, ['getRegulatoryPackages']),\n    ...mapActions(useSettingsStore, ['getHuntingLicenseAreaSpecies']),\n\n    async submit() {\n      this.saving = true\n\n      // Filter out species with quantity 0 or less\n      const speciesWithQuantity = this.licenceAreaSpecies.filter((species: any) => species.quantity > 0)\n\n      if (speciesWithQuantity.length === 0) {\n        this.init({\n          message: 'Please add at least one species with quantity greater than 0.',\n          color: 'warning',\n        })\n        this.saving = false\n        return\n      }\n\n      const requestdata = {\n        name: this.form.package_name,\n        description: this.form.description,\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n        speciesObjectList: speciesWithQuantity,\n      }\n\n      try {\n        let response\n        if (this.editMode && this.editItem) {\n          response = await this.updateSalesPackage(this.editItem.id, requestdata)\n          if (response.status === 200) {\n            this.saving = false\n            this.init({ message: 'Package updated successfully.', color: 'success' })\n            this.$emit('saved')\n          }\n        } else {\n          response = await this.createSalesPackage(requestdata)\n          if (response.status === 201) {\n            this.saving = false\n            this.init({ message: response.data.message, color: 'success' })\n            this.getSalesPackages()\n          }\n        }\n      } catch (error: any) {\n        this.saving = false\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: error instanceof Error ? error.message : 'An error occurred',\n          color: 'danger',\n        })\n      }\n    },\n\n    async getLicencePackages() {\n      this.loadingLicenceOptions = true\n      try {\n        const response = await this.getRegulatoryPackages()\n        if (response.status === 200) {\n          this.loadingLicenceOptions = false\n          const data = response.data\n          this.regulatoryPackagesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name + '->' + item.duration + ' ' + ' ' + 'days',\n          }))\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getAreas() {\n      try {\n        const response = await this.getAreaList()\n        this.areasOptions = response.data.map((item: { id: any; name: any }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getLicenceAreaSpeciesList() {\n      const payload = {\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n      }\n\n      try {\n        const response = await this.getHuntingLicenseAreaSpecies(payload)\n        if (response.status === 200) {\n          const data = response.data\n          this.speciesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name,\n          }))\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: error instanceof Error ? error.message : 'An error occurred',\n          color: 'danger',\n        })\n      }\n    },\n\n    async getSalesPackages() {\n      this.loading = true\n      try {\n        const response = await this.getSalesPackageList(true)\n        if (response.status === 200) {\n          this.loading = false\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    onChange(id: any, newValue: any) {\n      // this.isChanged = true\n\n      // Set the original value if it hasn't been set yet\n      if (!(id in this.originalQuantities)) {\n        const item = this.licenceAreaSpecies.find((item: any) => item.id === id)\n        this.originalQuantities[id] = item.quantity // Direct assignment\n      }\n\n      const updatedItem = this.licenceAreaSpecies.find((item: any) => item.id === id)\n      if (updatedItem) {\n        updatedItem.quantity = newValue // Update the quantity with newValue\n        // then update  list\n        this.licenceAreaSpecies = [...this.licenceAreaSpecies]\n      }\n      this.init({\n        message: `Quantity for ${updatedItem.name} has been updated to ${newValue} quantity(s).`,\n        color: 'success',\n        position: 'bottom-right',\n      })\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import '@vuestic/ag-grid-theme';\n</style>\n","<template>\n  <VaForm ref=\"formRef\">\n    <div class=\"p-1\">\n      <h3 class=\"font-bold text-lg mb-4\">{{ editMode ? 'Edit Package' : 'Create New Package' }}</h3>\n      <!-- <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\"> -->\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n        <VaInput\n          v-model=\"form.package_name\"\n          type=\"text\"\n          placeholder=\"Enter Package Name\"\n          :rules=\"[(value: any) => (value && value.length > 0) || 'Package name is required']\"\n          label=\"Package name\"\n          required-mark\n        />\n        <VaSelect\n          v-model=\"form.licence\"\n          label=\"Licence\"\n          :options=\"regulatoryPackagesOptions\"\n          placeholder=\"Select Licence\"\n          required-mark\n          :rules=\"[(v: any) => !!v || 'Licence is required']\"\n          required\n        />\n\n        <VaSelect\n          v-model=\"form.area\"\n          label=\"Area\"\n          :options=\"areasOptions\"\n          placeholder=\"Select area\"\n          required-mark\n          :rules=\"[(v: any) => !!v || 'Area is required']\"\n          required\n          :disabled=\"laodinglicenceAreaSpecies || form.licence === null\"\n          :loading=\"laodinglicenceAreaSpecies\"\n          @update:modelValue=\"getLicenceAreaSpeciesList\"\n        />\n      </div>\n\n      <div class=\"grid grid-cols-1 md:grid-cols gap-4\">\n        <VaTextarea\n          v-model=\"form.description\"\n          max-length=\"120\"\n          label=\"Description\"\n          counter\n          required-mark\n          placeholder=\"Enter Description\"\n          :rules=\"[\n            (v: any) => (v && v.length > 0) || 'Required',\n            (v: any) => (v && v.length < 60) || 'Maximum 120 characters',\n          ]\"\n        />\n      </div>\n    </div>\n  </VaForm>\n\n  <h3 class=\"font-bold text-lg mb-2\">Species</h3>\n  <VaInnerLoading :loading=\"laodinglicenceAreaSpecies\" :size=\"30\">\n    <div class=\"va-table-responsive\" :disabled=\"laodinglicenceAreaSpecies\">\n      <table class=\"va-table\">\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>Quantity</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-for=\"item in licenceAreaSpecies\" :key=\"item.id\">\n            <tr>\n              <td>{{ item.name }}</td>\n              <td>\n                <VaCounter\n                  v-model=\"item.quantity\"\n                  increase-icon=\"add_circle_outline\"\n                  decrease-icon=\"remove_circle_outline\"\n                  class=\"w-100 p-0\"\n                  :success=\"quntityChangedsaved\"\n                  manual-input\n                  color=\"#6938D1\"\n                  max=\"100\"\n                  min=\"0\"\n                  max-length=\"3\"\n                  @update:modelValue=\"(value) => onChange(item.id, value)\"\n                />\n              </td>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    </div>\n  </VaInnerLoading>\n  <div class=\"mt-4 d-flex p-2\">\n    <VaButton\n      icon=\"save\"\n      :loading=\"saving\"\n      class=\"mr-3 mb-2\"\n      :disabled=\"!isValidForm\"\n      @click=\"validateForm() && submit()\"\n    >\n      {{ editMode ? 'Update' : 'Save' }}\n    </VaButton>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, ref } from 'vue'\nimport { VaForm, VaInput, VaSelect, VaButton } from 'vuestic-ui'\nimport handleErrors from '../../../utils/errorHandler'\nimport { validators } from '../../../services/utils'\n\nimport { useForm, useToast } from 'vuestic-ui'\nimport { mapActions, mapState, mapWritableState } from 'pinia'\nimport { useQuotaStore } from '../../../stores/quota-store'\nimport { useSettingsStore } from '../../../stores/settings-store'\nimport { usePriceListStore } from '../../../stores/price-list-store'\nimport { useRegulatoryPackageStore } from '../../../stores/regulatrory-store'\n\nexport default defineComponent({\n  components: {\n    VaForm,\n    VaInput,\n    VaSelect,\n    VaButton,\n  },\n  props: {\n    editMode: {\n      type: Boolean,\n      default: false,\n    },\n    editItem: {\n      type: Object,\n      default: null,\n    },\n  },\n  emits: ['saved'],\n  setup() {\n    const formRef = ref()\n\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(formRef)\n\n    const { init } = useToast()\n    const showEditForm = ref(false)\n\n    const form = reactive({\n      package_name: '',\n      description: '',\n      species: null as any,\n      quantity: 1,\n      area: null as any,\n      licence: null as any,\n    })\n\n    const contactForm = reactive({\n      id: null as any,\n      client_id: null as any,\n      contact: '',\n      contact_type: null as any,\n      contactable: false,\n    })\n\n    const countries = ref([]) as any\n    const nationality = ref([]) as any\n    const categoryOptions = ref([]) as any\n    const contactsTypes = ref([]) as any\n    const clients = ref([]) as any\n    const step = ref(0) as any\n\n    return {\n      formRef,\n      form,\n      contactForm,\n      showEditForm,\n      countries,\n      nationality,\n      categoryOptions,\n      contactsTypes,\n      clients,\n      step,\n      // steps,\n      init,\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      resetForm,\n\n      validators,\n    }\n  },\n  data() {\n    return {\n      defaultColDef: {\n        editable: true,\n      },\n      settingsStore: useSettingsStore(),\n      speciesOptions: [] as any,\n      areasOptions: [] as any,\n\n      saving: false,\n      regulatoryPackagesOptions: [] as any,\n      loadingLicenceOptions: false,\n      loading: false,\n\n      originalQuantities: reactive({} as any), // to keep track of original quantities\n      quntityChangedsaved: false,\n    }\n  },\n\n  computed: {\n    ...mapWritableState(useSettingsStore, ['licenceAreaSpecies']),\n    ...mapState(useSettingsStore, ['laodinglicenceAreaSpecies']),\n  },\n\n  mounted() {\n    this.getLicencePackages()\n    this.getAreas()\n    this.settingsStore.licenceAreaSpecies = []\n\n    // If in edit mode, populate the form with existing data\n    if (this.editMode && this.editItem) {\n      this.form.package_name = this.editItem.name || ''\n      this.form.description = this.editItem.description || ''\n\n      // Set licence and area after options are loaded\n      this.$nextTick(() => {\n        if (this.editItem.regulatory_package) {\n          this.form.licence = {\n            value: this.editItem.regulatory_package.id,\n            text: this.editItem.regulatory_package.name + '->' + this.editItem.regulatory_package.duration + ' days',\n          }\n        }\n        if (this.editItem.area) {\n          this.form.area = {\n            value: this.editItem.area.id,\n            text: this.editItem.area.name,\n          }\n          // Load species for the area\n          this.getLicenceAreaSpeciesList()\n        }\n\n        // Pre-populate species if available\n        if (this.editItem.species && this.editItem.species.length > 0) {\n          setTimeout(() => {\n            this.settingsStore.licenceAreaSpecies = this.editItem.species.map((s: any) => ({\n              id: s.species?.id || s.id,\n              name: s.species?.name || s.name,\n              quantity: s.quantity || 1,\n            }))\n          }, 500)\n        }\n      })\n    }\n  },\n\n  methods: {\n    ...mapActions(useQuotaStore, ['getSpeciesList']),\n    ...mapActions(useQuotaStore, ['getAllSpeciesPerQuotaPerArea']),\n    ...mapActions(useQuotaStore, ['getAreaList']),\n    ...mapActions(useSettingsStore, ['getHuntingsTypes']),\n    ...mapActions(useSettingsStore, ['getCurrencies']),\n    ...mapActions(useQuotaStore, ['getQuotas']),\n    ...mapActions(usePriceListStore, [\n      'createPriceList',\n      'createSalesPackage',\n      'getSalesPackageList',\n      'updateSalesPackage',\n    ]),\n    ...mapActions(useRegulatoryPackageStore, ['getRegulatoryPackages']),\n    ...mapActions(useSettingsStore, ['getHuntingLicenseAreaSpecies']),\n\n    async submit() {\n      this.saving = true\n\n      // Filter out species with quantity 0 or less\n      const speciesWithQuantity = this.licenceAreaSpecies.filter((species: any) => species.quantity > 0)\n\n      if (speciesWithQuantity.length === 0) {\n        this.init({\n          message: 'Please add at least one species with quantity greater than 0.',\n          color: 'warning',\n        })\n        this.saving = false\n        return\n      }\n\n      const requestdata = {\n        name: this.form.package_name,\n        description: this.form.description,\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n        speciesObjectList: speciesWithQuantity,\n      }\n\n      try {\n        let response\n        if (this.editMode && this.editItem) {\n          response = await this.updateSalesPackage(this.editItem.id, requestdata)\n          if (response.status === 200) {\n            this.saving = false\n            this.init({ message: 'Package updated successfully.', color: 'success' })\n            this.$emit('saved')\n          }\n        } else {\n          response = await this.createSalesPackage(requestdata)\n          if (response.status === 201) {\n            this.saving = false\n            this.init({ message: response.data.message, color: 'success' })\n            this.getSalesPackages()\n          }\n        }\n      } catch (error: any) {\n        this.saving = false\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: error instanceof Error ? error.message : 'An error occurred',\n          color: 'danger',\n        })\n      }\n    },\n\n    async getLicencePackages() {\n      this.loadingLicenceOptions = true\n      try {\n        const response = await this.getRegulatoryPackages()\n        if (response.status === 200) {\n          this.loadingLicenceOptions = false\n          const data = response.data\n          this.regulatoryPackagesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name + '->' + item.duration + ' ' + ' ' + 'days',\n          }))\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getAreas() {\n      try {\n        const response = await this.getAreaList()\n        this.areasOptions = response.data.map((item: { id: any; name: any }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    async getLicenceAreaSpeciesList() {\n      const payload = {\n        areaId: this.form.area.value,\n        licenceId: this.form.licence.value,\n      }\n\n      try {\n        const response = await this.getHuntingLicenseAreaSpecies(payload)\n        if (response.status === 200) {\n          const data = response.data\n          this.speciesOptions = data.map((item: any) => ({\n            value: item.id,\n            text: item.name,\n          }))\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error.response)\n        console.log(errors)\n        this.init({\n          message: error instanceof Error ? error.message : 'An error occurred',\n          color: 'danger',\n        })\n      }\n    },\n\n    async getSalesPackages() {\n      this.loading = true\n      try {\n        const response = await this.getSalesPackageList(true)\n        if (response.status === 200) {\n          this.loading = false\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n\n    onChange(id: any, newValue: any) {\n      // this.isChanged = true\n\n      // Set the original value if it hasn't been set yet\n      if (!(id in this.originalQuantities)) {\n        const item = this.licenceAreaSpecies.find((item: any) => item.id === id)\n        this.originalQuantities[id] = item.quantity // Direct assignment\n      }\n\n      const updatedItem = this.licenceAreaSpecies.find((item: any) => item.id === id)\n      if (updatedItem) {\n        updatedItem.quantity = newValue // Update the quantity with newValue\n        // then update  list\n        this.licenceAreaSpecies = [...this.licenceAreaSpecies]\n      }\n      this.init({\n        message: `Quantity for ${updatedItem.name} has been updated to ${newValue} quantity(s).`,\n        color: 'success',\n        position: 'bottom-right',\n      })\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import '@vuestic/ag-grid-theme';\n</style>\n"],"names":["_sfc_main","defineComponent","VaForm","VaInput","VaSelect","VaButton","formRef","ref","isValidForm","validateForm","resetValidationForm","resetForm","useForm","init","useToast","showEditForm","form","reactive","contactForm","countries","nationality","categoryOptions","contactsTypes","clients","step","validators","useSettingsStore","mapWritableState","mapState","s","_a","_b","mapActions","useQuotaStore","usePriceListStore","useRegulatoryPackageStore","speciesWithQuantity","species","requestdata","response","error","errors","handleErrors","data","item","payload","id","newValue","updatedItem","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_VaForm","_createElementVNode","_toDisplayString","_ctx","_component_VaInput","_cache","$event","value","_component_VaSelect","v","_component_VaTextarea","_component_VaInnerLoading","_withCtx","_renderList","_component_VaCounter","_component_VaButton","_createTextVNode"],"mappings":"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"}