import{j as p,k as i}from"./index-CepPxMNg.js";import{f as n}from"./utils-BWc0LXoO.js";import{f as o}from"./format-Cn4G_mmc.js";const u=p("sales_contracts",{state:()=>({contracts:[],loadingContracts:!1,permits:[],loadingPermits:!1}),actions:{async getContracts(e="MAIN_HUNTER"){this.loadingContracts=!0;const s={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-contract-vset/?contractor_type="+e,headers:{"Content-Type":"application/json"}};try{const t=await i.request(s);return t.status===200?(this.contracts=t.data.map(a=>{var d,c,_;return{contract_number:a.contract_number,start_date:n(a.start_date),end_date:n(a.end_date),created_at:n(a.created_at),client_name:(_=(c=(d=a==null?void 0:a.sales_confirmation_proposal)==null?void 0:d.sales_inquiry)==null?void 0:c.entity)==null?void 0:_.full_name,pdf:a.pdf,selfitem:a}}),this.loadingContracts=!1,t):(console.log(this.contracts),t)}catch(t){return this.loadingContracts=!1,console.log(t),t}},async getContractPermits(){const r={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/entity-contract-permit-vset/",headers:{"Content-Type":"application/json"}},s=await i.request(r);if(s.status===200)return this.permits=s.data.map(t=>({permit_number:t.permit_number,issued_date:n(t.issued_date),description:t.description,start_date:n(t.dates[0].start_date),expiry_date:n(t.dates[0].end_date),updated_at:n(t.updated_at),entity_contract_id:t.entity_contract_id,package_type:t.package_type,pdf:t.pdf,selfitem:t})),this.loadingPermits=!1,s},async createPermit(e){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/entity-contract-permit-vset/",s=JSON.stringify({entity_contract_id:e.entity_contract_id,permit_number:e.permit_number,issued_date:o(e.issued_date,"yyyy-MM-dd"),package_type:e.package_type,description:e.description,start_date:o(e.start_date,"yyyy-MM-dd"),end_date:o(e.end_date,"yyyy-MM-dd")}),t={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:s};return await i.request(t)},async createContract(e){const r="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales-confirmation/sales-confirmation-contract-vset/",s=JSON.stringify({sales_confirmation_proposal_id:e.sales_confirmation_proposal_id,entity_id:e.entity_id,start_date:o(e.start_date,"yyyy-MM-dd"),contractor_type:e.contractor_type,end_date:o(e.end_date,"yyyy-MM-dd"),description:"Updated contract description."}),t={method:"post",maxBodyLength:1/0,url:r,headers:{"Content-Type":"application/json"},data:s};return await i.request(t)}}});export{u};
//# sourceMappingURL=contracts-store-B6jQqP_r.js.map
