import{u as p}from"./settings-store-Bkkc7-vM.js";import{d as h,m as v,l as S,s as y,v as b,_ as E,g as R,b as r,w as c,e as d,i as t,h as O,F as P,o as C}from"./index-Ck95g1n5.js";import{u as F}from"./useForm-D15ipaqT.js";import{u as _}from"./useToast-B3kBqZQd.js";import{h as T}from"./errorHandler-BXe9Gc4p.js";const U=h({emits:["submitSelectedItemsEvent"],setup(){const{init:e}=_(),s=y(null),{isValid:a,validate:n,resetValidation:i,reset:u}=F(s),l=b({name:"",amount:null,currency_id:null,season_id:null,charges_per:null,description:""});return{formRef:s,isValidForm:a,validateForm:n,resetValidationForm:i,resetForm:u,form:l,init:e}},data(){return{selectedItems:[],columns:[{key:"name",label:"Service name",sortable:!0},{key:"amount",label:"Amount",sortable:!0},{key:"actions",label:"Actions",sortable:!1}],chargesPerOptions:[{value:"PER_HOUR",text:"PER HOUR"},{value:"PER_DAY",text:"PER DAY"},{value:"PER_PERSON",text:"PER PERSON"},{value:"PER_ROUND",text:"PER ROUND"}],seasonsOptions:[],currenciesOptions:[]}},computed:{...S(p,["savingSafariExtra"])},mounted(){this.getSeasonList(),this.getCurrencyList()},methods:{...v(p,["getSeasons","getCurrencies","createSafariExtras"]),async submitSelectedItems(){const e={name:this.form.name,amount:this.form.amount,currency_id:this.form.currency_id.value,season_id:this.form.season_id.value,charges_per:this.form.charges_per.value,description:this.form.description};try{const s=await this.createSafariExtras(e);s.status===201&&(this.$emit("submitSelectedItemsEvent"),this.init({message:s.data.message,color:"success"}))}catch(s){console.error(s);const a=T(s.response);this.init({message:`
`+a.map((n,i)=>`${i+1}. ${n}`).join(`
`),color:"danger"})}},async getSeasonList(){try{const e=await this.getSeasons();this.seasonsOptions=e.data.map(s=>({value:s.id,text:s.name}))}catch(e){console.log(e)}},async getCurrencyList(){try{const e=await this.getCurrencies();this.currenciesOptions=e.data.map(s=>({value:s.id,text:s.name}))}catch(e){console.log(e)}}}}),$={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},I={class:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4"};function N(e,s,a,n,i,u){const l=t("VaInput"),m=t("VaSelect"),f=t("VaTextarea"),g=t("VaForm"),V=t("VaButton");return C(),R(P,null,[r(g,{ref:"formRef"},{default:c(()=>[d("div",$,[r(l,{modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.form.name=o),type:"text",placeholder:"Service name",rules:[o=>!!o||"This field is required"],label:"Service name"},null,8,["modelValue","rules"]),r(l,{modelValue:e.form.amount,"onUpdate:modelValue":s[1]||(s[1]=o=>e.form.amount=o),type:"number",placeholder:"Amount",rules:[o=>!!o||"This field is required"],label:"Amount"},null,8,["modelValue","rules"]),r(m,{modelValue:e.form.currency_id,"onUpdate:modelValue":s[2]||(s[2]=o=>e.form.currency_id=o),type:"text",placeholder:"Currency",rules:[o=>!!o||"This field is required"],options:e.currenciesOptions,label:"Currency"},null,8,["modelValue","rules","options"])]),d("div",A,[r(m,{modelValue:e.form.season_id,"onUpdate:modelValue":s[3]||(s[3]=o=>e.form.season_id=o),type:"text",placeholder:"Extra service",rules:[o=>!!o||"This field is required"],options:e.seasonsOptions,label:"Service"},null,8,["modelValue","rules","options"]),r(m,{modelValue:e.form.charges_per,"onUpdate:modelValue":s[4]||(s[4]=o=>e.form.charges_per=o),options:e.chargesPerOptions,type:"number",placeholder:"Charges per",rules:[o=>!!o||"This field is required"],label:"Charges per"},null,8,["modelValue","options","rules"])]),d("div",I,[r(f,{modelValue:e.form.description,"onUpdate:modelValue":s[5]||(s[5]=o=>e.form.description=o),type:"text",placeholder:"Description",rules:[o=>!!o||"This field is required"],label:"Description"},null,8,["modelValue","rules"])])]),_:1},512),r(V,{icon:"save",loading:e.savingSafariExtra,disabled:!e.isValidForm||e.savingSafariExtra,onClick:s[6]||(s[6]=o=>e.submitSelectedItems())},{default:c(()=>s[7]||(s[7]=[O(" Save ")])),_:1},8,["loading","disabled"])],64)}const B=E(U,[["render",N]]);export{B as S};
//# sourceMappingURL=SafariExtrasForm-Ln5uzRMP.js.map
