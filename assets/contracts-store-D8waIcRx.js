import{j as p,k as i}from"./index-Ck95g1n5.js";import{f as a}from"./utils-BWc0LXoO.js";import{f as r}from"./format-Cn4G_mmc.js";const m=p("sales_contracts",{state:()=>({contracts:[],loadingContracts:!1,permits:[],loadingPermits:!1}),actions:{async getContracts(e="MAIN_HUNTER"){this.loadingContracts=!0;const n={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-contract-vset/?contractor_type="+e,headers:{"Content-Type":"application/json"}};try{const t=await i.request(n);return t.status===200?(this.contracts=t.data.map(s=>{var c,d,_;return{contract_number:s.contract_number,start_date:a(s.start_date),end_date:a(s.end_date),created_at:a(s.created_at),client_name:(_=(d=(c=s==null?void 0:s.sales_confirmation_proposal)==null?void 0:c.sales_inquiry)==null?void 0:d.entity)==null?void 0:_.full_name,pdf:s.pdf,selfitem:s}}),this.loadingContracts=!1,t):(console.log(this.contracts),t)}catch(t){return this.loadingContracts=!1,console.log(t),t}},async getContractPermits(){const o={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/entity-contract-permit-vset/",headers:{"Content-Type":"application/json"}},n=await i.request(o);if(n.status===200)return this.permits=n.data.map(t=>({permit_number:t.permit_number,issued_date:a(t.issued_date),description:t.description,start_date:a(t.dates[0].start_date),expiry_date:a(t.dates[0].end_date),updated_at:a(t.updated_at),entity_contract_id:t.entity_contract_id,package_type:t.package_type,pdf:t.pdf,selfitem:t})),this.loadingPermits=!1,n},async createPermit(e){const o="http://localhost:8000/api/v1.0/sales-confirmation/entity-contract-permit-vset/",n=JSON.stringify({entity_contract_id:e.entity_contract_id,permit_number:e.permit_number,issued_date:r(e.issued_date,"yyyy-MM-dd"),package_type:e.package_type,description:e.description,start_date:r(e.start_date,"yyyy-MM-dd"),end_date:r(e.end_date,"yyyy-MM-dd")}),t={method:"post",maxBodyLength:1/0,url:o,headers:{"Content-Type":"application/json"},data:n};return await i.request(t)},async createContract(e){const o="http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-contract-vset/",n=JSON.stringify({sales_confirmation_proposal_id:e.sales_confirmation_proposal_id,entity_id:e.entity_id,start_date:r(e.start_date,"yyyy-MM-dd"),contractor_type:e.contractor_type,end_date:r(e.end_date,"yyyy-MM-dd"),description:"Updated contract description."}),t={method:"post",maxBodyLength:1/0,url:o,headers:{"Content-Type":"application/json"},data:n};return await i.request(t)}}});export{m as u};
//# sourceMappingURL=contracts-store-D8waIcRx.js.map
