{"version":3,"file":"approval-store-rv4jrREZ.js","sources":["../../src/stores/approval-store.ts"],"sourcesContent":["// VITE_APP_APPROVAL_CHAIN_VSET_URL\n\nimport { defineStore } from 'pinia'\nimport axios from 'axios'\n\nexport const useApprovalChainStore = defineStore('approval-chain-store', {\n  state: () => {\n    return {\n      approvalChainModules: [] as any,\n      loadingApprovalChain: false,\n      approvalChainLevels: [] as any,\n      loadingApprovalChainLevels: false,\n      approvalChainRoles: [] as any,\n    }\n  },\n\n  actions: {\n    async getRequisitionsApprovalChain(usedAsOptions: boolean = false) {\n      this.loadingApprovalChain = true\n\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_APPROVAL_CHAIN_VSET_URL\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n\n      try {\n        const response = await axios.request(config)\n        if (response.status === 200) {\n          this.loadingApprovalChain = false\n          if (!usedAsOptions) {\n            this.approvalChainModules = response.data.map((approval_chain: any) => {\n              return {\n                name: approval_chain.name,\n                is_active: approval_chain.active,\n                selfitem: approval_chain,\n              }\n            })\n          } else {\n            this.approvalChainModules = response.data.map((approval_chain: any) => {\n              return {\n                value: approval_chain.id,\n                text: approval_chain.name,\n              }\n            })\n          }\n        }\n\n        return response\n      } catch (error) {\n        console.log(error)\n        this.loadingApprovalChain = false\n        return error\n      }\n    },\n\n    async createApprovalChain(payload: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_APPROVAL_CHAIN_VSET_URL\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: payload,\n      }\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        this.approvalChainModules = response.data.map((approval_chain: any) => {\n          return {\n            name: approval_chain.name,\n            is_active: approval_chain.active,\n            selfitem: approval_chain,\n          }\n        })\n      }\n      return response\n    },\n\n    async getApprovalChainLevels(approval_chain_module_id: any) {\n      this.loadingApprovalChainLevels = true\n      const url =\n        import.meta.env.VITE_APP_BASE_URL +\n        import.meta.env.VITE_APP_APPROVAL_CHAIN_LEVELS_VSET_URL +\n        `?approval_chain_module_id=${approval_chain_module_id}`\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        this.loadingApprovalChainLevels = false\n        this.approvalChainLevels = response.data.map((level: any) => {\n          return {\n            text: level.approval_chain_role.name,\n            value: level.id,\n          }\n        })\n      }\n\n      return response\n    },\n\n    // GET ROLES\n    // VITE_APP_APPROVAL_CHAIN_ROLE_VSET_URL\n    async getApprovalChainRoles() {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_APPROVAL_CHAIN_ROLE_VSET_URL\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        this.approvalChainRoles = response.data.map((role: any) => {\n          return {\n            text: role.name,\n            value: role.id,\n          }\n        })\n      }\n      return response\n    },\n  },\n})\n"],"names":["useApprovalChainStore","defineStore","usedAsOptions","config","response","axios","approval_chain","error","payload","approval_chain_module_id","level","role"],"mappings":"+CAKO,MAAMA,EAAwBC,EAAY,uBAAwB,CACvE,MAAO,KACE,CACL,qBAAsB,CAAA,EACtB,qBAAsB,GACtB,oBAAqB,CAAA,EACrB,2BAA4B,GAC5B,mBAAoB,CAAA,CAAC,GAIzB,QAAS,CACP,MAAM,6BAA6BC,EAAyB,GAAO,CACjE,KAAK,qBAAuB,GAI5B,MAAMC,EAAS,CACb,OAAQ,MACR,cAAe,IACf,IALU,mGAMV,QAAS,CACP,eAAgB,kBAAA,CAClB,EAGF,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,QAAQF,CAAM,EAC3C,OAAIC,EAAS,SAAW,MACtB,KAAK,qBAAuB,GACvBF,EASH,KAAK,qBAAuBE,EAAS,KAAK,IAAKE,IACtC,CACL,MAAOA,EAAe,GACtB,KAAMA,EAAe,IAAA,EAExB,EAbD,KAAK,qBAAuBF,EAAS,KAAK,IAAKE,IACtC,CACL,KAAMA,EAAe,KACrB,UAAWA,EAAe,OAC1B,SAAUA,CAAA,EAEb,GAWEF,CACT,OAASG,EAAO,CACd,eAAQ,IAAIA,CAAK,EACjB,KAAK,qBAAuB,GACrBA,CACT,CACF,EAEA,MAAM,oBAAoBC,EAAc,CAEtC,MAAML,EAAS,CACb,OAAQ,OACR,cAAe,IACf,IAJU,mGAKV,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAMK,CAAA,EAEFJ,EAAW,MAAMC,EAAM,QAAQF,CAAM,EAC3C,OAAIC,EAAS,SAAW,MACtB,KAAK,qBAAuBA,EAAS,KAAK,IAAKE,IACtC,CACL,KAAMA,EAAe,KACrB,UAAWA,EAAe,OAC1B,SAAUA,CAAA,EAEb,GAEIF,CACT,EAEA,MAAM,uBAAuBK,EAA+B,CAC1D,KAAK,2BAA6B,GAKlC,MAAMN,EAAS,CACb,OAAQ,MACR,cAAe,IACf,IANA,oIAE6BM,CAAwB,GAKrD,QAAS,CACP,eAAgB,kBAAA,CAClB,EAEIL,EAAW,MAAMC,EAAM,QAAQF,CAAM,EAC3C,OAAIC,EAAS,SAAW,MACtB,KAAK,2BAA6B,GAClC,KAAK,oBAAsBA,EAAS,KAAK,IAAKM,IACrC,CACL,KAAMA,EAAM,oBAAoB,KAChC,MAAOA,EAAM,EAAA,EAEhB,GAGIN,CACT,EAIA,MAAM,uBAAwB,CAG5B,MAAMD,EAAS,CACb,OAAQ,MACR,cAAe,IACf,IALU,mGAMV,QAAS,CACP,eAAgB,kBAAA,CAClB,EAGIC,EAAW,MAAMC,EAAM,QAAQF,CAAM,EAC3C,OAAIC,EAAS,SAAW,MACtB,KAAK,mBAAqBA,EAAS,KAAK,IAAKO,IACpC,CACL,KAAMA,EAAK,KACX,MAAOA,EAAK,EAAA,EAEf,GAEIP,CACT,CAAA,CAEJ,CAAC"}