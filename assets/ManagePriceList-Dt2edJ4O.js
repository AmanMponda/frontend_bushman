import{d as R,_ as j,a as F,g as A,w as n,b as o,i as k,e as a,v as O,t as m,h as _,F as D,q as U,o as f,m as N,L as ee,l as K,x as te,y as se,z as ae,A as oe,s as T,B as G}from"./index-D35lDKvM.js";import{u as W}from"./useToast-CJAf_JXJ.js";import{u as ie}from"./payment-cards-BzGWw8iA.js";import{d as H}from"./pdfDownloader-Cg_wDO9M.js";import{f as ne}from"./format-Cn4G_mmc.js";import{u as q}from"./price-list-store-DSZ6K3WG.js";import{u as re}from"./useForm-BgfHwkqf.js";import{h as J}from"./errorHandler-DijQ3xmc.js";import{v as le}from"./utils-BWc0LXoO.js";import{u as z}from"./quota-store-CZV-NSgL.js";import{u as B}from"./settings-store-BSKbfzXp.js";import{S as de}from"./SalesPackageForm-CcX42On6.js";import{E as ce}from"./jspdf.es.min-Bu1aubd4.js";import"./regulatrory-store-EaJfQS57.js";const ue=R({components:{},props:{priceListItem:{type:Object,required:!0},pdfData:{type:String,default:""}},data(){return{cardStore:ie(),format:ne}},computed:{loading(){return this.cardStore.loading},hasUpgradeFees(){return this.priceListItem.upgrade_fees&&this.priceListItem.upgrade_fees.length>0},speciesList(){var e;return this.priceListItem.species&&Array.isArray(this.priceListItem.species)?this.priceListItem.species:((e=this.priceListItem.sales_package)==null?void 0:e.species)||[]},companionHunterCosts(){return this.priceListItem.companion_hunter_costs&&Array.isArray(this.priceListItem.companion_hunter_costs)?this.priceListItem.companion_hunter_costs:this.priceListItem.componions_hunter||[]},currencySymbol(){var e,t,i;return((t=(e=this.priceListItem.price_list_type)==null?void 0:e.currency)==null?void 0:t.symbol)||((i=this.priceListItem.currency)==null?void 0:i.symbol)||"$"}},mounted(){this.cardStore.load()},methods:{formatDate(e){if(!e)return"N/A";try{return this.format(e,"MMM yyyy")}catch{return e}},getSpeciesName(e){var t;return e.name?e.name:((t=e.species)==null?void 0:t.name)||"Unknown"},getSpeciesScientificName(e){var t;return e.scientific_name?e.scientific_name:((t=e.species)==null?void 0:t.scientific_name)||""},formatChargesPer(e){return e?e.toLowerCase().replace("_"," "):""},formatAmount(e){if(e==null)return"N/A";const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)?"N/A":t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},getSequenceLabel(e){const t=["th","st","nd","rd"],i=e%100,d=t[(i-20)%10]||t[i]||t[0];return`${e}${d}`},async downloadPriceListPdf(){var e,t;if(!this.pdfData){console.warn("No PDF data available");return}try{const d=`${(((t=(e=this.priceListItem)==null?void 0:e.sales_package)==null?void 0:t.name)||"price-list").replace(/\s+/g,"-")}-${Date.now()}.pdf`;await H(this.pdfData,d)}catch(i){console.error("Failed to download PDF:",i)}}}}),me={key:1,class:"price-list-details"},pe={class:"text-center"},ge={class:"va-h3 mb-2"},he={class:"flex justify-center items-center gap-4 mb-3"},ye={class:"text-lg text-secondary"},fe={class:"mt-4"},_e={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},ve={class:"text-3xl font-bold"},be={class:"text-3xl font-bold"},ke={class:"text-lg font-bold"},Ve={class:"text-lg font-bold"},Pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},Le={class:"flex justify-between items-start"},Ie={class:"flex-1"},Se={class:"font-semibold text-base"},Ae={class:"text-sm text-secondary italic"},we={key:0},$e={class:"va-table-responsive"},Ce={class:"va-table va-table--hoverable w-full"},Fe={class:"text-right"},xe={class:"font-semibold"},Oe={class:"text-secondary italic"},Ne={class:"text-center"},De={class:"text-right font-bold text-lg"},Te={class:"va-table-responsive"},Ee={class:"va-table va-table--hoverable w-full"},Ue={class:"font-semibold"},Me={class:"text-right font-bold text-lg"},qe={class:"text-secondary"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Be={class:"space-y-3"},He={key:0,class:"p-4 rounded-lg bg-gray-50"},Re={class:"flex justify-between items-start mb-2"},je={class:"text-right"},Qe={class:"font-bold text-lg"},Ye={class:"flex justify-between items-start mb-2"},Ge={class:"font-semibold text-base capitalize"},Ke={class:"text-sm text-secondary"},We={class:"text-right"},Je={class:"font-bold text-lg"},Xe={class:"text-xs text-secondary"},Ze={class:"space-y-4"},et={key:0},tt={class:"flex justify-between items-center mb-2"},st={class:"font-bold text-xl"},at={class:"flex justify-between items-center"},ot={class:"font-bold text-xl"},it={class:"flex items-center gap-2"},nt={class:"flex items-center gap-2"};function rt(e,t,i,d,b,C){const v=k("VaSkeleton"),l=k("VaSkeletonGroup"),c=k("VaIcon"),u=k("VaChip"),I=k("VaButton"),p=k("VaCardContent"),P=k("VaCard"),w=k("VaCardTitle"),r=k("VaBadge"),L=k("VaAlert");return e.cardStore.loading||!e.priceListItem||!e.priceListItem.sales_package?(f(),F(l,{key:0},{default:n(()=>[o(v,{class:"mb-4",height:"160px",variant:"squared"}),o(v,{class:"mb-4",height:"160px",variant:"squared"}),o(v,{height:"360px",variant:"squared"})]),_:1})):(f(),A("div",me,[o(P,{class:"mb-6",stripe:"","stripe-color":"primary"},{default:n(()=>[o(p,null,{default:n(()=>{var s,V,S,g,E,h;return[a("div",pe,[a("h1",ge,m((s=e.priceListItem.sales_package)==null?void 0:s.name),1),a("div",he,[o(u,{color:"primary",size:"large"},{default:n(()=>{var y,x,$,M;return[o(c,{name:"calendar_month",class:"mr-1"}),_(" "+m(e.formatDate((x=(y=e.priceListItem.price_list_type)==null?void 0:y.price_list)==null?void 0:x.start_date))+" - "+m(e.formatDate((M=($=e.priceListItem.price_list_type)==null?void 0:$.price_list)==null?void 0:M.end_date)),1)]}),_:1}),(V=e.priceListItem.price_list_type)!=null&&V.is_active?(f(),F(u,{key:0,color:"success",size:"large"},{default:n(()=>[o(c,{name:"check_circle",class:"mr-1"}),t[0]||(t[0]=_(" Active "))]),_:1})):(f(),F(u,{key:1,color:"danger",size:"large"},{default:n(()=>[o(c,{name:"cancel",class:"mr-1"}),t[1]||(t[1]=_(" Inactive "))]),_:1}))]),a("p",ye,[o(c,{name:"location_on",size:"small"}),_(" "+m((g=(S=e.priceListItem.sales_package)==null?void 0:S.area)==null?void 0:g.name)+" ("+m((h=(E=e.priceListItem.sales_package)==null?void 0:E.area)==null?void 0:h.description)+") ",1)]),a("div",fe,[e.pdfData?(f(),F(I,{key:0,color:"primary",icon:"download",onClick:e.downloadPriceListPdf},{default:n(()=>t[2]||(t[2]=[_(" Download PDF ")])),_:1},8,["onClick"])):O("",!0)])])]}),_:1})]),_:1}),a("div",_e,[o(P,{stripe:"","stripe-color":"primary"},{default:n(()=>[o(p,{class:"text-center"},{default:n(()=>[o(c,{name:"attach_money",size:"large",color:"primary",class:"mb-2"}),a("div",ve,m(e.priceListItem.price_list_type.currency.symbol)+m(e.formatAmount(e.priceListItem.price_list_type.amount)),1),t[3]||(t[3]=a("div",{class:"text-sm text-secondary mt-1"},"Base Amount",-1))]),_:1})]),_:1}),o(P,{stripe:"","stripe-color":"success"},{default:n(()=>[o(p,{class:"text-center"},{default:n(()=>[o(c,{name:"schedule",size:"large",color:"success",class:"mb-2"}),a("div",be,m(e.priceListItem.price_list_type.duration),1),t[4]||(t[4]=a("div",{class:"text-sm text-secondary mt-1"},"Days Duration",-1))]),_:1})]),_:1}),o(P,{stripe:"","stripe-color":"warning"},{default:n(()=>[o(p,{class:"text-center"},{default:n(()=>{var s;return[o(c,{name:"verified",size:"large",color:"warning",class:"mb-2"}),a("div",ke,m((s=e.priceListItem.sales_package.regulatory_package)==null?void 0:s.name),1),t[5]||(t[5]=a("div",{class:"text-sm text-secondary mt-1"},"License Type",-1))]}),_:1})]),_:1}),o(P,{stripe:"","stripe-color":"info"},{default:n(()=>[o(p,{class:"text-center"},{default:n(()=>[o(c,{name:"category",size:"large",color:"info",class:"mb-2"}),a("div",Ve,m(e.priceListItem.price_list_type.hunting_type.name),1),t[6]||(t[6]=a("div",{class:"text-sm text-secondary mt-1"},"Hunting Type",-1))]),_:1})]),_:1})]),o(P,{class:"mb-6",stripe:"","stripe-color":"success"},{default:n(()=>[o(w,{class:"flex items-center gap-2"},{default:n(()=>[o(c,{name:"pets"}),_(" Available Species ("+m(e.speciesList.length)+") ",1)]),_:1}),o(p,null,{default:n(()=>[a("div",Pe,[(f(!0),A(D,null,U(e.speciesList,s=>(f(),F(P,{key:s.id,class:"species-card",color:s.quantity>0?"#f0f9ff":"#fef2f2"},{default:n(()=>[o(p,null,{default:n(()=>[a("div",Le,[a("div",Ie,[a("div",Se,m(e.getSpeciesName(s)),1),a("div",Ae,m(e.getSpeciesScientificName(s)),1)]),o(r,{color:s.quantity>0?"success":"danger",class:"ml-2"},{default:n(()=>[_(" Qty: "+m(s.quantity),1)]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1032,["color"]))),128))])]),_:1})]),_:1}),o(P,{class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[o(w,{class:"flex items-center gap-2"},{default:n(()=>[o(c,{name:"military_tech"}),_(" Trophy Fees ("+m(e.priceListItem.price_list_type.currency.name)+") ",1)]),_:1}),o(p,null,{default:n(()=>[e.priceListItem.trophy_fees&&e.priceListItem.trophy_fees.length>0?(f(),A("div",we,[a("div",$e,[a("table",Ce,[a("thead",null,[a("tr",null,[t[7]||(t[7]=a("th",{class:"text-left"},"Species",-1)),t[8]||(t[8]=a("th",{class:"text-left"},"Scientific Name",-1)),t[9]||(t[9]=a("th",{class:"text-center"},"Sequence",-1)),a("th",Fe,"Price ("+m(e.priceListItem.price_list_type.currency.symbol)+")",1)])]),a("tbody",null,[(f(!0),A(D,null,U(e.priceListItem.trophy_fees,s=>(f(),A("tr",{key:s.id},[a("td",xe,m(s.species.name),1),a("td",Oe,m(s.species.scientific_name),1),a("td",Ne,[o(r,{text:e.getSequenceLabel(s.sequence_order),color:"primary"},null,8,["text"])]),a("td",De,m(e.priceListItem.price_list_type.currency.symbol)+m(e.formatAmount(s.price_usd)),1)]))),128))])])])])):(f(),F(L,{key:1,color:"info",border:"top"},{default:n(()=>t[10]||(t[10]=[_(" No trophy fees available for this package ")])),_:1}))]),_:1})]),_:1}),e.priceListItem.upgrade_fees&&e.priceListItem.upgrade_fees.length>0?(f(),F(P,{key:0,class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[o(w,{class:"flex items-center gap-2"},{default:n(()=>[o(c,{name:"upgrade"}),t[11]||(t[11]=_(" Upgrade Fees "))]),_:1}),o(p,null,{default:n(()=>[a("div",Te,[a("table",Ee,[t[12]||(t[12]=a("thead",null,[a("tr",null,[a("th",{class:"text-left"},"Species"),a("th",{class:"text-right"},"Amount"),a("th",{class:"text-left"},"Description")])],-1)),a("tbody",null,[(f(!0),A(D,null,U(e.priceListItem.upgrade_fees,s=>(f(),A("tr",{key:s.id},[a("td",Ue,m(s.species_name),1),a("td",Me,m(s.currency_symbol)+m(e.formatAmount(s.amount)),1),a("td",qe,m(s.description),1)]))),128))])])])]),_:1})]),_:1})):O("",!0),a("div",ze,[o(P,{stripe:"","stripe-color":"info"},{default:n(()=>[o(w,{class:"flex items-center gap-2"},{default:n(()=>[o(c,{name:"add_circle"}),t[13]||(t[13]=_(" Safari Extras "))]),_:1}),o(p,null,{default:n(()=>{var s;return[a("div",Be,[e.priceListItem.observer&&e.priceListItem.observer.length>0?(f(),A("div",He,[a("div",Re,[t[15]||(t[15]=a("div",null,[a("div",{class:"font-semibold text-base"},"Observer"),a("div",{class:"text-sm text-secondary"},"Observer cost")],-1)),a("div",je,[a("div",Qe,m(e.priceListItem.price_list_type.currency.symbol)+m((s=e.priceListItem.observer[0])==null?void 0:s.amount),1),t[14]||(t[14]=a("div",{class:"text-xs text-secondary"},"per day / person",-1))])])])):O("",!0),(f(!0),A(D,null,U(e.priceListItem.safari_extras,V=>(f(),A("div",{key:V.id,class:"p-4 rounded-lg bg-gray-50"},[a("div",Ye,[a("div",null,[a("div",Ge,m(V.name),1),a("div",Ke,m(V.description),1)]),a("div",We,[a("div",Je,m(V.currency.symbol)+m(V.amount),1),a("div",Xe,m(e.formatChargesPer(V.charges_per)),1)])])]))),128))])]}),_:1})]),_:1}),o(P,{stripe:"","stripe-color":"success"},{default:n(()=>[o(w,{class:"flex items-center gap-2"},{default:n(()=>[o(c,{name:"groups"}),t[16]||(t[16]=_(" Companion Hunter Costs "))]),_:1}),o(p,null,{default:n(()=>[a("div",Ze,[e.companionHunterCosts&&e.companionHunterCosts.length>0?(f(),A("div",et,[t[19]||(t[19]=a("div",{class:"text-sm font-semibold text-secondary mb-2"},"Companion Hunter",-1)),(f(!0),A(D,null,U(e.companionHunterCosts,s=>(f(),A("div",{key:s.id,class:"p-4 rounded-lg bg-green-50 mb-2"},[a("div",tt,[t[17]||(t[17]=a("span",{class:"text-base"},"Days",-1)),a("span",st,m(s.days),1)]),a("div",at,[t[18]||(t[18]=a("span",{class:"text-base"},"Rate",-1)),a("span",ot,m(e.currencySymbol)+m(s.amount),1)])]))),128))])):(f(),F(L,{key:1,color:"info",border:"top"},{default:n(()=>t[20]||(t[20]=[_(" No companion hunter costs available ")])),_:1}))])]),_:1})]),_:1})]),o(P,{class:"mb-6",stripe:"","stripe-color":"danger"},{default:n(()=>[o(p,null,{default:n(()=>[o(L,{color:"warning",border:"left",class:"mb-3"},{title:n(()=>[a("div",it,[o(c,{name:"warning"}),t[21]||(t[21]=a("span",{class:"font-bold"},"Important Information",-1))])]),default:n(()=>[t[22]||(t[22]=_(" All hunts confirmation is subject to quota availability. Other safari packages are available on request and can be customized depending on client requirements. "))]),_:1}),e.hasUpgradeFees?(f(),F(L,{key:0,color:"info",border:"left"},{title:n(()=>[a("div",nt,[o(c,{name:"info"}),t[23]||(t[23]=a("span",{class:"font-bold"},"Upgrade Fees",-1))])]),default:n(()=>[t[24]||(t[24]=_(" If additional trophies beyond the standard package are taken, upgrade fees may apply (plus trophy fees). "))]),_:1})):O("",!0)]),_:1})]),_:1})]))}const lt=j(ue,[["render",rt],["__scopeId","data-v-51723121"]]),dt=R({components:{SalesPackageForm:de,VaForm:oe,VaInput:ae,VaSelect:se,VaButton:te},props:{editMode:{type:Boolean,default:!1},editItem:{type:Object,default:null}},emits:["saved"],setup(){const e=T(),{isValid:t,validate:i,resetValidation:d,reset:b}=re(e),{init:C}=W(),v=T(!1),l=G({id:null,hunting_type_id:null,package:[],amount:null,currency:null,duration:null,season:null,end_date:null,species:null,quantity:null,companion_days:null,companion_amount:null}),c=G({id:null,client_id:null,contact:"",contact_type:null,contactable:!1}),u=s=>{l.package=l.package.filter(V=>V!==s)},I=T([]),p=T([]),P=T([]),w=T([]),r=T([]),L=T(0);return{formRef:e,form:l,contactForm:c,showEditForm:v,countries:I,nationality:p,categoryOptions:P,contactsTypes:w,clients:r,step:L,init:C,isValidForm:t,validateForm:i,resetValidationForm:d,resetForm:b,deleteChip:u,validators:le}},data(){return{preferred_species:[],speciesOptions:[],speciesObjects:[],areasOptions:[],huntingTypesOptions:[],salesQuotasOptions:[],speciesItemOptions:[],currencyOptions:[],savingPriceList:!1,durationsOptions:[{value:1,text:"1 day"},{value:2,text:"2 days"},{value:3,text:"3 days"},{value:4,text:"4 days"},{value:5,text:"5 days"},{value:6,text:"6 days"},{value:7,text:"7 days"},{value:8,text:"8 days"},{value:9,text:"9 days"},{value:10,text:"10 days"},{value:11,text:"11 days"},{value:12,text:"12 days"},{value:13,text:"13 days"},{value:14,text:"14 days"},{value:15,text:"15 days"},{value:16,text:"16 days"},{value:17,text:"17 days"},{value:18,text:"18 days"},{value:19,text:"19 days"},{value:20,text:"20 days"},{value:21,text:"21 days"}],seasonsOptions:[],upgradeFees:[]}},computed:{...K(q,["salesPackages","packageOptions","latestPackage","loadingpackages"]),...ee(q,{_shM:"showModal"})},watch:{},async mounted(){await Promise.all([this.getAreas(),this.getHuntingTypes(),this.getQuotaList(),this.getCurrencyList(),this.getSalesPackages(),this.getSeasonList(),this.getSpeciesItems()]),this.editMode&&this.editItem&&this.populateFormForEdit()},methods:{...N(z,["getSpeciesList"]),...N(z,["getAllSpeciesPerQuotaPerArea"]),...N(z,["getAreaList"]),...N(B,["getHuntingsTypes"]),...N(B,["getCurrencies","getSeasons"]),...N(z,["getQuotas"]),...N(q,["createPriceList","updatePriceList"]),...N(q,["getSalesPackageList"]),onAreaChange(e){console.log(e)},async submit(){var i,d,b,C,v,l,c,u,I,p,P,w,r,L;this.savingPriceList=!0;const e=this.upgradeFees.filter(s=>s.species_id&&s.amount&&s.currency_id).map(s=>{var S,g;const V={species_id:((S=s.species_id)==null?void 0:S.value)||s.species_id,amount:parseFloat(s.amount),currency_id:((g=s.currency_id)==null?void 0:g.value)||s.currency_id,description:s.description||""};return s.id&&(V.id=s.id),V}),t={huntingTypeId:((i=this.form.hunting_type_id)==null?void 0:i.value)||this.form.hunting_type_id,sales_package_ids:(d=this.form.package)==null?void 0:d.filter(s=>(s==null?void 0:s.value)!==void 0).map(s=>s==null?void 0:s.value),amount:this.form.amount,currency:((b=this.form.currency)==null?void 0:b.value)||this.form.currency,duration:((C=this.form.duration)==null?void 0:C.value)||this.form.duration,season_id:((l=(v=this.form.season)==null?void 0:v.value)==null?void 0:l.id)||((c=this.form.season)==null?void 0:c.id),start_at:((I=(u=this.form.season)==null?void 0:u.value)==null?void 0:I.start_at)||((p=this.form.season)==null?void 0:p.start_at),end_at:((w=(P=this.form.season)==null?void 0:P.value)==null?void 0:w.end_at)||((r=this.form.season)==null?void 0:r.end_at),is_active:1,area_id:3,user_id:1,companionAmount:this.form.companion_amount?String(this.form.companion_amount):null,companionDays:((L=this.form.companion_days)==null?void 0:L.value)||this.form.companion_days,upgrade_fees:e.length>0?e:null};try{let s;this.editMode&&this.editItem?(s=await this.updatePriceList(this.editItem.id,t),s.status===200&&(this.init({message:"Price list updated successfully",color:"success"}),this.savingPriceList=!1,this.$emit("saved"))):(s=await this.createPriceList(t),s.status===201&&(this.init({message:s.data.message,color:"success"}),this.resetForm(),this.resetValidationForm(),this.speciesObjects=[],this.upgradeFees=[],this.savingPriceList=!1))}catch(s){this.savingPriceList=!1,J(s.response),console.log(s),this.init({message:s.message,color:"danger"})}},populateFormForEdit(){var I,p,P,w;if(!this.editItem)return;console.log("Edit Item:",JSON.stringify(this.editItem,null,2)),console.log("Hunting Types Options:",this.huntingTypesOptions),console.log("Seasons Options:",this.seasonsOptions),console.log("Currency Options:",this.currencyOptions);const e=this.editItem.price_list_type||this.editItem,t=e.amount||this.editItem.amount;t&&(this.form.amount=String(t).replace("$","").replace(",",""));const i=e.duration||this.editItem.duration;i!=null&&(this.form.duration=this.durationsOptions.find(r=>r.value===i)||{value:i,text:`${i} days`});const d=((I=e.hunting_type)==null?void 0:I.name)||this.editItem.hunting_type;console.log("Hunting Type Name:",d),d&&(this.form.hunting_type_id=this.huntingTypesOptions.find(r=>r.text===d)),console.log("Selected Hunting Type:",this.form.hunting_type_id);const b=(p=e.price_list)==null?void 0:p.start_date,C=(P=e.price_list)==null?void 0:P.end_date;if(console.log("Season dates:",b,C),b&&C&&(this.form.season=this.seasonsOptions.find(r=>{var L,s;return((L=r.value)==null?void 0:L.start_at)===b&&((s=r.value)==null?void 0:s.end_at)===C}),!this.form.season)){const r=new Date(b).getFullYear();this.form.season=this.seasonsOptions.find(L=>{var s;return(s=L.text)==null?void 0:s.includes(String(r))})}console.log("Selected Season:",this.form.season);const v=(w=e.currency)==null?void 0:w.name;console.log("Currency Name:",v),v&&(this.form.currency=this.currencyOptions.find(r=>r.text===v)),this.form.currency||(this.form.currency=this.currencyOptions.find(r=>r.text==="USD")||this.currencyOptions[0]),console.log("Selected Currency:",this.form.currency);const l=this.editItem.companion_hunter_costs||e.companion_hunter_costs;if(l&&l.length>0){const r=l[0];this.form.companion_amount=r.amount||null,r.days&&(this.form.companion_days=this.durationsOptions.find(L=>L.value===r.days)||{value:r.days,text:`${r.days} days`})}else this.form.companion_amount=this.editItem.companion_amount||null,this.editItem.companion_days&&(this.form.companion_days=this.durationsOptions.find(r=>r.value===this.editItem.companion_days)||{value:this.editItem.companion_days,text:`${this.editItem.companion_days} days`});const c=this.editItem.sales_package;c?this.form.package=[{value:c.id,text:c.name}]:this.editItem.packages&&Array.isArray(this.editItem.packages)&&(this.form.package=this.editItem.packages.map(r=>({value:r.id,text:r.name})));const u=this.editItem.upgrade_fees||e.upgrade_fees;u&&Array.isArray(u)&&u.length>0&&(this.upgradeFees=u.map(r=>{var L,s;return{id:r.id,species_id:this.speciesOptions.find(V=>V.value===r.species_id)||{value:r.species_id,text:((L=r.species)==null?void 0:L.name)||`Species ${r.species_id}`},amount:r.amount,currency_id:this.currencyOptions.find(V=>V.value===r.currency_id)||{value:r.currency_id,text:((s=r.currency)==null?void 0:s.name)||"USD"},description:r.description||""}}))},async getSpeciesItems(){try{const e=await this.getSpeciesList();this.speciesOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getSeasonList(){try{const e=await this.getSeasons();this.seasonsOptions=e.data.map(t=>({value:t,text:t.name}))}catch(e){console.log(e)}},_showModal(){this._shM=!0},async getSalesPackages(){try{await this.getSalesPackageList(!0)}catch(e){console.log(e)}},deleteFromStorage(e){this.speciesObjects.splice(e,1),console.log("Species item deleted:",e)},async getAreas(){try{const e=await this.getAreaList();this.areasOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getHuntingTypes(){try{const e=await this.getHuntingsTypes();this.huntingTypesOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},onChangePackage(e){console.log(e.filter(t=>(t==null?void 0:t.value)!==void 0).map(t=>t==null?void 0:t.value))},async getQuotaList(){try{const e=await this.getQuotas(null);this.salesQuotasOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getCurrencyList(){try{const e=await this.getCurrencies();this.currencyOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},addUpgradeFee(){this.upgradeFees.push({species_id:null,amount:null,currency_id:null,description:""})},removeUpgradeFee(e){this.upgradeFees.splice(e,1)}}}),ct={class:"p-1"},ut={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},mt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},gt={class:"mb-4"},ht={class:"flex items-center justify-between mb-2"},yt={key:0,class:"space-y-4"},ft={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},_t={class:"flex items-end"},vt={class:"mt-3"},bt={key:1,class:"text-center py-4 text-gray-400 border border-dashed border-gray-300 rounded-lg"},kt={class:"mt-4 d-flex p-2"};function Vt(e,t,i,d,b,C){const v=k("VaChip"),l=k("VaIcon"),c=k("VaSelect"),u=k("VaInput"),I=k("VaButton"),p=k("VaCard"),P=k("VaForm"),w=k("VaInnerLoading"),r=k("SalesPackageForm"),L=k("VaModal");return f(),A(D,null,[o(w,{loading:e.savingPriceList,size:60},{default:n(()=>[o(P,{ref:"formRef"},{default:n(()=>[a("div",ct,[t[16]||(t[16]=a("h3",{class:"font-bold text-lg mb-2"},"Price list Infos",-1)),a("div",ut,[o(c,{modelValue:e.form.package,"onUpdate:modelValue":[t[1]||(t[1]=s=>e.form.package=s),e.onChangePackage],options:e.packageOptions,multiple:"",clearable:"",placeholder:"Select Package list here",rules:[s=>s||"Package is required"],label:"Packages","required-mark":""},{content:n(({value:s})=>[(f(!0),A(D,null,U(s,V=>(f(),F(v,{key:V,size:"small",color:"info",class:"mr-1 my-1",closeable:"","onUpdate:modelValue":S=>e.deleteChip(V)},{default:n(()=>[_(m(V.text),1)]),_:2},1032,["onUpdate:modelValue"]))),128))]),append:n(()=>[o(l,{name:"add",class:"ml-2",onClick:t[0]||(t[0]=s=>e._showModal())})]),_:1},8,["modelValue","options","rules","onUpdate:modelValue"]),o(c,{modelValue:e.form.hunting_type_id,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.hunting_type_id=s),placeholder:"Select Hunting Type",label:"Hunting Type",rules:[s=>s||"Hunting type is required"],options:e.huntingTypesOptions,searchable:"","required-mark":"","highlight-matched-text":""},null,8,["modelValue","rules","options"]),o(c,{modelValue:e.form.season,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.season=s),options:e.seasonsOptions,"required-mark":"",label:"Select season",placeholder:"Select season"},null,8,["modelValue","options"])]),t[17]||(t[17]=a("h3",{class:"font-bold text-lg mb-2"},"Charges",-1)),a("div",mt,[o(u,{modelValue:e.form.amount,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.amount=s),type:"text",placeholder:"Enter Amount",rules:[s=>s&&s.length>0||"Amount is required"],label:"Amount","required-mark":""},null,8,["modelValue","rules"]),o(c,{modelValue:e.form.currency,"onUpdate:modelValue":t[5]||(t[5]=s=>e.form.currency=s),placeholder:"Select Currency",label:"Currency",rules:[s=>s||"Currency is required"],options:e.currencyOptions,searchable:"","highlight-matched-text":"","required-mark":""},null,8,["modelValue","rules","options"]),o(c,{modelValue:e.form.duration,"onUpdate:modelValue":t[6]||(t[6]=s=>e.form.duration=s),type:"text",options:e.durationsOptions,"required-mark":"",placeholder:"Enter Duration eg: 21 days",rules:[s=>s||"Duration is required"],label:"Duration(days)"},null,8,["modelValue","options","rules"])]),t[18]||(t[18]=a("h3",{class:"font-bold text-lg mb-2"},"Companion Charges",-1)),a("div",pt,[o(u,{modelValue:e.form.companion_amount,"onUpdate:modelValue":t[7]||(t[7]=s=>e.form.companion_amount=s),type:"number",placeholder:"Enter Companion Amount",label:"Companion Cost"},null,8,["modelValue"]),o(c,{modelValue:e.form.companion_days,"onUpdate:modelValue":t[8]||(t[8]=s=>e.form.companion_days=s),options:e.durationsOptions,placeholder:"Select Companion Days",label:"Companion Days",clearable:""},null,8,["modelValue","options"])]),a("div",gt,[a("div",ht,[t[12]||(t[12]=a("h3",{class:"font-bold text-lg"},"Upgrade Fees (Optional)",-1)),o(I,{size:"small",color:"primary",icon:"add",onClick:e.addUpgradeFee},{default:n(()=>t[11]||(t[11]=[_(" Add Upgrade Fee ")])),_:1},8,["onClick"])]),t[15]||(t[15]=a("p",{class:"text-sm text-gray-500 mb-3"}," Add upgrade fees for additional species that can be hunted beyond the standard package. ",-1)),e.upgradeFees.length>0?(f(),A("div",yt,[(f(!0),A(D,null,U(e.upgradeFees,(s,V)=>(f(),F(p,{key:V,class:"p-4 bg-gray-50",stripe:"","stripe-color":"warning"},{default:n(()=>[a("div",ft,[o(c,{modelValue:s.species_id,"onUpdate:modelValue":S=>s.species_id=S,options:e.speciesOptions,placeholder:"Select Species",label:"Species",searchable:"","highlight-matched-text":"",rules:[S=>S||"Species is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"]),o(u,{modelValue:s.amount,"onUpdate:modelValue":S=>s.amount=S,type:"number",placeholder:"Enter Amount",label:"Amount",rules:[S=>S||"Amount is required"]},null,8,["modelValue","onUpdate:modelValue","rules"]),o(c,{modelValue:s.currency_id,"onUpdate:modelValue":S=>s.currency_id=S,options:e.currencyOptions,placeholder:"Select Currency",label:"Currency",rules:[S=>S||"Currency is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"]),a("div",_t,[o(I,{color:"danger",icon:"delete",size:"small",onClick:S=>e.removeUpgradeFee(V)},{default:n(()=>t[13]||(t[13]=[_(" Remove ")])),_:2},1032,["onClick"])])]),a("div",vt,[o(u,{modelValue:s.description,"onUpdate:modelValue":S=>s.description=S,type:"textarea",placeholder:"Enter description (optional)",label:"Description","min-rows":2},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128))])):(f(),A("div",bt,[o(l,{name:"info",size:"small",class:"mr-1"}),t[14]||(t[14]=_(' No upgrade fees added. Click "Add Upgrade Fee" to add optional upgrade fees. '))]))])]),a("div",kt,[o(I,{icon:"save",class:"mr-3 mb-2",loading:e.savingPriceList,disabled:!e.isValidForm,onClick:t[9]||(t[9]=s=>e.validateForm()&&e.submit())},{default:n(()=>[_(m(e.editMode?"Update":"Save"),1)]),_:1},8,["loading","disabled"])])]),_:1},512)]),_:1},8,["loading"]),o(L,{modelValue:e._shM,"onUpdate:modelValue":t[10]||(t[10]=s=>e._shM=s),"ok-text":"Apply","close-button":"",size:"large","hide-default-actions":!0},{default:n(()=>[o(r)]),_:1},8,["modelValue"])],64)}const Pt=j(dt,[["render",Vt]]),Lt=R({name:"ManagePriceList",components:{PricesListDetails:lt,CreatePricesListForm:Pt},setup(){return{formRef:T(null)}},data(){return{columns:[{key:"package_name",label:"Package Name",sortable:!0},{key:"area",label:"Area",sortable:!0},{key:"hunting_type",label:"Hunting Type",sortable:!0},{key:"amount",label:"Price",sortable:!0},{key:"duration",label:"Duration",sortable:!0},{key:"season_name",label:"Season",sortable:!0},{key:"species_count",label:"Species",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1,width:120}],items:[],printableDataList:[],item:null,toast:W(),areasOptions:[],huntingTypeOptions:[],seasonOptions:[],showPriceList:!0,ShowCreateNewPriceListForm:!1,loading:!1,loadingSeasons:!1,huntingTypeValue:null,areaValue:null,seasonValue:null,minAmount:null,maxAmount:null,poriceListPdf:"",individualPriceListPdf:"",downloadPdf:H,downloadingPdf:!1,showDeleteModal:!1,itemToDelete:null,deleting:!1,showEditForm:!1,editItem:null}},computed:{...K(B,["logo"]),activePackages(){return this.items.filter(e=>e.status==="Active").length},uniqueAreas(){return new Set(this.items.map(t=>t.area)).size}},mounted(){this.getSeasonOptions(),this.getPriceLists(),this.getAreas(),this.getHuntingTypesOptions(),this.loadLogo()},methods:{...N(q,["getPriceList","getPriceListByHuntingType","getPriceListById","deletePriceList","getCompletePriceListPdf"]),...N(z,["getAreaList"]),...N(B,["getHuntingsTypes","loadLogo","getSeasons"]),getActiveSpecies(e){return e.filter(t=>t.quantity>0)},formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"},async getSeasonOptions(){this.loadingSeasons=!0;try{const e=await this.getSeasons(!1);if(e.status===200){const t={value:"",text:"All Seasons"};this.seasonOptions=e.data.map(i=>({value:i.id,text:i.name})),this.seasonOptions.unshift(t),this.seasonValue=this.seasonOptions[0]}}catch(e){console.error("Error fetching seasons:",e)}finally{this.loadingSeasons=!1}},async toggleShowPriceListMethod(e){const t=e==null?void 0:e.id;if(t)try{const i=await this.getPriceListById(t);this.item=i.data.data||i.data,this.individualPriceListPdf=i.data.pdf||"",this.showPriceList=!1}catch(i){console.error("Error fetching price list detail:",i)}},async onDownloadSinglePriceList(e){var i;console.log("=== Download button clicked ==="),console.log("Row data for download:",e);const t=e==null?void 0:e.id;if(!t){console.error("No price list ID found in row data");return}try{console.log("Fetching price list detail for ID:",t);const d=await this.getPriceListById(t),b=d.data.data||d.data;console.log("Fetched price list data for PDF generation:",b),await this.generateIndividualPdf(b,t)}catch(d){console.error("Error downloading price list:",d),(i=this.toast)==null||i.init({message:"Failed to download price list",color:"danger"})}},async generateIndividualPdf(e,t){var i,d,b,C,v,l,c,u,I,p,P,w,r,L,s,V,S,g,E;try{const h=new ce;h.setProperties({title:`Price List ${t}`,subject:"Price List Details",author:"Bushman System",creator:"Bushman"});let y=20;const x=7,$=20,M=h.internal.pageSize.width;h.setFontSize(16),h.setFont("helvetica","bold"),h.text("INDIVIDUAL PRICE LIST DETAILS",M/2,y,{align:"center"}),y+=20,h.setFontSize(12),h.setFont("helvetica","bold"),h.text("PRICE LIST INFORMATION:",$,y),y+=x,h.setFont("helvetica","normal"),h.text(`ID: ${e.id||"N/A"}`,$,y),y+=x,h.text(`Package Name: ${((i=e.sales_package)==null?void 0:i.name)||"N/A"}`,$,y),y+=x,h.text(`Area: ${((b=(d=e.sales_package)==null?void 0:d.area)==null?void 0:b.name)||"N/A"}`,$,y),y+=x,h.text(`Hunting Type: ${((v=(C=e.price_list_type)==null?void 0:C.hunting_type)==null?void 0:v.name)||"N/A"}`,$,y),y+=x,h.text(`Amount: ${((c=(l=e.price_list_type)==null?void 0:l.currency)==null?void 0:c.symbol)||""}${((u=e.price_list_type)==null?void 0:u.amount)||"N/A"}`,$,y),y+=x,h.text(`Duration: ${((I=e.price_list_type)==null?void 0:I.duration)||"N/A"} days`,$,y),y+=x,h.text(`Status: ${(p=e.price_list_type)!=null&&p.is_active?"Active":"Inactive"}`,$,y),y+=15,y>250&&(h.addPage(),y=20),h.setFont("helvetica","bold"),h.text("VALIDITY PERIOD:",$,y),y+=x,h.setFont("helvetica","normal"),h.text(`Start Date: ${((w=(P=e.price_list_type)==null?void 0:P.price_list)==null?void 0:w.start_date)||"N/A"}`,$,y),y+=x,h.text(`End Date: ${((L=(r=e.price_list_type)==null?void 0:r.price_list)==null?void 0:L.end_date)||"N/A"}`,$,y),y+=15,(s=e.sales_package)!=null&&s.regulatory_package&&(h.setFont("helvetica","bold"),h.text("REGULATORY PACKAGE:",$,y),y+=x,h.setFont("helvetica","normal"),h.text(`Name: ${e.sales_package.regulatory_package.name||"N/A"}`,$,y),y+=x,h.text(`Duration: ${e.sales_package.regulatory_package.duration||"N/A"} days`,$,y),y+=15),((S=(V=e.sales_package)==null?void 0:V.species)==null?void 0:S.length)>0&&(h.setFont("helvetica","bold"),h.text("INCLUDED SPECIES:",$,y),y+=x,h.setFont("helvetica","normal"),e.sales_package.species.forEach(Q=>{const Y=Q.species||{},X=`• ${Y.name} (${Y.scientific_name||"No scientific name"}) - Quantity: ${Q.quantity||1}`;h.splitTextToSize(X,M-$*2).forEach(Z=>{y>280&&(h.addPage(),y=20),h.text(Z,$,y),y+=x})}),y+=10),h.setFontSize(10),h.setTextColor(128,128,128),h.text(`Document generated on: ${new Date().toLocaleString()}`,$,285),h.text("This is an auto-generated individual price list document.",$,292),h.save(`price-list-${t}-${Date.now()}.pdf`),(g=this.toast)==null||g.init({message:"Price list downloaded successfully",color:"success"})}catch(h){console.error("Error generating individual PDF:",h),(E=this.toast)==null||E.init({message:"Failed to generate PDF. Please try the main Download button.",color:"warning"})}},createIndividualPdfContent(e){var v,l,c,u,I,p;const t=new Date().toLocaleString(),i=e.price_list_type||{},d=e.sales_package||{},b=d.area||{},C=d.regulatory_package||{};return`
INDIVIDUAL PRICE LIST DETAILS
==============================

PRICE LIST INFORMATION:
-----------------------
ID: ${e.id||"N/A"}
Package Name: ${d.name||"N/A"}
Area: ${b.name||"N/A"}
Area Description: ${b.description||"N/A"}
Hunting Type: ${((v=i.hunting_type)==null?void 0:v.name)||"N/A"}
Amount: ${((l=i.currency)==null?void 0:l.symbol)||""}${i.amount||"N/A"}
Duration: ${i.duration||"N/A"} days
Status: ${i.is_active?"Active":"Inactive"}

VALIDITY PERIOD:
----------------
Start Date: ${((c=i.price_list)==null?void 0:c.start_date)||"N/A"}
End Date: ${((u=i.price_list)==null?void 0:u.end_date)||"N/A"}

REGULATORY PACKAGE:
-------------------
Name: ${C.name||"N/A"}
Duration: ${C.duration||"N/A"} days

INCLUDED SPECIES:
-----------------
${this.formatIncludedSpecies(d.species||[])}

SAFARI EXTRAS:
--------------
${this.formatSafariExtras(e.safari_extras||[])}

TROPHY FEES:
------------
${this.formatTrophyFees(e.trophy_fees||[])}

COMPANION & OBSERVER COSTS:
---------------------------
${this.formatCompanionObserver(e.componions_hunter,e.observer)}

CURRENCY INFORMATION:
---------------------
Currency: ${((I=i.currency)==null?void 0:I.name)||"N/A"}
Symbol: ${((p=i.currency)==null?void 0:p.symbol)||"N/A"}

Document generated on: ${t}
This is an auto-generated individual price list document.
  `.trim()},formatIncludedSpecies(e){return e.length?e.map(t=>{const i=t.species||{};return`• ${i.name} (${i.scientific_name||"No scientific name"}) - Quantity: ${t.quantity||1}`}).join(`
`):"No species included"},formatSafariExtras(e){return e.length?e.map(t=>{const i=t.currency||{};return`• ${t.name}: ${i.symbol||""}${t.amount} ${t.charges_per||""}`}).join(`
`):"No safari extras available"},formatTrophyFees(e){return e.length?e.map(t=>{const i=t.species||{};return`• ${i.name} (${i.scientific_name||"No scientific name"}): $${t.price_usd||"N/A"}`}).join(`
`):"No trophy fees available"},formatCompanionObserver(e,t){let i="";return e&&e.length>0?e.forEach(d=>{var b;i+=`Companion: ${d.days||0} days - ${((b=d.currency)==null?void 0:b.symbol)||""}${d.amount||0}
`}):i+=`Companion: Not available
`,t&&t.length>0?t.forEach(d=>{var b;i+=`Observer: ${d.days||0} days - ${((b=d.currency)==null?void 0:b.symbol)||""}${d.amount||0}`}):i+="Observer: Not available",i},async onDownloadPdf(){var e,t,i,d;this.downloadingPdf=!0;try{const b=p=>p==null?"":typeof p=="object"&&"value"in p?p.value:p,C=b(this.huntingTypeValue)||"",v=b(this.areaValue)||"",l=b(this.seasonValue)||"",c=this.minAmount||"",u=this.maxAmount||"",I=await this.getCompletePriceListPdf(C,v,l,c,u);if(I.status===200){const p=((e=I.data)==null?void 0:e.pdf)||I.data,P=r=>typeof r=="string"&&/^https?:\/\//i.test(r),w=r=>typeof r=="string"&&r.length>200&&/^[A-Za-z0-9+/=\r\n]+$/.test(r);if(!p||!P(p)&&!w(p)){(t=this.toast)==null||t.init({message:"PDF not available",color:"warning"});return}await H(p,`price-list-${Date.now()}.pdf`)}else(i=this.toast)==null||i.init({message:"Failed to generate PDF",color:"danger"})}catch(b){console.error("Error downloading PDF:",b),(d=this.toast)==null||d.init({message:"Failed to download PDF",color:"danger"})}finally{this.downloadingPdf=!1}},goBack(){this.showPriceList=!0,this.ShowCreateNewPriceListForm=!1,this.showEditForm=!1,this.editItem=null,this.getPriceLists()},showCreateNewPriceListFormMethod(){this.ShowCreateNewPriceListForm=!0,this.showPriceList=!1,this.showEditForm=!1},async editPriceList(e){var t;try{const i=await this.getPriceListById(e.id);this.editItem=i.data.data||i.data,this.showEditForm=!0,this.showPriceList=!1,this.ShowCreateNewPriceListForm=!1}catch(i){console.error("Error fetching price list for edit:",i),(t=this.toast)==null||t.init({message:"Failed to load price list details",color:"danger"})}},onEditSaved(){var e;this.showEditForm=!1,this.showPriceList=!0,this.editItem=null,this.getPriceLists(),(e=this.toast)==null||e.init({message:"Price list updated successfully",color:"success"})},confirmDelete(e){this.itemToDelete=e,this.showDeleteModal=!0},async confirmDeletePriceList(){var e,t;if(this.itemToDelete){this.deleting=!0;try{const i=await this.deletePriceList(this.itemToDelete.id,!0);(i.status===200||i.status===204)&&((e=this.toast)==null||e.init({message:"Price list deleted successfully",color:"success"}),this.showDeleteModal=!1,this.itemToDelete=null,this.getPriceLists())}catch(i){const d=J(i.response);(t=this.toast)==null||t.init({message:d.join(", ")||"Failed to delete price list",color:"danger"})}finally{this.deleting=!1}}},async getPriceLists(){this.loading=!0;try{const e=l=>l==null?"":typeof l=="object"&&"value"in l?l.value:l,t=e(this.huntingTypeValue)||"",i=e(this.areaValue)||"",d=e(this.seasonValue)||"",b=this.minAmount||"",C=this.maxAmount||"",v=await this.getPriceList(t,i,d,b,C);if(v.status===200){const l=v==null?void 0:v.data,c=Array.isArray(l)?l:(l==null?void 0:l.data)??[];this.printableDataList=l,this.poriceListPdf=(l==null?void 0:l.pdf)||"",Array.isArray(c)?this.items=c.map(u=>({id:u.id,package_name:u.package_name,area:u.area,area_package:u.area_package,hunting_type:u.hunting_type,amount:u.amount,duration:u.duration,status:u.status,start_date:u.start_date,end_date:u.end_date,season_id:u.season_id,season_name:u.season_name,species_count:u.species_count,species:u.species||[],companion_hunter_costs:u.companion_hunter_costs||[]})):this.items=[]}}catch(e){console.error("Error in getPriceLists:",e)}finally{this.loading=!1}},async getAreas(){var e;try{const t=await this.getAreaList(),i={value:"",text:"All Areas"};this.areasOptions=(e=t==null?void 0:t.data)==null?void 0:e.map(d=>({value:d.id,text:d.name})),this.areasOptions.unshift(i),this.areaValue=this.areasOptions[0]}catch(t){console.error("Error fetching areas:",t)}},async getHuntingTypesOptions(){var e;try{const t=await this.getHuntingsTypes();if(t.status===200){const i={value:"",text:"All Types"};this.huntingTypeOptions=(e=t==null?void 0:t.data)==null?void 0:e.map(d=>({value:d.id,text:d.name})),this.huntingTypeOptions.unshift(i),this.huntingTypeValue=this.huntingTypeOptions[0]}}catch(t){console.error("Error fetching hunting types:",t)}}}}),It={class:"flex flex-col md:flex-row gap-2 mb-4 justify-between items-center"},St={class:"flex flex-col md:flex-row gap-2 justify-start items-center"},At={key:1,class:"text-xl font-bold text-gray-700"},wt={key:2,class:"text-xl font-bold text-gray-700"},$t={class:"filters-section bg-gray-50 rounded-lg p-4 mb-6 mt-4"},Ct={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4"},Ft={class:"block text-sm font-medium text-gray-600 mb-1"},xt={class:"block text-sm font-medium text-gray-600 mb-1"},Ot={class:"block text-sm font-medium text-gray-600 mb-1"},Nt={class:"block text-sm font-medium text-gray-600 mb-1"},Dt={class:"block text-sm font-medium text-gray-600 mb-1"},Tt={class:"flex items-end"},Et={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6"},Ut={class:"stat-card bg-blue-50 rounded-lg p-4 text-center"},Mt={class:"text-2xl font-bold text-blue-600"},qt={class:"stat-card bg-green-50 rounded-lg p-4 text-center"},zt={class:"text-2xl font-bold text-green-600"},Bt={class:"stat-card bg-amber-50 rounded-lg p-4 text-center"},Ht={class:"text-2xl font-bold text-amber-600"},Rt={key:0,class:"text-center py-12"},jt={class:"font-semibold"},Qt={class:"flex items-center gap-1"},Yt={class:"font-semibold text-green-600"},Gt={class:"flex gap-2"},Kt={class:"flex gap-2 justify-end"};function Wt(e,t,i,d,b,C){const v=k("VaButton"),l=k("VaIcon"),c=k("VaDivider"),u=k("VaSelect"),I=k("VaInput"),p=k("VaBadge"),P=k("VaDataTable"),w=k("VaInnerLoading"),r=k("PricesListDetails"),L=k("CreatePricesListForm"),s=k("VaCardContent"),V=k("VaCard"),S=k("VaModal");return f(),A(D,null,[o(V,{class:"price-list-page"},{default:n(()=>[o(s,null,{default:n(()=>[a("div",It,[a("div",St,[!e.showPriceList||e.showEditForm?(f(),F(v,{key:0,class:"px-3 py-2",icon:"arrow_back",size:"small",onClick:e.goBack},{default:n(()=>t[7]||(t[7]=[_(" Back to List ")])),_:1},8,["onClick"])):O("",!0),e.showPriceList&&!e.showEditForm?(f(),A("h2",At,[o(l,{name:"list_alt",class:"mr-2"}),t[8]||(t[8]=_(" Price Lists "))])):O("",!0),e.showEditForm?(f(),A("h2",wt,[o(l,{name:"edit",class:"mr-2"}),t[9]||(t[9]=_(" Edit Price List "))])):O("",!0)]),!e.ShowCreateNewPriceListForm&&e.showPriceList&&!e.showEditForm?(f(),F(v,{key:0,class:"px-4 py-2",color:"primary",icon:"add",round:"",onClick:e.showCreateNewPriceListFormMethod},{default:n(()=>t[10]||(t[10]=[_(" Add a new Price List ")])),_:1},8,["onClick"])):O("",!0)]),o(c),e.ShowCreateNewPriceListForm?O("",!0):(f(),A(D,{key:0},[e.showPriceList?(f(),A(D,{key:0},[a("div",$t,[a("div",Ct,[a("div",null,[a("label",Ft,[o(l,{name:"date_range",size:"small",class:"mr-1"}),t[11]||(t[11]=_(" Season "))]),o(u,{modelValue:e.seasonValue,"onUpdate:modelValue":[t[0]||(t[0]=g=>e.seasonValue=g),e.getPriceLists],options:e.seasonOptions,placeholder:"Select Season",loading:e.loadingSeasons},null,8,["modelValue","options","loading","onUpdate:modelValue"])]),a("div",null,[a("label",xt,[o(l,{name:"pets",size:"small",class:"mr-1"}),t[12]||(t[12]=_(" Hunting Type "))]),o(u,{modelValue:e.huntingTypeValue,"onUpdate:modelValue":[t[1]||(t[1]=g=>e.huntingTypeValue=g),e.getPriceLists],options:e.huntingTypeOptions,placeholder:"Filter By Type"},null,8,["modelValue","options","onUpdate:modelValue"])]),a("div",null,[a("label",Ot,[o(l,{name:"location_on",size:"small",class:"mr-1"}),t[13]||(t[13]=_(" Hunting Area "))]),o(u,{modelValue:e.areaValue,"onUpdate:modelValue":[t[2]||(t[2]=g=>e.areaValue=g),e.getPriceLists],options:e.areasOptions,placeholder:"Filter By Area"},null,8,["modelValue","options","onUpdate:modelValue"])]),a("div",null,[a("label",Nt,[o(l,{name:"attach_money",size:"small",class:"mr-1"}),t[14]||(t[14]=_(" Min Amount "))]),o(I,{modelValue:e.minAmount,"onUpdate:modelValue":t[3]||(t[3]=g=>e.minAmount=g),type:"number",placeholder:"Min price",onChange:e.getPriceLists},null,8,["modelValue","onChange"])]),a("div",null,[a("label",Dt,[o(l,{name:"attach_money",size:"small",class:"mr-1"}),t[15]||(t[15]=_(" Max Amount "))]),o(I,{modelValue:e.maxAmount,"onUpdate:modelValue":t[4]||(t[4]=g=>e.maxAmount=g),type:"number",placeholder:"Max price",onChange:e.getPriceLists},null,8,["modelValue","onChange"])]),a("div",Tt,[o(v,{class:"w-full",color:"secondary",icon:"download",loading:e.downloadingPdf,onClick:e.onDownloadPdf},{default:n(()=>t[16]||(t[16]=[_(" Download PDF ")])),_:1},8,["loading","onClick"])])])]),e.items.length>0?(f(),A("div",Et,[a("div",Ut,[a("div",Mt,m(e.items.length),1),t[17]||(t[17]=a("div",{class:"text-sm text-gray-600"},"Total Packages",-1))]),a("div",qt,[a("div",zt,m(e.activePackages),1),t[18]||(t[18]=a("div",{class:"text-sm text-gray-600"},"Active",-1))]),a("div",Bt,[a("div",Ht,m(e.uniqueAreas),1),t[19]||(t[19]=a("div",{class:"text-sm text-gray-600"},"Areas",-1))])])):O("",!0),o(w,{loading:e.loading},{default:n(()=>[e.items.length===0&&!e.loading?(f(),A("div",Rt,[o(l,{name:"inventory_2",size:"4rem",color:"#9B9FB5"}),t[20]||(t[20]=a("p",{class:"text-gray-500 mt-4"},"No price lists found for the selected filters.",-1))])):(f(),F(P,{key:1,items:e.items,columns:e.columns,hoverable:"",striped:"",loading:e.loading},{"cell(package_name)":n(({rowData:g})=>[a("div",jt,m(g.package_name),1)]),"cell(area)":n(({rowData:g})=>[a("div",Qt,[o(l,{name:"location_on",size:"small",color:"secondary"}),_(" "+m(g.area),1)])]),"cell(amount)":n(({rowData:g})=>[a("span",Yt,m(g.amount),1)]),"cell(duration)":n(({rowData:g})=>[_(m(g.duration)+" Days ",1)]),"cell(status)":n(({rowData:g})=>[o(p,{text:g.status,color:g.status==="Active"?"success":"warning"},null,8,["text","color"])]),"cell(season_name)":n(({rowData:g})=>[_(m(g.season_name||"N/A"),1)]),"cell(species_count)":n(({rowData:g})=>[o(p,{text:String(g.species_count||0),color:"info"},null,8,["text"])]),"cell(actions)":n(({rowData:g})=>[a("div",Gt,[o(v,{preset:"plain",icon:"visibility",color:"primary",size:"small",title:"View Details",onClick:E=>e.toggleShowPriceListMethod(g)},null,8,["onClick"]),o(v,{preset:"plain",icon:"edit",color:"warning",size:"small",title:"Edit",onClick:E=>e.editPriceList(g)},null,8,["onClick"]),o(v,{preset:"plain",icon:"delete",color:"danger",size:"small",title:"Delete",onClick:E=>e.confirmDelete(g)},null,8,["onClick"])])]),_:1},8,["items","columns","loading"]))]),_:1},8,["loading"])],64)):e.showEditForm?e.showEditForm?(f(),F(L,{key:2,"edit-mode":!0,"edit-item":e.editItem,onSaved:e.onEditSaved},null,8,["edit-item","onSaved"])):O("",!0):(f(),F(r,{key:1,"price-list-item":e.item,"pdf-data":e.individualPriceListPdf},null,8,["price-list-item","pdf-data"]))],64)),e.ShowCreateNewPriceListForm?(f(),F(L,{key:1})):O("",!0)]),_:1})]),_:1}),o(S,{modelValue:e.showDeleteModal,"onUpdate:modelValue":t[6]||(t[6]=g=>e.showDeleteModal=g),"hide-default-actions":""},{header:n(()=>t[21]||(t[21]=[a("h3",{class:"va-h6"},"Confirm Delete",-1)])),footer:n(()=>[a("div",Kt,[o(v,{preset:"secondary",onClick:t[5]||(t[5]=g=>e.showDeleteModal=!1)},{default:n(()=>t[24]||(t[24]=[_("Cancel")])),_:1}),o(v,{color:"danger",loading:e.deleting,onClick:e.confirmDeletePriceList},{default:n(()=>t[25]||(t[25]=[_("Delete")])),_:1},8,["loading","onClick"])])]),default:n(()=>{var g;return[a("p",null,[t[22]||(t[22]=_(" Are you sure you want to delete ")),a("strong",null,m((g=e.itemToDelete)==null?void 0:g.package_name),1),t[23]||(t[23]=_("? "))])]}),_:1},8,["modelValue"])],64)}const ms=j(Lt,[["render",Wt],["__scopeId","data-v-5f3b9d56"]]);export{ms as default};
//# sourceMappingURL=ManagePriceList-Dt2edJ4O.js.map
