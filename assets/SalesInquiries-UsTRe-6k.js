import{d as te,m as H,s as z,_ as ae,g as h,e as t,b as a,i as _,w as n,F as P,o as d,l as be,a as q,v as V,t as l,h as S,q as E,x as _e,y as ve,z as Se,A as ke,B as ee,c as Ie,C as Ve,k as X}from"./index-mc8yIoJz.js";import{u as he}from"./useForm-B0KXMGch.js";import{u as qe}from"./useToast-CzWLUixe.js";import{h as $e}from"./errorHandler-DijQ3xmc.js";import{v as Ce}from"./utils-BWc0LXoO.js";import{u as Z}from"./sales-store-BjSGZRwr.js";import{u as W}from"./settings-store-DQMLUdNX.js";import{u as se}from"./quota-store-C74f-cSp.js";import{d as Le}from"./pdfDownloader-DiRJnS-k.js";import{u as Pe}from"./price-list-store-C_f4aewT.js";import"./format-Cn4G_mmc.js";const we=te({name:"SalesInquiriesList",emits:["download-btn-pressed","view-btn-pressed"],data(){return{loading:z(!1),columns:[{key:"id",label:"ID",width:80},{key:"name"},{key:"country"},{key:"nationality"},{key:"preference.preferred_date",label:"Preferred date",width:80},{key:"preference.start_date",label:"Start date",width:80},{key:"preference.end_date",label:"End date",width:80},{key:"actions",width:80}],salesInquiryItems:[],perPage:10,currentPage:1,filter:"",filtered:[],seasonValue:null,seasonOptions:[],dateValue:null,mothValue:null}},computed:{pages(){return this.perPage&&this.perPage!==0?Math.ceil(this.filtered.length/this.perPage):this.filtered.length}},mounted(){this.getSalesInquiryList(),this.getSeasonOptions()},methods:{...H(Z,["getSalesInquiries"]),...H(W,["getSeasons"]),async getSalesInquiryList(){var e;this.loading=!0;try{const s=await this.getSalesInquiries(((e=this.seasonValue)==null?void 0:e.value)??"",this.dateValue??"");if(s.status===200){this.loading=!1;const C=Array.isArray(s.data)?s.data:s.data.data||[];this.salesInquiryItems=C.map(i=>{var w,O,g,L,p,f,c,A,b,T,j,x,F,Q,r,m,y;return{id:i.id,selfitem:i,code:(i==null?void 0:i.code)||"",inquiry_type:(i==null?void 0:i.inquiry_type)||"",name:((w=i==null?void 0:i.entity)==null?void 0:w.full_name)||"N/A",country:((g=(O=i==null?void 0:i.entity)==null?void 0:O.country)==null?void 0:g.name)||"N/A",nationality:((p=(L=i==null?void 0:i.entity)==null?void 0:L.nationality)==null?void 0:p.name)||"N/A",contacts:((c=(f=i==null?void 0:i.entity)==null?void 0:f.contacts)==null?void 0:c.map(u=>{var k;return{id:u.id,name:u==null?void 0:u.contact,contactable:u==null?void 0:u.contactable,type:((k=u==null?void 0:u.contact_type)==null?void 0:k.name)||""}}))||[],preference:{no_of_hunters:((A=i==null?void 0:i.formatted_preferences)==null?void 0:A.no_of_hunters)||0,no_of_observers:((b=i==null?void 0:i.formatted_preferences)==null?void 0:b.no_of_observers)||0,no_of_days:((T=i==null?void 0:i.formatted_preferences)==null?void 0:T.no_of_days)||0,no_of_companions:((j=i==null?void 0:i.formatted_preferences)==null?void 0:j.no_of_companions)||0,special_requests:((x=i==null?void 0:i.formatted_preferences)==null?void 0:x.special_requests)||"",start_date:((F=i==null?void 0:i.formatted_preferences)==null?void 0:F.start_date)||"",end_date:((Q=i==null?void 0:i.formatted_preferences)==null?void 0:Q.end_date)||"",budget_estimation:((r=i==null?void 0:i.formatted_preferences)==null?void 0:r.budget_estimation)||"",preferred_date:((m=i==null?void 0:i.formatted_preferences)==null?void 0:m.preferred_date)||""},package_details:(i==null?void 0:i.package_details)||null,custom_details:(i==null?void 0:i.custom_details)||null,season:((y=i==null?void 0:i.season)==null?void 0:y.name)||"N/A"}}),this.filtered=this.salesInquiryItems}}catch(s){this.loading=!1,console.log(s)}},async getSeasonOptions(){const e=await this.getSeasons();e.status===200&&(this.seasonOptions=e.data.map(s=>({value:s.id,text:s.name})))},btnDownloadClicked(e){console.log(e),this.$emit("download-btn-pressed",e)},btnViewClicked(e){console.log(e),this.$emit("view-btn-pressed",e)}}}),De={class:"grid sm:grid-cols-3 gap-6 mb-6"},Ae={colspan:"6"},Ne={class:"flex justify-center mt-4"};function Te(e,s,C,i,w,O){const g=_("VaSelect"),L=_("VaDateInput"),p=_("VaInput"),f=_("VaButton"),c=_("VaPagination"),A=_("VaDataTable");return d(),h(P,null,[t("div",De,[a(g,{modelValue:e.seasonValue,"onUpdate:modelValue":[s[0]||(s[0]=b=>e.seasonValue=b),e.getSalesInquiryList],options:e.seasonOptions,placeholder:"Filter By Season"},null,8,["modelValue","options","onUpdate:modelValue"]),a(L,{modelValue:e.dateValue,"onUpdate:modelValue":[s[1]||(s[1]=b=>e.dateValue=b),e.getSalesInquiryList],placeholder:"Filter By Date",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),a(p,{modelValue:e.filter,"onUpdate:modelValue":[s[2]||(s[2]=b=>e.filter=b),e.getSalesInquiryList],placeholder:"Search",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),a(A,{striped:"",loading:e.loading,items:e.salesInquiryItems,columns:e.columns,"per-page":e.perPage,"current-page":e.currentPage,filter:e.filter,onFiltered:s[4]||(s[4]=b=>e.filtered=b.items)},{"cell(actions)":n(({rowData:b})=>[a(f,{preset:"plain",icon:"visibility",class:"mr-2",onClick:T=>e.btnViewClicked(b)},null,8,["onClick"]),a(f,{preset:"plain",icon:"download",onClick:T=>e.btnDownloadClicked(b)},null,8,["onClick"])]),bodyAppend:n(()=>[t("tr",null,[t("td",Ae,[t("div",Ne,[a(c,{modelValue:e.currentPage,"onUpdate:modelValue":s[3]||(s[3]=b=>e.currentPage=b),pages:e.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["loading","items","columns","per-page","current-page","filter"])],64)}const Fe=ae(we,[["render",Te]]),Oe=te({name:"SalesInquiryDetails",props:{item:{type:Object,required:!0}},computed:{...be(Z,["observers","companions","clientSafariExtras","accommodations","chartersPrices"])},mounted(){this.getObservers(this.item.id),this.getCompanions(this.item.id),this.getClienSafariExtras(this.item.id),this.getAccommodation(this.item.id),this.getChartersPrice(this.item.id)},methods:{...H(Z,["getObservers","getCompanions","getClienSafariExtras","getAccommodation","getChartersPrice"]),formatDate(e){return e?new Date(e).toLocaleDateString():"Not provided"},formatCurrency(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat(e)||0)},getContactIcon(e){return{email:"email",phone_number:"phone",phone:"phone",address:"home"}[e]||"info"},safeArray(e){return e||[]},safeString(e,s="Not provided"){return e||s}}}),xe={class:"sales-inquiry-details"},Ue={class:"text-center"},Be={class:"va-h3 mb-2"},Ee={class:"flex justify-center items-center gap-4 mb-3"},ze={class:"text-secondary"},je={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Qe={class:"text-3xl font-bold"},Re={class:"text-3xl font-bold"},He={class:"text-3xl font-bold"},Ge={class:"text-3xl font-bold"},Ye={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Me={class:"text-lg font-semibold"},Je={class:"text-lg font-semibold"},We={class:"text-lg font-semibold"},Ke={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Xe={class:"font-medium"},Ze={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},es={class:"text-lg font-semibold"},ss={class:"text-lg font-semibold"},ts={class:"text-lg font-semibold"},as={class:"text-lg font-semibold"},os={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},ns={class:"text-3xl font-bold text-primary"},ls={class:"text-2xl font-bold"},is={class:"text-lg font-bold"},rs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ds={class:"text-lg font-semibold"},ms={class:"text-lg font-semibold"},us={key:0,class:"mb-4"},cs={class:"flex flex-wrap gap-2"},ps={key:1},fs={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},gs={class:"flex justify-between items-center"},ys={class:"font-semibold"},hs={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},bs={class:"flex justify-between items-start"},_s={class:"flex-1"},vs={class:"font-semibold text-base"},Ss={class:"text-sm text-secondary italic"},ks={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Is={class:"font-semibold text-lg mb-2"},Vs={class:"grid grid-cols-2 gap-2 text-sm"},qs={class:"ml-1 font-medium"},$s={class:"ml-1 font-medium"},Cs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ls={class:"font-semibold text-lg mb-2"},Ps={class:"grid grid-cols-2 gap-2 text-sm"},ws={class:"ml-1 font-medium"},Ds={class:"ml-1 font-medium"},As={class:"va-table-responsive"},Ns={class:"va-table va-table--hoverable w-full"},Ts={class:"font-semibold"},Fs={class:"text-secondary"},Os={class:"text-right"},xs={class:"va-table-responsive"},Us={class:"va-table va-table--hoverable w-full"},Bs={class:"font-semibold"},Es={class:"text-secondary"},zs={class:"text-center"},js={class:"text-center"},Qs={class:"va-table-responsive"},Rs={class:"va-table va-table--hoverable w-full"},Hs={class:"font-semibold"},Gs={class:"text-secondary"},Ys={class:"text-right font-bold"};function Ms(e,s,C,i,w,O){var T,j,x,F,Q;const g=_("VaIcon"),L=_("VaChip"),p=_("VaCardContent"),f=_("VaCard"),c=_("VaCardTitle"),A=_("VaDivider"),b=_("VaBadge");return d(),h("div",xe,[a(f,{class:"mb-6",stripe:"","stripe-color":"primary"},{default:n(()=>[a(p,null,{default:n(()=>{var r,m,y;return[t("div",Ue,[t("h1",Be,l((r=e.item)==null?void 0:r.code),1),t("div",Ee,[a(L,{color:((m=e.item)==null?void 0:m.inquiry_type)==="standard"?"success":"info",size:"large"},{default:n(()=>{var u,k;return[a(g,{name:((u=e.item)==null?void 0:u.inquiry_type)==="standard"?"inventory_2":"tune",class:"mr-1"},null,8,["name"]),S(" "+l(((k=e.item)==null?void 0:k.inquiry_type)==="standard"?"Standard Package":"Custom Package"),1)]}),_:1},8,["color"]),a(L,{color:"primary",size:"large"},{default:n(()=>{var u,k;return[a(g,{name:"calendar_month",class:"mr-1"}),S(" "+l((k=(u=e.item)==null?void 0:u.season)==null?void 0:k.name),1)]}),_:1})]),t("p",ze,[a(g,{name:"event",size:"small"}),S(" Created: "+l(e.formatDate((y=e.item)==null?void 0:y.create_date)),1)])])]}),_:1})]),_:1}),t("div",je,[a(f,{stripe:"","stripe-color":"primary"},{default:n(()=>[a(p,{class:"text-center"},{default:n(()=>{var r,m;return[a(g,{name:"schedule",size:"large",color:"primary",class:"mb-2"}),t("div",Qe,l(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_days)||"N/A"),1),s[0]||(s[0]=t("div",{class:"text-sm text-secondary mt-1"},"Days Duration",-1))]}),_:1})]),_:1}),a(f,{stripe:"","stripe-color":"success"},{default:n(()=>[a(p,{class:"text-center"},{default:n(()=>{var r,m;return[a(g,{name:"person",size:"large",color:"success",class:"mb-2"}),t("div",Re,l(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_hunters)||0),1),s[1]||(s[1]=t("div",{class:"text-sm text-secondary mt-1"},"Hunters",-1))]}),_:1})]),_:1}),a(f,{stripe:"","stripe-color":"warning"},{default:n(()=>[a(p,{class:"text-center"},{default:n(()=>{var r,m;return[a(g,{name:"groups",size:"large",color:"warning",class:"mb-2"}),t("div",He,l(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_companions)||0),1),s[2]||(s[2]=t("div",{class:"text-sm text-secondary mt-1"},"Companions",-1))]}),_:1})]),_:1}),a(f,{stripe:"","stripe-color":"info"},{default:n(()=>[a(p,{class:"text-center"},{default:n(()=>{var r,m;return[a(g,{name:"visibility",size:"large",color:"info",class:"mb-2"}),t("div",Ge,l(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_observers)||0),1),s[3]||(s[3]=t("div",{class:"text-sm text-secondary mt-1"},"Observers",-1))]}),_:1})]),_:1})]),a(f,{class:"mb-6",stripe:"","stripe-color":"success"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"person"}),s[4]||(s[4]=S(" Client Information "))]),_:1}),a(p,null,{default:n(()=>{var r,m,y,u,k,U,I,$,B,N;return[t("div",Ye,[t("div",null,[s[5]||(s[5]=t("div",{class:"text-sm text-secondary mb-1"},"Full Name",-1)),t("div",Me,l(e.safeString((m=(r=e.item)==null?void 0:r.entity)==null?void 0:m.full_name)),1)]),t("div",null,[s[6]||(s[6]=t("div",{class:"text-sm text-secondary mb-1"},"Nationality",-1)),t("div",Je,l(e.safeString((k=(u=(y=e.item)==null?void 0:y.entity)==null?void 0:u.nationality)==null?void 0:k.name)),1)]),t("div",null,[s[7]||(s[7]=t("div",{class:"text-sm text-secondary mb-1"},"Country",-1)),t("div",We,l(e.safeString(($=(I=(U=e.item)==null?void 0:U.entity)==null?void 0:I.country)==null?void 0:$.name)),1)])]),a(A,{class:"my-4"}),s[8]||(s[8]=t("div",{class:"text-sm text-secondary mb-2"},"Contacts",-1)),t("div",Ke,[(d(!0),h(P,null,E(e.safeArray((N=(B=e.item)==null?void 0:B.entity)==null?void 0:N.contacts),(G,Y)=>{var D;return d(),h("div",{key:Y,class:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg"},[a(g,{name:e.getContactIcon((D=G.contact_type)==null?void 0:D.name),color:"primary"},null,8,["name"]),t("span",Xe,l(G.contact),1)])}),128))])]}),_:1})]),_:1}),a(f,{class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"event"}),s[9]||(s[9]=S(" Hunting Preferences "))]),_:1}),a(p,null,{default:n(()=>{var r,m,y,u,k,U,I,$;return[t("div",Ze,[t("div",null,[s[10]||(s[10]=t("div",{class:"text-sm text-secondary mb-1"},"Preferred Date",-1)),t("div",es,l(e.formatDate((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.preferred_date)),1)]),t("div",null,[s[11]||(s[11]=t("div",{class:"text-sm text-secondary mb-1"},"Start Date",-1)),t("div",ss,l(e.formatDate((u=(y=e.item)==null?void 0:y.formatted_preferences)==null?void 0:u.start_date)),1)]),t("div",null,[s[12]||(s[12]=t("div",{class:"text-sm text-secondary mb-1"},"End Date",-1)),t("div",ts,l(e.formatDate((U=(k=e.item)==null?void 0:k.formatted_preferences)==null?void 0:U.end_date)),1)]),t("div",null,[s[13]||(s[13]=t("div",{class:"text-sm text-secondary mb-1"},"Duration",-1)),t("div",as,l((($=(I=e.item)==null?void 0:I.formatted_preferences)==null?void 0:$.no_of_days)||"N/A")+" days",1)])])]}),_:1})]),_:1}),((T=e.item)==null?void 0:T.inquiry_type)==="standard"&&((j=e.item)!=null&&j.package_details)?(d(),q(f,{key:0,class:"mb-6",stripe:"","stripe-color":"success"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"inventory_2"}),s[14]||(s[14]=S(" Standard Package Details "))]),_:1}),a(p,null,{default:n(()=>{var r,m,y,u,k,U;return[t("div",os,[a(f,{stripe:"","stripe-color":"primary",class:"col-span-1 md:col-span-2"},{default:n(()=>[a(p,{class:"text-center"},{default:n(()=>{var I,$,B,N;return[a(g,{name:"attach_money",size:"large",color:"primary",class:"mb-2"}),t("div",ns,l(($=(I=e.item)==null?void 0:I.package_details)==null?void 0:$.currency_name)+" "+l(e.formatCurrency((N=(B=e.item)==null?void 0:B.package_details)==null?void 0:N.amount)),1),s[15]||(s[15]=t("div",{class:"text-sm text-secondary mt-1"},"Package Amount",-1))]}),_:1})]),_:1}),a(f,{stripe:"","stripe-color":"info"},{default:n(()=>[a(p,{class:"text-center"},{default:n(()=>{var I,$;return[a(g,{name:"schedule",size:"large",color:"info",class:"mb-2"}),t("div",ls,l(($=(I=e.item)==null?void 0:I.package_details)==null?void 0:$.duration),1),s[16]||(s[16]=t("div",{class:"text-sm text-secondary mt-1"},"Days",-1))]}),_:1})]),_:1}),a(f,{stripe:"","stripe-color":"warning"},{default:n(()=>[a(p,{class:"text-center"},{default:n(()=>{var I,$;return[a(g,{name:"category",size:"large",color:"warning",class:"mb-2"}),t("div",is,l(($=(I=e.item)==null?void 0:I.package_details)==null?void 0:$.hunting_type_name),1),s[17]||(s[17]=t("div",{class:"text-sm text-secondary mt-1"},"Hunting Type",-1))]}),_:1})]),_:1})]),t("div",rs,[t("div",null,[s[18]||(s[18]=t("div",{class:"text-sm text-secondary mb-1"},"Hunting Area",-1)),t("div",ds,l((m=(r=e.item)==null?void 0:r.package_details)==null?void 0:m.area_name),1)]),t("div",null,[s[19]||(s[19]=t("div",{class:"text-sm text-secondary mb-1"},"Package Period",-1)),t("div",ms,l(e.formatDate((u=(y=e.item)==null?void 0:y.package_details)==null?void 0:u.start_date))+" - "+l(e.formatDate((U=(k=e.item)==null?void 0:k.package_details)==null?void 0:U.end_date)),1)])])]}),_:1})]),_:1})):V("",!0),((x=e.item)==null?void 0:x.inquiry_type)==="custom"&&((F=e.item)!=null&&F.custom_details)?(d(),q(f,{key:1,class:"mb-6",stripe:"","stripe-color":"info"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"tune"}),s[20]||(s[20]=S(" Custom Package Details "))]),_:1}),a(p,null,{default:n(()=>{var r,m,y,u,k,U,I,$;return[e.safeArray((m=(r=e.item)==null?void 0:r.custom_details)==null?void 0:m.areas).length>0?(d(),h("div",us,[s[21]||(s[21]=t("div",{class:"text-sm text-secondary mb-2"},"Hunting Areas",-1)),t("div",cs,[(d(!0),h(P,null,E((u=(y=e.item)==null?void 0:y.custom_details)==null?void 0:u.areas,(B,N)=>(d(),q(L,{key:N,color:"info",size:"large"},{default:n(()=>[a(g,{name:"location_on",class:"mr-1"}),S(" "+l(B.area_name),1)]),_:2},1024))),128))])])):V("",!0),e.safeArray((U=(k=e.item)==null?void 0:k.custom_details)==null?void 0:U.species).length>0?(d(),h("div",ps,[s[22]||(s[22]=t("div",{class:"text-sm text-secondary mb-2"},"Requested Species",-1)),t("div",fs,[(d(!0),h(P,null,E(($=(I=e.item)==null?void 0:I.custom_details)==null?void 0:$.species,(B,N)=>(d(),q(f,{key:N,color:"#f0f9ff"},{default:n(()=>[a(p,null,{default:n(()=>[t("div",gs,[t("div",ys,l(B.species_name),1),a(b,{color:"success"},{default:n(()=>[S("Qty: "+l(B.quantity),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))])])):V("",!0)]}),_:1})]),_:1})):V("",!0),e.safeArray((Q=e.item)==null?void 0:Q.species).length>0?(d(),q(f,{key:2,class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>{var r,m,y;return[a(g,{name:"pets"}),S(" "+l(((r=e.item)==null?void 0:r.inquiry_type)==="custom"?"Additional Species":"Package Species")+" ("+l(((y=(m=e.item)==null?void 0:m.species)==null?void 0:y.length)||0)+") ",1)]}),_:1}),a(p,null,{default:n(()=>{var r;return[t("div",hs,[(d(!0),h(P,null,E((r=e.item)==null?void 0:r.species,(m,y)=>(d(),q(f,{key:y,color:m.quantity>0?"#f0f9ff":"#fef2f2"},{default:n(()=>[a(p,null,{default:n(()=>{var u,k;return[t("div",bs,[t("div",_s,[t("div",vs,l((u=m.species)==null?void 0:u.name),1),t("div",Ss,l((k=m.species)==null?void 0:k.scientific_name),1)]),a(b,{color:m.quantity>0?"success":"danger",class:"ml-2"},{default:n(()=>[S(" Qty: "+l(m.quantity),1)]),_:2},1032,["color"])])]}),_:2},1024)]),_:2},1032,["color"]))),128))])]}),_:1})]),_:1})):V("",!0),e.observers&&e.observers.length>0?(d(),q(f,{key:3,class:"mb-6",stripe:"","stripe-color":"info"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"visibility"}),S(" Observers ("+l(e.observers.length)+") ",1)]),_:1}),a(p,null,{default:n(()=>[t("div",ks,[(d(!0),h(P,null,E(e.observers,(r,m)=>(d(),q(f,{key:m,color:"#f0f9ff"},{default:n(()=>[a(p,null,{default:n(()=>{var y,u;return[t("div",Is,l(r.full_name),1),t("div",Vs,[t("div",null,[s[23]||(s[23]=t("span",{class:"text-secondary"},"Nationality:",-1)),t("span",qs,l(((y=r.nationality)==null?void 0:y.name)||"N/A"),1)]),t("div",null,[s[24]||(s[24]=t("span",{class:"text-secondary"},"Country:",-1)),t("span",$s,l(((u=r.country)==null?void 0:u.name)||"N/A"),1)])])]}),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})):V("",!0),e.companions&&e.companions.length>0?(d(),q(f,{key:4,class:"mb-6",stripe:"","stripe-color":"success"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"groups"}),S(" Companions ("+l(e.companions.length)+") ",1)]),_:1}),a(p,null,{default:n(()=>[t("div",Cs,[(d(!0),h(P,null,E(e.companions,(r,m)=>(d(),q(f,{key:m,color:"#f0fdf4"},{default:n(()=>[a(p,null,{default:n(()=>{var y,u;return[t("div",Ls,l(r.full_name),1),t("div",Ps,[t("div",null,[s[25]||(s[25]=t("span",{class:"text-secondary"},"Nationality:",-1)),t("span",ws,l(((y=r.nationality)==null?void 0:y.name)||"N/A"),1)]),t("div",null,[s[26]||(s[26]=t("span",{class:"text-secondary"},"Country:",-1)),t("span",Ds,l(((u=r.country)==null?void 0:u.name)||"N/A"),1)])])]}),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})):V("",!0),e.clientSafariExtras&&e.clientSafariExtras.length>0?(d(),q(f,{key:5,class:"mb-6",stripe:"","stripe-color":"primary"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"add_circle"}),S(" Safari Extras ("+l(e.clientSafariExtras.length)+") ",1)]),_:1}),a(p,null,{default:n(()=>[t("div",As,[t("table",Ns,[s[27]||(s[27]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Service"),t("th",{class:"text-left"},"Description"),t("th",{class:"text-right"},"Quantity")])],-1)),t("tbody",null,[(d(!0),h(P,null,E(e.clientSafariExtras,(r,m)=>{var y,u;return d(),h("tr",{key:m},[t("td",Ts,l(((y=r.safari_extra)==null?void 0:y.name)||r.name),1),t("td",Fs,l(((u=r.safari_extra)==null?void 0:u.description)||r.description||"N/A"),1),t("td",Os,[a(b,{color:"primary"},{default:n(()=>[S(l(r.quantity||1),1)]),_:2},1024)])])}),128))])])])]),_:1})]),_:1})):V("",!0),e.accommodations&&e.accommodations.length>0?(d(),q(f,{key:6,class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"hotel"}),S(" Accommodations ("+l(e.accommodations.length)+") ",1)]),_:1}),a(p,null,{default:n(()=>[t("div",xs,[t("table",Us,[s[28]||(s[28]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Accommodation"),t("th",{class:"text-left"},"Type"),t("th",{class:"text-center"},"Check-in"),t("th",{class:"text-center"},"Check-out")])],-1)),t("tbody",null,[(d(!0),h(P,null,E(e.accommodations,(r,m)=>{var y,u;return d(),h("tr",{key:m},[t("td",Bs,l(r.name||((y=r.accommodation_type)==null?void 0:y.name)||"N/A"),1),t("td",Es,l(((u=r.accommodation_type)==null?void 0:u.name)||"N/A"),1),t("td",zs,l(e.formatDate(r.check_in_date)),1),t("td",js,l(e.formatDate(r.check_out_date)),1)])}),128))])])])]),_:1})]),_:1})):V("",!0),e.chartersPrices&&e.chartersPrices.length>0?(d(),q(f,{key:7,class:"mb-6",stripe:"","stripe-color":"info"},{default:n(()=>[a(c,{class:"flex items-center gap-2"},{default:n(()=>[a(g,{name:"flight"}),S(" Charter Costs ("+l(e.chartersPrices.length)+") ",1)]),_:1}),a(p,null,{default:n(()=>[t("div",Qs,[t("table",Rs,[s[29]||(s[29]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Charter"),t("th",{class:"text-left"},"Description"),t("th",{class:"text-right"},"Amount")])],-1)),t("tbody",null,[(d(!0),h(P,null,E(e.chartersPrices,(r,m)=>{var y;return d(),h("tr",{key:m},[t("td",Hs,l(r.name||((y=r.charter)==null?void 0:y.name)||"Charter "+(m+1)),1),t("td",Gs,l(r.description||"N/A"),1),t("td",Ys,l(e.formatCurrency(r.amount||r.price)),1)])}),128))])])])]),_:1})]),_:1})):V("",!0)])}const Js=ae(Oe,[["render",Ms],["__scopeId","data-v-b24a8673"]]),Ws=te({components:{Salesinquirieslist:Fe,VaForm:ke,VaInput:Se,VaSelect:ve,VaButton:_e,SalesInquiryDetails:Js},setup(){const e=z(),s=z(),C=z(!1),i=z("add"),{isValid:w,validate:O,resetValidation:g,reset:L}=he(e),{isValid:p,validate:f,resetValidation:c,reset:A}=he(s),{init:b}=qe(),T=z(!1),j=z("standard"),x=ee({id:null,full_name:"",nick_name:"",country:null,nationality:null,category:null,email:"",phone:"",address:"",no_of_hunters:1,no_of_observers:0,priceListId:null,no_of_days:0,no_of_companions:0,species:null,quantity:0,area:null,season:null,preferred_date:null,start_date:null,end_date:null}),F=ee({id:null,client_id:null,contact:"",contact_type:null,contactable:!1}),Q=()=>{C.value=!0},r=()=>{C.value=!1,T.value=!1},m=z([]),y=z([]),u=z([]),k=z([]),U=z([]),I=z(0),$=async()=>{const D={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/countries",headers:{"Content-Type":"application/json"}},o=await X.request(D);o.status===200&&m.value.push(...o.data.map(v=>({value:v.id,text:v.name})))},B=async()=>{try{const D={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/entity-categories-vset/"},o=await X.request(D);o.status===200&&u.value.push(...o.data.map(v=>({value:v.id,text:v.name})))}catch{console.warn("Categories endpoint not available")}},N=async()=>{const D={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/nationalities",headers:{"Content-Type":"application/json"}},o=await X.request(D);o.status===200&&y.value.push(...o.data.map(v=>({value:v.id,text:v.name})))},G=async()=>{try{const D={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/settings/contact-types/",headers:{"Content-Type":"application/json"}},o=await X.request(D);o.status===200&&k.value.push(...o.data.map(v=>({value:v.id,text:v.name})))}catch{console.warn("Contact types endpoint not available")}},Y=Ie(()=>{var v;let D="";const o=(v=F.contact_type)==null?void 0:v.value;return o==="email"?D="email":o==="phone_number"?D="phone":D="",D});return Ve(()=>{$(),B(),N(),G()}),{formRef:e,contactFormRef:s,showAddSalesInquiriesForm:C,btnIcon:i,form:x,contactForm:F,showDetailsPage:T,countries:m,nationality:y,categoryOptions:u,contactsTypes:k,clients:U,step:I,packageSelectionType:j,init:b,toggleAddSalesInquiriesForm:Q,isValidForm:w,validateForm:O,resetValidationForm:g,resetForm:L,isValidContactForm:p,validateContactForm:f,resetValidationContactForm:c,resetContactForm:A,validators:Ce,getCountries:$,getCategories:B,getNationalities:N,getContactTypes:G,contactFieldType:Y,gotBack:r}},data(){return{speciesOptions:[],speciesObjects:[],areasOptions:[],seasonsOptions:[],selectedInquiryItem:null,downloadPdf:Le,saving:!1,packagesOptions:[],originalQuantities:ee({})}},computed:{...be(W,["logo","salesPackagesSpecies"]),speciesList(){return this.salesPackagesSpecies}},mounted(){this.getSpecies(),this.getAreas(),this.getSeasonList(),this.getPL()},methods:{...H(se,["getSpeciesList"]),...H(se,["getAreaList"]),...H(se,["getAllSpeciesPerQuotaPerArea"]),...H(Z,["createSalesInquiry"]),...H(W,["getSeasons","getSalespackagesSpecies"]),...H(Pe,["getPriceList","getPriceListById"]),async submit(){var O,g,L,p,f;if(this.saving=!0,!this.form.full_name||!this.form.country||!this.form.nationality||!this.form.email){this.init({message:"Please fill in all required fields (Name, Country, Nationality, Email).",color:"warning"}),this.saving=!1;return}if(this.packageSelectionType==="standard"){if(!this.form.priceListId){this.init({message:"Please select a standard price list.",color:"warning"}),this.saving=!1;return}}else if(this.packageSelectionType==="custom"&&this.speciesObjects.length===0){this.init({message:"Please add at least one species for custom package.",color:"warning"}),this.saving=!1;return}if(this.form.no_of_hunters<=0){this.init({message:"Number of hunters must be greater than zero.",color:"warning"}),this.saving=!1;return}const e={full_name:this.form.full_name,country_id:(O=this.form.country)==null?void 0:O.value,nationality_id:(g=this.form.nationality)==null?void 0:g.value},s=[{contact_type_id:1,contact:this.form.email,contactable:!0},{contact_type_id:2,contact:this.form.phone,contactable:!0},{contact_type_id:3,contact:this.form.address,contactable:!1}];let C=[];this.packageSelectionType==="custom"&&(C=this.speciesObjects);const i={preferred_date:this.form.preferred_date,start_date:this.form.start_date,end_date:this.form.end_date,no_of_observers:this.form.no_of_observers||0,no_of_companions:this.form.no_of_companions||0,no_of_hunters:this.packageSelectionType==="standard"?this.form.no_of_companions:this.form.no_of_hunters,no_of_days:this.packageSelectionType==="standard"?null:this.form.no_of_days},w={entity:e,contacts:s,inquiry_type:this.packageSelectionType,preferences:i};this.packageSelectionType==="standard"?(w.price_list_id=(L=this.form.priceListId)==null?void 0:L.value,w.season_id=6):(w.species=C,w.area_id=(p=this.form.area)==null?void 0:p.value,w.season_id=((f=this.form.season)==null?void 0:f.value)||null),console.log("Request payload:",JSON.stringify(w,null,2));try{const c=await this.createSalesInquiry(w);c.status===201&&(this.saving=!1,this.init({message:c.data.message,color:"success"}),this.resetForm(),this.resetValidationContactForm(),this.speciesObjects=[])}catch(c){if(this.saving=!1,console.error("Error creating sales inquiry:",c),c.response){const A=$e(c.response);this.init({message:`
`+A.map((b,T)=>`${T+1}. ${b}`).join(`
`),color:"danger"})}else c.request?this.init({message:"No response from server. Please check your network connection.",color:"danger"}):this.init({message:c.message||"An unexpected error occurred",color:"danger"})}},viewInquiries(e){this.showDetailsPage=!0,this.selectedInquiryItem=e.selfitem},addNewSpeciesItemToStorage(){if(!this.form.species||!this.form.quantity){this.init({message:"Please fill all required fields.",color:"warning"});return}if(Number(this.form.quantity)<=0){this.init({message:"Quantity must be greater than zero.",color:"warning"});return}this.speciesObjects.some(s=>s.species_id===this.form.species.value)?console.log("Species item already exists:",this.form.species.value):this.speciesObjects.push({species_id:this.form.species.value,name:this.form.species.text,quantity:this.form.quantity})},deleteFromStorage(e){this.speciesObjects.splice(e,1),console.log("Species item deleted:",e)},async getSpecies(){try{const e=await this.getSpeciesList();e.status===200&&(this.speciesOptions=e.data.map(s=>({value:s.id,text:s.name})))}catch(e){console.error("Error loading species:",e)}},async getAreas(){try{const e=await this.getAreaList();this.areasOptions=e.data.map(s=>({value:s.id,text:s.name}))}catch(e){console.log(e)}},async getSeasonList(){try{const e=await this.getSeasons();this.seasonsOptions=e.data.map(s=>({value:s.id,text:s.name}))}catch(e){console.log(e)}},async getPL(){const e=await this.getPriceList();e.status===200?(this.packagesOptions=e.data.data.map(s=>({value:s.id,text:s.package_name||`Package ${s.id}`,selfItem:s})),console.log("packagesOptions:",this.packagesOptions)):console.log("Error getting price list")},async populateSpeciesList(){var s,C,i,w,O,g;const e=W();if(!this.form.priceListId||!this.form.priceListId.value){e.salesPackagesSpecies=[];return}try{const L=await this.getPriceListById(this.form.priceListId.value);if(console.log("Price list detail response:",L),L.status===200&&L.data.success){const p=L.data.data;if(this.form.priceListId.selfItem=p,this.packageSelectionType==="standard"){if((C=(s=p.sales_package)==null?void 0:s.area)!=null&&C.name){const f=this.areasOptions.find(c=>c.text===p.sales_package.area.name);f&&(this.form.area=f)}if((i=p.price_list_type)!=null&&i.duration&&(this.form.no_of_days=p.price_list_type.duration),(O=(w=p.price_list_type)==null?void 0:w.price_list)!=null&&O.start_date){const f=new Date(p.price_list_type.price_list.start_date),c=this.seasonsOptions.find(A=>{var b;return(b=A.selfItem)!=null&&b.start_date?new Date(A.selfItem.start_date).getFullYear()===f.getFullYear():!1});c&&(this.form.season=c)}}if((g=p.sales_package)!=null&&g.species&&Array.isArray(p.sales_package.species)){const f=p.sales_package.species.map(c=>{var A,b,T;return{id:((A=c.species)==null?void 0:A.id)||c.id,name:((b=c.species)==null?void 0:b.name)||c.name||"Unknown",scientific_name:((T=c.species)==null?void 0:T.scientific_name)||c.scientific_name||"N/A",quantity:c.quantity||0,requested_quantity:0}});e.salesPackagesSpecies=f,console.log("Populated species:",f),this.init({message:`Loaded ${f.length} species from the selected package.`,color:"success",position:"bottom-right"})}else console.log("No species array found. Response structure:",p.sales_package),e.salesPackagesSpecies=[],this.init({message:"No species found in the selected package.",color:"warning",position:"bottom-right"})}}catch(L){console.error("Error fetching price list details:",L),this.init({message:"Failed to load package details. Please try again.",color:"danger",position:"bottom-right"}),e.salesPackagesSpecies=[]}},onChange(e,s){console.log("Quantity changed:",e,s);const C=this.salesPackagesSpecies.find(i=>i.id===e);C&&(C.requested_quantity=s,this.salesPackagesSpecies=[...this.salesPackagesSpecies],s>C.quantity?this.init({message:`Warning: Requested quantity (${s}) exceeds available quantity (${C.quantity}) for ${C.name}.`,color:"warning",position:"bottom-right"}):s>0&&this.init({message:`Quantity for ${C.name} has been set to ${s}.`,color:"success",position:"bottom-right"}))},onPackageTypeChange(){const e=W();this.packageSelectionType==="standard"?(this.form.priceListId=null,this.salesPackagesSpecies.forEach(s=>{s.requested_quantity=0})):(this.form.priceListId=null,this.form.area=null,this.form.no_of_days=0,this.form.season=null,e.salesPackagesSpecies=[],this.speciesObjects=[])},formatDateRange(e,s){if(!e||!s)return"N/A";const C=new Date(e),i=new Date(s),w=C.toLocaleDateString("en-US",{month:"short",year:"numeric"}),O=i.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${w} - ${O}`},formatCurrency(e){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):"$0.00"},formatChargesPer(e){return e?e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):""},getSequenceLabel(e){return{1:"1st",2:"2nd",3:"3rd"}[e]||`${e}th`}}}),Ks={class:"flex flex-col md:flex-row gap-3 mb-6 justify-between items-center py-4 px-2 bg-gray-50 rounded-lg"},Xs={class:"flex flex-col md:flex-row gap-3 justify-start"},Zs={class:"p-6 bg-white rounded-lg"},et={class:"mb-6"},st={class:"flex items-center gap-2 mb-4"},tt={class:"flex gap-6 mb-4"},at={key:0,class:"grid grid-cols-1 gap-4 mb-4"},ot={key:0,class:"flex flex-col"},nt={class:"font-semibold"},lt={class:"text-sm text-gray-500"},it={class:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm"},rt={class:"ml-1 font-medium"},dt={class:"ml-1 font-medium"},mt={class:"ml-1 font-medium"},ut={class:"ml-1 font-medium"},ct={key:0,class:"mt-3 pt-3 border-t"},pt={class:"flex flex-wrap gap-1"},ft={key:1,class:"mt-2"},gt={class:"ml-1 text-xs font-medium"},yt={key:2,class:"mt-1"},ht={class:"ml-1 text-xs font-medium"},bt={class:"va-table-responsive"},_t={class:"va-table va-table--striped"},vt={class:"font-medium"},St={class:"text-sm text-gray-600"},kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},It={class:"flex justify-between items-start"},Vt={class:"flex-1"},qt={class:"font-semibold text-base capitalize"},$t={class:"text-xs text-gray-600 mt-1"},Ct={class:"mt-2 flex items-center gap-2"},Lt={class:"text-xs text-gray-500"},Pt={class:"va-table-responsive"},wt={class:"va-table va-table--striped"},Dt={class:"font-medium"},At={class:"text-sm text-gray-600"},Nt={class:"font-semibold"},Tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ft={key:0,class:"p-4 bg-blue-50 rounded-lg"},Ot={class:"flex items-center gap-2 mb-2"},xt={class:"text-2xl font-bold text-primary"},Ut={key:1,class:"p-4 bg-green-50 rounded-lg"},Bt={class:"flex items-center gap-2 mb-2"},Et={class:"text-2xl font-bold text-success"},zt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},jt={class:"flex items-end"},Qt={class:"mt-4"},Rt={class:"font-semibold"},Ht={class:"ml-3 text-sm text-gray-600"},Gt={class:"mb-6"},Yt={class:"flex items-center gap-2 mb-4"},Mt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Jt={class:"mb-6"},Wt={class:"flex items-center gap-2 mb-4"},Kt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Xt={class:"mb-6"},Zt={class:"flex items-center gap-2 mb-4"},ea={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},sa={class:"mb-6"},ta={class:"flex items-center gap-2 mb-4"},aa={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},oa={class:"flex justify-end gap-3 p-4"};function na(e,s,C,i,w,O){const g=_("VaButton"),L=_("VaButtonGroup"),p=_("SalesInquiryDetails"),f=_("Salesinquirieslist"),c=_("VaIcon"),A=_("VaRadio"),b=_("VaSelect"),T=_("VaCardTitle"),j=_("VaBadge"),x=_("VaCardContent"),F=_("VaCard"),Q=_("VaAlert"),r=_("VaCounter"),m=_("VaDivider"),y=_("VaListItemLabel"),u=_("VaListItemSection"),k=_("VaListItem"),U=_("VaList"),I=_("VaInput"),$=_("VaDateInput"),B=_("VaForm");return d(),q(F,{class:"w-full"},{default:n(()=>[a(x,null,{default:n(()=>[t("div",Ks,[t("div",Xs,[e.showAddSalesInquiriesForm||e.showDetailsPage?(d(),q(g,{key:0,class:"px-6",icon:"arrow_back",size:"large",onClick:s[0]||(s[0]=N=>e.gotBack())},{default:n(()=>s[25]||(s[25]=[S(" Go Back ")])),_:1})):V("",!0)]),!e.showAddSalesInquiriesForm&&!e.showDetailsPage?(d(),q(L,{key:0},{default:n(()=>[a(g,{class:"px-6",color:"primary",label:"Add New Quota",round:"",present:"secondary","border-color":"primary",icon:"add",size:"large",onClick:s[1]||(s[1]=N=>e.toggleAddSalesInquiriesForm())},{default:n(()=>s[26]||(s[26]=[S("Create Enquiry")])),_:1})]),_:1})):V("",!0)]),e.showDetailsPage?(d(),q(p,{key:0,item:e.selectedInquiryItem},null,8,["item"])):(d(),h(P,{key:1},[e.showAddSalesInquiriesForm?(d(),q(B,{key:1,ref:"formRef",class:"space-y-6"},{default:n(()=>{var N,G,Y,D;return[t("div",Zs,[t("div",et,[t("div",st,[a(c,{name:"inventory_2",color:"primary",size:"large"}),s[27]||(s[27]=t("h3",{class:"text-xl font-bold text-gray-800"},"Package Selection",-1))]),t("div",tt,[a(A,{modelValue:e.packageSelectionType,"onUpdate:modelValue":[s[3]||(s[3]=o=>e.packageSelectionType=o),e.onPackageTypeChange],option:"standard",label:"Use Standard Package"},null,8,["modelValue","onUpdate:modelValue"]),a(A,{modelValue:e.packageSelectionType,"onUpdate:modelValue":[s[4]||(s[4]=o=>e.packageSelectionType=o),e.onPackageTypeChange],option:"custom",label:"Create Custom Package"},null,8,["modelValue","onUpdate:modelValue"])]),e.packageSelectionType==="standard"?(d(),h("div",at,[a(b,{modelValue:e.form.priceListId,"onUpdate:modelValue":[s[5]||(s[5]=o=>e.form.priceListId=o),e.populateSpeciesList],placeholder:"Select Standard Price List",label:"Sales Package",rules:[o=>o||"Price List is required"],options:e.packagesOptions,searchable:"","highlight-matched-text":""},{content:n(({value:o})=>{var v,R,M,J;return[o?(d(),h("div",ot,[t("span",nt,l(o.text),1),t("span",lt,l(((v=o.selfItem)==null?void 0:v.area)||((R=o.selfItem)==null?void 0:R.area_package)||"N/A")+" • "+l(((M=o.selfItem)==null?void 0:M.hunting_type)||"N/A")+" • "+l(((J=o.selfItem)==null?void 0:J.duration)||0)+" days ",1)])):V("",!0)]}),_:1},8,["modelValue","rules","options","onUpdate:modelValue"]),e.form.priceListId&&e.form.priceListId.selfItem?(d(),q(F,{key:0,outlined:"",class:"mb-4"},{default:n(()=>[a(T,{class:"text-sm font-semibold"},{default:n(()=>s[28]||(s[28]=[S("Package Details")])),_:1}),a(x,null,{default:n(()=>{var o,v,R,M,J,oe,ne,le,ie,re,de,me,ue,ce,pe,fe,ge;return[t("div",it,[t("div",null,[s[29]||(s[29]=t("span",{class:"text-gray-600"},"Area:",-1)),t("span",rt,l(((o=e.form.priceListId.selfItem)==null?void 0:o.area)||((M=(R=(v=e.form.priceListId.selfItem)==null?void 0:v.sales_package)==null?void 0:R.area)==null?void 0:M.name)||"N/A"),1)]),t("div",null,[s[30]||(s[30]=t("span",{class:"text-gray-600"},"Hunting Type:",-1)),t("span",dt,l(((J=e.form.priceListId.selfItem)==null?void 0:J.hunting_type)||((le=(ne=(oe=e.form.priceListId.selfItem)==null?void 0:oe.price_list_type)==null?void 0:ne.hunting_type)==null?void 0:le.name)||"N/A"),1)]),t("div",null,[s[31]||(s[31]=t("span",{class:"text-gray-600"},"Duration:",-1)),t("span",mt,l(((ie=e.form.priceListId.selfItem)==null?void 0:ie.duration)||((de=(re=e.form.priceListId.selfItem)==null?void 0:re.price_list_type)==null?void 0:de.duration)||0)+" days",1)]),t("div",null,[s[32]||(s[32]=t("span",{class:"text-gray-600"},"Base Amount:",-1)),t("span",ut,l(((me=e.form.priceListId.selfItem)==null?void 0:me.amount)||e.formatCurrency((ce=(ue=e.form.priceListId.selfItem)==null?void 0:ue.price_list_type)==null?void 0:ce.amount)),1)])]),(pe=e.form.priceListId.selfItem)!=null&&pe.safari_extras?(d(),h("div",ct,[s[33]||(s[33]=t("div",{class:"text-xs font-semibold text-gray-700 mb-2"},"Safari Extras Available:",-1)),t("div",pt,[(d(!0),h(P,null,E(e.form.priceListId.selfItem.safari_extras,K=>{var ye;return d(),q(j,{key:K.id,text:`${K.name} (${(ye=K.currency)==null?void 0:ye.symbol}${K.amount})`,color:"info",size:"small"},null,8,["text"])}),128))])])):V("",!0),(fe=e.form.priceListId.selfItem)!=null&&fe.componions_hunter&&e.form.priceListId.selfItem.componions_hunter.length>0?(d(),h("div",ft,[s[34]||(s[34]=t("span",{class:"text-xs text-gray-600"},"Companion Rate:",-1)),t("span",gt,"$"+l(e.form.priceListId.selfItem.componions_hunter[0].amount),1)])):V("",!0),(ge=e.form.priceListId.selfItem)!=null&&ge.observer&&e.form.priceListId.selfItem.observer.length>0?(d(),h("div",yt,[s[35]||(s[35]=t("span",{class:"text-xs text-gray-600"},"Observer Rate:",-1)),t("span",ht,"$"+l(e.form.priceListId.selfItem.observer[0].amount),1)])):V("",!0)]}),_:1})]),_:1})):V("",!0)])):e.packageSelectionType==="custom"?(d(),q(Q,{key:1,color:"info",class:"mb-4"},{title:n(()=>s[36]||(s[36]=[S("Custom Package")])),default:n(()=>[s[37]||(s[37]=S(" You can create a custom package by selecting species and quantities below. This will create a unique price list for this inquiry. "))]),_:1})):V("",!0),s[51]||(s[51]=t("h3",{class:"font-bold text-lg mb-2 mt-4"},"Species Included in Package",-1)),e.packageSelectionType==="standard"&&e.salesPackagesSpecies.length>0?(d(),h(P,{key:2},[a(F,{outlined:"",class:"mb-4"},{default:n(()=>[a(x,null,{default:n(()=>[t("div",bt,[t("table",_t,[s[38]||(s[38]=t("thead",null,[t("tr",null,[t("th",null,"Species Name"),t("th",null,"Scientific Name"),t("th",null,"Quantity")])],-1)),t("tbody",null,[(d(!0),h(P,null,E(e.salesPackagesSpecies,o=>(d(),h("tr",{key:o.id},[t("td",vt,l(o.name),1),t("td",St,l(o.scientific_name||"N/A"),1),t("td",null,[a(j,{color:o.quantity>0?"success":"danger",size:"medium"},{default:n(()=>[S(l(o.quantity),1)]),_:2},1032,["color"])])]))),128))])])])]),_:1})]),_:1}),(N=e.form.priceListId.selfItem)!=null&&N.safari_extras&&e.form.priceListId.selfItem.safari_extras.length>0?(d(),h(P,{key:0},[s[39]||(s[39]=t("h3",{class:"font-bold text-lg mb-2 mt-4"},"Safari Extras",-1)),a(F,{outlined:"",class:"mb-4"},{default:n(()=>[a(x,null,{default:n(()=>[t("div",kt,[(d(!0),h(P,null,E(e.form.priceListId.selfItem.safari_extras,o=>(d(),h("div",{key:o.id,class:"p-3 border rounded-lg hover:shadow-md transition-shadow"},[t("div",It,[t("div",Vt,[t("div",qt,l(o.name),1),t("div",$t,l(o.description),1),t("div",Ct,[a(j,{color:"primary",size:"small"},{default:n(()=>{var v;return[S(l((v=o.currency)==null?void 0:v.symbol)+l(o.amount),1)]}),_:2},1024),t("span",Lt,l(e.formatChargesPer(o.charges_per)),1)])])])]))),128))])]),_:1})]),_:1})],64)):V("",!0),(G=e.form.priceListId.selfItem)!=null&&G.trophy_fees&&e.form.priceListId.selfItem.trophy_fees.length>0?(d(),h(P,{key:1},[s[41]||(s[41]=t("h3",{class:"font-bold text-lg mb-2 mt-4"},"Trophy Fees",-1)),a(F,{outlined:"",class:"mb-4"},{default:n(()=>[a(x,null,{default:n(()=>[t("div",Pt,[t("table",wt,[s[40]||(s[40]=t("thead",null,[t("tr",null,[t("th",null,"Species"),t("th",null,"Scientific Name"),t("th",null,"Sequence"),t("th",null,"Price (USD)")])],-1)),t("tbody",null,[(d(!0),h(P,null,E(e.form.priceListId.selfItem.trophy_fees,o=>{var v,R;return d(),h("tr",{key:o.id},[t("td",Dt,l((v=o.species)==null?void 0:v.name),1),t("td",At,l(((R=o.species)==null?void 0:R.scientific_name)||"N/A"),1),t("td",null,[a(j,{color:"info",size:"small"},{default:n(()=>[S(l(e.getSequenceLabel(o.sequence_order)),1)]),_:2},1024)]),t("td",Nt,"$"+l(o.price_usd),1)])}),128))])])])]),_:1})]),_:1})],64)):V("",!0),(Y=e.form.priceListId.selfItem)!=null&&Y.componions_hunter&&e.form.priceListId.selfItem.componions_hunter.length>0||(D=e.form.priceListId.selfItem)!=null&&D.observer&&e.form.priceListId.selfItem.observer.length>0?(d(),h(P,{key:2},[s[46]||(s[46]=t("h3",{class:"font-bold text-lg mb-2 mt-4"},"Additional Rates",-1)),a(F,{outlined:"",class:"mb-4"},{default:n(()=>[a(x,null,{default:n(()=>[t("div",Tt,[e.form.priceListId.selfItem.componions_hunter&&e.form.priceListId.selfItem.componions_hunter.length>0?(d(),h("div",Ft,[t("div",Ot,[a(c,{name:"group",size:"small",color:"primary"}),s[42]||(s[42]=t("span",{class:"font-semibold text-base"},"Companion Hunter",-1))]),t("div",xt," $"+l(e.form.priceListId.selfItem.componions_hunter[0].amount),1),s[43]||(s[43]=t("div",{class:"text-xs text-gray-600 mt-1"},"per companion",-1))])):V("",!0),e.form.priceListId.selfItem.observer&&e.form.priceListId.selfItem.observer.length>0?(d(),h("div",Ut,[t("div",Bt,[a(c,{name:"visibility",size:"small",color:"success"}),s[44]||(s[44]=t("span",{class:"font-semibold text-base"},"Observer",-1))]),t("div",Et," $"+l(e.form.priceListId.selfItem.observer[0].amount),1),s[45]||(s[45]=t("div",{class:"text-xs text-gray-600 mt-1"},"per observer",-1))])):V("",!0)])]),_:1})]),_:1})],64)):V("",!0)],64)):V("",!0),e.packageSelectionType==="custom"?(d(),h(P,{key:3},[s[50]||(s[50]=t("h3",{class:"font-bold text-lg mb-2 mt-4"},"Preferred Species",-1)),a(F,{outlined:"",class:"mb-4"},{default:n(()=>[a(x,null,{default:n(()=>[t("div",zt,[a(b,{modelValue:e.form.species,"onUpdate:modelValue":s[6]||(s[6]=o=>e.form.species=o),label:"Species",options:e.speciesOptions,placeholder:"Select Species",rules:[o=>!!o||"Species is required"],searchable:"","highlight-matched-text":""},null,8,["modelValue","options","rules"]),a(r,{modelValue:e.form.quantity,"onUpdate:modelValue":s[7]||(s[7]=o=>e.form.quantity=o),label:"Quantity","manual-input":"",min:1,max:100,rules:[o=>o||"Quantity is required"]},null,8,["modelValue","rules"]),t("div",jt,[a(g,{color:"primary",icon:"add",onClick:s[8]||(s[8]=o=>e.addNewSpeciesItemToStorage())},{default:n(()=>s[47]||(s[47]=[S(" Add Species ")])),_:1})])]),a(m,{class:"my-4"}),t("div",Qt,[s[49]||(s[49]=t("div",{class:"text-sm font-semibold mb-3"},"Selected Species",-1)),e.speciesObjects.length>0?(d(),q(U,{key:0,class:"space-y-2"},{default:n(()=>[(d(!0),h(P,null,E(e.speciesObjects,(o,v)=>(d(),q(k,{key:v,class:"border rounded-lg p-3 hover:shadow-md transition-shadow"},{default:n(()=>[a(u,null,{default:n(()=>[a(y,{class:"flex justify-between items-center"},{default:n(()=>[t("div",null,[t("span",Rt,l(o.name),1),t("span",Ht,"Qty: "+l(o.quantity),1)]),a(g,{preset:"plain",icon:"delete",color:"danger",size:"small",onClick:R=>e.deleteFromStorage(v)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),q(Q,{key:1,color:"secondary",border:"left",class:"mb-0"},{default:n(()=>s[48]||(s[48]=[S(" No species selected yet. Add species using the form above. ")])),_:1}))])]),_:1})]),_:1})],64)):V("",!0)]),t("div",Gt,[t("div",Yt,[a(c,{name:"person",color:"primary",size:"large"}),s[52]||(s[52]=t("h3",{class:"text-xl font-bold text-gray-800"},"Basic Information",-1))]),t("div",Mt,[a(I,{modelValue:e.form.full_name,"onUpdate:modelValue":s[9]||(s[9]=o=>e.form.full_name=o),type:"text",placeholder:"Enter your Full name",rules:[o=>o&&o.length>0||"Full name is required"],label:"Full name"},null,8,["modelValue","rules"]),a(b,{modelValue:e.form.country,"onUpdate:modelValue":s[10]||(s[10]=o=>e.form.country=o),placeholder:"Select Country",label:"Country",rules:[o=>o||"Country is required"],options:e.countries,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options"]),a(b,{modelValue:e.form.nationality,"onUpdate:modelValue":s[11]||(s[11]=o=>e.form.nationality=o),placeholder:"Select Client nationality",label:"Client Nationality",rules:[o=>o||"Nationality is required"],options:e.nationality,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options"])])]),t("div",Jt,[t("div",Wt,[a(c,{name:"contact_mail",color:"primary",size:"large"}),s[53]||(s[53]=t("h3",{class:"text-xl font-bold text-gray-800"},"Contact Information",-1))]),t("div",Kt,[a(I,{modelValue:e.form.email,"onUpdate:modelValue":s[12]||(s[12]=o=>e.form.email=o),type:"email",placeholder:"Enter your email",rules:[e.validators.required,e.validators.email],label:"Email"},null,8,["modelValue","rules"]),a(I,{modelValue:e.form.phone,"onUpdate:modelValue":s[13]||(s[13]=o=>e.form.phone=o),type:"text",placeholder:"eg: +971501234567",rules:[e.validators.required,e.validators.tell],label:"Phone"},null,8,["modelValue","rules"]),a(I,{modelValue:e.form.address,"onUpdate:modelValue":s[14]||(s[14]=o=>e.form.address=o),type:"text","max-length":30,placeholder:"Enter your address",rules:[o=>o&&o.length>0||"Address is required"],label:"Address"},null,8,["modelValue","rules"])])]),t("div",Xt,[t("div",Zt,[a(c,{name:"groups",color:"primary",size:"large"}),s[54]||(s[54]=t("h3",{class:"text-xl font-bold text-gray-800"},"Participants and Hunting Days",-1))]),t("div",ea,[a(I,{modelValue:e.form.no_of_observers,"onUpdate:modelValue":s[15]||(s[15]=o=>e.form.no_of_observers=o),label:"Number of Observers(Optional)",placeholder:"Enter Number of Observers",type:"number",required:""},null,8,["modelValue"]),a(I,{modelValue:e.form.no_of_days,"onUpdate:modelValue":s[16]||(s[16]=o=>e.form.no_of_days=o),label:"Number of Days",placeholder:"Enter Number of Days",type:"number",rules:[o=>e.packageSelectionType==="custom"?o||"This field is required":!0],disabled:e.packageSelectionType==="standard"&&!!e.form.priceListId,required:""},null,8,["modelValue","rules","disabled"]),a(I,{modelValue:e.form.no_of_companions,"onUpdate:modelValue":s[17]||(s[17]=o=>e.form.no_of_companions=o),label:"Number of Companions(Optional)",placeholder:"Enter Number of Companions",type:"number",required:""},null,8,["modelValue"]),a(b,{modelValue:e.form.area,"onUpdate:modelValue":s[18]||(s[18]=o=>e.form.area=o),placeholder:"Select Area",label:"Hunting area",rules:[o=>e.packageSelectionType==="custom"?o||"Hunting area is required":!0],options:e.areasOptions,disabled:e.packageSelectionType==="standard"&&!!e.form.priceListId,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options","disabled"])])]),t("div",sa,[t("div",ta,[a(c,{name:"event",color:"primary",size:"large"}),s[55]||(s[55]=t("h3",{class:"text-xl font-bold text-gray-800"},"Season and Tentative Date",-1))]),t("div",aa,[a(b,{modelValue:e.form.season,"onUpdate:modelValue":s[19]||(s[19]=o=>e.form.season=o),placeholder:"Select Season",label:"Season",rules:[o=>e.packageSelectionType==="custom"?o||"Season is required":!0],options:e.seasonsOptions,disabled:e.packageSelectionType==="standard"&&!!e.form.priceListId,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options","disabled"]),a($,{modelValue:e.form.preferred_date,"onUpdate:modelValue":s[20]||(s[20]=o=>e.form.preferred_date=o),label:"Preferred Date",placeholder:"Select Preferred Date",rules:[o=>o||"Preferred Date is required"],required:""},null,8,["modelValue","rules"]),a($,{modelValue:e.form.start_date,"onUpdate:modelValue":s[21]||(s[21]=o=>e.form.start_date=o),label:"Start Date",placeholder:"Select Start Date",rules:[o=>o||"Start Date is required"],required:""},null,8,["modelValue","rules"]),a($,{modelValue:e.form.end_date,"onUpdate:modelValue":s[22]||(s[22]=o=>e.form.end_date=o),label:"End Date",placeholder:"Select End Date",rules:[o=>o||"End Date is required"],required:""},null,8,["modelValue","rules"])])])]),a(m,{class:"my-6"}),t("div",oa,[a(g,{preset:"secondary",onClick:s[23]||(s[23]=o=>e.gotBack())},{default:n(()=>s[56]||(s[56]=[S(" Cancel ")])),_:1}),a(g,{loading:e.saving,icon:"save",disabled:!e.isValidForm,onClick:s[24]||(s[24]=o=>e.validateForm()&&e.submit())},{default:n(()=>s[57]||(s[57]=[S(" Submit Enquiry ")])),_:1},8,["loading","disabled"])])]}),_:1},512)):(d(),q(f,{key:0,onDownloadBtnPressed:s[2]||(s[2]=N=>e.downloadPdf(N.selfitem.pdf)),onViewBtnPressed:e.viewInquiries},null,8,["onViewBtnPressed"]))],64))]),_:1})]),_:1})}const ha=ae(Ws,[["render",na]]);export{ha as default};
//# sourceMappingURL=SalesInquiries-UsTRe-6k.js.map
