import{j as d,k as o}from"./index-mc8yIoJz.js";import{f as l}from"./utils-BWc0LXoO.js";import{f}from"./format-Cn4G_mmc.js";const g=d("sales_inquiries",{state:()=>({salesInquiries:[],results:[],loadingresults:!1,priceBreakDown:null,addCompanions:!1,observers:[],showObserversModal:!1,showCompanionsModal:!1,companions:[],savingSafariExtras:!1,clientSafariExtras:[],showSafariExtrasModal:!1,showAccommodationModal:!1,accommodations:[],chartersPrices:[],showChartersPriceModal:!1,savingCharterPrices:!1,loadingCharterPrices:!1}),actions:{async getSalesInquiries(t,e){const n=e?f(new Date(e),"yyyy-MM-dd"):"",s={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales/sales-inquiries/?season_id="+t+"&preferred_date="+n,headers:{"Content-Type":"application/json"}};return await o.request(s)},async createSalesInquiry(t){const n={method:"post",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales/sales-inquiries/",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return await o.request(n)},async getallSalesConfirmation(){this.loadingresults=!0;const e={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-vset/",headers:{"Content-Type":"application/json"}};try{const n=await o.request(e);return n.data.length>0&&n.status===200?(this.loadingresults=!1,this.results=n.data.map(a=>{var s,r,i,c,u,h,p;return{name:(r=(s=a==null?void 0:a.sales_inquiry)==null?void 0:s.entity)==null?void 0:r.full_name,area:(u=(c=(i=a==null?void 0:a.sales_inquiry)==null?void 0:i.area[0])==null?void 0:c.area)==null?void 0:u.name,airport_name:(h=a==null?void 0:a.itinerary)==null?void 0:h.airport_name,charter_in:l(a.itinerary.charter_in),charter_out:l(a.itinerary.charter_out),arrival:l(a.itinerary.arrival),status:((p=a==null?void 0:a.status)==null?void 0:p.status)??"No Status",selfitem:a}}),n):(this.loadingresults=!1,this.results=[],n)}catch(n){return console.log(n),this.loadingresults=!1,this.results=[],n}},async createSalesConfirmationFinalization(t){const e="http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-vset/",n=JSON.stringify({sales_inquiry_id:t.salesInquiryId,package_id:t.packageId,airport_name:t.airportName,charter_in:t.charterIn,charter_out:t.charterOut,arrival:t.arrival,installments:t.installments,regulatory_package_id:t.regulatoryPackageId}),a={method:"post",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"},data:n};return await o.request(a)},async getSalesPriceBreakdown(t){const n={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/sales-price-break-down/?package_id="+t.packageId+"&sales_inquiry_id="+t.salesInquiryId,headers:{"Content-Type":"application/json"}};try{const a=await o.request(n);return this.priceBreakDown=a.data,a}catch(a){return console.log(a),a}},async updatesalesConfirmationStatus(t){const e="http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-status-vset/",n=new FormData;n.append("doc_type_id",t.docTypeId),n.append("entity_id",t.entityId),n.append("contract_doc",t.contractDoc),n.append("payment_doc",t.paymentDoc),n.append("sales_confirmation_proposal_id",t.salesConfirmationProposalId),n.append("status_id",t.statusId),n.append("area_id",t.areaId),n.append("quota_id",t.quotaId);const a={method:"patch",maxBodyLength:1/0,url:e,headers:{"Content-Type":"multipart/form-data"},data:n};return await o.request(a)},async createSalesConfirmationProposalObservers(t){const e="http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-proposal-observers-vset/",n={full_name:t.fullName,nationality_id:t.nationalityId,country_id:t.countryId,identity_number:t.identityNumber,sales_inquiry_id:t.salesInquiryId,contacts:t.contacts,charter_in:t.charter_in,charter_out:t.charter_out,arrival_airport:t.arrival_airport},a=JSON.stringify(n),s={method:"post",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"},data:a},r=await o.request(s);return r.status===201&&(this.addCompanions=!0,this.showObserversModal=!1),r},async getObservers(t){const n={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-proposal-observers-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}};try{const a=await o.request(n);return a.status===200&&(this.observers=a.data.map(s=>({id:s.id,full_name:s.observer.full_name,nationality:s.observer.nationality.name}))),a}catch(a){return console.log(a),a}},async createSalesConfirmationCompanion(t){const e="http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-companion-vset/",n={full_name:t.fullName,nationality_id:t.nationalityId,country_id:t.countryId,identity_number:t.identityNumber,sales_inquiry_id:t.salesInquiryId,regulatory_package_id:t.regulatoryPackageId,contacts:t.contacts,charter_in:t.charter_in,arrival_airport:t.arrival_airport,charter_out:t.charter_out},a=JSON.stringify(n),s={method:"post",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"},data:a},r=await o.request(s);return r.status===201&&(this.addCompanions=!0,this.showCompanionsModal=!1),r},async getCompanions(t,e=!1){const a={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-companion-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}};try{const s=await o.request(a);return e===!1?(s.status===200&&(this.companions=s.data.map(r=>({id:r.id,full_name:r.companion.full_name,nationality:r.companion.nationality.name}))),s):(this.companions=s.data.map(r=>({text:r.companion.full_name,value:r.companion.id})),s)}catch(s){return console.log(s),s}},async createsafariExtras(t){this.savingSafariExtras=!0;const e="http://localhost:8000/api/v1.0/sales-confirmation/client-safari-extras-vset/",n=JSON.stringify({safary_extras:t}),a={method:"post",maxBodyLength:1/0,url:e,data:n,headers:{"Content-Type":"application/json"}},s=await o.request(a);return s.status===201?(this.showSafariExtrasModal=!1,this.savingSafariExtras=!1,s):(this.savingSafariExtras=!1,s)},async getClienSafariExtras(t){var s;const n={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/client-safari-extras-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}};this.clientSafariExtras=[];const a=await o.request(n);return a.status===200&&(this.clientSafariExtras=(s=a==null?void 0:a.data)==null?void 0:s.map(r=>({name:r.safari_extras.name,amount:`${r.safari_extras.currency.symbol} ${r.safari_extras.amount}`}))),a},async getAccommodation(t){const n={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-accommodation-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}},a=await o.request(n);return a.status===200&&(this.accommodations=a.data.map(s=>({id:s.id,name:s.entity.full_name,type_name:s.type.name,check_in:l(s.check_in),check_out:l(s.check_out)}))),a},async createAccommodation(t){const e="http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-accommodation-vset/",n=JSON.stringify(t),a={method:"post",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"},data:n},s=await o.request(a);return s.status===201&&(this.showAccommodationModal=!1,this.getAccommodation(t.sales_inquiry_id)),s},async getChartersPrice(t){const n={method:"get",maxBodyLength:1/0,url:"http://localhost:8000/api/v1.0/sales-confirmation/sales-charters-price-vset/?sales_inquiry_id="+t,headers:{"Content-Type":"application/json"}},a=await o.request(n);a.status===200&&(this.chartersPrices=a.data.map(s=>{var r,i,c;return{id:s.id,name:s.charters_price_list.name,amount:`${(i=(r=s==null?void 0:s.charters_price_list)==null?void 0:r.currency)==null?void 0:i.symbol} ${(c=s==null?void 0:s.charters_price_list)==null?void 0:c.amount}`}}))},async createChartersPrice(t){const e="http://localhost:8000/api/v1.0/sales-confirmation/sales-charters-price-vset/",n=JSON.stringify(t),a={method:"post",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"},data:n},s=await o.request(a);return s.status===201&&(this.showChartersPriceModal=!1,this.getChartersPrice(t.sales_inquiry_id)),s}}});export{g as u};
//# sourceMappingURL=sales-store-BjSGZRwr.js.map
