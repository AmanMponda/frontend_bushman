import{d as M,_ as q,a as C,g as V,w as i,b as a,i as f,e as s,v as A,t as r,h,F as $,q as x,o as c,m as F,E as Y,l as G,x as Z,y as K,z as X,A as ee,s as O,B as R}from"./index-D6QR9FQk.js";import{u as J}from"./useToast-BcBMeA7k.js";import{u as te}from"./payment-cards-XjDuSg0a.js";import{d as E}from"./pdfDownloader-DiRJnS-k.js";import{f as se}from"./format-Cn4G_mmc.js";import{u as T}from"./price-list-store-C5Kcxwp4.js";import{u as oe}from"./useForm-Dub-z-kP.js";import{h as W}from"./errorHandler-DijQ3xmc.js";import{v as ae}from"./utils-BWc0LXoO.js";import{u as U}from"./quota-store-DfUS8z7f.js";import{u as N}from"./settings-store-piPbthIS.js";import{S as ie}from"./SalesPackageForm-Qd9ZsS9T.js";import"./regulatrory-store-CAI3fMl2.js";const ne=M({components:{},props:{priceListItem:{type:Object,required:!0},pdfData:{type:String,default:""}},data(){return{cardStore:te(),format:se}},computed:{loading(){return this.cardStore.loading},hasUpgradeFees(){return this.priceListItem.upgrade_fees&&this.priceListItem.upgrade_fees.length>0},speciesList(){var e;return this.priceListItem.species&&Array.isArray(this.priceListItem.species)?this.priceListItem.species:((e=this.priceListItem.sales_package)==null?void 0:e.species)||[]},companionHunterCosts(){return this.priceListItem.companion_hunter_costs&&Array.isArray(this.priceListItem.companion_hunter_costs)?this.priceListItem.companion_hunter_costs:this.priceListItem.componions_hunter||[]},currencySymbol(){var e,t,l;return((t=(e=this.priceListItem.price_list_type)==null?void 0:e.currency)==null?void 0:t.symbol)||((l=this.priceListItem.currency)==null?void 0:l.symbol)||"$"}},mounted(){this.cardStore.load()},methods:{formatDate(e){if(!e)return"N/A";try{return this.format(e,"MMM yyyy")}catch{return e}},getSpeciesName(e){var t;return e.name?e.name:((t=e.species)==null?void 0:t.name)||"Unknown"},getSpeciesScientificName(e){var t;return e.scientific_name?e.scientific_name:((t=e.species)==null?void 0:t.scientific_name)||""},formatChargesPer(e){return e?e.toLowerCase().replace("_"," "):""},formatAmount(e){if(e==null)return"N/A";const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)?"N/A":t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},getSequenceLabel(e){const t=["th","st","nd","rd"],l=e%100,_=t[(l-20)%10]||t[l]||t[0];return`${e}${_}`},async downloadPriceListPdf(){var e,t;if(!this.pdfData){console.warn("No PDF data available");return}try{const _=`${(((t=(e=this.priceListItem)==null?void 0:e.sales_package)==null?void 0:t.name)||"price-list").replace(/\s+/g,"-")}-${Date.now()}.pdf`;await E(this.pdfData,_)}catch(l){console.error("Failed to download PDF:",l)}}}}),le={key:1,class:"price-list-details"},re={class:"text-center"},de={class:"va-h3 mb-2"},ce={class:"flex justify-center items-center gap-4 mb-3"},ue={class:"text-lg text-secondary"},me={class:"mt-4"},pe={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},ge={class:"text-3xl font-bold"},he={class:"text-3xl font-bold"},fe={class:"text-lg font-bold"},ye={class:"text-lg font-bold"},_e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},be={class:"flex justify-between items-start"},ve={class:"flex-1"},Ve={class:"font-semibold text-base"},Le={class:"text-sm text-secondary italic"},ke={key:0},Pe={class:"va-table-responsive"},we={class:"va-table va-table--hoverable w-full"},Se={class:"text-right"},Ce={class:"font-semibold"},Ie={class:"text-secondary italic"},Ae={class:"text-center"},Fe={class:"text-right font-bold text-lg"},$e={class:"va-table-responsive"},Oe={class:"va-table va-table--hoverable w-full"},xe={class:"font-semibold"},De={class:"text-right font-bold text-lg"},Te={class:"text-secondary"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Ne={class:"space-y-3"},Ee={key:0,class:"p-4 rounded-lg bg-gray-50"},Me={class:"flex justify-between items-start mb-2"},qe={class:"text-right"},ze={class:"font-bold text-lg"},Be={class:"flex justify-between items-start mb-2"},He={class:"font-semibold text-base capitalize"},je={class:"text-sm text-secondary"},Qe={class:"text-right"},Re={class:"font-bold text-lg"},Ge={class:"text-xs text-secondary"},Je={class:"space-y-4"},We={key:0},Ye={class:"flex justify-between items-center mb-2"},Ze={class:"font-bold text-xl"},Ke={class:"flex justify-between items-center"},Xe={class:"font-bold text-xl"},et={class:"flex items-center gap-2"},tt={class:"flex items-center gap-2"};function st(e,t,l,_,P,I){const y=f("VaSkeleton"),d=f("VaSkeletonGroup"),u=f("VaIcon"),m=f("VaChip"),w=f("VaButton"),g=f("VaCardContent"),v=f("VaCard"),S=f("VaCardTitle"),n=f("VaBadge"),L=f("VaAlert");return e.cardStore.loading||!e.priceListItem||!e.priceListItem.sales_package?(c(),C(d,{key:0},{default:i(()=>[a(y,{class:"mb-4",height:"160px",variant:"squared"}),a(y,{class:"mb-4",height:"160px",variant:"squared"}),a(y,{height:"360px",variant:"squared"})]),_:1})):(c(),V("div",le,[a(v,{class:"mb-6",stripe:"","stripe-color":"primary"},{default:i(()=>[a(g,null,{default:i(()=>{var o,b,k,p,D,z;return[s("div",re,[s("h1",de,r((o=e.priceListItem.sales_package)==null?void 0:o.name),1),s("div",ce,[a(m,{color:"primary",size:"large"},{default:i(()=>{var B,H,j,Q;return[a(u,{name:"calendar_month",class:"mr-1"}),h(" "+r(e.formatDate((H=(B=e.priceListItem.price_list_type)==null?void 0:B.price_list)==null?void 0:H.start_date))+" - "+r(e.formatDate((Q=(j=e.priceListItem.price_list_type)==null?void 0:j.price_list)==null?void 0:Q.end_date)),1)]}),_:1}),(b=e.priceListItem.price_list_type)!=null&&b.is_active?(c(),C(m,{key:0,color:"success",size:"large"},{default:i(()=>[a(u,{name:"check_circle",class:"mr-1"}),t[0]||(t[0]=h(" Active "))]),_:1})):(c(),C(m,{key:1,color:"danger",size:"large"},{default:i(()=>[a(u,{name:"cancel",class:"mr-1"}),t[1]||(t[1]=h(" Inactive "))]),_:1}))]),s("p",ue,[a(u,{name:"location_on",size:"small"}),h(" "+r((p=(k=e.priceListItem.sales_package)==null?void 0:k.area)==null?void 0:p.name)+" ("+r((z=(D=e.priceListItem.sales_package)==null?void 0:D.area)==null?void 0:z.description)+") ",1)]),s("div",me,[e.pdfData?(c(),C(w,{key:0,color:"primary",icon:"download",onClick:e.downloadPriceListPdf},{default:i(()=>t[2]||(t[2]=[h(" Download PDF ")])),_:1},8,["onClick"])):A("",!0)])])]}),_:1})]),_:1}),s("div",pe,[a(v,{stripe:"","stripe-color":"primary"},{default:i(()=>[a(g,{class:"text-center"},{default:i(()=>[a(u,{name:"attach_money",size:"large",color:"primary",class:"mb-2"}),s("div",ge,r(e.priceListItem.price_list_type.currency.symbol)+r(e.formatAmount(e.priceListItem.price_list_type.amount)),1),t[3]||(t[3]=s("div",{class:"text-sm text-secondary mt-1"},"Base Amount",-1))]),_:1})]),_:1}),a(v,{stripe:"","stripe-color":"success"},{default:i(()=>[a(g,{class:"text-center"},{default:i(()=>[a(u,{name:"schedule",size:"large",color:"success",class:"mb-2"}),s("div",he,r(e.priceListItem.price_list_type.duration),1),t[4]||(t[4]=s("div",{class:"text-sm text-secondary mt-1"},"Days Duration",-1))]),_:1})]),_:1}),a(v,{stripe:"","stripe-color":"warning"},{default:i(()=>[a(g,{class:"text-center"},{default:i(()=>{var o;return[a(u,{name:"verified",size:"large",color:"warning",class:"mb-2"}),s("div",fe,r((o=e.priceListItem.sales_package.regulatory_package)==null?void 0:o.name),1),t[5]||(t[5]=s("div",{class:"text-sm text-secondary mt-1"},"License Type",-1))]}),_:1})]),_:1}),a(v,{stripe:"","stripe-color":"info"},{default:i(()=>[a(g,{class:"text-center"},{default:i(()=>[a(u,{name:"category",size:"large",color:"info",class:"mb-2"}),s("div",ye,r(e.priceListItem.price_list_type.hunting_type.name),1),t[6]||(t[6]=s("div",{class:"text-sm text-secondary mt-1"},"Hunting Type",-1))]),_:1})]),_:1})]),a(v,{class:"mb-6",stripe:"","stripe-color":"success"},{default:i(()=>[a(S,{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"pets"}),h(" Available Species ("+r(e.speciesList.length)+") ",1)]),_:1}),a(g,null,{default:i(()=>[s("div",_e,[(c(!0),V($,null,x(e.speciesList,o=>(c(),C(v,{key:o.id,class:"species-card",color:o.quantity>0?"#f0f9ff":"#fef2f2"},{default:i(()=>[a(g,null,{default:i(()=>[s("div",be,[s("div",ve,[s("div",Ve,r(e.getSpeciesName(o)),1),s("div",Le,r(e.getSpeciesScientificName(o)),1)]),a(n,{color:o.quantity>0?"success":"danger",class:"ml-2"},{default:i(()=>[h(" Qty: "+r(o.quantity),1)]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1032,["color"]))),128))])]),_:1})]),_:1}),a(v,{class:"mb-6",stripe:"","stripe-color":"warning"},{default:i(()=>[a(S,{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"military_tech"}),h(" Trophy Fees ("+r(e.priceListItem.price_list_type.currency.name)+") ",1)]),_:1}),a(g,null,{default:i(()=>[e.priceListItem.trophy_fees&&e.priceListItem.trophy_fees.length>0?(c(),V("div",ke,[s("div",Pe,[s("table",we,[s("thead",null,[s("tr",null,[t[7]||(t[7]=s("th",{class:"text-left"},"Species",-1)),t[8]||(t[8]=s("th",{class:"text-left"},"Scientific Name",-1)),t[9]||(t[9]=s("th",{class:"text-center"},"Sequence",-1)),s("th",Se,"Price ("+r(e.priceListItem.price_list_type.currency.symbol)+")",1)])]),s("tbody",null,[(c(!0),V($,null,x(e.priceListItem.trophy_fees,o=>(c(),V("tr",{key:o.id},[s("td",Ce,r(o.species.name),1),s("td",Ie,r(o.species.scientific_name),1),s("td",Ae,[a(n,{text:e.getSequenceLabel(o.sequence_order),color:"primary"},null,8,["text"])]),s("td",Fe,r(e.priceListItem.price_list_type.currency.symbol)+r(e.formatAmount(o.price_usd)),1)]))),128))])])])])):(c(),C(L,{key:1,color:"info",border:"top"},{default:i(()=>t[10]||(t[10]=[h(" No trophy fees available for this package ")])),_:1}))]),_:1})]),_:1}),e.priceListItem.upgrade_fees&&e.priceListItem.upgrade_fees.length>0?(c(),C(v,{key:0,class:"mb-6",stripe:"","stripe-color":"warning"},{default:i(()=>[a(S,{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"upgrade"}),t[11]||(t[11]=h(" Upgrade Fees "))]),_:1}),a(g,null,{default:i(()=>[s("div",$e,[s("table",Oe,[t[12]||(t[12]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Species"),s("th",{class:"text-right"},"Amount"),s("th",{class:"text-left"},"Description")])],-1)),s("tbody",null,[(c(!0),V($,null,x(e.priceListItem.upgrade_fees,o=>(c(),V("tr",{key:o.id},[s("td",xe,r(o.species_name),1),s("td",De,r(o.currency_symbol)+r(e.formatAmount(o.amount)),1),s("td",Te,r(o.description),1)]))),128))])])])]),_:1})]),_:1})):A("",!0),s("div",Ue,[a(v,{stripe:"","stripe-color":"info"},{default:i(()=>[a(S,{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"add_circle"}),t[13]||(t[13]=h(" Safari Extras "))]),_:1}),a(g,null,{default:i(()=>{var o;return[s("div",Ne,[e.priceListItem.observer&&e.priceListItem.observer.length>0?(c(),V("div",Ee,[s("div",Me,[t[15]||(t[15]=s("div",null,[s("div",{class:"font-semibold text-base"},"Observer"),s("div",{class:"text-sm text-secondary"},"Observer cost")],-1)),s("div",qe,[s("div",ze,r(e.priceListItem.price_list_type.currency.symbol)+r((o=e.priceListItem.observer[0])==null?void 0:o.amount),1),t[14]||(t[14]=s("div",{class:"text-xs text-secondary"},"per day / person",-1))])])])):A("",!0),(c(!0),V($,null,x(e.priceListItem.safari_extras,b=>(c(),V("div",{key:b.id,class:"p-4 rounded-lg bg-gray-50"},[s("div",Be,[s("div",null,[s("div",He,r(b.name),1),s("div",je,r(b.description),1)]),s("div",Qe,[s("div",Re,r(b.currency.symbol)+r(b.amount),1),s("div",Ge,r(e.formatChargesPer(b.charges_per)),1)])])]))),128))])]}),_:1})]),_:1}),a(v,{stripe:"","stripe-color":"success"},{default:i(()=>[a(S,{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"groups"}),t[16]||(t[16]=h(" Companion Hunter Costs "))]),_:1}),a(g,null,{default:i(()=>[s("div",Je,[e.companionHunterCosts&&e.companionHunterCosts.length>0?(c(),V("div",We,[t[19]||(t[19]=s("div",{class:"text-sm font-semibold text-secondary mb-2"},"Companion Hunter",-1)),(c(!0),V($,null,x(e.companionHunterCosts,o=>(c(),V("div",{key:o.id,class:"p-4 rounded-lg bg-green-50 mb-2"},[s("div",Ye,[t[17]||(t[17]=s("span",{class:"text-base"},"Days",-1)),s("span",Ze,r(o.days),1)]),s("div",Ke,[t[18]||(t[18]=s("span",{class:"text-base"},"Rate",-1)),s("span",Xe,r(e.currencySymbol)+r(o.amount),1)])]))),128))])):(c(),C(L,{key:1,color:"info",border:"top"},{default:i(()=>t[20]||(t[20]=[h(" No companion hunter costs available ")])),_:1}))])]),_:1})]),_:1})]),a(v,{class:"mb-6",stripe:"","stripe-color":"danger"},{default:i(()=>[a(g,null,{default:i(()=>[a(L,{color:"warning",border:"left",class:"mb-3"},{title:i(()=>[s("div",et,[a(u,{name:"warning"}),t[21]||(t[21]=s("span",{class:"font-bold"},"Important Information",-1))])]),default:i(()=>[t[22]||(t[22]=h(" All hunts confirmation is subject to quota availability. Other safari packages are available on request and can be customized depending on client requirements. "))]),_:1}),e.hasUpgradeFees?(c(),C(L,{key:0,color:"info",border:"left"},{title:i(()=>[s("div",tt,[a(u,{name:"info"}),t[23]||(t[23]=s("span",{class:"font-bold"},"Upgrade Fees",-1))])]),default:i(()=>[t[24]||(t[24]=h(" If additional trophies beyond the standard package are taken, upgrade fees may apply (plus trophy fees). "))]),_:1})):A("",!0)]),_:1})]),_:1})]))}const ot=q(ne,[["render",st],["__scopeId","data-v-51723121"]]),at=M({components:{SalesPackageForm:ie,VaForm:ee,VaInput:X,VaSelect:K,VaButton:Z},props:{editMode:{type:Boolean,default:!1},editItem:{type:Object,default:null}},emits:["saved"],setup(){const e=O(),{isValid:t,validate:l,resetValidation:_,reset:P}=oe(e),{init:I}=J(),y=O(!1),d=R({id:null,hunting_type_id:null,package:[],amount:null,currency:null,duration:null,season:null,end_date:null,species:null,quantity:null,companion_days:null,companion_amount:null}),u=R({id:null,client_id:null,contact:"",contact_type:null,contactable:!1}),m=o=>{d.package=d.package.filter(b=>b!==o)},w=O([]),g=O([]),v=O([]),S=O([]),n=O([]),L=O(0);return{formRef:e,form:d,contactForm:u,showEditForm:y,countries:w,nationality:g,categoryOptions:v,contactsTypes:S,clients:n,step:L,init:I,isValidForm:t,validateForm:l,resetValidationForm:_,resetForm:P,deleteChip:m,validators:ae}},data(){return{preferred_species:[],speciesOptions:[],speciesObjects:[],areasOptions:[],huntingTypesOptions:[],salesQuotasOptions:[],speciesItemOptions:[],currencyOptions:[],savingPriceList:!1,durationsOptions:[{value:1,text:"1 day"},{value:2,text:"2 days"},{value:3,text:"3 days"},{value:4,text:"4 days"},{value:5,text:"5 days"},{value:6,text:"6 days"},{value:7,text:"7 days"},{value:8,text:"8 days"},{value:9,text:"9 days"},{value:10,text:"10 days"},{value:11,text:"11 days"},{value:12,text:"12 days"},{value:13,text:"13 days"},{value:14,text:"14 days"},{value:15,text:"15 days"},{value:16,text:"16 days"},{value:17,text:"17 days"},{value:18,text:"18 days"},{value:19,text:"19 days"},{value:20,text:"20 days"},{value:21,text:"21 days"}],seasonsOptions:[],upgradeFees:[]}},computed:{...G(T,["salesPackages","packageOptions","latestPackage","loadingpackages"]),...Y(T,{_shM:"showModal"})},watch:{},async mounted(){await Promise.all([this.getAreas(),this.getHuntingTypes(),this.getQuotaList(),this.getCurrencyList(),this.getSalesPackages(),this.getSeasonList(),this.getSpeciesItems()]),this.editMode&&this.editItem&&this.populateFormForEdit()},methods:{...F(U,["getSpeciesList"]),...F(U,["getAllSpeciesPerQuotaPerArea"]),...F(U,["getAreaList"]),...F(N,["getHuntingsTypes"]),...F(N,["getCurrencies","getSeasons"]),...F(U,["getQuotas"]),...F(T,["createPriceList","updatePriceList"]),...F(T,["getSalesPackageList"]),onAreaChange(e){console.log(e)},async submit(){var l,_,P,I,y,d,u,m,w,g,v,S,n,L;this.savingPriceList=!0;const e=this.upgradeFees.filter(o=>o.species_id&&o.amount&&o.currency_id).map(o=>{var k,p;const b={species_id:((k=o.species_id)==null?void 0:k.value)||o.species_id,amount:parseFloat(o.amount),currency_id:((p=o.currency_id)==null?void 0:p.value)||o.currency_id,description:o.description||""};return o.id&&(b.id=o.id),b}),t={huntingTypeId:((l=this.form.hunting_type_id)==null?void 0:l.value)||this.form.hunting_type_id,sales_package_ids:(_=this.form.package)==null?void 0:_.filter(o=>(o==null?void 0:o.value)!==void 0).map(o=>o==null?void 0:o.value),amount:this.form.amount,currency:((P=this.form.currency)==null?void 0:P.value)||this.form.currency,duration:((I=this.form.duration)==null?void 0:I.value)||this.form.duration,season_id:((d=(y=this.form.season)==null?void 0:y.value)==null?void 0:d.id)||((u=this.form.season)==null?void 0:u.id),start_at:((w=(m=this.form.season)==null?void 0:m.value)==null?void 0:w.start_at)||((g=this.form.season)==null?void 0:g.start_at),end_at:((S=(v=this.form.season)==null?void 0:v.value)==null?void 0:S.end_at)||((n=this.form.season)==null?void 0:n.end_at),is_active:1,area_id:3,user_id:1,companionAmount:this.form.companion_amount?String(this.form.companion_amount):null,companionDays:((L=this.form.companion_days)==null?void 0:L.value)||this.form.companion_days,upgrade_fees:e.length>0?e:null};try{let o;this.editMode&&this.editItem?(o=await this.updatePriceList(this.editItem.id,t),o.status===200&&(this.init({message:"Price list updated successfully",color:"success"}),this.savingPriceList=!1,this.$emit("saved"))):(o=await this.createPriceList(t),o.status===201&&(this.init({message:o.data.message,color:"success"}),this.resetForm(),this.resetValidationForm(),this.speciesObjects=[],this.upgradeFees=[],this.savingPriceList=!1))}catch(o){this.savingPriceList=!1,W(o.response),console.log(o),this.init({message:o.message,color:"danger"})}},populateFormForEdit(){var w,g,v,S;if(!this.editItem)return;console.log("Edit Item:",JSON.stringify(this.editItem,null,2)),console.log("Hunting Types Options:",this.huntingTypesOptions),console.log("Seasons Options:",this.seasonsOptions),console.log("Currency Options:",this.currencyOptions);const e=this.editItem.price_list_type||this.editItem,t=e.amount||this.editItem.amount;t&&(this.form.amount=String(t).replace("$","").replace(",",""));const l=e.duration||this.editItem.duration;l!=null&&(this.form.duration=this.durationsOptions.find(n=>n.value===l)||{value:l,text:`${l} days`});const _=((w=e.hunting_type)==null?void 0:w.name)||this.editItem.hunting_type;console.log("Hunting Type Name:",_),_&&(this.form.hunting_type_id=this.huntingTypesOptions.find(n=>n.text===_)),console.log("Selected Hunting Type:",this.form.hunting_type_id);const P=(g=e.price_list)==null?void 0:g.start_date,I=(v=e.price_list)==null?void 0:v.end_date;if(console.log("Season dates:",P,I),P&&I&&(this.form.season=this.seasonsOptions.find(n=>{var L,o;return((L=n.value)==null?void 0:L.start_at)===P&&((o=n.value)==null?void 0:o.end_at)===I}),!this.form.season)){const n=new Date(P).getFullYear();this.form.season=this.seasonsOptions.find(L=>{var o;return(o=L.text)==null?void 0:o.includes(String(n))})}console.log("Selected Season:",this.form.season);const y=(S=e.currency)==null?void 0:S.name;console.log("Currency Name:",y),y&&(this.form.currency=this.currencyOptions.find(n=>n.text===y)),this.form.currency||(this.form.currency=this.currencyOptions.find(n=>n.text==="USD")||this.currencyOptions[0]),console.log("Selected Currency:",this.form.currency);const d=this.editItem.companion_hunter_costs||e.companion_hunter_costs;if(d&&d.length>0){const n=d[0];this.form.companion_amount=n.amount||null,n.days&&(this.form.companion_days=this.durationsOptions.find(L=>L.value===n.days)||{value:n.days,text:`${n.days} days`})}else this.form.companion_amount=this.editItem.companion_amount||null,this.editItem.companion_days&&(this.form.companion_days=this.durationsOptions.find(n=>n.value===this.editItem.companion_days)||{value:this.editItem.companion_days,text:`${this.editItem.companion_days} days`});const u=this.editItem.sales_package;u?this.form.package=[{value:u.id,text:u.name}]:this.editItem.packages&&Array.isArray(this.editItem.packages)&&(this.form.package=this.editItem.packages.map(n=>({value:n.id,text:n.name})));const m=this.editItem.upgrade_fees||e.upgrade_fees;m&&Array.isArray(m)&&m.length>0&&(this.upgradeFees=m.map(n=>{var L,o;return{id:n.id,species_id:this.speciesOptions.find(b=>b.value===n.species_id)||{value:n.species_id,text:((L=n.species)==null?void 0:L.name)||`Species ${n.species_id}`},amount:n.amount,currency_id:this.currencyOptions.find(b=>b.value===n.currency_id)||{value:n.currency_id,text:((o=n.currency)==null?void 0:o.name)||"USD"},description:n.description||""}}))},async getSpeciesItems(){try{const e=await this.getSpeciesList();this.speciesOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getSeasonList(){try{const e=await this.getSeasons();this.seasonsOptions=e.data.map(t=>({value:t,text:t.name}))}catch(e){console.log(e)}},_showModal(){this._shM=!0},async getSalesPackages(){try{await this.getSalesPackageList(!0)}catch(e){console.log(e)}},deleteFromStorage(e){this.speciesObjects.splice(e,1),console.log("Species item deleted:",e)},async getAreas(){try{const e=await this.getAreaList();this.areasOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getHuntingTypes(){try{const e=await this.getHuntingsTypes();this.huntingTypesOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},onChangePackage(e){console.log(e.filter(t=>(t==null?void 0:t.value)!==void 0).map(t=>t==null?void 0:t.value))},async getQuotaList(){try{const e=await this.getQuotas(null);this.salesQuotasOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getCurrencyList(){try{const e=await this.getCurrencies();this.currencyOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},addUpgradeFee(){this.upgradeFees.push({species_id:null,amount:null,currency_id:null,description:""})},removeUpgradeFee(e){this.upgradeFees.splice(e,1)}}}),it={class:"p-1"},nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},lt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},dt={class:"mb-4"},ct={class:"flex items-center justify-between mb-2"},ut={key:0,class:"space-y-4"},mt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},pt={class:"flex items-end"},gt={class:"mt-3"},ht={key:1,class:"text-center py-4 text-gray-400 border border-dashed border-gray-300 rounded-lg"},ft={class:"mt-4 d-flex p-2"};function yt(e,t,l,_,P,I){const y=f("VaChip"),d=f("VaIcon"),u=f("VaSelect"),m=f("VaInput"),w=f("VaButton"),g=f("VaCard"),v=f("VaForm"),S=f("VaInnerLoading"),n=f("SalesPackageForm"),L=f("VaModal");return c(),V($,null,[a(S,{loading:e.savingPriceList,size:60},{default:i(()=>[a(v,{ref:"formRef"},{default:i(()=>[s("div",it,[t[16]||(t[16]=s("h3",{class:"font-bold text-lg mb-2"},"Price list Infos",-1)),s("div",nt,[a(u,{modelValue:e.form.package,"onUpdate:modelValue":[t[1]||(t[1]=o=>e.form.package=o),e.onChangePackage],options:e.packageOptions,multiple:"",clearable:"",placeholder:"Select Package list here",rules:[o=>o||"Package is required"],label:"Packages","required-mark":""},{content:i(({value:o})=>[(c(!0),V($,null,x(o,b=>(c(),C(y,{key:b,size:"small",color:"info",class:"mr-1 my-1",closeable:"","onUpdate:modelValue":k=>e.deleteChip(b)},{default:i(()=>[h(r(b.text),1)]),_:2},1032,["onUpdate:modelValue"]))),128))]),append:i(()=>[a(d,{name:"add",class:"ml-2",onClick:t[0]||(t[0]=o=>e._showModal())})]),_:1},8,["modelValue","options","rules","onUpdate:modelValue"]),a(u,{modelValue:e.form.hunting_type_id,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.hunting_type_id=o),placeholder:"Select Hunting Type",label:"Hunting Type",rules:[o=>o||"Hunting type is required"],options:e.huntingTypesOptions,searchable:"","required-mark":"","highlight-matched-text":""},null,8,["modelValue","rules","options"]),a(u,{modelValue:e.form.season,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.season=o),options:e.seasonsOptions,"required-mark":"",label:"Select season",placeholder:"Select season"},null,8,["modelValue","options"])]),t[17]||(t[17]=s("h3",{class:"font-bold text-lg mb-2"},"Charges",-1)),s("div",lt,[a(m,{modelValue:e.form.amount,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.amount=o),type:"text",placeholder:"Enter Amount",rules:[o=>o&&o.length>0||"Amount is required"],label:"Amount","required-mark":""},null,8,["modelValue","rules"]),a(u,{modelValue:e.form.currency,"onUpdate:modelValue":t[5]||(t[5]=o=>e.form.currency=o),placeholder:"Select Currency",label:"Currency",rules:[o=>o||"Currency is required"],options:e.currencyOptions,searchable:"","highlight-matched-text":"","required-mark":""},null,8,["modelValue","rules","options"]),a(u,{modelValue:e.form.duration,"onUpdate:modelValue":t[6]||(t[6]=o=>e.form.duration=o),type:"text",options:e.durationsOptions,"required-mark":"",placeholder:"Enter Duration eg: 21 days",rules:[o=>o||"Duration is required"],label:"Duration(days)"},null,8,["modelValue","options","rules"])]),t[18]||(t[18]=s("h3",{class:"font-bold text-lg mb-2"},"Companion Charges",-1)),s("div",rt,[a(m,{modelValue:e.form.companion_amount,"onUpdate:modelValue":t[7]||(t[7]=o=>e.form.companion_amount=o),type:"number",placeholder:"Enter Companion Amount",label:"Companion Cost"},null,8,["modelValue"]),a(u,{modelValue:e.form.companion_days,"onUpdate:modelValue":t[8]||(t[8]=o=>e.form.companion_days=o),options:e.durationsOptions,placeholder:"Select Companion Days",label:"Companion Days",clearable:""},null,8,["modelValue","options"])]),s("div",dt,[s("div",ct,[t[12]||(t[12]=s("h3",{class:"font-bold text-lg"},"Upgrade Fees (Optional)",-1)),a(w,{size:"small",color:"primary",icon:"add",onClick:e.addUpgradeFee},{default:i(()=>t[11]||(t[11]=[h(" Add Upgrade Fee ")])),_:1},8,["onClick"])]),t[15]||(t[15]=s("p",{class:"text-sm text-gray-500 mb-3"}," Add upgrade fees for additional species that can be hunted beyond the standard package. ",-1)),e.upgradeFees.length>0?(c(),V("div",ut,[(c(!0),V($,null,x(e.upgradeFees,(o,b)=>(c(),C(g,{key:b,class:"p-4 bg-gray-50",stripe:"","stripe-color":"warning"},{default:i(()=>[s("div",mt,[a(u,{modelValue:o.species_id,"onUpdate:modelValue":k=>o.species_id=k,options:e.speciesOptions,placeholder:"Select Species",label:"Species",searchable:"","highlight-matched-text":"",rules:[k=>k||"Species is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"]),a(m,{modelValue:o.amount,"onUpdate:modelValue":k=>o.amount=k,type:"number",placeholder:"Enter Amount",label:"Amount",rules:[k=>k||"Amount is required"]},null,8,["modelValue","onUpdate:modelValue","rules"]),a(u,{modelValue:o.currency_id,"onUpdate:modelValue":k=>o.currency_id=k,options:e.currencyOptions,placeholder:"Select Currency",label:"Currency",rules:[k=>k||"Currency is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"]),s("div",pt,[a(w,{color:"danger",icon:"delete",size:"small",onClick:k=>e.removeUpgradeFee(b)},{default:i(()=>t[13]||(t[13]=[h(" Remove ")])),_:2},1032,["onClick"])])]),s("div",gt,[a(m,{modelValue:o.description,"onUpdate:modelValue":k=>o.description=k,type:"textarea",placeholder:"Enter description (optional)",label:"Description","min-rows":2},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128))])):(c(),V("div",ht,[a(d,{name:"info",size:"small",class:"mr-1"}),t[14]||(t[14]=h(' No upgrade fees added. Click "Add Upgrade Fee" to add optional upgrade fees. '))]))])]),s("div",ft,[a(w,{icon:"save",class:"mr-3 mb-2",loading:e.savingPriceList,disabled:!e.isValidForm,onClick:t[9]||(t[9]=o=>e.validateForm()&&e.submit())},{default:i(()=>[h(r(e.editMode?"Update":"Save"),1)]),_:1},8,["loading","disabled"])])]),_:1},512)]),_:1},8,["loading"]),a(L,{modelValue:e._shM,"onUpdate:modelValue":t[10]||(t[10]=o=>e._shM=o),"ok-text":"Apply","close-button":"",size:"large","hide-default-actions":!0},{default:i(()=>[a(n)]),_:1},8,["modelValue"])],64)}const _t=q(at,[["render",yt]]),bt=M({name:"ManagePriceList",components:{PricesListDetails:ot,CreatePricesListForm:_t},setup(){return{formRef:O(null)}},data(){return{columns:[{key:"package_name",label:"Package Name",sortable:!0},{key:"area",label:"Area",sortable:!0},{key:"hunting_type",label:"Hunting Type",sortable:!0},{key:"amount",label:"Price",sortable:!0},{key:"duration",label:"Duration",sortable:!0},{key:"season_name",label:"Season",sortable:!0},{key:"species_count",label:"Species",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1,width:120}],items:[],printableDataList:[],item:null,toast:J(),areasOptions:[],huntingTypeOptions:[],seasonOptions:[],showPriceList:!0,ShowCreateNewPriceListForm:!1,loading:!1,loadingSeasons:!1,huntingTypeValue:null,areaValue:null,seasonValue:null,minAmount:null,maxAmount:null,poriceListPdf:"",individualPriceListPdf:"",downloadPdf:E,downloadingPdf:!1,showDeleteModal:!1,itemToDelete:null,deleting:!1,showEditForm:!1,editItem:null}},computed:{...G(N,["logo"]),activePackages(){return this.items.filter(e=>e.status==="Active").length},uniqueAreas(){return new Set(this.items.map(t=>t.area)).size}},mounted(){this.getSeasonOptions(),this.getPriceLists(),this.getAreas(),this.getHuntingTypesOptions(),this.loadLogo()},methods:{...F(T,["getPriceList","getPriceListByHuntingType","getPriceListById","deletePriceList","getCompletePriceListPdf"]),...F(U,["getAreaList"]),...F(N,["getHuntingsTypes","loadLogo","getSeasons"]),getActiveSpecies(e){return e.filter(t=>t.quantity>0)},formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"},async getSeasonOptions(){this.loadingSeasons=!0;try{const e=await this.getSeasons(!1);if(e.status===200){const t={value:"",text:"All Seasons"};this.seasonOptions=e.data.map(l=>({value:l.id,text:l.name})),this.seasonOptions.unshift(t),this.seasonValue=this.seasonOptions[0]}}catch(e){console.error("Error fetching seasons:",e)}finally{this.loadingSeasons=!1}},async toggleShowPriceListMethod(e){const t=e==null?void 0:e.id;if(t)try{const l=await this.getPriceListById(t);this.item=l.data.data||l.data,this.individualPriceListPdf=l.data.pdf||"",this.showPriceList=!1}catch(l){console.error("Error fetching price list detail:",l)}},async onDownloadPdf(){var e,t,l,_;this.downloadingPdf=!0;try{const P=g=>g==null?"":typeof g=="object"&&"value"in g?g.value:g,I=P(this.huntingTypeValue)||"",y=P(this.areaValue)||"",d=P(this.seasonValue)||"",u=this.minAmount||"",m=this.maxAmount||"",w=await this.getCompletePriceListPdf(I,y,d,u,m);if(w.status===200){const g=((e=w.data)==null?void 0:e.pdf)||w.data,v=n=>typeof n=="string"&&/^https?:\/\//i.test(n),S=n=>typeof n=="string"&&n.length>200&&/^[A-Za-z0-9+/=\r\n]+$/.test(n);if(!g||!v(g)&&!S(g)){(t=this.toast)==null||t.init({message:"PDF not available",color:"warning"});return}await E(g,`price-list-${Date.now()}.pdf`)}else(l=this.toast)==null||l.init({message:"Failed to generate PDF",color:"danger"})}catch(P){console.error("Error downloading PDF:",P),(_=this.toast)==null||_.init({message:"Failed to download PDF",color:"danger"})}finally{this.downloadingPdf=!1}},goBack(){this.showPriceList=!0,this.ShowCreateNewPriceListForm=!1,this.showEditForm=!1,this.editItem=null,this.getPriceLists()},showCreateNewPriceListFormMethod(){this.ShowCreateNewPriceListForm=!0,this.showPriceList=!1,this.showEditForm=!1},async editPriceList(e){var t;try{const l=await this.getPriceListById(e.id);this.editItem=l.data.data||l.data,this.showEditForm=!0,this.showPriceList=!1,this.ShowCreateNewPriceListForm=!1}catch(l){console.error("Error fetching price list for edit:",l),(t=this.toast)==null||t.init({message:"Failed to load price list details",color:"danger"})}},onEditSaved(){var e;this.showEditForm=!1,this.showPriceList=!0,this.editItem=null,this.getPriceLists(),(e=this.toast)==null||e.init({message:"Price list updated successfully",color:"success"})},confirmDelete(e){this.itemToDelete=e,this.showDeleteModal=!0},async confirmDeletePriceList(){var e,t;if(this.itemToDelete){this.deleting=!0;try{const l=await this.deletePriceList(this.itemToDelete.id,!0);(l.status===200||l.status===204)&&((e=this.toast)==null||e.init({message:"Price list deleted successfully",color:"success"}),this.showDeleteModal=!1,this.itemToDelete=null,this.getPriceLists())}catch(l){const _=W(l.response);(t=this.toast)==null||t.init({message:_.join(", ")||"Failed to delete price list",color:"danger"})}finally{this.deleting=!1}}},async getPriceLists(){this.loading=!0;try{const e=d=>d==null?"":typeof d=="object"&&"value"in d?d.value:d,t=e(this.huntingTypeValue)||"",l=e(this.areaValue)||"",_=e(this.seasonValue)||"",P=this.minAmount||"",I=this.maxAmount||"",y=await this.getPriceList(t,l,_,P,I);if(y.status===200){const d=y==null?void 0:y.data,u=Array.isArray(d)?d:(d==null?void 0:d.data)??[];this.printableDataList=d,this.poriceListPdf=(d==null?void 0:d.pdf)||"",Array.isArray(u)?this.items=u.map(m=>({id:m.id,package_name:m.package_name,area:m.area,area_package:m.area_package,hunting_type:m.hunting_type,amount:m.amount,duration:m.duration,status:m.status,start_date:m.start_date,end_date:m.end_date,season_id:m.season_id,season_name:m.season_name,species_count:m.species_count,species:m.species||[],companion_hunter_costs:m.companion_hunter_costs||[]})):this.items=[]}}catch(e){console.error("Error in getPriceLists:",e)}finally{this.loading=!1}},async getAreas(){var e;try{const t=await this.getAreaList(),l={value:"",text:"All Areas"};this.areasOptions=(e=t==null?void 0:t.data)==null?void 0:e.map(_=>({value:_.id,text:_.name})),this.areasOptions.unshift(l),this.areaValue=this.areasOptions[0]}catch(t){console.error("Error fetching areas:",t)}},async getHuntingTypesOptions(){var e;try{const t=await this.getHuntingsTypes();if(t.status===200){const l={value:"",text:"All Types"};this.huntingTypeOptions=(e=t==null?void 0:t.data)==null?void 0:e.map(_=>({value:_.id,text:_.name})),this.huntingTypeOptions.unshift(l),this.huntingTypeValue=this.huntingTypeOptions[0]}}catch(t){console.error("Error fetching hunting types:",t)}}}}),vt={class:"flex flex-col md:flex-row gap-2 mb-4 justify-between items-center"},Vt={class:"flex flex-col md:flex-row gap-2 justify-start items-center"},Lt={key:1,class:"text-xl font-bold text-gray-700"},kt={key:2,class:"text-xl font-bold text-gray-700"},Pt={class:"filters-section bg-gray-50 rounded-lg p-4 mb-6 mt-4"},wt={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4"},St={class:"block text-sm font-medium text-gray-600 mb-1"},Ct={class:"block text-sm font-medium text-gray-600 mb-1"},It={class:"block text-sm font-medium text-gray-600 mb-1"},At={class:"block text-sm font-medium text-gray-600 mb-1"},Ft={class:"block text-sm font-medium text-gray-600 mb-1"},$t={class:"flex items-end"},Ot={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6"},xt={class:"stat-card bg-blue-50 rounded-lg p-4 text-center"},Dt={class:"text-2xl font-bold text-blue-600"},Tt={class:"stat-card bg-green-50 rounded-lg p-4 text-center"},Ut={class:"text-2xl font-bold text-green-600"},Nt={class:"stat-card bg-amber-50 rounded-lg p-4 text-center"},Et={class:"text-2xl font-bold text-amber-600"},Mt={key:0,class:"text-center py-12"},qt={class:"font-semibold"},zt={class:"flex items-center gap-1"},Bt={class:"font-semibold text-green-600"},Ht={class:"flex gap-2"},jt={class:"flex gap-2 justify-end"};function Qt(e,t,l,_,P,I){const y=f("VaButton"),d=f("VaIcon"),u=f("VaDivider"),m=f("VaSelect"),w=f("VaInput"),g=f("VaBadge"),v=f("VaDataTable"),S=f("VaInnerLoading"),n=f("PricesListDetails"),L=f("CreatePricesListForm"),o=f("VaCardContent"),b=f("VaCard"),k=f("VaModal");return c(),V($,null,[a(b,{class:"price-list-page"},{default:i(()=>[a(o,null,{default:i(()=>[s("div",vt,[s("div",Vt,[!e.showPriceList||e.showEditForm?(c(),C(y,{key:0,class:"px-3 py-2",icon:"arrow_back",size:"small",onClick:e.goBack},{default:i(()=>t[7]||(t[7]=[h(" Back to List ")])),_:1},8,["onClick"])):A("",!0),e.showPriceList&&!e.showEditForm?(c(),V("h2",Lt,[a(d,{name:"list_alt",class:"mr-2"}),t[8]||(t[8]=h(" Price Lists "))])):A("",!0),e.showEditForm?(c(),V("h2",kt,[a(d,{name:"edit",class:"mr-2"}),t[9]||(t[9]=h(" Edit Price List "))])):A("",!0)]),!e.ShowCreateNewPriceListForm&&e.showPriceList&&!e.showEditForm?(c(),C(y,{key:0,class:"px-4 py-2",color:"primary",icon:"add",round:"",onClick:e.showCreateNewPriceListFormMethod},{default:i(()=>t[10]||(t[10]=[h(" Add a new Price List ")])),_:1},8,["onClick"])):A("",!0)]),a(u),e.ShowCreateNewPriceListForm?A("",!0):(c(),V($,{key:0},[e.showPriceList?(c(),V($,{key:0},[s("div",Pt,[s("div",wt,[s("div",null,[s("label",St,[a(d,{name:"date_range",size:"small",class:"mr-1"}),t[11]||(t[11]=h(" Season "))]),a(m,{modelValue:e.seasonValue,"onUpdate:modelValue":[t[0]||(t[0]=p=>e.seasonValue=p),e.getPriceLists],options:e.seasonOptions,placeholder:"Select Season",loading:e.loadingSeasons},null,8,["modelValue","options","loading","onUpdate:modelValue"])]),s("div",null,[s("label",Ct,[a(d,{name:"pets",size:"small",class:"mr-1"}),t[12]||(t[12]=h(" Hunting Type "))]),a(m,{modelValue:e.huntingTypeValue,"onUpdate:modelValue":[t[1]||(t[1]=p=>e.huntingTypeValue=p),e.getPriceLists],options:e.huntingTypeOptions,placeholder:"Filter By Type"},null,8,["modelValue","options","onUpdate:modelValue"])]),s("div",null,[s("label",It,[a(d,{name:"location_on",size:"small",class:"mr-1"}),t[13]||(t[13]=h(" Hunting Area "))]),a(m,{modelValue:e.areaValue,"onUpdate:modelValue":[t[2]||(t[2]=p=>e.areaValue=p),e.getPriceLists],options:e.areasOptions,placeholder:"Filter By Area"},null,8,["modelValue","options","onUpdate:modelValue"])]),s("div",null,[s("label",At,[a(d,{name:"attach_money",size:"small",class:"mr-1"}),t[14]||(t[14]=h(" Min Amount "))]),a(w,{modelValue:e.minAmount,"onUpdate:modelValue":t[3]||(t[3]=p=>e.minAmount=p),type:"number",placeholder:"Min price",onChange:e.getPriceLists},null,8,["modelValue","onChange"])]),s("div",null,[s("label",Ft,[a(d,{name:"attach_money",size:"small",class:"mr-1"}),t[15]||(t[15]=h(" Max Amount "))]),a(w,{modelValue:e.maxAmount,"onUpdate:modelValue":t[4]||(t[4]=p=>e.maxAmount=p),type:"number",placeholder:"Max price",onChange:e.getPriceLists},null,8,["modelValue","onChange"])]),s("div",$t,[a(y,{class:"w-full",color:"secondary",icon:"download",loading:e.downloadingPdf,onClick:e.onDownloadPdf},{default:i(()=>t[16]||(t[16]=[h(" Download PDF ")])),_:1},8,["loading","onClick"])])])]),e.items.length>0?(c(),V("div",Ot,[s("div",xt,[s("div",Dt,r(e.items.length),1),t[17]||(t[17]=s("div",{class:"text-sm text-gray-600"},"Total Packages",-1))]),s("div",Tt,[s("div",Ut,r(e.activePackages),1),t[18]||(t[18]=s("div",{class:"text-sm text-gray-600"},"Active",-1))]),s("div",Nt,[s("div",Et,r(e.uniqueAreas),1),t[19]||(t[19]=s("div",{class:"text-sm text-gray-600"},"Areas",-1))])])):A("",!0),a(S,{loading:e.loading},{default:i(()=>[e.items.length===0&&!e.loading?(c(),V("div",Mt,[a(d,{name:"inventory_2",size:"4rem",color:"gray"}),t[20]||(t[20]=s("p",{class:"text-gray-500 mt-4"},"No price lists found for the selected filters.",-1))])):(c(),C(v,{key:1,items:e.items,columns:e.columns,hoverable:"",striped:"",loading:e.loading},{"cell(package_name)":i(({rowData:p})=>[s("div",qt,r(p.package_name),1)]),"cell(area)":i(({rowData:p})=>[s("div",zt,[a(d,{name:"location_on",size:"small",color:"secondary"}),h(" "+r(p.area),1)])]),"cell(amount)":i(({rowData:p})=>[s("span",Bt,r(p.amount),1)]),"cell(duration)":i(({rowData:p})=>[h(r(p.duration)+" Days ",1)]),"cell(status)":i(({rowData:p})=>[a(g,{text:p.status,color:p.status==="Active"?"success":"warning"},null,8,["text","color"])]),"cell(season_name)":i(({rowData:p})=>[h(r(p.season_name||"N/A"),1)]),"cell(species_count)":i(({rowData:p})=>[a(g,{text:String(p.species_count||0),color:"info"},null,8,["text"])]),"cell(actions)":i(({rowData:p})=>[s("div",Ht,[a(y,{preset:"plain",icon:"visibility",color:"primary",size:"small",title:"View Details",onClick:D=>e.toggleShowPriceListMethod(p)},null,8,["onClick"]),a(y,{preset:"plain",icon:"edit",color:"warning",size:"small",title:"Edit",onClick:D=>e.editPriceList(p)},null,8,["onClick"]),a(y,{preset:"plain",icon:"delete",color:"danger",size:"small",title:"Delete",onClick:D=>e.confirmDelete(p)},null,8,["onClick"])])]),_:1},8,["items","columns","loading"]))]),_:1},8,["loading"])],64)):e.showEditForm?e.showEditForm?(c(),C(L,{key:2,"edit-mode":!0,"edit-item":e.editItem,onSaved:e.onEditSaved},null,8,["edit-item","onSaved"])):A("",!0):(c(),C(n,{key:1,"price-list-item":e.item,"pdf-data":e.individualPriceListPdf},null,8,["price-list-item","pdf-data"]))],64)),e.ShowCreateNewPriceListForm?(c(),C(L,{key:1})):A("",!0)]),_:1})]),_:1}),a(k,{modelValue:e.showDeleteModal,"onUpdate:modelValue":t[6]||(t[6]=p=>e.showDeleteModal=p),"hide-default-actions":""},{header:i(()=>t[21]||(t[21]=[s("h3",{class:"va-h6"},"Confirm Delete",-1)])),footer:i(()=>[s("div",jt,[a(y,{preset:"secondary",onClick:t[5]||(t[5]=p=>e.showDeleteModal=!1)},{default:i(()=>t[24]||(t[24]=[h("Cancel")])),_:1}),a(y,{color:"danger",loading:e.deleting,onClick:e.confirmDeletePriceList},{default:i(()=>t[25]||(t[25]=[h("Delete")])),_:1},8,["loading","onClick"])])]),default:i(()=>{var p;return[s("p",null,[t[22]||(t[22]=h(" Are you sure you want to delete ")),s("strong",null,r((p=e.itemToDelete)==null?void 0:p.package_name),1),t[23]||(t[23]=h("? "))])]}),_:1},8,["modelValue"])],64)}const is=q(bt,[["render",Qt],["__scopeId","data-v-222d4309"]]);export{is as default};
//# sourceMappingURL=ManagePriceList-C997h-Lb.js.map
