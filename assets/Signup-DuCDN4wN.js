import{d as h,a5 as x,B as I,a as k,w as l,I as d,i,e as p,b as n,h as c,o as C,k as S}from"./index-BWHJDooV.js";import{u as P}from"./useForm-D3NxtFXh.js";import{u as B}from"./useToast-s8yo9qJb.js";const N={class:"text-base mb-4 leading-5"},R={class:"flex justify-center mt-4"},U=h({__name:"Signup",setup(q){const{validate:w}=P("form"),{push:y}=x(),{init:u}=B(),t=I({email:"",username:"",password:"",repeatPassword:"",first_name:"",last_name:""}),f=async()=>{if(!w()){u({message:"Please fill all required fields",color:"danger"});return}try{const e="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/authentication/register/",s=JSON.stringify({username:t.email,password:t.password,password2:t.repeatPassword,email:t.email,first_name:"John",last_name:"Doe"}),m={method:"post",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"},data:s},r=await S.request(m);r.status===201&&(sessionStorage.setItem("access",JSON.stringify(r.data.access)),sessionStorage.setItem("refresh",JSON.stringify(r.data.refresh)),u({message:"You've successfully signed up",color:"success"}),y({name:"login"}))}catch{u({message:"Something went wrong, while Creating an account",color:"danger"})}},_=[e=>!!e||"Password field is required",e=>e&&e.length>=8||"Password must be at least 8 characters long",e=>e&&/[A-Za-z]/.test(e)||"Password must contain at least one letter",e=>e&&/\d/.test(e)||"Password must contain at least one number",e=>e&&/[!@#$%^&*(),.?":{}|<>]/.test(e)||"Password must contain at least one special character"];return(e,s)=>{const m=i("RouterLink"),r=i("VaInput"),g=i("VaIcon"),v=i("VaValue"),b=i("VaButton"),V=i("VaForm");return C(),k(V,{ref:"form",onSubmit:d(f,["prevent"])},{default:l(()=>[s[6]||(s[6]=p("h1",{class:"font-semibold text-4xl mb-4"},"Sign up",-1)),p("p",N,[s[4]||(s[4]=c(" Have an account? ")),n(m,{to:{name:"login"},class:"font-semibold text-primary"},{default:l(()=>s[3]||(s[3]=[c("Login")])),_:1})]),n(r,{modelValue:t.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.email=a),rules:[a=>!!a||"Email field is required",a=>/.+@.+\..+/.test(a)||"Email should be valid"],class:"mb-4",label:"Email",type:"email"},null,8,["modelValue","rules"]),n(v,{"default-value":!1},{default:l(a=>[n(r,{ref:"password1",modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=o=>t.password=o),rules:_,type:a.value?"text":"password",class:"mb-4",label:"Password",messages:"Password should be 8+ characters: letters, numbers, and special characters.",onClickAppendInner:d(o=>a.value=!a.value,["stop"])},{appendInner:l(()=>[n(g,{name:a.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","type","onClickAppendInner"]),n(r,{ref:"password2",modelValue:t.repeatPassword,"onUpdate:modelValue":s[2]||(s[2]=o=>t.repeatPassword=o),rules:[o=>!!o||"Repeat Password field is required",o=>o===t.password||"Passwords don't match"],type:a.value?"text":"password",class:"mb-4",label:"Repeat Password",onClickAppendInner:d(o=>a.value=!a.value,["stop"])},{appendInner:l(()=>[n(g,{name:a.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","rules","type","onClickAppendInner"])]),_:1}),p("div",R,[n(b,{class:"w-full",onClick:f},{default:l(()=>s[5]||(s[5]=[c(" Create account")])),_:1})])]),_:1},512)}}});export{U as default};
//# sourceMappingURL=Signup-DuCDN4wN.js.map
