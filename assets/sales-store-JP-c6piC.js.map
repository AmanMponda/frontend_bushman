{"version":3,"file":"sales-store-JP-c6piC.js","sources":["../../src/stores/sales-store.ts"],"sourcesContent":["import { defineStore } from 'pinia'\nimport axios from 'axios'\nimport { format } from 'date-fns'\nimport { formatDateTime } from '../services/utils'\n\nexport const useSalesInquiriesStore = defineStore('sales_inquiries', {\n  state: () => {\n    return {\n      salesInquiries: [] as any,\n      results: [] as any,\n      loadingresults: false,\n      priceBreakDown: null as any,\n      addCompanions: false,\n      observers: [] as any,\n      showObserversModal: false,\n      showCompanionsModal: false,\n      companions: [] as any,\n      savingSafariExtras: false,\n      clientSafariExtras: [] as any,\n      showSafariExtrasModal: false,\n      showAccommodationModal: false,\n      accommodations: [] as any,\n      // charterPrices: [] as any,\n      chartersPrices: [] as any,\n      showChartersPriceModal: false,\n      savingCharterPrices: false,\n      loadingCharterPrices: false,\n    }\n  },\n\n  actions: {\n    async getSalesInquiries(seasonId: any, preferredDate: any) {\n      const formattedDate = preferredDate ? format(new Date(preferredDate), 'yyyy-MM-dd') : ''\n\n      const url =\n        import.meta.env.VITE_APP_BASE_URL +\n        import.meta.env.VITE_APP_SALES_INQUIRIES_URL +\n        '?season_id=' +\n        seasonId +\n        '&preferred_date=' +\n        formattedDate\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      const response = await axios.request(config)\n      return response\n    },\n\n    async createSalesInquiry(payload: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_INQUIRIES_URL\n\n      // The payload is already properly formatted from the component\n      // Just send it directly to the backend\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: JSON.stringify(payload),\n      }\n\n      const response = await axios.request(config)\n      return response\n    },\n\n    async updateSalesInquiry(id: number, payload: any) {\n      const url = `${import.meta.env.VITE_APP_BASE_URL}${import.meta.env.VITE_APP_SALES_INQUIRIES_URL}${id}/`\n\n      const config = {\n        method: 'put', // or 'patch' depending on your API\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: JSON.stringify(payload),\n      }\n\n      try {\n        const response = await axios.request(config)\n        return response\n      } catch (error) {\n        console.error('Error updating sales inquiry:', error)\n        throw error\n      }\n    },\n\n    async deleteSalesInquiry(id: number) {\n      const url = `${import.meta.env.VITE_APP_BASE_URL}${import.meta.env.VITE_APP_SALES_INQUIRIES_URL}${id}/`\n\n      const config = {\n        method: 'delete',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n\n      try {\n        const response = await axios.request(config)\n        return response\n      } catch (error) {\n        console.error('Error deleting sales inquiry:', error)\n        throw error\n      }\n    },\n\n    // In your useSalesInquiriesStore\n    // In your store's getallSalesConfirmation method:\n\n    async getallSalesConfirmation() {\n      this.loadingresults = true\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_VSET_URL\n\n      console.log('API URL:', url)\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n\n      try {\n        const response = await axios.request(config)\n        console.log('Full API Response:', response)\n\n        // Handle both response formats\n        let data = []\n\n        if (response.data && response.data.data) {\n          // If data is nested under 'data' key\n          data = response.data.data\n        } else if (Array.isArray(response.data)) {\n          // If response.data is directly the array\n          data = response.data\n        }\n\n        console.log('Extracted data:', data)\n\n        if (data && Array.isArray(data) && data.length > 0) {\n          console.log(`Found ${data.length} sales confirmations`)\n\n          this.loadingresults = false\n          this.results = data.map((item: any, index: number) => {\n            console.log(`Processing item ${index}:`, item)\n\n            // Format dates\n            const formatDateTime = (dateString: any) => {\n              if (!dateString || dateString === 'N/A') return 'N/A'\n              try {\n                const date = new Date(dateString)\n                return date.toLocaleDateString('en-US', {\n                  year: 'numeric',\n                  month: 'short',\n                  day: 'numeric',\n                })\n              } catch {\n                return dateString\n              }\n            }\n\n            return {\n              // Client Information\n              client: item?.sales_inquiry?.entity?.full_name || item?.client_name || 'Client ' + (index + 1),\n\n              code: item?.sales_inquiry?.code || item?.sales_inquiry_code || `SC-${item?.id || index + 1}`,\n\n              // Area Information\n              area: item?.sales_inquiry?.area?.[0]?.area?.name || item?.area_name || 'Unknown Area',\n\n              // Itinerary Information\n              airport: item?.itinerary?.airport_name || item?.airport_name || 'N/A',\n\n              arrival: formatDateTime(item?.itinerary?.arrival || item?.arrival),\n\n              charter_in: formatDateTime(item?.itinerary?.charter_in || item?.charter_in),\n\n              charter_out: formatDateTime(item?.itinerary?.charter_out || item?.charter_out),\n\n              // Status Information\n              status: item?.status?.status || item?.status || 'pending',\n\n              // Additional Information\n              pdf: item?.pdf || item?.document_url || null,\n\n              id: item?.id || index + 1,\n              created_date: item?.created_date || item?.created_at,\n              updated_at: item?.updated_at,\n\n              // Store the full object for details view\n              selfitem: item,\n            }\n          })\n\n          console.log('Formatted Results:', this.results)\n          return response\n        } else {\n          console.warn('No data or empty array received from API')\n\n          this.loadingresults = false\n          this.results = []\n          return response\n        }\n      } catch (error: any) {\n        console.error('Error fetching sales confirmations:', error)\n\n        this.loadingresults = false\n        this.results = []\n\n        // You could return mock data here as fallback\n        // this.results = this.getMockData()\n\n        throw error\n      }\n    },\n\n    /**\n     * Fetch all sales confirmation proposals\n     * This is the correct endpoint for getting proposals to create contracts\n     */\n    async getSalesConfirmationProposals() {\n      this.loadingresults = true\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_PROPOSALS_URL\n\n      console.log('Fetching proposals from API URL:', url)\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n\n      try {\n        const response = await axios.request(config)\n        console.log('Sales Confirmation Proposals Response:', response)\n\n        // Handle both response formats\n        let data = []\n\n        if (response.data && response.data.data) {\n          // If data is nested under 'data' key\n          data = response.data.data\n        } else if (Array.isArray(response.data)) {\n          // If response.data is directly the array\n          data = response.data\n        }\n\n        console.log('Extracted proposals data:', data)\n        console.log('First proposal structure:', data && data[0] ? JSON.stringify(data[0], null, 2) : 'No data')\n        this.loadingresults = false\n\n        if (data && Array.isArray(data)) {\n          console.log(`Found ${data.length} sales confirmation proposals`)\n          return { status: 200, data: data }\n        } else {\n          console.warn('No proposals data received from API')\n          return { status: 200, data: [] }\n        }\n      } catch (error: any) {\n        console.error('Error fetching sales confirmation proposals:', error)\n        this.loadingresults = false\n        throw error\n      }\n    },\n\n    async createSalesConfirmationFinalization(payload: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_VSET_URL\n      const data = JSON.stringify({\n        sales_inquiry_id: payload.salesInquiryId,\n        package_id: payload.packageId,\n        airport_name: payload.airportName,\n        charter_in: payload.charterIn,\n        charter_out: payload.charterOut,\n        arrival: payload.arrival,\n        installments: payload.installments,\n        regulatory_package_id: payload.regulatoryPackageId,\n      })\n\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: data,\n      }\n\n      const response = await axios.request(config)\n      return response\n    },\n\n    async getSalesPriceBreakdown(payload: any) {\n      //     # http://localhost:8000/api/v1.0/sales-confirmation/total-sales-amount/?package_id=1&sales_inquiry_id=1\n      // VITE_APP_SALESPRICE_BREAK_DOWN_URL=sales-confirmation/total-sales-amount/\n      const url =\n        import.meta.env.VITE_APP_BASE_URL +\n        import.meta.env.VITE_APP_SALESPRICE_BREAK_DOWN_URL +\n        '?package_id=' +\n        payload.packageId +\n        '&sales_inquiry_id=' +\n        payload.salesInquiryId\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n\n      try {\n        const response = await axios.request(config)\n        this.priceBreakDown = response.data\n        return response\n      } catch (error) {\n        console.log(error)\n        return error\n      }\n    },\n\n    async updatesalesConfirmationStatus(payload: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_STATUS_VSET_URL\n      const data = new FormData()\n\n      data.append('doc_type_id', payload.docTypeId)\n      data.append('entity_id', payload.entityId)\n      // data.append('documents', JSON.stringify(payload.documents))\n      data.append('contract_doc', payload.contractDoc)\n      data.append('payment_doc', payload.paymentDoc)\n      data.append('sales_confirmation_proposal_id', payload.salesConfirmationProposalId)\n      data.append('status_id', payload.statusId)\n      data.append('area_id', payload.areaId)\n      data.append('quota_id', payload.quotaId)\n\n      const config = {\n        method: 'patch',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        data: data,\n      }\n\n      const response = await axios.request(config)\n      return response\n    },\n\n    // # http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-proposal-observers-vset/?entity_id=44&sales_confirmation_id=27\n    // VITE_APP_SALES_CONFIRMATION_PROPOSAL_OBSERVERS_VSET_URL=sales-confirmation/sales-confirmation-proposal-observers-vset/\n    async createSalesConfirmationProposalObservers(payload: any) {\n      const url =\n        import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_PROPOSAL_OBSERVERS_VSET_URL\n      // [\n      //   {\n      //     contact_type: 'email',\n      //     contact: 'john.doe@example.com',\n      //   },\n      //   {\n      //     contact_type: 'phone',\n      //     contact: '+1234567890',\n      //   },\n      // ],\n      const request_data = {\n        full_name: payload.fullName,\n        nationality_id: payload.nationalityId,\n        country_id: payload.countryId,\n        identity_number: payload.identityNumber,\n        sales_inquiry_id: payload.salesInquiryId,\n        contacts: payload.contacts,\n        charter_in: payload.charter_in,\n        charter_out: payload.charter_out,\n        arrival_airport: payload.arrival_airport,\n      }\n\n      const json_data = JSON.stringify(request_data)\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: json_data,\n      }\n\n      const response = await axios.request(config)\n\n      if (response.status === 201) {\n        this.addCompanions = true\n        this.showObserversModal = false\n      }\n      return response\n    },\n    async getObservers(salesInquiryId: any) {\n      const url =\n        import.meta.env.VITE_APP_BASE_URL +\n        import.meta.env.VITE_APP_SALES_CONFIRMATION_PROPOSAL_OBSERVERS_VSET_URL +\n        '?sales_inquiry_id=' +\n        salesInquiryId\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      try {\n        const response = await axios.request(config)\n        if (response.status === 200) {\n          this.observers = response.data.map((item: any) => {\n            return {\n              id: item.id,\n              full_name: item.observer.full_name,\n              nationality: item.observer.nationality.name,\n            }\n          })\n          return response\n        } else {\n          return response\n        }\n      } catch (error) {\n        console.log(error)\n        return error\n      }\n    },\n\n    // # http://localhost:8000/api/v1.0/sales-confirmation/sales-confirmation-companion-vset/?entity_id=42&sales_confirmation_id=27\n    // VITE_APP_SALES_CONFIRMATION_COMPANION_VSET_URL=sales-confirmation/sales-confirmation-companion-vset/\n    async createSalesConfirmationCompanion(payload: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_COMPANION_VSET_URL\n      const request_data = {\n        full_name: payload.fullName,\n        nationality_id: payload.nationalityId,\n        country_id: payload.countryId,\n        identity_number: payload.identityNumber,\n        sales_inquiry_id: payload.salesInquiryId,\n        regulatory_package_id: payload.regulatoryPackageId,\n        contacts: payload.contacts,\n        charter_in: payload.charter_in,\n        arrival_airport: payload.arrival_airport,\n\n        charter_out: payload.charter_out,\n      }\n\n      const json_data = JSON.stringify(request_data)\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: json_data,\n      }\n\n      const response = await axios.request(config)\n\n      if (response.status === 201) {\n        this.addCompanions = true\n        this.showCompanionsModal = false\n      }\n      return response\n    },\n\n    async getCompanions(proposalIdOrPayload: any, usedOptionsList: boolean = false) {\n      let url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_COMPANION_VSET_URL\n\n      // Build query parameters based on input type\n      const queryParams: string[] = []\n\n      if (typeof proposalIdOrPayload === 'object') {\n        // If passed an object with entity_id and sales_confirmation_id\n        if (proposalIdOrPayload.entity_id) {\n          queryParams.push('entity_id=' + proposalIdOrPayload.entity_id)\n        }\n        if (proposalIdOrPayload.sales_confirmation_id) {\n          queryParams.push('sales_confirmation_id=' + proposalIdOrPayload.sales_confirmation_id)\n        }\n      } else {\n        // Legacy support: if passed a single ID, assume it's sales_confirmation_id\n        queryParams.push('sales_confirmation_id=' + proposalIdOrPayload)\n      }\n\n      if (queryParams.length > 0) {\n        url += '?' + queryParams.join('&')\n      }\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      try {\n        const response = await axios.request(config)\n        console.log('Companions response:', response)\n\n        // Handle multiple response formats\n        let companionsData = []\n        if (response.data.value && Array.isArray(response.data.value)) {\n          // If wrapped in {value: [...], Count: N} format\n          companionsData = response.data.value\n        } else if (response.data.data && Array.isArray(response.data.data)) {\n          // If wrapped in {data: [...], success: true} format\n          companionsData = response.data.data\n        } else if (Array.isArray(response.data)) {\n          // If direct array format\n          companionsData = response.data\n        }\n\n        console.log('Extracted companions data:', companionsData)\n\n        if (usedOptionsList === false) {\n          if (response.status === 200) {\n            this.companions = companionsData.map((item: any) => {\n              return {\n                id: item.id,\n                full_name: item.companion?.full_name || item.full_name,\n                nationality: item.companion?.nationality?.name || item.nationality,\n              }\n            })\n            return response\n          } else {\n            return response\n          }\n        } else {\n          this.companions = companionsData.map((item: any) => {\n            return {\n              text: item.companion?.full_name || item.full_name || 'Unknown',\n              value: item.companion?.id || item.id,\n            }\n          })\n          return response\n        }\n      } catch (error: any) {\n        console.log('Error fetching companions:', error)\n        this.companions = []\n        return error\n      }\n    },\n\n    async createsafariExtras(payload: any) {\n      this.savingSafariExtras = true\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_CLIENT_SAFARI_EXTRAS_VSET_URL\n      const data = JSON.stringify({\n        safary_extras: payload,\n      })\n\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        data: data,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      const response = await axios.request(config)\n      if (response.status === 201) {\n        this.showSafariExtrasModal = false\n        this.savingSafariExtras = false\n        return response\n      } else {\n        this.savingSafariExtras = false\n        return response\n      }\n      return response\n    },\n\n    async getClienSafariExtras(salesInquiryId: any) {\n      const url =\n        import.meta.env.VITE_APP_BASE_URL +\n        import.meta.env.VITE_APP_CLIENT_SAFARI_EXTRAS_VSET_URL +\n        '?sales_inquiry_id=' +\n        salesInquiryId\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      this.clientSafariExtras = []\n\n      const response = await axios.request(config)\n\n      if (response.status === 200) {\n        this.clientSafariExtras = response?.data?.map((item: any) => {\n          return {\n            name: item.safari_extras.name,\n            amount: `${item.safari_extras.currency.symbol} ${item.safari_extras.amount}`,\n          }\n        })\n      }\n      return response\n    },\n\n    async getAccommodation(salesInquiryId: any) {\n      const url =\n        import.meta.env.VITE_APP_BASE_URL +\n        import.meta.env.VITE_APP_SALES_CONFIRMATION_ACCOMMODATION_VSET_URL +\n        '?sales_inquiry_id=' +\n        salesInquiryId\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        this.accommodations = response.data.map((item: any) => {\n          return {\n            id: item.id,\n            name: item.entity.full_name,\n            type_name: item.type.name,\n            check_in: formatDateTime(item.check_in),\n            check_out: formatDateTime(item.check_out),\n          }\n        })\n      }\n      return response\n    },\n\n    async createAccommodation(payload: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CONFIRMATION_ACCOMMODATION_VSET_URL\n      const data = JSON.stringify(payload)\n\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: data,\n      }\n\n      const response = await axios.request(config)\n      if (response.status === 201) {\n        this.showAccommodationModal = false\n        this.getAccommodation(payload.sales_inquiry_id)\n        return response\n      } else {\n        return response\n      }\n    },\n\n    // VITE_APP_SALES_CHARTERS_PRICE_VSET_URL\n    async getChartersPrice(salesInquiryId: any) {\n      const url =\n        import.meta.env.VITE_APP_BASE_URL +\n        import.meta.env.VITE_APP_SALES_CHARTERS_PRICE_VSET_URL +\n        '?sales_inquiry_id=' +\n        salesInquiryId\n\n      const config = {\n        method: 'get',\n        maxBodyLength: Infinity,\n\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      const response = await axios.request(config)\n      if (response.status === 200) {\n        this.chartersPrices = response.data.map((item: any) => {\n          return {\n            id: item.id,\n            name: item.charters_price_list.name,\n            amount: `${item?.charters_price_list?.currency?.symbol} ${item?.charters_price_list?.amount}`,\n          }\n        })\n      }\n    },\n    // create\n    async createChartersPrice(payload: any) {\n      const url = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_SALES_CHARTERS_PRICE_VSET_URL\n      const data = JSON.stringify(payload)\n\n      const config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: url,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        data: data,\n      }\n\n      const response = await axios.request(config)\n      if (response.status === 201) {\n        this.showChartersPriceModal = false\n        this.getChartersPrice(payload.sales_inquiry_id)\n        return response\n      } else {\n        return response\n      }\n    },\n  },\n})\n"],"names":["useSalesInquiriesStore","defineStore","seasonId","preferredDate","formattedDate","format","config","axios","payload","id","error","url","response","data","item","index","formatDateTime","dateString","_b","_a","_c","_g","_f","_e","_d","_h","_i","_j","_k","_l","request_data","json_data","salesInquiryId","proposalIdOrPayload","usedOptionsList","queryParams","companionsData"],"mappings":"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"}