import{d as $,_ as q,a as L,g as y,w as g,b as r,i as u,e as a,a4 as N,t as l,F as C,q as D,h as F,o as f,m,y as z,l as Q,A as R,B as G,C as j,D as W,s as V,v as K,x as A}from"./index-CD834hvz.js";import{u as U}from"./useForm-DC3-Bcdv.js";import{u as E}from"./useToast-Cl6gWvmS.js";import{M as Y}from"./ModuleTable-D4sSD008.js";import{u as Z}from"./payment-cards-CqwKutMw.js";import{f as J}from"./format-Cn4G_mmc.js";import{u as _}from"./price-list-store-jhNSHe1N.js";import{h as X}from"./errorHandler-BXe9Gc4p.js";import{v as x}from"./utils-BWc0LXoO.js";import{u as O}from"./quota-store-CMlQgx_Z.js";import{u as T}from"./settings-store-CKesHlBz.js";import{S as tt}from"./SalesPackageForm-Dx4M9EyJ.js";import{d as H}from"./pdfDownloader-DiRJnS-k.js";import"./regulatrory-store-TB5xES6-.js";const et=$({components:{},props:{priceListItem:{type:Object,required:!0}},data(){return{cardStore:Z(),format:J}},computed:{loading(){return this.cardStore.loading}},mounted(){this.cardStore.load()},methods:{formatChargesPer(t){return t?t.toLowerCase().replace("_"," "):""}}}),at={class:"va-h6 captalized-text text-center"},dt={class:"captalized-text"},st={class:"va-table-responsive"},ot={class:"va-table va-table--hoverable"},rt={key:0},nt={key:1},it={class:"va-table-responsive"},lt={class:"va-table va-table--hoverable"},ut={class:"va-table-responsive"},ft={class:"va-table va-table--hoverable"},vt={class:"va-table-responsive"},ct={class:"va-table va-table--hoverable"};function pt(t,e,d,n,i,o){var P,B,w,S,s,M,I;const v=u("VaSkeleton"),c=u("VaSkeletonGroup"),p=u("VaDivider"),b=u("VaBadge"),k=u("VaAlert");return t.cardStore.loading?(f(),L(c,{key:0},{default:g(()=>[r(v,{class:"mb-4",height:"160px",variant:"squared"}),r(v,{class:"mb-4",height:"160px",variant:"squared"}),r(v,{height:"360px",variant:"squared"})]),_:1})):(f(),y(C,{key:1},[e[13]||(e[13]=a("h1",{class:"va-h4 captalized-text text-center"},"Price List Details",-1)),a("p",at,l(t.format(t.priceListItem.price_list_type.price_list.start_date,"MMMM yyyy"))+"-"+l(t.format(t.priceListItem.price_list_type.price_list.end_date,"MMMM yyyy")),1),r(p),a("h6",dt,l((B=(P=t.priceListItem.sales_package)==null?void 0:P.area)==null?void 0:B.name)+"("+l(t.priceListItem.sales_package.area.description)+") ",1),a("div",st,[a("table",ot,[a("thead",null,[a("tr",null,[e[0]||(e[0]=a("th",null,"Package Name",-1)),e[1]||(e[1]=a("th",null,"Hunting Type",-1)),a("th",null,"Amount("+l((w=t.priceListItem.price_list_type.currency)==null?void 0:w.name)+")",1),e[2]||(e[2]=a("th",null,"Duration(Days)",-1)),e[3]||(e[3]=a("th",null,"Licence",-1)),e[4]||(e[4]=a("th",null,"Licence duration(Days)",-1)),e[5]||(e[5]=a("th",null,"Status",-1))])]),a("tbody",null,[a("tr",null,[a("td",null,l(t.priceListItem.sales_package.name),1),a("td",null,l(t.priceListItem.price_list_type.hunting_type.name),1),a("td",null,l(t.priceListItem.price_list_type.amount),1),a("td",null,l(t.priceListItem.price_list_type.duration),1),a("td",null,l((S=t.priceListItem.sales_package.regulatory_package)==null?void 0:S.name),1),a("td",null,l((s=t.priceListItem.sales_package.regulatory_package)==null?void 0:s.duration),1),(M=t.priceListItem.price_list_type)!=null&&M.is_active?(f(),y("td",rt,[r(b,{text:"Active",color:"success"})])):(f(),y("td",nt,[r(b,{text:"Inactive",color:"danger"})]))])])])]),r(p),e[14]||(e[14]=a("h6",{class:"captalized-text"},"Spieces",-1)),a("div",it,[a("table",lt,[e[6]||(e[6]=a("thead",null,[a("tr",null,[a("th",null,"Name"),a("th",null,"Scientific Name"),a("th",null,"Quantity")])],-1)),a("tbody",null,[(f(!0),y(C,null,D(t.priceListItem.sales_package.species,h=>(f(),y("tr",{key:h.id},[a("td",null,l(h.species.name),1),a("td",null,l(h.species.scientific_name),1),a("td",null,l(h.quantity),1)]))),128))])])]),r(p),e[15]||(e[15]=a("h6",{class:"captalized-text"},"Companion Hunter Costs",-1)),a("div",ut,[a("table",ft,[a("thead",null,[a("tr",null,[a("th",null,"Amount("+l(t.priceListItem.price_list_type.currency.name)+")",1)])]),a("tbody",null,[(f(!0),y(C,null,D(t.priceListItem.componions_hunter,h=>(f(),y("tr",{key:h.id},[a("td",null,l(h.amount),1)]))),128))])])]),r(p),e[16]||(e[16]=a("h6",{class:"captalized-text"},"SAFARI EXTRAS",-1)),a("div",vt,[a("table",ct,[e[10]||(e[10]=a("thead",null,[a("tr",null,[a("th",null,"Service"),a("th",null,"Description"),a("th",null,"Amount"),a("th",null,"Charges Per")])],-1)),a("tbody",null,[a("tr",null,[e[7]||(e[7]=a("td",null,"Observer",-1)),e[8]||(e[8]=a("td",null,"Observer cost",-1)),a("td",null,l(t.priceListItem.price_list_type.currency.symbol)+l((I=t.priceListItem.observer[0])==null?void 0:I.amount),1),e[9]||(e[9]=a("td",null,"per day / person",-1))]),(f(!0),y(C,null,D(t.priceListItem.safari_extras,h=>(f(),y("tr",{key:h.id},[a("td",null,l(h.name),1),a("td",null,l(h.description),1),a("td",null,l(h.currency.symbol)+l(h.amount),1),a("td",null,l(t.formatChargesPer(h.charges_per)),1)]))),128))])])]),r(k,{color:"#e6e6e6",title:"*All hunts confirmation is subject to quota availability.!",class:"mb-6"},{default:g(()=>e[11]||(e[11]=[F(" Other safari packages are available on request and can be customized depending on client requirement. ")])),_:1}),r(p),e[17]||(e[17]=N('<h2 class="captalized-text text-center va-h6" data-v-7e6d501f>More Information</h2><h6 class="captalized-text" data-v-7e6d501f>Trophy Fees</h6><div class="va-table-responsive" data-v-7e6d501f><table class="va-table va-table--hoverable" data-v-7e6d501f><thead data-v-7e6d501f><tr data-v-7e6d501f><th data-v-7e6d501f>Species</th><th data-v-7e6d501f>Species Availability</th><th data-v-7e6d501f>10 Days</th><th data-v-7e6d501f>14 Days</th><th data-v-7e6d501f>21 Days</th><th data-v-7e6d501f>Price (USD)</th></tr></thead><tbody data-v-7e6d501f><tr data-v-7e6d501f><td data-v-7e6d501f>1st Buffalo</td><td data-v-7e6d501f>MS BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>41</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>2nd Buffalo</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>43</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>3rd Buffalo</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>45</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>4th Buffalo</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>45</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Baboon</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>4</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Bushbuck Chobe</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>11</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Bushbuck Masai</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>12</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Bushpig</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>7.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Civet Cat</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Cat Genet</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Crocodile</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>2.9</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Dik Dik</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Common Dukier</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Harveyâ€™s Red Duiker</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>9.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Patterson Eland</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>4.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Elephant 100 Pounds</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>35</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Elephant &gt; 100 Pounds</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>40</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Gerenuk</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>5.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Gazella Grant</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Gazella Thomson</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Gazella Roberts</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>2.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Hartebeest (COKE&#39;S)</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Hippo</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>3</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Spotted Hyena</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Striped Hyena</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>2</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Impala</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Jackal</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Klipspringer</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>1.7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Kudu (Greater)</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>4.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Kudu (Lesser)</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>6</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Leopard</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>9.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Lion</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>13</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Ostrich</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>2</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Fringe Eared Oryx</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>6.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Porcupine</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Ratel Honey Badger</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>9.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Bohor Reedbuck</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>15</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Mountain Reedbuck Common</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>15</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Roan</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>6</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Serval Cat</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Steinbuck</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>7</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Suni</td><td data-v-7e6d501f>BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.25</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Topi</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Warthog</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Wildbeest</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.65</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Waterbuck - Deffessa</td><td data-v-7e6d501f>MS</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.5</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Wild Cat</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f></td><td data-v-7e6d501f>*</td><td data-v-7e6d501f></td><td data-v-7e6d501f>8</td></tr><tr data-v-7e6d501f><td data-v-7e6d501f>Zebra</td><td data-v-7e6d501f>MS, BK</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>*</td><td data-v-7e6d501f>1.8</td></tr></tbody></table></div>',3)),r(p),r(k,{color:"#e6e6e6",title:"UPGRADE FEES!",class:"mb-6"},{default:g(()=>e[12]||(e[12]=[F(" *If 4th Buffalo is taken upgrade fees of USD 5,000 (plus trophy fees) ")])),_:1})],64))}const mt=q(et,[["render",pt],["__scopeId","data-v-7e6d501f"]]),gt=$({components:{SalesPackageForm:tt,VaForm:W,VaInput:j,VaSelect:G,VaButton:R},setup(){const t=V(),{isValid:e,validate:d,resetValidation:n,reset:i}=U(t),{init:o}=E(),v=V(!1),c=K({id:null,hunting_type_id:null,package:[],amount:null,currency:null,duration:null,season:null,end_date:null,species:null,quantity:null,companion_amount:null,observer_amount:null}),p=K({id:null,client_id:null,contact:"",contact_type:null,contactable:!1}),b=M=>{c.package=c.package.filter(I=>I!==M)},k=V([]),P=V([]),B=V([]),w=V([]),S=V([]),s=V(0);return{formRef:t,form:c,contactForm:p,showEditForm:v,countries:k,nationality:P,categoryOptions:B,contactsTypes:w,clients:S,step:s,init:o,isValidForm:e,validateForm:d,resetValidationForm:n,resetForm:i,deleteChip:b,validators:x}},data(){return{preferred_species:[],speciesOptions:[],speciesObjects:[],areasOptions:[],huntingTypesOptions:[],salesQuotasOptions:[],speciesItemOptions:[],currencyOptions:[],savingPriceList:!1,durationsOptions:[{value:1,text:"1 day"},{value:2,text:"2 days"},{value:3,text:"3 days"},{value:4,text:"4 days"},{value:5,text:"5 days"},{value:6,text:"6 days"},{value:7,text:"7 days"},{value:8,text:"8 days"},{value:9,text:"9 days"},{value:10,text:"10 days"},{value:11,text:"11 days"},{value:12,text:"12 days"},{value:13,text:"13 days"},{value:14,text:"14 days"},{value:15,text:"15 days"},{value:16,text:"16 days"},{value:17,text:"17 days"},{value:18,text:"18 days"},{value:19,text:"19 days"},{value:20,text:"20 days"},{value:21,text:"21 days"}],seasonsOptions:[]}},computed:{...Q(_,["salesPackages","packageOptions","latestPackage","loadingpackages"]),...z(_,{_shM:"showModal"})},watch:{},mounted(){this.getAreas(),this.getHuntingTypes(),this.getQuotaList(),this.getCurrencyList(),this.getSalesPackages(),this.getSeasonList()},methods:{...m(O,["getSpeciesList"]),...m(O,["getAllSpeciesPerQuotaPerArea"]),...m(O,["getAreaList"]),...m(T,["getHuntingsTypes"]),...m(T,["getCurrencies","getSeasons"]),...m(O,["getQuotas"]),...m(_,["createPriceList"]),...m(_,["getSalesPackageList"]),onAreaChange(t){console.log(t)},async submit(){var e;this.savingPriceList=!0;const t={huntingTypeId:this.form.hunting_type_id.value,sales_package_ids:(e=this.form.package)==null?void 0:e.filter(d=>(d==null?void 0:d.value)!==void 0).map(d=>d==null?void 0:d.value),amount:this.form.amount,currency:this.form.currency.value,duration:this.form.duration.value,season_id:this.form.season.value.id,start_at:this.form.season.value.start_at,end_at:this.form.season.value.end_at,is_active:1,area_id:3,user_id:1,companionAmount:this.form.companion_amount,observerAmount:this.form.observer_amount};this.savingPriceList=!1;try{const d=await this.createPriceList(t);d.status===201?(this.init({message:d.data.message,color:"success"}),this.resetForm(),this.resetValidationForm(),this.speciesObjects=[],this.savingPriceList=!1):(console.log(d),this.savingPriceList=!1)}catch(d){this.savingPriceList=!1,X(d.response),console.log(d),this.init({message:d.message,color:"danger"})}},async getSpeciesItems(){try{const t=await this.getSpeciesList();this.speciesOptions=t.data.map(e=>({value:e.id,text:e.name}))}catch(t){console.log(t)}},async getSeasonList(){try{const t=await this.getSeasons();this.seasonsOptions=t.data.map(e=>({value:e,text:e.name}))}catch(t){console.log(t)}},_showModal(){this._shM=!0},async getSalesPackages(){try{await this.getSalesPackageList(!0)}catch(t){console.log(t)}},deleteFromStorage(t){this.speciesObjects.splice(t,1),console.log("Species item deleted:",t)},async getAreas(){try{const t=await this.getAreaList();this.areasOptions=t.data.map(e=>({value:e.id,text:e.name}))}catch(t){console.log(t)}},async getHuntingTypes(){try{const t=await this.getHuntingsTypes();this.huntingTypesOptions=t.data.map(e=>({value:e.id,text:e.name}))}catch(t){console.log(t)}},onChangePackage(t){console.log(t.filter(e=>(e==null?void 0:e.value)!==void 0).map(e=>e==null?void 0:e.value))},async getQuotaList(){try{const t=await this.getQuotas(null);this.salesQuotasOptions=t.data.map(e=>({value:e.id,text:e.name}))}catch(t){console.log(t)}},async getCurrencyList(){try{const t=await this.getCurrencies();this.currencyOptions=t.data.map(e=>({value:e.id,text:e.name}))}catch(t){console.log(t)}}}}),ht={class:"p-1"},yt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},bt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},St={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Vt={class:"mt-4 d-flex p-2"};function Lt(t,e,d,n,i,o){const v=u("VaChip"),c=u("VaIcon"),p=u("VaSelect"),b=u("VaInput"),k=u("VaButton"),P=u("VaForm"),B=u("VaInnerLoading"),w=u("SalesPackageForm"),S=u("VaModal");return f(),y(C,null,[r(B,{loading:t.savingPriceList,size:60},{default:g(()=>[r(P,{ref:"formRef"},{default:g(()=>[a("div",ht,[e[11]||(e[11]=a("h3",{class:"font-bold text-lg mb-2"},"Price list Infos",-1)),a("div",yt,[r(p,{modelValue:t.form.package,"onUpdate:modelValue":[e[1]||(e[1]=s=>t.form.package=s),t.onChangePackage],options:t.packageOptions,multiple:"",clearable:"",placeholder:"Select Package list here",rules:[s=>s||"Package is required"],label:"Packages","required-mark":""},{content:g(({value:s})=>[(f(!0),y(C,null,D(s,M=>(f(),L(v,{key:M,size:"small",color:"info",class:"mr-1 my-1",closeable:"","onUpdate:modelValue":I=>t.deleteChip(M)},{default:g(()=>[F(l(M.text),1)]),_:2},1032,["onUpdate:modelValue"]))),128))]),append:g(()=>[r(c,{name:"add",class:"ml-2",onClick:e[0]||(e[0]=s=>t._showModal())})]),_:1},8,["modelValue","options","rules","onUpdate:modelValue"]),r(p,{modelValue:t.form.hunting_type_id,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.hunting_type_id=s),placeholder:"Select Hunting Type",label:"Hunting Type",rules:[s=>s||"Hunting type is required"],options:t.huntingTypesOptions,searchable:"","required-mark":"","highlight-matched-text":""},null,8,["modelValue","rules","options"]),r(p,{modelValue:t.form.season,"onUpdate:modelValue":e[3]||(e[3]=s=>t.form.season=s),options:t.seasonsOptions,"required-mark":"",label:"Select season",placeholder:"Select season"},null,8,["modelValue","options"])]),e[12]||(e[12]=a("h3",{class:"font-bold text-lg mb-2"},"Charges",-1)),a("div",bt,[r(b,{modelValue:t.form.amount,"onUpdate:modelValue":e[4]||(e[4]=s=>t.form.amount=s),type:"text",placeholder:"Enter Amount",rules:[s=>s&&s.length>0||"Amount is required"],label:"Amount","required-mark":""},null,8,["modelValue","rules"]),r(p,{modelValue:t.form.currency,"onUpdate:modelValue":e[5]||(e[5]=s=>t.form.currency=s),placeholder:"Select Currency",label:"Currency",rules:[s=>s||"Currency is required"],options:t.currencyOptions,searchable:"","highlight-matched-text":"","required-mark":""},null,8,["modelValue","rules","options"]),r(p,{modelValue:t.form.duration,"onUpdate:modelValue":e[6]||(e[6]=s=>t.form.duration=s),type:"text",options:t.durationsOptions,"required-mark":"",placeholder:"Enter Duration eg: 21 days",rules:[s=>s||"Duration is required"],label:"Duration(days)"},null,8,["modelValue","options","rules"])]),e[13]||(e[13]=a("h3",{class:"font-bold text-lg mb-2"},"Companion's and Observer's Charges(Optional)",-1)),a("div",St,[r(b,{modelValue:t.form.companion_amount,"onUpdate:modelValue":e[7]||(e[7]=s=>t.form.companion_amount=s),type:"text",placeholder:"Enter Companion Amount",label:"Companion Cost(Per Person)"},null,8,["modelValue"]),r(b,{modelValue:t.form.observer_amount,"onUpdate:modelValue":e[8]||(e[8]=s=>t.form.observer_amount=s),type:"text",placeholder:"Enter observer Amount",label:"Observer Cost(Per Person)"},null,8,["modelValue"])])]),a("div",Vt,[t.showEditForm?A("",!0):(f(),L(k,{key:0,icon:"save",class:"mr-3 mb-2",loading:t.savingPriceList,disabled:!t.isValidForm,onClick:e[9]||(e[9]=s=>t.validateForm()&&t.submit())},{default:g(()=>e[14]||(e[14]=[F(" Save ")])),_:1},8,["loading","disabled"]))])]),_:1},512)]),_:1},8,["loading"]),r(S,{modelValue:t._shM,"onUpdate:modelValue":e[10]||(e[10]=s=>t._shM=s),"ok-text":"Apply","close-button":"",size:"large","hide-default-actions":!0},{default:g(()=>[r(w)]),_:1},8,["modelValue"])],64)}const kt=q(gt,[["render",Lt]]),Pt={name:"",start_date:null,end_date:null},Bt=$({name:"QuotaPage",components:{ModuleTable:Y,PricesListDetails:mt,CreatePricesListForm:kt},setup(){const t=V(null),e=V(null),d=[{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"package_name",sortable:!0},{key:"area",sortable:!0},{key:"hunting_type",sortable:!0},{key:"amount",sortable:!0},{key:"duration",sortable:!0,label:"Duration (Days)"},{key:"status",sortable:!0},{key:"actions",width:80}],{isValid:n,validate:i,resetValidation:o,reset:v}=U(e);return{isValidSForm:n,validateSForm:i,resetValidationSForm:o,resetSForm:v,formRef:t,sformRef:e,columns:d}},data(){const t=[],e=[],d=K({id:null,name:"",scientific_name:""}),n=[];return{items:t,printableDataList:e,item:null,editedItemId:null,editedItem:null,createdItem:{...Pt},toast:E(),sform:d,speciesOptions:[],areasOptions:[],huntingTypeOptions:[],speciesObjects:[],showModal:!1,quotasOptions:n,showPriceList:!0,ShowCreateNewPriceListForm:!1,loading:!1,currentQuota:null,quotaItems:[],excellFile:[],itemsByHuntingType:[],huntingTypeValue:null,areaValue:null,quotaValue:null,poriceListPdf:"",downloadPdf:H}},computed:{...Q(T,["logo"])},mounted(){this.getPriceLists(),this.getAreas(),this.getQuota(),this.getHuntingTypesOptions(),this.loadLogo()},methods:{...m(_,["getPriceList"]),...m(_,["getPriceListByHuntingType"]),...m(_,["getPriceListById"]),...m(O,["getQuotas"]),...m(O,["getAreaList"]),...m(O,["generateQuotaYear"]),...m(T,["getHuntingsTypes"]),...m(T,["loadLogo"]),async toggleShowPriceListMethod(t){console.log("=== Eye button clicked ==="),console.log("Row data received:",t),console.log("Current showPriceList:",this.showPriceList);const e=t==null?void 0:t.id;if(!e){console.error("No price list ID found in row data");return}try{console.log("Fetching price list detail for ID:",e);const d=await this.getPriceListById(e);this.item=d.data.data||d.data,console.log("Fetched price list detail:",this.item),this.showPriceList=!1,console.log("Switched to detail view")}catch(d){console.error("Error fetching price list detail:",d)}},async onDownloadPdf(){var n,i;const t=this.poriceListPdf;console.log("onDownloadPdf clicked, poriceListPdf length:",t?t.length:0);const e=o=>typeof o=="string"&&/^https?:\/\//i.test(o),d=o=>typeof o=="string"&&o.length>200&&/^[A-Za-z0-9+/=\r\n]+$/.test(o);if(!t||!e(t)&&!d(t)){try{(n=this.toast)==null||n.init({message:"PDF not available for this selection",color:"warning"})}catch{console.warn("PDF not available")}return}try{await H(t,`price-list-${Date.now()}.pdf`)}catch(o){try{(i=this.toast)==null||i.init({message:"Failed to download PDF",color:"danger"})}catch{console.error("Failed to download PDF",o)}}},goBack(){this.showPriceList=!this.showPriceList,this.ShowCreateNewPriceListForm=!1,this.getPriceLists()},showCreateNewPriceListFormMethod(){this.ShowCreateNewPriceListForm=!this.ShowCreateNewPriceListForm,this.showPriceList=!1},deleteFromStorage(t){this.speciesObjects.splice(t,1),console.log("Species item deleted:",t)},async addNewSpecies(){},formatDate(t){const e=t.getFullYear(),d=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${d}-${n}`},async getPriceLists(){this.loading=!0;try{const t=o=>o==null?"":typeof o=="object"&&"value"in o?o.value:o,e=t(this.huntingTypeValue)||"",d=t(this.areaValue)||"",n=t(this.quotaValue)||"";console.log("Filter params:",{huntingTypeId:e,areaId:d,quotaId:n}),console.log("huntingTypeValue:",this.huntingTypeValue),console.log("areaValue:",this.areaValue);const i=await this.getPriceList(e,d,n);if(console.log("API response:",i),console.log("Response data structure:",i==null?void 0:i.data),i.status===200){this.loading=!1;const o=i==null?void 0:i.data,v=Array.isArray(o)?o:(o==null?void 0:o.data)??[];console.log("Data array:",v),this.printableDataList=o,this.poriceListPdf=(o==null?void 0:o.pdf)||"",Array.isArray(v)?this.items=v.map(c=>({id:c.id,package_name:c.package_name,area:c.area,hunting_type:c.hunting_type,amount:c.amount,duration:c.duration,status:c.status})):(console.error("Data is not an array:",v),this.items=[]),console.log("Updated items:",this.items)}}catch(t){this.loading=!1,console.error("Error in getPriceLists:",t)}},async getPriceListByHuntingTypes(t){var e;try{const d=await this.getPriceListByHuntingType(t);this.itemsByHuntingType=(e=d==null?void 0:d.data)==null?void 0:e.map(n=>({id:n==null?void 0:n.id,item:n})),console.log(this.itemsByHuntingType)}catch(d){console.log(d)}},async getAreas(){var t;try{const e=await this.getAreaList(),d={value:"",text:"All"};this.areasOptions=(t=e==null?void 0:e.data)==null?void 0:t.map(n=>({value:n.id,text:n.name})),this.areasOptions.unshift(d),this.areaValue=this.areasOptions[0]}catch(e){console.log(e)}},async getQuota(){try{const t=await this.getQuotas(null);if(t.status===200){const e=t.data[0],d=this.generateQuotaYear(e.start_date,e.end_date);this.quotaValue={value:e.id,text:`${d} - ${e.name}`,name:e.name,start_date:e.start_date,end_date:e.end_date},this.currentQuota=e;const n={value:"",text:"All"};this.quotasOptions=t.data.map(i=>{const o=this.generateQuotaYear(i.start_date,i.end_date);return{value:i.id,text:`${o} - ${i.name}`,name:i.name,start_date:i.start_date,end_date:i.end_date}}),this.quotasOptions.unshift(n)}}catch(t){console.log(t)}},async getHuntingTypesOptions(){var e;const t=await this.getHuntingsTypes();if(t.status===200){const d={value:"",text:"All"};this.huntingTypeOptions=(e=t==null?void 0:t.data)==null?void 0:e.map(n=>({value:n.id,text:n.name})),this.huntingTypeOptions.unshift(d),this.huntingTypeValue=this.huntingTypeOptions[0]}}}}),wt={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between"},Mt={class:"flex flex-col md:flex-row gap-2 justify-start"},Ct={class:"grid sm:grid-cols-3 gap-6 mb-6"};function _t(t,e,d,n,i,o){const v=u("VaButton"),c=u("VaButtonGroup"),p=u("VaDivider"),b=u("VaSelect"),k=u("ModuleTable"),P=u("PricesListDetails"),B=u("CreatePricesListForm"),w=u("VaCard");return f(),L(w,{class:"p-6"},{default:g(()=>[a("div",wt,[a("div",Mt,[t.showPriceList?A("",!0):(f(),L(v,{key:0,class:"px-2 py-2",icon:"arrow_back",size:"small",onClick:t.goBack},{default:g(()=>e[2]||(e[2]=[F(" Go Back ")])),_:1},8,["onClick"]))]),t.ShowCreateNewPriceListForm?A("",!0):(f(),L(c,{key:0},{default:g(()=>[r(v,{class:"px-2 py-2",color:"primary",label:"Add New Quota",icon:"add","border-color":"primary",round:"",preset:"secondary",size:"small",onClick:t.showCreateNewPriceListFormMethod},{default:g(()=>e[3]||(e[3]=[F(" Add a new Price List ")])),_:1},8,["onClick"])]),_:1}))]),r(p),t.ShowCreateNewPriceListForm?A("",!0):(f(),y(C,{key:0},[t.showPriceList?(f(),L(k,{key:0,items:t.items,columns:t.columns,loading:t.loading,onOnView:t.toggleShowPriceListMethod},{"filter-elements-and-download-btn":g(()=>[a("div",Ct,[r(b,{modelValue:t.huntingTypeValue,"onUpdate:modelValue":[e[0]||(e[0]=S=>t.huntingTypeValue=S),t.getPriceLists],options:t.huntingTypeOptions,placeholder:"Filter By Hunting Type"},null,8,["modelValue","options","onUpdate:modelValue"]),r(b,{modelValue:t.areaValue,"onUpdate:modelValue":[e[1]||(e[1]=S=>t.areaValue=S),t.getPriceLists],options:t.areasOptions,placeholder:"Filter By Area"},null,8,["modelValue","options","onUpdate:modelValue"]),r(v,{class:"px-2 py-0",color:"primary",label:"Download",icon:"download",size:"small",onClick:t.onDownloadPdf},{default:g(()=>e[4]||(e[4]=[F(" Download ")])),_:1},8,["onClick"])])]),_:1},8,["items","columns","loading","onOnView"])):(f(),L(P,{key:1,"price-list-item":t.item},null,8,["price-list-item"]))],64)),t.ShowCreateNewPriceListForm?(f(),L(B,{key:1})):A("",!0)]),_:1})}const zt=q(Bt,[["render",_t]]);export{zt as default};
//# sourceMappingURL=ManagePriceList-CXj-IMHV.js.map
