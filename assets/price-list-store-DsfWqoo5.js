import{j as l,k as r}from"./index-C9vSFmy5.js";const d=l("price-list",{state:()=>({itemsByHuntingType:[],priceList:[],salesPackages:[],packageOptions:[],latestPackage:null,showModal:!1,loadingpackages:!1}),actions:{async getPriceList(s="",e="",n=""){const t="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/",a={};s!==""&&s!==null&&s!==void 0&&(a.hunting_type_id=s),e!==""&&e!==null&&e!==void 0&&(a.area_id=e),n!==""&&n!==null&&n!==void 0&&(a.season_id=n),console.log("API URL:",t,"params:",a);const c={method:"get",maxBodyLength:1/0,url:t,params:a,headers:{"Content-Type":"application/json"}},o=await r.request(c);console.log("API response data:",o.data);const i=o.data,u=Array.isArray(i)?i:(i==null?void 0:i.data)??[];return Array.isArray(u)&&u.length>0?this.priceList=u:this.priceList=[],o},async getPriceListByHuntingType(s="",e="",n=""){const t="https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/",a={};s!==""&&s!==null&&s!==void 0&&(a.hunting_type_id=s),e!==""&&e!==null&&e!==void 0&&(a.area_id=e),n!==""&&n!==null&&n!==void 0&&(a.season_id=n);const c={method:"get",maxBodyLength:1/0,url:t,params:a,headers:{"Content-Type":"application/json"}},o=await r.request(c),i=o.data,u=Array.isArray(i)?i:(i==null?void 0:i.data)??[];return this.itemsByHuntingType=u,o},async getPriceListById(s){const e=`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/${s}/`;console.log("Fetching price list detail, URL:",e);const n={method:"get",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"}},t=await r.request(n);return console.log("Price list detail response:",t.data),t},async updatePriceList(s,e){const n=JSON.stringify({area:e.area,hunting_type_id:e.huntingTypeId,sales_package_ids:e.sales_package_ids,description:e.description,sales_quota_id:e.salesQuotaId,amount:e.amount,currency:e.currency,duration:e.duration,companion_days:e.companionDays,companion_amount:e.companionAmount,observer_days:e.observerDays,observer_amount:e.observerAmount,season_id:e.season_id,start_date:e.start_at,end_date:e.end_at,is_active:e.is_active,area_id:e.area_id,user_id:e.user_id,species_object_list:e.speciesObjectList}),t={method:"put",maxBodyLength:1/0,url:`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/${s}/`,headers:{"Content-Type":"application/json"},data:n};return await r.request(t)},async deletePriceList(s,e=!1){const t={method:"delete",maxBodyLength:1/0,url:`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/price-lists/${s}/${e?"?force=true":""}`,headers:{"Content-Type":"application/json"}};return await r.request(t)},async getSalesPackageList(s=!1){this.loadingpackages=!0;const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"}},n=await r.request(e);return n.status===200&&(this.loadingpackages=!1,s?(this.latestPackage={value:n.data[0].id,text:n.data[0].name},this.packageOptions=n.data.map(t=>({value:t.id,text:t.name}))):this.salesPackages=n.data.map(t=>{var a,c;return{id:t.id,name:t.name,area_name:((a=t==null?void 0:t.area)==null?void 0:a.name)??"N/A",regulatory_package_name:((c=t==null?void 0:t.regulatory_package)==null?void 0:c.name)??"N/A",selfItem:t}})),n},async createSalesPackage(s){const e=JSON.stringify({name:s.name,area_id:s.areaId,regulatory_package_id:s.licenceId,description:s.description,species_object_list:s.speciesObjectList}),n={method:"post",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/",headers:{"Content-Type":"application/json"},data:e},t=await r.request(n);return t.status===201&&(this.showModal=!1,this.getSalesPackageList()),t},async updateSalesPackage(s,e){const n=JSON.stringify({name:e.name,area_id:e.areaId,regulatory_package_id:e.licenceId,description:e.description,species_object_list:e.speciesObjectList}),t={method:"put",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/"+s+"/",headers:{"Content-Type":"application/json"},data:n},a=await r.request(t);return a.status===200&&this.getSalesPackageList(),a},async deleteSalesPackage(s,e=!1){const t={method:"delete",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/sales-package-sets/"+s+"/"+(e?"?force=true":""),headers:{"Content-Type":"application/json"}},a=await r.request(t);return(a.status===200||a.status===204)&&this.getSalesPackageList(),a},async createPriceList(s){const e=JSON.stringify({area:s.area,hunting_type_id:s.huntingTypeId,sales_package_ids:s.sales_package_ids,description:s.description,sales_quota_id:s.salesQuotaId,amount:s.amount,currency:s.currency,duration:s.duration,companion_days:s.companionDays,companion_amount:s.companionAmount,observer_days:s.observerDays,observer_amount:s.observerAmount,season_id:s.season_id,start_date:s.start_at,end_date:s.end_at,is_active:s.is_active,area_id:s.area_id,user_id:s.user_id,species_object_list:s.speciesObjectList}),n={method:"post",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/create-price-list/",headers:{"Content-Type":"application/json"},data:e};return await r.request(n)},async getCompletePriceListPdf(){const e={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/complete-price-list-pdf/",headers:{"Content-Type":"application/json"}};return await r.request(e)}}});export{d as u};
//# sourceMappingURL=price-list-store-DsfWqoo5.js.map
