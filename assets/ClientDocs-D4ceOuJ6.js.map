{"version":3,"file":"ClientDocs-D4ceOuJ6.js","sources":["../../src/pages/client/dashboard/ClientDocs.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"formRef\">\n    <!-- Responsive grid layout for mobile and larger screens -->\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n      <!-- First Name -->\n      <!-- Last Name -->\n      <VaSelect\n        v-model=\"form.document_type\"\n        placeholder=\"Select Counrty\"\n        label=\"Document Type\"\n        :options=\"doctypelist\"\n        searchable\n        highlight-matched-text\n      />\n\n      <!-- Last Name -->\n      <VaSelect\n        v-model=\"form.forWho\"\n        placeholder=\"Document Owner\"\n        label=\"Owner\"\n        :options=\"observerCompanions\"\n        searchable\n        highlight-matched-text\n      />\n\n      <VaFileUpload\n        v-model=\"form.document\"\n        upload-button-text=\"Upload your photo\"\n        color=\"secondary\"\n        label=\"Upload Photo\"\n        dropzone\n        undo\n        size=\"10mb\"\n        type=\"gallery\"\n        file-types=\"image/jpeg, image/png\"\n        undo-duration=\"500\"\n        :rules=\"[(v: any) => v.length > 0 || 'Photo is required']\"\n        :max-files=\"1\"\n      />\n    </div>\n\n    <!-- Submit Button -->\n    <div class=\"mt-4 d-flex\">\n      <VaButton icon=\"save\" class=\"mr-3 mb-2\" :disabled=\"!isValid\" @click=\"validate() && add()\"> Save </VaButton>\n\n      <VaButton class=\"mr-3 mb-2\" icon=\"save\" :disabled=\"!isValid\" color=\"warning\" @click=\"validate() && edit()\">\n        save\n      </VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive } from 'vue'\nimport { useForm } from 'vuestic-ui'\nimport axios from 'axios'\nimport { useToast } from 'vuestic-ui'\nimport { onMounted } from 'vue'\nimport handleErrors from '../../../utils/errorHandler'\n\nconst { isValid, validate } = useForm('formRef')\nconst { init } = useToast()\n// import { useModal } from 'vuestic-ui'\n\nconst form = reactive({\n  document_type: null as any,\n  forWho: null as any,\n  document: [] as any,\n})\n// const { confirm } = useModal()\n\nconst observerCompanions: any[] = []\n\nconst doctypelist: any[] = [\n  {\n    text: 'Travel Packet(Passport Copy',\n    value: 'Passport_Copy',\n  },\n  {\n    text: 'Travel Packet(Passport  Photo',\n    value: 'Passport_Photo',\n  },\n  {\n    text: 'Visa',\n    value: 'Visa',\n  },\n  {\n    text: 'Gun Permits',\n    value: 'Gun Permits',\n  },\n  {\n    text: 'CITES Documentation',\n    value: 'CITES Documentation',\n  },\n]\n\nconst submit = async (method: string) => {\n  try {\n    const data = new FormData()\n    // format it to 1990-05-15\n    data.append('document_type', form.document_type.value)\n    data.append('forWho', form.forWho.value)\n    data.append('document', form.document[0]) // Assuming the file has been added to form.photo\n\n    const config = {\n      method: method,\n      maxBodyLength: Infinity,\n      url: import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_CLIENT_DOCS_VSET_URL,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n\n      data: data,\n    }\n\n    const response = await axios.request(config)\n    console.log(JSON.stringify(response.data))\n    if (response.status === 200 || response.status === 201) {\n      init({ message: response.data.message, color: 'success' })\n    }\n  } catch (error: any) {\n    if (error.response) {\n      const errors: any = handleErrors(error)\n      init({\n        message: '\\n' + errors.map((error: any, index: any) => `${index + 1}. ${error}`).join('\\n'),\n        color: 'danger',\n      })\n    } else {\n      console.log(error)\n      init({ message: 'Something went wrong', color: 'danger' })\n    }\n  }\n\n  // get countries from API\n}\n\nconst edit = () => {\n  submit('patch')\n}\nconst add = () => {\n  submit('post')\n}\n\nconst getClientObserverCompanions = async () => {\n  const config = {\n    method: 'get',\n    maxBodyLength: Infinity,\n    url: import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_CLIENT_COMPANION_OBSERVER_LIST_URL,\n  }\n\n  const response = await axios.request(config)\n  if (response.status === 200 || response.status === 201) {\n    //  add default\n    observerCompanions.push({ text: 'Me', value: 'Me' })\n    observerCompanions.push(\n      ...response.data.observer_and_companion.map((user: any) => ({\n        text: user.user.first_name + ' ' + user.user.last_name,\n        value: user.id,\n      })),\n    )\n  }\n}\n\nonMounted(() => {\n  //   getCountries()\n  //   getClientBasicInfo()\n  getClientObserverCompanions()\n})\n</script>\n"],"names":["isValid","validate","useForm","init","useToast","form","reactive","observerCompanions","doctypelist","submit","method","data","config","response","axios","error","errors","handleErrors","index","edit","add","getClientObserverCompanions","user","onMounted"],"mappings":"gXA4DA,KAAM,CAAE,QAAAA,EAAS,SAAAC,GAAaC,EAAQ,SAAS,EACzC,CAAE,KAAAC,CAAA,EAASC,EAAA,EAGXC,EAAOC,EAAS,CACpB,cAAe,KACf,OAAQ,KACR,SAAU,CAAA,CAAC,CACZ,EAGKC,EAA4B,CAAA,EAE5BC,EAAqB,CACzB,CACE,KAAM,8BACN,MAAO,eAAA,EAET,CACE,KAAM,gCACN,MAAO,gBAAA,EAET,CACE,KAAM,OACN,MAAO,MAAA,EAET,CACE,KAAM,cACN,MAAO,aAAA,EAET,CACE,KAAM,sBACN,MAAO,qBAAA,CACT,EAGIC,EAAS,MAAOC,GAAmB,CACvC,GAAI,CACF,MAAMC,EAAO,IAAI,SAEjBA,EAAK,OAAO,gBAAiBN,EAAK,cAAc,KAAK,EACrDM,EAAK,OAAO,SAAUN,EAAK,OAAO,KAAK,EACvCM,EAAK,OAAO,WAAYN,EAAK,SAAS,CAAC,CAAC,EAExC,MAAMO,EAAS,CACb,OAAAF,EACA,cAAe,IACf,IAAK,0DACL,QAAS,CACP,eAAgB,qBAAA,EAGlB,KAAAC,CAAA,EAGIE,EAAW,MAAMC,EAAM,QAAQF,CAAM,EAC3C,QAAQ,IAAI,KAAK,UAAUC,EAAS,IAAI,CAAC,GACrCA,EAAS,SAAW,KAAOA,EAAS,SAAW,MACjDV,EAAK,CAAE,QAASU,EAAS,KAAK,QAAS,MAAO,UAAW,CAE7D,OAASE,EAAY,CACnB,GAAIA,EAAM,SAAU,CAClB,MAAMC,EAAcC,EAAaF,CAAK,EACtCZ,EAAK,CACH,QAAS;AAAA,EAAOa,EAAO,IAAI,CAACD,EAAYG,IAAe,GAAGA,EAAQ,CAAC,KAAKH,CAAK,EAAE,EAAE,KAAK;AAAA,CAAI,EAC1F,MAAO,QAAA,CACR,CACH,MACE,QAAQ,IAAIA,CAAK,EACjBZ,EAAK,CAAE,QAAS,uBAAwB,MAAO,SAAU,CAE7D,CAGF,EAEMgB,EAAO,IAAM,CACjBV,EAAO,OAAO,CAChB,EACMW,EAAM,IAAM,CAChBX,EAAO,MAAM,CACf,EAEMY,EAA8B,SAAY,CAC9C,MAAMT,EAAS,CACb,OAAQ,MACR,cAAe,IACf,IAAK,gEAAA,EAGDC,EAAW,MAAMC,EAAM,QAAQF,CAAM,GACvCC,EAAS,SAAW,KAAOA,EAAS,SAAW,OAEjDN,EAAmB,KAAK,CAAE,KAAM,KAAM,MAAO,KAAM,EACnDA,EAAmB,KACjB,GAAGM,EAAS,KAAK,uBAAuB,IAAKS,IAAe,CAC1D,KAAMA,EAAK,KAAK,WAAa,IAAMA,EAAK,KAAK,UAC7C,MAAOA,EAAK,EAAA,EACZ,CAAA,EAGR,EAEA,OAAAC,EAAU,IAAM,CAGdF,EAAA,CACF,CAAC"}