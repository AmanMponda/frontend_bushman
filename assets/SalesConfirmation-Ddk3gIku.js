import{u as D}from"./sales-store-BA52ZQPc.js";import{d as Tt,m as S,y as P,l as Ct,_ as Dt,g,e as t,b as o,a as T,x as C,w as f,h as n,i as r,t as a,F as O,q as vt,o as p}from"./index-YknbmV_z.js";import{u as St}from"./settings-store-CFkNIGsP.js";import{h as bt}from"./errorHandler-DijQ3xmc.js";import{u as At}from"./account-store-BhhW1WDs.js";import{d as ht}from"./pdfDownloader-DiRJnS-k.js";import{S as Nt,O as _t,C as Ft}from"./SalesClientSafariExtrasForm-BDXpnsoG.js";import{f as Ot}from"./format-Cn4G_mmc.js";import"./utils-BWc0LXoO.js";import"./useForm-BD4PJEC-.js";import"./useToast-BEDWU_wG.js";import"./quota-store-D1n978KD.js";import"./regulatrory-store-DnWNnLOw.js";import"./SafariExtrasForm-DHLRdedh.js";const Et=s=>({pending:"secondary",provision_sales:"warning",confirmed:"success",declined:"danger",cancelled:"danger",completed:"primary"})[s]||"default",qt=Tt({components:{CompanionForm:Ft,ObserversForm:_t,SafariExtrasList:Nt},props:{salesData:{type:Object,required:!0}},emits:["download-confirmation"],data(){var e,u,y;return{columns:[{key:"narration",label:"Description"},{key:"amount_due",label:"Amount Due (USD)"},{key:"due_days",label:"Days"},{key:"amount_due_type",label:"Due Type"},{key:"due_days_type",label:"Due Type"}],isOpened:!1,file:[],payfile:[],docType:null,docTypes:[],confirmText:"Confirm",disabledConfirmButton:!1,selection:["provision_sales"],paymentForm:{currency_id:null,date:null,accountType:null,reference_number:null,amount:(y=(u=(e=this.salesData)==null?void 0:e.price_break_down)==null?void 0:u.total_amount)==null?void 0:y.amount,narration:""},buttonColor:"primary",createDRTransaction:!1,createCRTransaction:!1,completingSales:!1,downloadPdf:ht,statusOptions:[{value:"provision_sales",text:"Confirmed, but no disposit yet"},{value:"confirmed",text:"Confirmed, With a disposit"},{value:"declined",text:"Declined"},{value:"cancelled",text:"Cancelled"},{value:"completed",text:"Completed"}],getStatusColor:Et,files:[],status:"",loading:!1,transaction_type:"",accountsOption:[{value:"CASH_IN_HAND",text:"Cash in Hand"},{value:"BANK",text:"Bank trasfer"}],currencyOptions:[{value:1,text:"USD"},{value:2,text:"Tsh"}]}},computed:{...Ct(D,["observers","companions","clientSafariExtras"]),...P(D,{_shM:"showSafariExtrasModal"}),...P(D,{_shOMd:"showObserversModal"}),...P(D,{_shCMd:"showCompanionsModal"})},mounted(){this.showConfirmButtonTextByStatus(),this.getObservers(this.salesData.sales_inquiry.id),this.getCompanions(this.salesData.sales_inquiry.id),this.getClienSafariExtras(this.salesData.sales_inquiry.id)},methods:{...S(St,["getDocTypes"]),...S(D,["updatesalesConfirmationStatus"]),...S(At,["createCRDRTransaction","createDRCRTransaction"]),...S(D,["getObservers","getCompanions"]),...S(D,["createsafariExtras","getClienSafariExtras"]),getContactByType(s){return this.salesData.sales_inquiry.entity.contacts.find(e=>e.contact_type===s)},formatDate(s){const e={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString(void 0,e)},_showSafariExtrasModal(){this._shM=!0},downloadConfirmation(){this.$emit("download-confirmation",this.salesData)},async complete(){this.status="completed",this.completingSales=!0,await this.completeOrCancel("Sales Confirmation Completed.")},async completeOrCancel(s){var u,y,m,d;const e={entityId:this.salesData.sales_inquiry.entity.id,contractDoc:this.file[0],paymentDoc:this.payfile[0],salesConfirmationProposalId:this.salesData.id,statusId:this.status,quotaId:(d=(m=(y=(u=this.salesData)==null?void 0:u.proposed_package)==null?void 0:y.sales_package)==null?void 0:m.sales_quota)==null?void 0:d.id,areaId:this.salesData.sales_inquiry.area[0].area.id};try{(await this.updatesalesConfirmationStatus(e)).status===200?(this.isOpened=!1,this.loading=!1,this.$vaToast.init({message:s,color:"success"}),this.completingSales=!1):this.$vaToast.init({message:"Failed to process the request",color:"danger"})}catch(c){const h=bt(c.response);h.length>0&&(this.loading=!1,this.completingSales=!0,this.$vaToast.init({message:`
`+h.map((V,v)=>`${v+1}. ${V}`).join(`
`),color:"danger"}))}},async cancel(){await this.$vaModal.confirm("Are you sure you want to cancel this sales?")&&(this.status="cancelled",await this.completeOrCancel("Sales Confirmation Cancelled."))},handleTransactionTypeStatus(s,e,u){this.loading=!0;const y=m=>this.files.some(d=>d.file===m);if(this.salesData.status.status==="pending"){if(s.includes("provision_sales")&&s.includes("confirm")&&s.length===2){if(this.status="confirmed",this.transaction_type="RECEIPT",this.createCRTransaction=!0,e[0]===void 0&&u[0]===void 0)throw this.$vaToast.init({message:"Please upload both Signed Contract and Payment Document",color:"danger"}),this.loading=!1,new Error("Please upload both Signed Contract and Payment Document")}else if(s.includes("provision_sales")&&s.length===1){if(this.status="provision_sales",this.transaction_type="SALES_INVOICE",this.createDRTransaction=!0,console.log("File:",e[0]),console.log("Payfile:",u[0]),e[0]===void 0)throw this.$vaToast.init({message:"Please upload Signed Contract",color:"danger"}),this.loading=!1,new Error("Please upload Signed Contract")}else if(s.includes("confirm")&&s.length===1&&(this.status="confirmed",this.transaction_type="RECEIPT",this.createCRTransaction=!0,u[0]===void 0))throw this.$vaToast.init({message:"Please upload Payment Document",color:"danger"}),this.loading=!1,new Error("Please upload Payment Document")}else if(this.salesData.status.status==="provision_sales"&&!y(u[0])&&(this.status="confirmed",this.transaction_type="RECEIPT",this.createCRTransaction=!0,u[0]===void 0))throw this.$vaToast.init({message:"Please upload Payment Document",color:"danger"}),this.loading=!1,new Error("Please upload Payment Document")},async submit(){var u,y;try{this.handleTransactionTypeStatus(this.selection,this.file,this.payfile)}catch(m){console.error("Error:",m),this.loading=!1;return}const s={date:Ot(this.paymentForm.date,"yyyy-MM-dd")??null,account_type:((y=(u=this.paymentForm)==null?void 0:u.accountType)==null?void 0:y.value)??"SALES_ACCOUNT",reference_number:this.paymentForm.reference_number??null,currency_id:this.paymentForm.currency_id.value,transaction_type:this.transaction_type,amount:this.paymentForm.amount,narration:this.paymentForm.narration,accountable_id:this.salesData.sales_inquiry.entity.id,accountable_type_id:this.salesData.sales_inquiry.entity.category.id,sales_confirmation_id:this.salesData.id},e={entityId:this.salesData.sales_inquiry.entity.id,contractDoc:this.file[0],paymentDoc:this.payfile[0],salesConfirmationProposalId:this.salesData.id,statusId:this.status,areaId:this.salesData.sales_inquiry.area[0].area.id};try{if(this.createCRTransaction)if((await this.updatesalesConfirmationStatus(e)).status===200){const d=await this.createCRDRTransaction(s);d.status===201?(this.isOpened=!1,this.loading=!1,this.$vaToast.init({message:d.data.message,color:"success"})):this.$vaToast.init({message:"Failed to create transaction",color:"danger"})}else this.$vaToast.init({message:"Failed to update Sales",color:"danger"});else if(this.createDRTransaction)if((await this.updatesalesConfirmationStatus(e)).status===200){const d=await this.createDRCRTransaction(s);await this.delay(1e3),d.status===201?(this.isOpened=!1,this.loading=!1,this.$vaToast.init({message:d.data.message,color:"success"})):this.$vaToast.init({message:"Failed to create transaction",color:"danger"})}else this.$vaToast.init({message:"Failed to update Sales",color:"danger"})}catch(m){const d=bt(m.response);this.loading=!1,d.length>0?this.$vaToast.init({message:`
`+d.map((c,h)=>`${h+1}. ${c}`).join(`
`),color:"danger"}):m.message&&this.$vaToast.init({message:m.message,color:"danger"})}},delay(s){return new Promise(e=>setTimeout(e,s))},showConfirmButtonTextByStatus(){switch(this.salesData.status.status){case"confirmed":this.confirmText="Cancel Now",this.disabledConfirmButton=!1,this.buttonColor="danger";break;case"completed":this.confirmText="Sales Done",this.disabledConfirmButton=!0;break;case"declined":this.confirmText="Confirm and Decline",this.disabledConfirmButton=!1;break;case"cancelled":this.confirmText="Confirm and Cancel",this.disabledConfirmButton=!1;break;case"provision_sales":this.confirmText="Confirm a Provision Sales",this.disabledConfirmButton=!1;break;default:this.confirmText="Confirm";break}},async getDocTypeOptions(){try{const s=await this.getDocTypes();if(console.log("Response from getDocTypes:",s),s.status===200){const e=s.data.map(u=>({value:u.id,text:u.name}));console.log("Mapped docTypes:",e),this.docTypes=e}else console.error("Failed to fetch document types: ",s)}catch(s){console.error("Error fetching document types: ",s)}},showModal(){this.isOpened=!0}}}),Pt={class:"sales-confirmation"},It={class:"action-buttons"},Bt={class:"section"},Mt={class:"details-grid"},Rt={class:"section"},$t={class:"details-grid"},Ut={class:"section"},zt={class:"details-grid"},jt={class:"section"},Lt={class:"details-grid"},Ht={class:"section"},Wt={class:"va-table-responsive"},Gt={class:"va-table"},Kt={class:"section"},Qt={class:"details-grid"},Jt={class:"section"},Xt={class:"details-grid"},Yt={class:"section"},Zt={class:"section"},xt={class:"details-grid"},ea={class:"species-list"},sa={class:"section"},ta={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between px-4 py-2"},aa={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between px-4 py-2"},oa={class:"flex flex-col md:flex-row gap-2 justify-start"},na={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between px-4 py-2"},la={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between px-4 py-2"},ia={class:"flex flex-row"},ra={class:"flex flex-col"},da={class:"flex flex-row mb-4"},ua={key:0,class:"flex-1"},ma={key:1,class:"flex-1"},pa={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fa={key:0,class:"mb-2"},ca={key:1,class:"mb-2"},ya={key:2,class:"mb-2"},ga={class:"mb-3"},va={class:"mb-2"},ba={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Ca={class:"mb-2"},Da={class:"mb-3"},ha={class:"mb-2"},Va={class:"mb-2"},wa={class:"mb-2"};function ka(s,e,u,y,m,d){var M,R,$,U,z,j,L,H,W,G,K,Q,J,X,Y,Z,x,ee,se,te,ae,oe,ne,le,ie,re,de,ue,me,pe,fe,ce,ye,ge,ve,be,Ce,De,he,Ve,we,ke,Te,Se,Ae,Ne,_e,Fe,Oe,Ee,qe,Pe,Ie,Be,Me,Re,$e,Ue,ze,je,Le,He,We,Ge,Ke,Qe,Je,Xe,Ye,Ze,xe,es,ss,ts,as,os,ns,ls,is,rs,ds,us,ms,ps,fs,cs,ys,gs,vs,bs,Cs,Ds,hs,Vs,ws,ks,Ts,Ss,As,Ns,_s,Fs,Os,Es,qs,Ps,Is,Bs,Ms,Rs,$s,Us,zs,js,Ls,Hs,Ws,Gs,Ks,Qs,Js,Xs,Ys,Zs,xs,et,st,tt,at,ot,nt,lt,it,rt,dt,ut,mt,pt,ft,ct,yt;const c=r("VaButton"),h=r("VaBadge"),V=r("VaDataTable"),v=r("VaDivider"),E=r("VaTitle"),b=r("VaProgressBar"),A=r("VaCheckbox"),q=r("VaFileUpload"),I=r("VaDateInput"),N=r("VaSelect"),_=r("VaInput"),B=r("VaTextarea"),F=r("VaModal"),Vt=r("CompanionForm"),wt=r("ObserversForm"),kt=r("SafariExtrasList");return p(),g("div",Pt,[e[82]||(e[82]=t("h1",{class:"header text-center text-lg font-bold"},"SALES CONFIRMATION",-1)),t("div",It,[o(c,{roud:"",preset:"secondary",class:"px-2 py-2 px-md-4 py-md-4 mr-2",icon:"file_download",size:"small","border-color":"primary",onClick:e[0]||(e[0]=i=>s.downloadPdf(s.salesData.pdf))},{default:f(()=>e[26]||(e[26]=[n("Download")])),_:1}),((R=(M=s.salesData)==null?void 0:M.status)==null?void 0:R.status)==="pending"||((U=($=s.salesData)==null?void 0:$.status)==null?void 0:U.status)==="provision_sales"?(p(),T(c,{key:0,roud:"",preset:"secondary","border-color":"primary",class:"px-2 py-2",icon:"check_circle",disabled:s.disabledConfirmButton,size:"small",onClick:s.showModal},{default:f(()=>[n(a(s.confirmText),1)]),_:1},8,["disabled","onClick"])):((j=(z=s.salesData)==null?void 0:z.status)==null?void 0:j.status)==="confirmed"?(p(),T(c,{key:1,roud:"",color:s.buttonColor,class:"px-2 py-2 mr-2",disabled:s.disabledConfirmButton,size:"small",onClick:e[1]||(e[1]=i=>s.cancel())},{default:f(()=>[n(a(s.confirmText),1)]),_:1},8,["color","disabled"])):C("",!0)]),t("section",Bt,[e[31]||(e[31]=t("h2",null,"Sales Inquiry",-1)),t("div",Mt,[t("div",null,[e[27]||(e[27]=t("strong",null,"ID:",-1)),n(" "+a(((L=s.salesData)==null?void 0:L.id)??"N/A"),1)]),t("div",null,[e[28]||(e[28]=t("strong",null,"Code:",-1)),n(" "+a(((W=(H=s.salesData)==null?void 0:H.sales_inquiry)==null?void 0:W.code)??"N/A"),1)]),t("div",null,[e[29]||(e[29]=t("strong",null,"Created Date:",-1)),n(" "+a(s.formatDate((G=s.salesData)==null?void 0:G.created_date)??"N/A"),1)]),t("div",null,[e[30]||(e[30]=t("strong",null,"Remarks:",-1)),n(" "+a(((Q=(K=s.salesData)==null?void 0:K.sales_inquiry)==null?void 0:Q.remarks)??"None"),1)])])]),t("section",Rt,[e[36]||(e[36]=t("h2",null,"Status Information",-1)),t("div",$t,[t("div",null,[e[32]||(e[32]=t("strong",null,"Status ID:",-1)),n(" "+a(((X=(J=s.salesData)==null?void 0:J.status)==null?void 0:X.id)??"N/A"),1)]),t("div",null,[e[33]||(e[33]=t("strong",null,"Status:",-1)),o(h,{text:((Z=(Y=s.salesData)==null?void 0:Y.status)==null?void 0:Z.status)??"N/A",color:s.getStatusColor((ee=(x=s.salesData)==null?void 0:x.status)==null?void 0:ee.status),class:"mr-2"},null,8,["text","color"])]),t("div",null,[e[34]||(e[34]=t("strong",null,"Created At:",-1)),n(" "+a(s.formatDate((te=(se=s.salesData)==null?void 0:se.status)==null?void 0:te.created_at)??"N/A"),1)]),t("div",null,[e[35]||(e[35]=t("strong",null,"Updated At:",-1)),n(" "+a(s.formatDate((oe=(ae=s.salesData)==null?void 0:ae.status)==null?void 0:oe.updated_at)??"N/A"),1)])])]),t("section",Ut,[e[43]||(e[43]=t("h2",null,"Client Information",-1)),t("div",zt,[t("div",null,[e[37]||(e[37]=t("strong",null,"Full Name:",-1)),n(" "+a(((ie=(le=(ne=s.salesData)==null?void 0:ne.sales_inquiry)==null?void 0:le.entity)==null?void 0:ie.full_name)??"N/A"),1)]),t("div",null,[e[38]||(e[38]=t("strong",null,"Email:",-1)),n(" "+a(((re=s.getContactByType(1))==null?void 0:re.contact)??"N/A"),1)]),t("div",null,[e[39]||(e[39]=t("strong",null,"Phone:",-1)),n(" "+a(((de=s.getContactByType(4))==null?void 0:de.contact)??"N/A"),1)]),t("div",null,[e[40]||(e[40]=t("strong",null,"Address:",-1)),n(" "+a(((ue=s.getContactByType(3))==null?void 0:ue.contact)??"N/A"),1)]),t("div",null,[e[41]||(e[41]=t("strong",null,"Nationality:",-1)),n(" "+a(((ce=(fe=(pe=(me=s.salesData)==null?void 0:me.sales_inquiry)==null?void 0:pe.entity)==null?void 0:fe.nationality)==null?void 0:ce.name)??"N/A"),1)]),t("div",null,[e[42]||(e[42]=t("strong",null,"Country:",-1)),n(" "+a(((be=(ve=(ge=(ye=s.salesData)==null?void 0:ye.sales_inquiry)==null?void 0:ge.entity)==null?void 0:ve.country)==null?void 0:be.name)??"N/A"),1)])])]),t("section",jt,[e[50]||(e[50]=t("h2",null,"Client Preferences",-1)),t("div",Lt,[t("div",null,[e[44]||(e[44]=t("strong",null,"No. of Hunters:",-1)),n(" "+a(((he=(De=(Ce=s.salesData)==null?void 0:Ce.sales_inquiry)==null?void 0:De.preference)==null?void 0:he.no_of_hunters)??"N/A"),1)]),t("div",null,[e[45]||(e[45]=t("strong",null,"No. of Observers:",-1)),n(" "+a(((ke=(we=(Ve=s.salesData)==null?void 0:Ve.sales_inquiry)==null?void 0:we.preference)==null?void 0:ke.no_of_observers)??"N/A"),1)]),t("div",null,[e[46]||(e[46]=t("strong",null,"No. of Days:",-1)),n(" "+a(((Ae=(Se=(Te=s.salesData)==null?void 0:Te.sales_inquiry)==null?void 0:Se.preference)==null?void 0:Ae.no_of_days)??"N/A"),1)]),t("div",null,[e[47]||(e[47]=t("strong",null,"No. of Companions:",-1)),n(" "+a(((Fe=(_e=(Ne=s.salesData)==null?void 0:Ne.sales_inquiry)==null?void 0:_e.preference)==null?void 0:Fe.no_of_companions)??"N/A"),1)]),t("div",null,[e[48]||(e[48]=t("strong",null,"Preferred Date:",-1)),n(" "+a(s.formatDate((qe=(Ee=(Oe=s.salesData)==null?void 0:Oe.sales_inquiry)==null?void 0:Ee.preference)==null?void 0:qe.preferred_date)??"N/A"),1)]),t("div",null,[e[49]||(e[49]=t("strong",null,"Special Requests:",-1)),n(" "+a(((Be=(Ie=(Pe=s.salesData)==null?void 0:Pe.sales_inquiry)==null?void 0:Ie.preference)==null?void 0:Be.special_requests)??"None"),1)])])]),t("section",Ht,[e[52]||(e[52]=t("h2",null,"Preferred Species",-1)),t("div",Wt,[t("table",Gt,[e[51]||(e[51]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Scientific Name"),t("th",null,"Quantity")])],-1)),t("tbody",null,[(p(!0),g(O,null,vt(((Re=(Me=s.salesData)==null?void 0:Me.sales_inquiry)==null?void 0:Re.preferred_species)??[],i=>{var w,k;return p(),g("tr",{key:i.id},[t("td",null,a(((w=i.species)==null?void 0:w.name)??"N/A"),1),t("td",null,a(((k=i.species)==null?void 0:k.scientific_name)??"N/A"),1),t("td",null,a(i.quantity??"N/A"),1)])}),128))])])])]),t("section",Kt,[e[55]||(e[55]=t("h2",null,"Area Information",-1)),t("div",Qt,[t("div",null,[e[53]||(e[53]=t("strong",null,"Area Name:",-1)),n(" "+a(((je=(ze=(Ue=($e=s.salesData)==null?void 0:$e.sales_inquiry)==null?void 0:Ue.area[0])==null?void 0:ze.area)==null?void 0:je.name)??"N/A"),1)]),t("div",null,[e[54]||(e[54]=t("strong",null,"Description:",-1)),n(" "+a(((Ge=(We=(He=(Le=s.salesData)==null?void 0:Le.sales_inquiry)==null?void 0:He.area[0])==null?void 0:We.area)==null?void 0:Ge.description)??"N/A"),1)])])]),t("section",Jt,[e[60]||(e[60]=t("h2",null,"Itinerary",-1)),t("div",Xt,[t("div",null,[e[56]||(e[56]=t("strong",null,"Airport Name:",-1)),n(" "+a(((Qe=(Ke=s.salesData)==null?void 0:Ke.itinerary)==null?void 0:Qe.airport_name)??"N/A"),1)]),t("div",null,[e[57]||(e[57]=t("strong",null,"Arrival:",-1)),n(" "+a(s.formatDate((Xe=(Je=s.salesData)==null?void 0:Je.itinerary)==null?void 0:Xe.arrival)??"N/A"),1)]),t("div",null,[e[58]||(e[58]=t("strong",null,"Charter In:",-1)),n(" "+a(s.formatDate((Ze=(Ye=s.salesData)==null?void 0:Ye.itinerary)==null?void 0:Ze.charter_in)??"N/A"),1)]),t("div",null,[e[59]||(e[59]=t("strong",null,"Charter Out:",-1)),n(" "+a(s.formatDate((es=(xe=s.salesData)==null?void 0:xe.itinerary)==null?void 0:es.charter_out)??"N/A"),1)])])]),t("section",Yt,[e[61]||(e[61]=t("h2",null,"Installments",-1)),o(V,{items:((ss=s.salesData)==null?void 0:ss.installments)??[],columns:s.columns},null,8,["items","columns"])]),t("section",Zt,[e[67]||(e[67]=t("h2",null,"Proposed Package",-1)),t("div",xt,[t("div",null,[e[62]||(e[62]=t("strong",null,"Name:",-1)),n(" "+a(((os=(as=(ts=s.salesData)==null?void 0:ts.proposed_package)==null?void 0:as.sales_package)==null?void 0:os.name)??"N/A"),1)]),t("div",null,[e[63]||(e[63]=t("strong",null,"Description:",-1)),n(" "+a(((is=(ls=(ns=s.salesData)==null?void 0:ns.proposed_package)==null?void 0:ls.sales_package)==null?void 0:is.description)??"N/A"),1)]),t("div",null,[e[64]||(e[64]=t("strong",null,"Amount:",-1)),n(" "+a(((us=(ds=(rs=s.salesData)==null?void 0:rs.proposed_package)==null?void 0:ds.price_list_type)==null?void 0:us.amount)??"N/A"),1)]),t("div",null,[e[65]||(e[65]=t("strong",null,"Duration (days):",-1)),n(" "+a(((fs=(ps=(ms=s.salesData)==null?void 0:ms.proposed_package)==null?void 0:ps.price_list_type)==null?void 0:fs.duration)??"N/A"),1)]),t("div",null,[e[66]||(e[66]=t("strong",null,"Hunting Type:",-1)),n(" "+a(((vs=(gs=(ys=(cs=s.salesData)==null?void 0:cs.proposed_package)==null?void 0:ys.price_list_type)==null?void 0:gs.hunting_type)==null?void 0:vs.name)??"N/A"),1)])]),e[68]||(e[68]=t("h3",null,"Species Included",-1)),t("ul",ea,[(p(!0),g(O,null,vt(((Ds=(Cs=(bs=s.salesData)==null?void 0:bs.proposed_package)==null?void 0:Cs.sales_package)==null?void 0:Ds.species)??[],i=>{var w,k;return p(),g("li",{key:i.id},[n(a(((w=i.species)==null?void 0:w.name)??"N/A")+" ("+a(((k=i.species)==null?void 0:k.scientific_name)??"N/A")+"): ",1),t("strong",null,a(i.amount??"N/A"),1)])}),128))])]),t("section",sa,[e[78]||(e[78]=t("h2",null,"Price Breakdown",-1)),t("div",ta,[t("div",null,[e[69]||(e[69]=t("strong",null,"Total Amount:",-1)),n(" "+a(((ks=(ws=(Vs=(hs=s.salesData)==null?void 0:hs.price_break_down)==null?void 0:Vs.total_amount)==null?void 0:ws.currency)==null?void 0:ks.symbol)??"N/A")+" "+a(((As=(Ss=(Ts=s.salesData)==null?void 0:Ts.price_break_down)==null?void 0:Ss.total_amount)==null?void 0:As.amount)??"N/A"),1)]),t("div",null,[e[70]||(e[70]=t("strong",null,"Companion Cost:",-1)),t("div",null," Number of Companions: "+a(((Fs=(_s=(Ns=s.salesData)==null?void 0:Ns.price_break_down)==null?void 0:_s.companion_cost_details)==null?void 0:Fs.number_of_companions)??"N/A"),1),t("div",null," Cost per Companion: "+a(((Is=(Ps=(qs=(Es=(Os=s.salesData)==null?void 0:Os.price_break_down)==null?void 0:Es.companion_cost_details)==null?void 0:qs.cost_per_companion)==null?void 0:Ps.currency)==null?void 0:Is.symbol)??"N/A")+" "+a((($s=(Rs=(Ms=(Bs=s.salesData)==null?void 0:Bs.price_break_down)==null?void 0:Ms.companion_cost_details)==null?void 0:Rs.cost_per_companion)==null?void 0:$s.amount)??"N/A"),1),t("div",null," Total Companion Cost: "+a(((Hs=(Ls=(js=(zs=(Us=s.salesData)==null?void 0:Us.price_break_down)==null?void 0:zs.companion_cost_details)==null?void 0:js.total_companion_cost)==null?void 0:Ls.currency)==null?void 0:Hs.symbol)??"N/A")+" "+a(((Qs=(Ks=(Gs=(Ws=s.salesData)==null?void 0:Ws.price_break_down)==null?void 0:Gs.companion_cost_details)==null?void 0:Ks.total_companion_cost)==null?void 0:Qs.amount)??"N/A"),1)]),t("div",null,[e[71]||(e[71]=t("strong",null,"Observer Cost:",-1)),t("div",null," Number of Observers: "+a(((Ys=(Xs=(Js=s.salesData)==null?void 0:Js.price_break_down)==null?void 0:Xs.observer_cost_details)==null?void 0:Ys.number_of_observers)??"N/A"),1),t("div",null," Cost per Observer: "+a(((tt=(st=(et=(xs=(Zs=s.salesData)==null?void 0:Zs.price_break_down)==null?void 0:xs.observer_cost_details)==null?void 0:et.cost_per_observer)==null?void 0:st.currency)==null?void 0:tt.symbol)??"N/A")+" "+a(((lt=(nt=(ot=(at=s.salesData)==null?void 0:at.price_break_down)==null?void 0:ot.observer_cost_details)==null?void 0:nt.cost_per_observer)==null?void 0:lt.amount)??"N/A"),1),t("div",null," Total Observer Cost: "+a(((mt=(ut=(dt=(rt=(it=s.salesData)==null?void 0:it.price_break_down)==null?void 0:rt.observer_cost_details)==null?void 0:dt.total_observer_cost)==null?void 0:ut.currency)==null?void 0:mt.symbol)??"N/A")+" "+a(((yt=(ct=(ft=(pt=s.salesData)==null?void 0:pt.price_break_down)==null?void 0:ft.observer_cost_details)==null?void 0:ct.total_observer_cost)==null?void 0:yt.amount)??"N/A"),1)])]),o(v,{class:"my-4"}),e[79]||(e[79]=t("h2",{class:"text-center text-lg font-bold"},"MORE INFORMATION",-1)),o(v,{class:"my-4"}),t("div",aa,[t("div",oa,[o(E,{class:"font-bold"},{default:f(()=>e[72]||(e[72]=[n("Companions")])),_:1})]),o(c,{size:"small",preset:"secondary",round:"","border-color":"primary",onClick:e[2]||(e[2]=i=>s._shCMd=!s._shCMd)},{default:f(()=>e[73]||(e[73]=[n(" Add companions ")])),_:1})]),o(V,{items:s.companions},null,8,["items"]),o(v,{class:"my-4"}),e[80]||(e[80]=t("h2",{class:"text-center text-lg font-bold"},"Safari Extras",-1)),o(v,{class:"my-4 va-divider--dashed"}),t("div",na,[e[75]||(e[75]=t("div",{class:"flex flex-col md:flex-row gap-2 justify-start"},[t("p",null,[t("strong",null,"Observers")])],-1)),o(c,{size:"small",round:"",preset:"secondary","border-color":"primary",onClick:e[3]||(e[3]=i=>s._shOMd=!s._shOMd)},{default:f(()=>e[74]||(e[74]=[n(" Add observers ")])),_:1})]),o(V,{items:s.observers},null,8,["items"]),o(v,{class:"my-4"}),t("div",la,[e[77]||(e[77]=t("div",{class:"flex flex-col md:flex-row gap-2 justify-start"},[t("p",null,[t("strong",null,"Safari Extras services")])],-1)),o(c,{preset:"primary",class:"mr-2 mb-2","border-color":"primary",round:"",icon:"add",size:"small",onClick:e[4]||(e[4]=i=>s._showSafariExtrasModal())},{default:f(()=>e[76]||(e[76]=[n(" Add Extras ")])),_:1})]),o(V,{items:s.clientSafariExtras},null,8,["items"])]),o(F,{modelValue:s.isOpened,"onUpdate:modelValue":e[22]||(e[22]=i=>s.isOpened=i),overlay:!0,size:"large","no-outside-dismiss":"","hide-default-actions":!0,"close-button":!0},{default:f(()=>{var i,w,k,gt;return[s.loading?(p(),T(b,{key:0,indeterminate:s.loading,class:"mb-4 mt-6"},null,8,["indeterminate"])):C("",!0),((w=(i=s.salesData)==null?void 0:i.status)==null?void 0:w.status)=="pending"?(p(),g(O,{key:1},[t("div",ia,[o(A,{modelValue:s.selection,"onUpdate:modelValue":e[5]||(e[5]=l=>s.selection=l),disabled:!0,"array-value":"provision_sales",label:"Signed Contract",class:"mb-6"},null,8,["modelValue"]),o(A,{modelValue:s.selection,"onUpdate:modelValue":e[6]||(e[6]=l=>s.selection=l),"array-value":"confirm",label:"Payment Document",class:"mb-6"},null,8,["modelValue"])]),t("div",ra,[t("div",da,[s.selection.includes("provision_sales")?(p(),g("div",ua,[o(q,{modelValue:s.file,"onUpdate:modelValue":e[7]||(e[7]=l=>s.file=l),dropzone:"","upload-button-text":"Upload Signed Contract","drop-zone-text":"",color:"secondary","file-types":"application/pdf","max-size":1e6,"max-files":1},null,8,["modelValue"])])):C("",!0),s.selection.includes("confirm")?(p(),g("div",ma,[o(q,{modelValue:s.payfile,"onUpdate:modelValue":e[8]||(e[8]=l=>s.payfile=l),"upload-button-text":"Upload Payment Document",dropzone:"",color:"secondary","drop-zone-text":"","file-types":"application/pdf","max-size":1e6,"max-files":1},null,8,["modelValue"])])):C("",!0)]),t("div",pa,[s.selection.includes("confirm")?(p(),g("div",fa,[o(I,{modelValue:s.paymentForm.date,"onUpdate:modelValue":e[9]||(e[9]=l=>s.paymentForm.date=l),label:"Transaction Date",placeholder:"Enter Transaction Date"},null,8,["modelValue"])])):C("",!0),s.selection.includes("confirm")?(p(),g("div",ca,[o(N,{modelValue:s.paymentForm.accountType,"onUpdate:modelValue":e[10]||(e[10]=l=>s.paymentForm.accountType=l),options:s.accountsOption,label:"Account",placeholder:"Select Account"},null,8,["modelValue","options"])])):C("",!0),s.selection.includes("confirm")?(p(),g("div",ya,[o(_,{modelValue:s.paymentForm.reference_number,"onUpdate:modelValue":e[11]||(e[11]=l=>s.paymentForm.reference_number=l),label:"Reference Number",type:"text",placeholder:"Enter Reference Number"},null,8,["modelValue"])])):C("",!0),t("div",ga,[o(_,{modelValue:s.paymentForm.amount,"onUpdate:modelValue":e[12]||(e[12]=l=>s.paymentForm.amount=l),label:"Amount",type:"text",placeholder:"Enter Amount"},null,8,["modelValue"])]),t("div",va,[o(N,{modelValue:s.paymentForm.currency_id,"onUpdate:modelValue":e[13]||(e[13]=l=>s.paymentForm.currency_id=l),options:s.currencyOptions,label:"Currency",placeholder:"Select Currency"},null,8,["modelValue","options"])])]),o(B,{modelValue:s.paymentForm.narration,"onUpdate:modelValue":e[14]||(e[14]=l=>s.paymentForm.narration=l),label:"Narration",type:"text",placeholder:"Enter Narration",class:"w-full h-full"},null,8,["modelValue"])])],64)):((gt=(k=s.salesData)==null?void 0:k.status)==null?void 0:gt.status)=="provision_sales"?(p(),g(O,{key:2},[o(q,{modelValue:s.payfile,"onUpdate:modelValue":e[15]||(e[15]=l=>s.payfile=l),"upload-button-text":"Upload Payment Document",dropzone:"",color:"secondary","drop-zone-text":"","file-types":"application/pdf","max-size":1e6,"max-files":1},null,8,["modelValue"]),t("div",ba,[t("div",Ca,[o(N,{modelValue:s.paymentForm.accountType,"onUpdate:modelValue":e[16]||(e[16]=l=>s.paymentForm.accountType=l),options:s.accountsOption,label:"Account",placeholder:"Select Account"},null,8,["modelValue","options"])]),t("div",Da,[o(_,{modelValue:s.paymentForm.amount,"onUpdate:modelValue":e[17]||(e[17]=l=>s.paymentForm.amount=l),label:"Amount",type:"text",placeholder:"Enter Amount"},null,8,["modelValue"])]),t("div",ha,[o(N,{modelValue:s.paymentForm.currency_id,"onUpdate:modelValue":e[18]||(e[18]=l=>s.paymentForm.currency_id=l),options:s.currencyOptions,label:"Currency",placeholder:"Select Currency"},null,8,["modelValue","options"])]),t("div",Va,[o(I,{modelValue:s.paymentForm.date,"onUpdate:modelValue":e[19]||(e[19]=l=>s.paymentForm.date=l),label:"Transaction Date",placeholder:"Enter Transaction Date"},null,8,["modelValue"])]),t("div",wa,[o(_,{modelValue:s.paymentForm.reference_number,"onUpdate:modelValue":e[20]||(e[20]=l=>s.paymentForm.reference_number=l),label:"Reference Number",type:"text",placeholder:"Enter Reference Number"},null,8,["modelValue"])]),o(B,{modelValue:s.paymentForm.narration,"onUpdate:modelValue":e[21]||(e[21]=l=>s.paymentForm.narration=l),label:"Narration",type:"text",placeholder:"Enter Narration",class:"w-full h-full"},null,8,["modelValue"])])],64)):C("",!0),t("div",null,[o(c,{disabled:s.loading,class:"mt-2",onClick:s.submit},{default:f(()=>e[81]||(e[81]=[n("Save")])),_:1},8,["disabled","onClick"])])]}),_:1},8,["modelValue"]),o(F,{modelValue:s._shCMd,"onUpdate:modelValue":e[23]||(e[23]=i=>s._shCMd=i),"close-button":!0,"hide-default-actions":!0},{default:f(()=>{var i;return[o(Vt,{"sales-inquiry-id":(i=s.salesData)==null?void 0:i.sales_inquiry.id},null,8,["sales-inquiry-id"])]}),_:1},8,["modelValue"]),o(F,{modelValue:s._shOMd,"onUpdate:modelValue":e[24]||(e[24]=i=>s._shOMd=i),"close-button":!0,"hide-default-actions":!0},{default:f(()=>{var i;return[o(wt,{"sales-inquiry-id":(i=s.salesData)==null?void 0:i.sales_inquiry.id},null,8,["sales-inquiry-id"])]}),_:1},8,["modelValue"]),o(F,{modelValue:s._shM,"onUpdate:modelValue":e[25]||(e[25]=i=>s._shM=i),width:"60%",height:"80%","hide-default-actions":!0},{default:f(()=>[o(kt,{"table-selectable":!0,item:s.salesData.sales_inquiry},null,8,["item"])]),_:1},8,["modelValue"])])}const Ta=Dt(qt,[["render",ka],["__scopeId","data-v-5323b135"]]),Sa={components:{SalesConfirmationClientDetails:Ta},data(){return{items:[],searchText:null,columns:[{key:"name",label:"Client",width:120},{key:"area",label:"Area",width:120},{key:"airport_name",label:"Airport",width:50},{key:"arrival",label:"Arrival",width:120},{key:"charter_in",label:"Charter In",width:120},{key:"charter_out",label:"Charter Out",width:80},{key:"status",label:"Status",width:120},{key:"actions",width:80}],viewDetails:!1,item:null,buttondisables:!0,downloadPdf:ht}},computed:{...Ct(D,["results","loadingresults"])},mounted(){this.getSalesConfirmations()},methods:{...S(D,["getallSalesConfirmation"]),async getSalesConfirmations(){await this.getallSalesConfirmation()},onRowClick(s){this.item=s.selfitem,this.viewDetails=!0},gotBack(){this.viewDetails=!1,this.getSalesConfirmations()},getStatusColorForModal(s){switch(s){case"pending":return"warning";case"provision_sales":return"warning";case"confirmed":return"success";case"declined":return"danger";case"cancelled":return"danger";case"completed":return"primary";default:return"default"}},getbuttonTextBasedOnStatus(s){switch(s){case"pending":return"confirm";case"provision_sales":return"confirm";case"confirmed":return"view";case"declined":return this.buttondisables=!0,"View";case"cancelled":return"view";case"completed":return"View";default:return"default"}}}},Aa={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between px-4 py-2"},Na={class:"flex flex-col md:flex-row gap-2 justify-start"},_a={class:"flex justify-center items-center"};function Fa(s,e,u,y,m,d){const c=r("VaButton"),h=r("SalesConfirmationClientDetails"),V=r("VaChip"),v=r("VaDataTable"),E=r("VaCard");return p(),T(E,null,{default:f(()=>[t("div",Aa,[t("div",Na,[m.viewDetails?(p(),T(c,{key:0,class:"px-2 py-2",icon:"arrow_back",size:"small",onClick:e[0]||(e[0]=b=>d.gotBack())},{default:f(()=>e[1]||(e[1]=[n(" Go Back ")])),_:1})):C("",!0)])]),m.viewDetails?(p(),T(h,{key:0,"sales-data":m.item},null,8,["sales-data"])):(p(),T(v,{key:1,items:s.results,columns:m.columns,loading:s.loadingresults,onOnView:d.onRowClick},{"cell(status)":f(({value:b})=>[o(V,{color:d.getStatusColorForModal(b),size:"small"},{default:f(()=>[n(a(b),1)]),_:2},1032,["color"])]),"cell(actions)":f(({rowData:b})=>[t("div",_a,[o(c,{plain:"",color:"primary",class:"mr-2",onClick:A=>d.onRowClick(b)},{default:f(()=>[n(a(d.getbuttonTextBasedOnStatus(b.status)),1)]),_:2},1032,["onClick"]),o(c,{plain:"",icon:"download",onClick:A=>m.downloadPdf(b.selfitem.pdf)},null,8,["onClick"])])]),_:1},8,["items","columns","loading","onOnView"]))]),_:1})}const Wa=Dt(Sa,[["render",Fa],["__scopeId","data-v-aa9bae9c"]]);export{Wa as default};
//# sourceMappingURL=SalesConfirmation-Ddk3gIku.js.map
