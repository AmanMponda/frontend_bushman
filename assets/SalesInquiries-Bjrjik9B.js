import{d as me,m as G,s as Y,_ as ue,g as w,e as s,b as a,i as D,w as n,t as d,h,F as j,o as f,l as Be,a as V,v as q,q as Q,x as Me,y as Re,z as He,A as Qe,k as X,B as de,c as Ye,C as We,D as ne,E as ie,f as Ge}from"./index-BWHJDooV.js";import{u as ze}from"./useForm-D3NxtFXh.js";import{u as fe}from"./useToast-s8yo9qJb.js";import{h as Je}from"./errorHandler-DijQ3xmc.js";import{v as Ke}from"./utils-BWc0LXoO.js";import{u as le}from"./sales-store-B33CLPg0.js";import{u as re}from"./settings-store-W7vxArlA.js";import{u as ce}from"./quota-store-CaSVgzC7.js";import{d as Xe}from"./pdfDownloader-Cg_wDO9M.js";import{u as Ze}from"./price-list-store-CcBrvGRs.js";import"./format-Cn4G_mmc.js";const et=me({name:"SalesInquiriesList",emits:["download-btn-pressed","view-btn-pressed","edit-btn-pressed","delete-btn-pressed"],setup(){const{init:e}=fe();return{notify:e}},data(){return{loading:Y(!1),deleting:!1,showDeleteModal:!1,deleteItemId:null,deleteItemName:"",columns:[{key:"name",label:"Client Name",sortable:!0},{key:"area",label:"Area",sortable:!0},{key:"hunting_type",label:"Hunting Type",sortable:!0},{key:"start_date",label:"Start Date",sortable:!0},{key:"end_date",label:"End Date",sortable:!0},{key:"season",label:"Season",sortable:!0},{key:"species_count",label:"Species",width:80},{key:"status",label:"Status",width:100},{key:"actions",label:"Actions",width:150}],salesInquiryItems:[],perPage:10,currentPage:1,filter:"",filtered:[],seasonValue:null,seasonOptions:[],dateValue:null,mothValue:null}},computed:{pages(){return this.perPage&&this.perPage!==0?Math.ceil(this.filtered.length/this.perPage):this.filtered.length}},mounted(){this.getSalesInquiryList(),this.getSeasonOptions()},methods:{...G(le,["getSalesInquiries","deleteSalesInquiry"]),...G(re,["getSeasons"]),formatDate(e){if(!e||e==="N/A")return"N/A";const t=new Date(e);return isNaN(t.getTime())?"N/A":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},async getSalesInquiryList(){var e;this.loading=!0;try{const t=await this.getSalesInquiries(((e=this.seasonValue)==null?void 0:e.value)??"",this.dateValue??"");if(t.status===200){this.loading=!1;const c=Array.isArray(t.data)?t.data:t.data.data||[];this.salesInquiryItems=c.map(o=>{var b,$,A,P,v,H,T,z,r,m,S,I,x,B,N,L,M,E,O,U,F,Z,ee,te,se,i,C,R,J,K,ae,oe;const p=((b=o==null?void 0:o.inquiry_species)==null?void 0:b.length)||(($=o==null?void 0:o.species)==null?void 0:$.length)||0,k=o==null?void 0:o.reference_price_list,u=(v=(P=(A=o==null?void 0:o.price_lists)==null?void 0:A[0])==null?void 0:P.price_list)==null?void 0:v.price_list_type,_=(k==null?void 0:k.amount)||(u==null?void 0:u.amount)||"0.00",g=((H=u==null?void 0:u.currency)==null?void 0:H.symbol)||"$",l=(k==null?void 0:k.area_name)||((z=(T=o==null?void 0:o.inquiry_areas)==null?void 0:T[0])==null?void 0:z.area_name)||((S=(m=(r=o==null?void 0:o.areas)==null?void 0:r[0])==null?void 0:m.area)==null?void 0:S.name)||"N/A",y=(k==null?void 0:k.hunting_type_name)||((I=u==null?void 0:u.hunting_type)==null?void 0:I.name)||"N/A";return{id:o.id,selfitem:o,code:(o==null?void 0:o.code)||"",name:((x=o==null?void 0:o.entity)==null?void 0:x.full_name)||"N/A",area:l,hunting_type:y,price:`${g}${parseFloat(_).toFixed(2)}`,start_date:((B=o==null?void 0:o.formatted_preferences)==null?void 0:B.start_date)||"N/A",end_date:((N=o==null?void 0:o.formatted_preferences)==null?void 0:N.end_date)||"N/A",season:((L=o==null?void 0:o.season)==null?void 0:L.name)||"N/A",species_count:p,status:(o==null?void 0:o.status)||"PENDING",country:((E=(M=o==null?void 0:o.entity)==null?void 0:M.country)==null?void 0:E.name)||((O=o==null?void 0:o.entity)==null?void 0:O.country_name)||"N/A",nationality:((F=(U=o==null?void 0:o.entity)==null?void 0:U.nationality)==null?void 0:F.name)||((Z=o==null?void 0:o.entity)==null?void 0:Z.nationality_name)||"N/A",contacts:((ee=o==null?void 0:o.entity)==null?void 0:ee.contacts)||[],preference:{no_of_hunters:((te=o==null?void 0:o.formatted_preferences)==null?void 0:te.no_of_hunters)||0,no_of_observers:((se=o==null?void 0:o.formatted_preferences)==null?void 0:se.no_of_observers)||0,no_of_days:((i=o==null?void 0:o.formatted_preferences)==null?void 0:i.no_of_days)||0,no_of_companions:((C=o==null?void 0:o.formatted_preferences)==null?void 0:C.no_of_companions)||0,special_requests:((R=o==null?void 0:o.formatted_preferences)==null?void 0:R.special_requests)||"",start_date:((J=o==null?void 0:o.formatted_preferences)==null?void 0:J.start_date)||"",end_date:((K=o==null?void 0:o.formatted_preferences)==null?void 0:K.end_date)||"",budget_estimation:((ae=o==null?void 0:o.formatted_preferences)==null?void 0:ae.budget_estimation)||"",preferred_date:((oe=o==null?void 0:o.formatted_preferences)==null?void 0:oe.preferred_date)||""},reference_price_list:k,inquiry_species:(o==null?void 0:o.inquiry_species)||[],inquiry_areas:(o==null?void 0:o.inquiry_areas)||[]}}),this.filtered=this.salesInquiryItems}}catch(t){this.loading=!1,console.log(t)}},async getSeasonOptions(){const e=await this.getSeasons();e.status===200&&(this.seasonOptions=e.data.map(t=>({value:t.id,text:t.name})))},btnDownloadClicked(e){console.log(e),this.$emit("download-btn-pressed",e)},downloadPdf(e){const c=`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries-pdf/${e.id}`;window.open(c,"_blank")},async downloadInquiryPdf(e){const t=e.id;try{const o=await(await fetch(`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries/${t}/pdf`,{headers:{"Content-Type":"application/json"}})).json();if(o.success&&o.pdf){const p=atob(o.pdf),k=new Array(p.length);for(let y=0;y<p.length;y++)k[y]=p.charCodeAt(y);const u=new Uint8Array(k),_=new Blob([u],{type:"application/pdf"}),g=window.URL.createObjectURL(_),l=document.createElement("a");l.href=g,l.download=`inquiry-${e.code||t}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(g),this.notify({message:"PDF downloaded successfully",color:"success"})}else this.notify({message:"Failed to generate PDF",color:"danger"})}catch(c){console.error("Error downloading PDF:",c),this.notify({message:"Error downloading PDF",color:"danger"})}},btnViewClicked(e){console.log(e),this.$emit("view-btn-pressed",e)},btnEditClicked(e){console.log(e),this.$emit("edit-btn-pressed",e)},showDeleteConfirm(e){this.deleteItemId=e.id,this.deleteItemName=e.name,this.showDeleteModal=!0},cancelDelete(){this.showDeleteModal=!1,this.deleteItemId=null,this.deleteItemName=""},async confirmDelete(){var e,t;if(this.deleteItemId){this.deleting=!0;try{const c=await this.deleteSalesInquiry(this.deleteItemId);(c.status===200||c.status===204)&&(this.notify({message:"Inquiry deleted successfully",color:"success"}),this.getSalesInquiryList())}catch(c){console.error("Error deleting inquiry:",c),this.notify({message:((t=(e=c.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to delete inquiry",color:"danger"})}finally{this.deleting=!1,this.showDeleteModal=!1,this.deleteItemId=null,this.deleteItemName=""}}}}}),tt={class:"grid sm:grid-cols-3 gap-6 mb-6"},st={class:"font-semibold text-gray-900"},at={class:"flex items-center gap-1"},ot={class:"text-gray-700"},nt={class:"text-gray-700"},it={class:"text-gray-700"},rt={class:"flex items-center gap-1"},lt={colspan:"9"},dt={class:"flex justify-center mt-4"},ct={class:"flex gap-2 justify-end"};function mt(e,t,c,o,p,k){const u=D("VaSelect"),_=D("VaDateInput"),g=D("VaInput"),l=D("VaIcon"),y=D("VaBadge"),b=D("VaButton"),$=D("VaPagination"),A=D("VaDataTable"),P=D("VaModal");return f(),w(j,null,[s("div",tt,[a(u,{modelValue:e.seasonValue,"onUpdate:modelValue":[t[0]||(t[0]=v=>e.seasonValue=v),e.getSalesInquiryList],options:e.seasonOptions,placeholder:"Filter By Season"},null,8,["modelValue","options","onUpdate:modelValue"]),a(_,{modelValue:e.dateValue,"onUpdate:modelValue":[t[1]||(t[1]=v=>e.dateValue=v),e.getSalesInquiryList],placeholder:"Filter By Date",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),a(g,{modelValue:e.filter,"onUpdate:modelValue":[t[2]||(t[2]=v=>e.filter=v),e.getSalesInquiryList],placeholder:"Search",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),a(A,{striped:"",loading:e.loading,items:e.salesInquiryItems,columns:e.columns,"per-page":e.perPage,"current-page":e.currentPage,filter:e.filter,onFiltered:t[4]||(t[4]=v=>e.filtered=v.items)},{"cell(name)":n(({rowData:v})=>[s("span",st,d(v.name),1)]),"cell(area)":n(({rowData:v})=>[s("div",at,[a(l,{name:"location_on",size:"small",color:"primary"}),s("span",null,d(v.area),1)])]),"cell(start_date)":n(({rowData:v})=>[s("span",ot,d(e.formatDate(v.start_date)),1)]),"cell(end_date)":n(({rowData:v})=>[s("span",nt,d(e.formatDate(v.end_date)),1)]),"cell(season)":n(({rowData:v})=>[s("span",it,d(v.season),1)]),"cell(species_count)":n(({rowData:v})=>[a(y,{text:String(v.species_count),color:"success"},null,8,["text"])]),"cell(status)":n(({rowData:v})=>[a(y,{text:v.status,color:v.status==="ACTIVE"?"success":v.status==="PENDING"?"warning":"info"},null,8,["text","color"])]),"cell(actions)":n(({rowData:v})=>[s("div",rt,[a(b,{preset:"plain",icon:"visibility",size:"small",onClick:H=>e.btnViewClicked(v)},null,8,["onClick"]),a(b,{preset:"plain",icon:"edit",size:"small",color:"warning",onClick:H=>e.btnEditClicked(v)},null,8,["onClick"]),a(b,{preset:"plain",icon:"delete",size:"small",color:"danger",onClick:H=>e.showDeleteConfirm(v)},null,8,["onClick"])])]),bodyAppend:n(()=>[s("tr",null,[s("td",lt,[s("div",dt,[a($,{modelValue:e.currentPage,"onUpdate:modelValue":t[3]||(t[3]=v=>e.currentPage=v),pages:e.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["loading","items","columns","per-page","current-page","filter"]),a(P,{modelValue:e.showDeleteModal,"onUpdate:modelValue":t[5]||(t[5]=v=>e.showDeleteModal=v),title:"Delete Inquiry",size:"small",onOk:e.confirmDelete,onCancel:e.cancelDelete},{footer:n(()=>[s("div",ct,[a(b,{preset:"secondary",onClick:e.cancelDelete},{default:n(()=>t[8]||(t[8]=[h("Cancel")])),_:1},8,["onClick"]),a(b,{color:"danger",loading:e.deleting,onClick:e.confirmDelete},{default:n(()=>t[9]||(t[9]=[h("Delete")])),_:1},8,["loading","onClick"])])]),default:n(()=>[s("p",null,[t[6]||(t[6]=h(' Are you sure you want to delete the inquiry for "')),s("strong",null,d(e.deleteItemName),1),t[7]||(t[7]=h('"? '))]),t[10]||(t[10]=s("p",{class:"text-sm text-gray-500 mt-2"},"This action cannot be undone.",-1))]),_:1},8,["modelValue","onOk","onCancel"])],64)}const ut=ue(et,[["render",mt]]),ft=me({name:"SalesInquiryDetails",props:{item:{type:Object,required:!0}},setup(){const{init:e}=fe();return{notify:e}},computed:{...Be(le,["observers","companions","clientSafariExtras","accommodations","chartersPrices"])},mounted(){this.getObservers(this.item.id),this.getCompanions(this.item.id),this.getClienSafariExtras(this.item.id),this.getAccommodation(this.item.id),this.getChartersPrice(this.item.id)},methods:{...G(le,["getObservers","getCompanions","getClienSafariExtras","getAccommodation","getChartersPrice"]),async downloadInquiryPdf(){var t,c;const e=(t=this.item)==null?void 0:t.id;if(e)try{const p=await(await fetch(`https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries/${e}/pdf`,{headers:{"Content-Type":"application/json"}})).json();if(p.success&&p.pdf){const k=atob(p.pdf),u=new Array(k.length);for(let b=0;b<k.length;b++)u[b]=k.charCodeAt(b);const _=new Uint8Array(u),g=new Blob([_],{type:"application/pdf"}),l=window.URL.createObjectURL(g),y=document.createElement("a");y.href=l,y.download=`inquiry-${((c=this.item)==null?void 0:c.code)||e}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(l),this.notify({message:"PDF downloaded successfully",color:"success"})}else this.notify({message:"Failed to generate PDF",color:"danger"})}catch(o){console.error("Error downloading PDF:",o),this.notify({message:"Error downloading PDF",color:"danger"})}},formatDate(e){return e?new Date(e).toLocaleDateString():"Not provided"},formatCurrency(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat(e)||0)},getContactIcon(e){return{email:"email",phone_number:"phone",phone:"phone",address:"home"}[e]||"info"},safeArray(e){return e||[]},safeString(e,t="Not provided"){return e||t}}}),pt={class:"sales-inquiry-details"},gt={class:"text-center"},yt={class:"va-h3 mb-2"},ht={class:"flex justify-center items-center gap-4 mb-3"},_t={class:"text-secondary mb-3"},bt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},vt={class:"text-3xl font-bold"},St={class:"text-3xl font-bold"},kt={class:"text-3xl font-bold"},It={class:"text-3xl font-bold"},wt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Dt={class:"text-lg font-semibold"},Ct={class:"text-lg font-semibold"},Vt={class:"text-lg font-semibold"},$t={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},qt={class:"font-medium"},At={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Pt={class:"text-lg font-semibold"},xt={class:"text-lg font-semibold"},Nt={class:"text-lg font-semibold"},Lt={class:"text-lg font-semibold"},Et={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},Ot={class:"text-3xl font-bold text-primary"},Ft={class:"text-2xl font-bold"},Ut={class:"text-lg font-bold"},jt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},zt={class:"text-lg font-semibold"},Bt={class:"text-lg font-semibold"},Tt={key:0,class:"mb-4"},Mt={class:"flex flex-wrap gap-2"},Rt={key:1},Ht={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},Qt={class:"flex justify-between items-center"},Yt={class:"font-semibold"},Wt={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},Gt={class:"flex justify-between items-start"},Jt={class:"flex-1"},Kt={class:"font-semibold text-base"},Xt={class:"text-sm text-secondary italic"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},es={class:"font-semibold text-lg mb-2"},ts={class:"grid grid-cols-2 gap-2 text-sm"},ss={class:"ml-1 font-medium"},as={class:"ml-1 font-medium"},os={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ns={class:"font-semibold text-lg mb-2"},is={class:"grid grid-cols-2 gap-2 text-sm"},rs={class:"ml-1 font-medium"},ls={class:"ml-1 font-medium"},ds={class:"va-table-responsive"},cs={class:"va-table va-table--hoverable w-full"},ms={class:"font-semibold"},us={class:"text-secondary"},fs={class:"text-right"},ps={class:"va-table-responsive"},gs={class:"va-table va-table--hoverable w-full"},ys={class:"font-semibold"},hs={class:"text-secondary"},_s={class:"text-center"},bs={class:"text-center"},vs={class:"va-table-responsive"},Ss={class:"va-table va-table--hoverable w-full"},ks={class:"font-semibold"},Is={class:"text-secondary"},ws={class:"text-right font-bold"};function Ds(e,t,c,o,p,k){var P,v,H,T,z;const u=D("VaIcon"),_=D("VaChip"),g=D("VaButton"),l=D("VaCardContent"),y=D("VaCard"),b=D("VaCardTitle"),$=D("VaDivider"),A=D("VaBadge");return f(),w("div",pt,[a(y,{class:"mb-6",stripe:"","stripe-color":"primary"},{default:n(()=>[a(l,null,{default:n(()=>{var r,m,S;return[s("div",gt,[s("h1",yt,d((r=e.item)==null?void 0:r.code),1),s("div",ht,[a(_,{color:((m=e.item)==null?void 0:m.inquiry_type)==="standard"?"success":"info",size:"large"},{default:n(()=>{var I,x;return[a(u,{name:((I=e.item)==null?void 0:I.inquiry_type)==="standard"?"inventory_2":"tune",class:"mr-1"},null,8,["name"]),h(" "+d(((x=e.item)==null?void 0:x.inquiry_type)==="standard"?"Standard Package":"Custom Package"),1)]}),_:1},8,["color"]),a(_,{color:"primary",size:"large"},{default:n(()=>{var I,x;return[a(u,{name:"calendar_month",class:"mr-1"}),h(" "+d((x=(I=e.item)==null?void 0:I.season)==null?void 0:x.name),1)]}),_:1})]),s("p",_t,[a(u,{name:"event",size:"small"}),h(" Created: "+d(e.formatDate((S=e.item)==null?void 0:S.create_date)),1)]),a(g,{color:"secondary",round:"",icon:"download",onClick:e.downloadInquiryPdf},{default:n(()=>t[0]||(t[0]=[h(" Download PDF ")])),_:1},8,["onClick"])])]}),_:1})]),_:1}),s("div",bt,[a(y,{stripe:"","stripe-color":"primary"},{default:n(()=>[a(l,{class:"text-center"},{default:n(()=>{var r,m;return[a(u,{name:"schedule",size:"large",color:"primary",class:"mb-2"}),s("div",vt,d(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_days)||"N/A"),1),t[1]||(t[1]=s("div",{class:"text-sm text-secondary mt-1"},"Days Duration",-1))]}),_:1})]),_:1}),a(y,{stripe:"","stripe-color":"success"},{default:n(()=>[a(l,{class:"text-center"},{default:n(()=>{var r,m;return[a(u,{name:"person",size:"large",color:"success",class:"mb-2"}),s("div",St,d(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_hunters)||0),1),t[2]||(t[2]=s("div",{class:"text-sm text-secondary mt-1"},"Hunters",-1))]}),_:1})]),_:1}),a(y,{stripe:"","stripe-color":"warning"},{default:n(()=>[a(l,{class:"text-center"},{default:n(()=>{var r,m;return[a(u,{name:"groups",size:"large",color:"warning",class:"mb-2"}),s("div",kt,d(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_companions)||0),1),t[3]||(t[3]=s("div",{class:"text-sm text-secondary mt-1"},"Companions",-1))]}),_:1})]),_:1}),a(y,{stripe:"","stripe-color":"info"},{default:n(()=>[a(l,{class:"text-center"},{default:n(()=>{var r,m;return[a(u,{name:"visibility",size:"large",color:"info",class:"mb-2"}),s("div",It,d(((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.no_of_observers)||0),1),t[4]||(t[4]=s("div",{class:"text-sm text-secondary mt-1"},"Observers",-1))]}),_:1})]),_:1})]),a(y,{class:"mb-6",stripe:"","stripe-color":"success"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"person"}),t[5]||(t[5]=h(" Client Information "))]),_:1}),a(l,null,{default:n(()=>{var r,m,S,I,x,B,N,L,M,E;return[s("div",wt,[s("div",null,[t[6]||(t[6]=s("div",{class:"text-sm text-secondary mb-1"},"Full Name",-1)),s("div",Dt,d(e.safeString((m=(r=e.item)==null?void 0:r.entity)==null?void 0:m.full_name)),1)]),s("div",null,[t[7]||(t[7]=s("div",{class:"text-sm text-secondary mb-1"},"Nationality",-1)),s("div",Ct,d(e.safeString((x=(I=(S=e.item)==null?void 0:S.entity)==null?void 0:I.nationality)==null?void 0:x.name)),1)]),s("div",null,[t[8]||(t[8]=s("div",{class:"text-sm text-secondary mb-1"},"Country",-1)),s("div",Vt,d(e.safeString((L=(N=(B=e.item)==null?void 0:B.entity)==null?void 0:N.country)==null?void 0:L.name)),1)])]),a($,{class:"my-4"}),t[9]||(t[9]=s("div",{class:"text-sm text-secondary mb-2"},"Contacts",-1)),s("div",$t,[(f(!0),w(j,null,Q(e.safeArray((E=(M=e.item)==null?void 0:M.entity)==null?void 0:E.contacts),(O,U)=>{var F;return f(),w("div",{key:U,class:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg"},[a(u,{name:e.getContactIcon((F=O.contact_type)==null?void 0:F.name),color:"primary"},null,8,["name"]),s("span",qt,d(O.contact),1)])}),128))])]}),_:1})]),_:1}),a(y,{class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"event"}),t[10]||(t[10]=h(" Hunting Preferences "))]),_:1}),a(l,null,{default:n(()=>{var r,m,S,I,x,B,N,L;return[s("div",At,[s("div",null,[t[11]||(t[11]=s("div",{class:"text-sm text-secondary mb-1"},"Preferred Date",-1)),s("div",Pt,d(e.formatDate((m=(r=e.item)==null?void 0:r.formatted_preferences)==null?void 0:m.preferred_date)),1)]),s("div",null,[t[12]||(t[12]=s("div",{class:"text-sm text-secondary mb-1"},"Start Date",-1)),s("div",xt,d(e.formatDate((I=(S=e.item)==null?void 0:S.formatted_preferences)==null?void 0:I.start_date)),1)]),s("div",null,[t[13]||(t[13]=s("div",{class:"text-sm text-secondary mb-1"},"End Date",-1)),s("div",Nt,d(e.formatDate((B=(x=e.item)==null?void 0:x.formatted_preferences)==null?void 0:B.end_date)),1)]),s("div",null,[t[14]||(t[14]=s("div",{class:"text-sm text-secondary mb-1"},"Duration",-1)),s("div",Lt,d(((L=(N=e.item)==null?void 0:N.formatted_preferences)==null?void 0:L.no_of_days)||"N/A")+" days",1)])])]}),_:1})]),_:1}),((P=e.item)==null?void 0:P.inquiry_type)==="standard"&&((v=e.item)!=null&&v.package_details)?(f(),V(y,{key:0,class:"mb-6",stripe:"","stripe-color":"success"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"inventory_2"}),t[15]||(t[15]=h(" Standard Package Details "))]),_:1}),a(l,null,{default:n(()=>{var r,m,S,I,x,B;return[s("div",Et,[a(y,{stripe:"","stripe-color":"primary",class:"col-span-1 md:col-span-2"},{default:n(()=>[a(l,{class:"text-center"},{default:n(()=>{var N,L,M,E;return[a(u,{name:"attach_money",size:"large",color:"primary",class:"mb-2"}),s("div",Ot,d((L=(N=e.item)==null?void 0:N.package_details)==null?void 0:L.currency_name)+" "+d(e.formatCurrency((E=(M=e.item)==null?void 0:M.package_details)==null?void 0:E.amount)),1),t[16]||(t[16]=s("div",{class:"text-sm text-secondary mt-1"},"Package Amount",-1))]}),_:1})]),_:1}),a(y,{stripe:"","stripe-color":"info"},{default:n(()=>[a(l,{class:"text-center"},{default:n(()=>{var N,L;return[a(u,{name:"schedule",size:"large",color:"info",class:"mb-2"}),s("div",Ft,d((L=(N=e.item)==null?void 0:N.package_details)==null?void 0:L.duration),1),t[17]||(t[17]=s("div",{class:"text-sm text-secondary mt-1"},"Days",-1))]}),_:1})]),_:1}),a(y,{stripe:"","stripe-color":"warning"},{default:n(()=>[a(l,{class:"text-center"},{default:n(()=>{var N,L;return[a(u,{name:"category",size:"large",color:"warning",class:"mb-2"}),s("div",Ut,d((L=(N=e.item)==null?void 0:N.package_details)==null?void 0:L.hunting_type_name),1),t[18]||(t[18]=s("div",{class:"text-sm text-secondary mt-1"},"Hunting Type",-1))]}),_:1})]),_:1})]),s("div",jt,[s("div",null,[t[19]||(t[19]=s("div",{class:"text-sm text-secondary mb-1"},"Hunting Area",-1)),s("div",zt,d((m=(r=e.item)==null?void 0:r.package_details)==null?void 0:m.area_name),1)]),s("div",null,[t[20]||(t[20]=s("div",{class:"text-sm text-secondary mb-1"},"Package Period",-1)),s("div",Bt,d(e.formatDate((I=(S=e.item)==null?void 0:S.package_details)==null?void 0:I.start_date))+" - "+d(e.formatDate((B=(x=e.item)==null?void 0:x.package_details)==null?void 0:B.end_date)),1)])])]}),_:1})]),_:1})):q("",!0),((H=e.item)==null?void 0:H.inquiry_type)==="custom"&&((T=e.item)!=null&&T.custom_details)?(f(),V(y,{key:1,class:"mb-6",stripe:"","stripe-color":"info"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"tune"}),t[21]||(t[21]=h(" Custom Package Details "))]),_:1}),a(l,null,{default:n(()=>{var r,m,S,I,x,B,N,L;return[e.safeArray((m=(r=e.item)==null?void 0:r.custom_details)==null?void 0:m.areas).length>0?(f(),w("div",Tt,[t[22]||(t[22]=s("div",{class:"text-sm text-secondary mb-2"},"Hunting Areas",-1)),s("div",Mt,[(f(!0),w(j,null,Q((I=(S=e.item)==null?void 0:S.custom_details)==null?void 0:I.areas,(M,E)=>(f(),V(_,{key:E,color:"info",size:"large"},{default:n(()=>[a(u,{name:"location_on",class:"mr-1"}),h(" "+d(M.area_name),1)]),_:2},1024))),128))])])):q("",!0),e.safeArray((B=(x=e.item)==null?void 0:x.custom_details)==null?void 0:B.species).length>0?(f(),w("div",Rt,[t[23]||(t[23]=s("div",{class:"text-sm text-secondary mb-2"},"Requested Species",-1)),s("div",Ht,[(f(!0),w(j,null,Q((L=(N=e.item)==null?void 0:N.custom_details)==null?void 0:L.species,(M,E)=>(f(),V(y,{key:E,color:"#f0f9ff"},{default:n(()=>[a(l,null,{default:n(()=>[s("div",Qt,[s("div",Yt,d(M.species_name),1),a(A,{color:"success"},{default:n(()=>[h("Qty: "+d(M.quantity),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))])])):q("",!0)]}),_:1})]),_:1})):q("",!0),e.safeArray((z=e.item)==null?void 0:z.species).length>0?(f(),V(y,{key:2,class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>{var r,m,S;return[a(u,{name:"pets"}),h(" "+d(((r=e.item)==null?void 0:r.inquiry_type)==="custom"?"Additional Species":"Package Species")+" ("+d(((S=(m=e.item)==null?void 0:m.species)==null?void 0:S.length)||0)+") ",1)]}),_:1}),a(l,null,{default:n(()=>{var r;return[s("div",Wt,[(f(!0),w(j,null,Q((r=e.item)==null?void 0:r.species,(m,S)=>(f(),V(y,{key:S,color:m.quantity>0?"#f0f9ff":"#fef2f2"},{default:n(()=>[a(l,null,{default:n(()=>{var I,x;return[s("div",Gt,[s("div",Jt,[s("div",Kt,d((I=m.species)==null?void 0:I.name),1),s("div",Xt,d((x=m.species)==null?void 0:x.scientific_name),1)]),a(A,{color:m.quantity>0?"success":"danger",class:"ml-2"},{default:n(()=>[h(" Qty: "+d(m.quantity),1)]),_:2},1032,["color"])])]}),_:2},1024)]),_:2},1032,["color"]))),128))])]}),_:1})]),_:1})):q("",!0),e.observers&&e.observers.length>0?(f(),V(y,{key:3,class:"mb-6",stripe:"","stripe-color":"info"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"visibility"}),h(" Observers ("+d(e.observers.length)+") ",1)]),_:1}),a(l,null,{default:n(()=>[s("div",Zt,[(f(!0),w(j,null,Q(e.observers,(r,m)=>(f(),V(y,{key:m,color:"#f0f9ff"},{default:n(()=>[a(l,null,{default:n(()=>{var S,I;return[s("div",es,d(r.full_name),1),s("div",ts,[s("div",null,[t[24]||(t[24]=s("span",{class:"text-secondary"},"Nationality:",-1)),s("span",ss,d(((S=r.nationality)==null?void 0:S.name)||"N/A"),1)]),s("div",null,[t[25]||(t[25]=s("span",{class:"text-secondary"},"Country:",-1)),s("span",as,d(((I=r.country)==null?void 0:I.name)||"N/A"),1)])])]}),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})):q("",!0),e.companions&&e.companions.length>0?(f(),V(y,{key:4,class:"mb-6",stripe:"","stripe-color":"success"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"groups"}),h(" Companions ("+d(e.companions.length)+") ",1)]),_:1}),a(l,null,{default:n(()=>[s("div",os,[(f(!0),w(j,null,Q(e.companions,(r,m)=>(f(),V(y,{key:m,color:"#f0fdf4"},{default:n(()=>[a(l,null,{default:n(()=>{var S,I;return[s("div",ns,d(r.full_name),1),s("div",is,[s("div",null,[t[26]||(t[26]=s("span",{class:"text-secondary"},"Nationality:",-1)),s("span",rs,d(((S=r.nationality)==null?void 0:S.name)||"N/A"),1)]),s("div",null,[t[27]||(t[27]=s("span",{class:"text-secondary"},"Country:",-1)),s("span",ls,d(((I=r.country)==null?void 0:I.name)||"N/A"),1)])])]}),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})):q("",!0),e.clientSafariExtras&&e.clientSafariExtras.length>0?(f(),V(y,{key:5,class:"mb-6",stripe:"","stripe-color":"primary"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"add_circle"}),h(" Safari Extras ("+d(e.clientSafariExtras.length)+") ",1)]),_:1}),a(l,null,{default:n(()=>[s("div",ds,[s("table",cs,[t[28]||(t[28]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Service"),s("th",{class:"text-left"},"Description"),s("th",{class:"text-right"},"Quantity")])],-1)),s("tbody",null,[(f(!0),w(j,null,Q(e.clientSafariExtras,(r,m)=>{var S,I;return f(),w("tr",{key:m},[s("td",ms,d(((S=r.safari_extra)==null?void 0:S.name)||r.name),1),s("td",us,d(((I=r.safari_extra)==null?void 0:I.description)||r.description||"N/A"),1),s("td",fs,[a(A,{color:"primary"},{default:n(()=>[h(d(r.quantity||1),1)]),_:2},1024)])])}),128))])])])]),_:1})]),_:1})):q("",!0),e.accommodations&&e.accommodations.length>0?(f(),V(y,{key:6,class:"mb-6",stripe:"","stripe-color":"warning"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"hotel"}),h(" Accommodations ("+d(e.accommodations.length)+") ",1)]),_:1}),a(l,null,{default:n(()=>[s("div",ps,[s("table",gs,[t[29]||(t[29]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Accommodation"),s("th",{class:"text-left"},"Type"),s("th",{class:"text-center"},"Check-in"),s("th",{class:"text-center"},"Check-out")])],-1)),s("tbody",null,[(f(!0),w(j,null,Q(e.accommodations,(r,m)=>{var S,I;return f(),w("tr",{key:m},[s("td",ys,d(r.name||((S=r.accommodation_type)==null?void 0:S.name)||"N/A"),1),s("td",hs,d(((I=r.accommodation_type)==null?void 0:I.name)||"N/A"),1),s("td",_s,d(e.formatDate(r.check_in_date)),1),s("td",bs,d(e.formatDate(r.check_out_date)),1)])}),128))])])])]),_:1})]),_:1})):q("",!0),e.chartersPrices&&e.chartersPrices.length>0?(f(),V(y,{key:7,class:"mb-6",stripe:"","stripe-color":"info"},{default:n(()=>[a(b,{class:"flex items-center gap-2"},{default:n(()=>[a(u,{name:"flight"}),h(" Charter Costs ("+d(e.chartersPrices.length)+") ",1)]),_:1}),a(l,null,{default:n(()=>[s("div",vs,[s("table",Ss,[t[30]||(t[30]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Charter"),s("th",{class:"text-left"},"Description"),s("th",{class:"text-right"},"Amount")])],-1)),s("tbody",null,[(f(!0),w(j,null,Q(e.chartersPrices,(r,m)=>{var S;return f(),w("tr",{key:m},[s("td",ks,d(r.name||((S=r.charter)==null?void 0:S.name)||"Charter "+(m+1)),1),s("td",Is,d(r.description||"N/A"),1),s("td",ws,d(e.formatCurrency(r.amount||r.price)),1)])}),128))])])])]),_:1})]),_:1})):q("",!0)])}const Cs=ue(ft,[["render",Ds],["__scopeId","data-v-402121c0"]]),Vs=me({components:{Salesinquirieslist:ut,VaForm:Qe,VaInput:He,VaSelect:Re,VaButton:Me,SalesInquiryDetails:Cs},setup(){const e=Y(),t=Y(),c=Y(!1),o=Y("add"),{isValid:p,validate:k,resetValidation:u,reset:_}=ze(e),{isValid:g,validate:l,resetValidation:y,reset:b}=ze(t),{init:$}=fe(),A=Y(!1),P=de({id:null,full_name:"",nick_name:"",country:null,nationality:null,category:null,email:"",phone:"",address:"",no_of_hunters:1,no_of_observers:0,priceListId:null,no_of_days:0,no_of_companions:0,species:null,quantity:0,area:null,season:null,preferred_date:null,start_date:null,end_date:null}),v=de({id:null,client_id:null,contact:"",contact_type:null,contactable:!1}),H=()=>{c.value=!0},T=()=>{c.value=!1,A.value=!1},z=Y([]),r=Y([]),m=Y([]),S=Y([]),I=Y([]),x=Y(0),B=async()=>{const O={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/countries",headers:{"Content-Type":"application/json"}},U=await X.request(O);U.status===200&&z.value.push(...U.data.map(F=>({value:F.id,text:F.name})))},N=async()=>{try{const O={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/entity-categories-vset/"},U=await X.request(O);U.status===200&&m.value.push(...U.data.map(F=>({value:F.id,text:F.name})))}catch{console.warn("Categories endpoint not available")}},L=async()=>{const O={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/nationalities",headers:{"Content-Type":"application/json"}},U=await X.request(O);U.status===200&&r.value.push(...U.data.map(F=>({value:F.id,text:F.name})))},M=async()=>{try{const O={method:"get",maxBodyLength:1/0,url:"https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/settings/contact-types/",headers:{"Content-Type":"application/json"}},U=await X.request(O);U.status===200&&S.value.push(...U.data.map(F=>({value:F.id,text:F.name})))}catch{console.warn("Contact types endpoint not available")}},E=Ye(()=>{var F;let O="";const U=(F=v.contact_type)==null?void 0:F.value;return U==="email"?O="email":U==="phone_number"?O="phone":O="",O});return We(()=>{B(),N(),L(),M()}),{formRef:e,contactFormRef:t,showAddSalesInquiriesForm:c,btnIcon:o,form:P,contactForm:v,showDetailsPage:A,countries:z,nationality:r,categoryOptions:m,contactsTypes:S,clients:I,step:x,init:$,toggleAddSalesInquiriesForm:H,isValidForm:p,validateForm:k,resetValidationForm:u,resetForm:_,isValidContactForm:g,validateContactForm:l,resetValidationContactForm:y,resetContactForm:b,validators:Ke,getCountries:B,getCategories:N,getNationalities:L,getContactTypes:M,contactFieldType:E,gotBack:T}},data(){return{speciesOptions:[],speciesObjects:[],areasOptions:[],seasonsOptions:[],selectedInquiryItem:null,downloadPdf:Xe,saving:!1,packagesOptions:[],originalQuantities:de({}),seasonMinDate:null,seasonMaxDate:null,isEditMode:!1,editingInquiryId:null,customerType:"new",selectedExistingCustomer:null,existingCustomersOptions:[],loadingCustomers:!1,currentStep:0,wizardSteps:[{label:"Customer Info"},{label:"Dates & Season"},{label:"Package Selection"},{label:"Hunt Party"},{label:"Review"}],selectedSafariExtras:[],bookedDates:[],loadingBookedDates:!1,dateConflictWarning:""}},computed:{...Be(re,["logo","salesPackagesSpecies"]),bookedDatesForSelectedSeason(){return this.bookedDates},canProceedToNextStep(){const e=t=>typeof t=="string"?t.trim().length>0:!!t;switch(this.currentStep){case 0:return e(this.form.full_name)&&e(this.form.country)&&e(this.form.nationality)&&e(this.form.email)&&e(this.form.phone)&&e(this.form.address)&&(this.customerType==="existing"?e(this.selectedExistingCustomer):!0);case 1:return e(this.form.season)&&e(this.form.preferred_date)&&e(this.form.start_date)&&e(this.form.end_date);case 2:return this.speciesObjects.length>0;case 3:return e(this.form.area)&&!!(this.form.no_of_days&&this.form.no_of_days>0);case 4:return!0;default:return!1}},filteredPackagesOptions(){var t;if(!((t=this.form.season)!=null&&t.value))return[];const e=this.form.season.value;return this.packagesOptions.filter(c=>{var p,k,u,_;return(((p=c.selfItem)==null?void 0:p.season_id)||((_=(u=(k=c.selfItem)==null?void 0:k.price_list_type)==null?void 0:u.price_list)==null?void 0:_.season_id))===e})},speciesList(){return this.salesPackagesSpecies},seasonStartMonth(){return this.seasonMinDate?this.seasonMinDate.getMonth():new Date().getMonth()},seasonStartYear(){return this.seasonMinDate?this.seasonMinDate.getFullYear():new Date().getFullYear()}},watch:{customerType(e){e==="new"?(this.selectedExistingCustomer=null,this.clearCustomerInformation()):e==="existing"&&(this.selectedExistingCustomer=null,this.clearCustomerInformation())},selectedExistingCustomer(e){!e&&this.customerType==="existing"&&this.clearCustomerInformation()}},mounted(){this.getSpecies(),this.getAreas(),this.getSeasonList(),this.getPL(),this.getExistingCustomers()},methods:{...G(ce,["getSpeciesList"]),...G(ce,["getAreaList"]),...G(ce,["getAllSpeciesPerQuotaPerArea"]),...G(le,["createSalesInquiry","updateSalesInquiry","getSalesInquiries"]),...G(re,["getSeasons","getSalespackagesSpecies"]),...G(Ze,["getPriceList","getPriceListById"]),async getExistingCustomers(){this.loadingCustomers=!0;try{const e=await this.getSalesInquiries("","");if(e.status===200){const t=Array.isArray(e.data)?e.data:e.data.data||[],c=new Map;t.forEach(o=>{var k,u,_,g;const p=o.entity;if(p&&p.id&&!c.has(p.id)){let l="",y="",b="";p.contacts&&Array.isArray(p.contacts)&&p.contacts.forEach($=>{var A,P,v;((A=$.contact_type)==null?void 0:A.name)==="email"||$.contact_type_id===1?l=$.contact||"":((P=$.contact_type)==null?void 0:P.name)==="phone_number"||$.contact_type_id===2?y=$.contact||"":(((v=$.contact_type)==null?void 0:v.name)==="address"||$.contact_type_id===3)&&(b=$.contact||"")}),c.set(p.id,{value:p.id,text:p.full_name,selfItem:{id:p.id,full_name:p.full_name,country:((k=p.country)==null?void 0:k.name)||p.country_name||"",country_id:((u=p.country)==null?void 0:u.id)||p.country_id,nationality:((_=p.nationality)==null?void 0:_.name)||p.nationality_name||"",nationality_id:((g=p.nationality)==null?void 0:g.id)||p.nationality_id,email:l,phone:y,address:b}})}}),this.existingCustomersOptions=Array.from(c.values())}}catch(e){console.error("Error fetching existing customers:",e)}finally{this.loadingCustomers=!1}},populateFormFromCustomer(e){if(this.customerType!=="existing")return;if(!e||!e.selfItem){this.clearCustomerInformation();return}const t=e.selfItem;if(this.form.full_name=t.full_name||"",t.country_id){const c=this.countries.find(o=>o.value===t.country_id);c&&(this.form.country=c)}else if(t.country){const c=this.countries.find(o=>o.text===t.country);c&&(this.form.country=c)}if(t.nationality_id){const c=this.nationality.find(o=>o.value===t.nationality_id);c&&(this.form.nationality=c)}else if(t.nationality){const c=this.nationality.find(o=>o.text===t.nationality);c&&(this.form.nationality=c)}this.form.email=t.email||"",this.form.phone=t.phone||"",this.form.address=t.address||"",this.init({message:`Customer "${t.full_name}" information loaded successfully`,color:"success"})},clearCustomerInformation(){this.form.full_name="",this.form.country=null,this.form.nationality=null,this.form.email="",this.form.phone="",this.form.address=""},async submit(){var p,k,u,_,g;if(this.saving=!0,!this.form.full_name||!this.form.country||!this.form.nationality||!this.form.email){this.init({message:"Please fill in all required fields (Name, Country, Nationality, Email).",color:"warning"}),this.saving=!1;return}if(this.speciesObjects.length===0){this.init({message:"Please add at least one species.",color:"warning"}),this.saving=!1;return}if(!this.form.area){this.init({message:"Please select a hunting area.",color:"warning"}),this.saving=!1;return}if(!this.form.season){this.init({message:"Please select a season.",color:"warning"}),this.saving=!1;return}if(!this.form.no_of_days||this.form.no_of_days<=0){this.init({message:"Please enter the number of days.",color:"warning"}),this.saving=!1;return}const e={full_name:this.form.full_name,country_id:(p=this.form.country)==null?void 0:p.value,nationality_id:(k=this.form.nationality)==null?void 0:k.value},t=[{contact_type_id:1,contact:this.form.email,contactable:!0},{contact_type_id:2,contact:this.form.phone,contactable:!0},{contact_type_id:3,contact:this.form.address,contactable:!1}],c={preferred_date:this.form.preferred_date,start_date:this.form.start_date,end_date:this.form.end_date,no_of_observers:this.form.no_of_observers||0,no_of_companions:this.form.no_of_companions||0,no_of_hunters:this.form.no_of_hunters||1,no_of_days:this.form.no_of_days},o={entity:e,contacts:t,preferences:c,species:this.speciesObjects,area_id:(u=this.form.area)==null?void 0:u.value,season_id:(_=this.form.season)==null?void 0:_.value,safari_extras:this.selectedSafariExtras.map(l=>({safari_extras_id:l.safari_extras_id||l.id}))};(g=this.form.priceListId)!=null&&g.value&&(o.reference_price_list_id=this.form.priceListId.value),console.log("Request payload:",JSON.stringify(o,null,2));try{let l;this.isEditMode&&this.editingInquiryId?(l=await this.updateSalesInquiry(this.editingInquiryId,o),l.status===200&&(this.saving=!1,this.init({message:"Sales inquiry updated successfully",color:"success"}),this.resetForm(),this.resetValidationContactForm(),this.speciesObjects=[],this.selectedSafariExtras=[],this.isEditMode=!1,this.editingInquiryId=null,this.customerType="new",this.selectedExistingCustomer=null,this.currentStep=0,this.showAddSalesInquiriesForm=!1)):(l=await this.createSalesInquiry(o),l.status===201&&(this.saving=!1,this.init({message:l.data.message,color:"success"}),this.resetForm(),this.resetValidationContactForm(),this.speciesObjects=[],this.selectedSafariExtras=[],this.customerType="new",this.selectedExistingCustomer=null,this.currentStep=0))}catch(l){if(this.saving=!1,console.error("Error saving sales inquiry:",l),l.response){const y=Je(l.response);this.init({message:`
`+y.map((b,$)=>`${$+1}. ${b}`).join(`
`),color:"danger"})}else l.request?this.init({message:"No response from server. Please check your network connection.",color:"danger"}):this.init({message:l.message||"An unexpected error occurred",color:"danger"})}},viewInquiries(e){this.showDetailsPage=!0,this.selectedInquiryItem=e.selfitem},resetEditMode(){this.isEditMode=!1,this.editingInquiryId=null,this.speciesObjects=[],this.selectedSafariExtras=[],this.customerType="new",this.selectedExistingCustomer=null,this.currentStep=0},handleGoBack(){this.resetEditMode(),this.currentStep=0,this.gotBack()},nextStep(){this.currentStep<this.wizardSteps.length-1&&this.canProceedToNextStep?this.currentStep++:this.canProceedToNextStep||this.showStepValidationError()},previousStep(){this.currentStep>0&&this.currentStep--},goToStep(e){e<=this.currentStep&&(this.currentStep=e)},showStepValidationError(){const e={0:"Please fill in all customer information fields (Name, Country, Nationality, Email, Phone, Address).",1:"Please add at least one species.",2:"Please select a hunting area and enter the number of days.",3:"Please select a season and all required dates."};this.init({message:e[this.currentStep]||"Please complete all required fields.",color:"warning"})},formatReviewDate(e){if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?"N/A":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}},getSpeciesNameById(e){if(!e)return null;const t=this.speciesOptions.find(c=>c.value===e);return t?t.text:null},editInquiry(e){var g,l,y,b,$,A,P,v,H,T,z;this.isEditMode=!0,this.editingInquiryId=e.id,this.showAddSalesInquiriesForm=!0;const t=e.selfitem||e;this.form.full_name=((g=t.entity)==null?void 0:g.full_name)||e.name||"";const c=((y=(l=t.entity)==null?void 0:l.country)==null?void 0:y.name)||((b=t.entity)==null?void 0:b.country_name);if(c){const r=this.countries.find(m=>m.text===c);r&&(this.form.country=r)}const o=((A=($=t.entity)==null?void 0:$.nationality)==null?void 0:A.name)||((P=t.entity)==null?void 0:P.nationality_name);if(o){const r=this.nationality.find(m=>m.text===o);r&&(this.form.nationality=r)}(v=t.entity)!=null&&v.contacts&&Array.isArray(t.entity.contacts)&&t.entity.contacts.forEach(r=>{var m,S,I;((m=r.contact_type)==null?void 0:m.name)==="email"||r.contact_type_id===1?this.form.email=r.contact||"":((S=r.contact_type)==null?void 0:S.name)==="phone_number"||r.contact_type_id===2?this.form.phone=r.contact||"":(((I=r.contact_type)==null?void 0:I.name)==="address"||r.contact_type_id===3)&&(this.form.address=r.contact||"")});const p=t.formatted_preferences||e.preference||{};this.form.no_of_hunters=p.no_of_hunters||1,this.form.no_of_observers=p.no_of_observers||0,this.form.no_of_days=p.no_of_days||0,this.form.no_of_companions=p.no_of_companions||0,p.preferred_date&&(this.form.preferred_date=new Date(p.preferred_date)),p.start_date&&(this.form.start_date=new Date(p.start_date)),p.end_date&&(this.form.end_date=new Date(p.end_date));const k=((z=(T=(H=t.inquiry_areas)==null?void 0:H[0])==null?void 0:T.area)==null?void 0:z.name)||e.area;if(k){const r=this.areasOptions.find(m=>m.text===k);r&&(this.form.area=r)}if(t.season){const r=this.seasonsOptions.find(m=>m.value===t.season.id||m.text===t.season.name);r&&(this.form.season=r)}if(t.reference_price_list){const r=this.packagesOptions.find(m=>m.value===t.reference_price_list.id);r&&(this.form.priceListId=r)}this.speciesObjects=[];const u=t.inquiry_species||e.inquiry_species||[];console.log("Species array from API:",JSON.stringify(u,null,2)),u.forEach(r=>{var S,I;const m=r.species_name||((S=r.species)==null?void 0:S.name)||r.name||this.getSpeciesNameById(r.species_id)||"Unknown";this.speciesObjects.push({species_id:r.species_id||((I=r.species)==null?void 0:I.id)||r.id,name:m,quantity:r.quantity||1,fromPackage:!1})}),this.selectedSafariExtras=[];const _=t.safari_extras||t.sales_confirmation_safari_extras||[];console.log("Safari extras from API:",JSON.stringify(_,null,2)),_.forEach(r=>{const m=r.safari_extra||r.safary_extra||r;this.selectedSafariExtras.push({id:m.id||r.safari_extras_id||r.safary_extras_id,safari_extras_id:m.id||r.safari_extras_id||r.safary_extras_id,name:m.name||"Unknown",description:m.description||"",amount:m.amount||0,charges_per:m.charges_per||"",currency:m.currency})}),this.init({message:"Loaded inquiry data for editing",color:"info"})},async downloadAllInquiriesPdf(){try{const e=await X.get("https://backend-bushman-master-kxhmlj.laravel.cloud/api/v1.0/sales/sales-inquiries-pdf",{headers:{"Content-Type":"application/json"}});if(e.data.success&&e.data.pdf){const t=e.data.pdf,c=atob(t),o=new Array(c.length);for(let g=0;g<c.length;g++)o[g]=c.charCodeAt(g);const p=new Uint8Array(o),k=new Blob([p],{type:"application/pdf"}),u=window.URL.createObjectURL(k),_=document.createElement("a");_.href=u,_.download=`sales-inquiries-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(u),this.init({message:`PDF downloaded successfully. Total records: ${e.data.total_records}`,color:"success"})}else this.init({message:"Failed to generate PDF",color:"danger"})}catch(e){console.error("Error downloading PDF:",e),this.init({message:"Error downloading PDF",color:"danger"})}},addNewSpeciesItemToStorage(){if(!this.form.species||!this.form.quantity){this.init({message:"Please fill all required fields.",color:"warning"});return}if(Number(this.form.quantity)<=0){this.init({message:"Quantity must be greater than zero.",color:"warning"});return}this.speciesObjects.some(t=>t.species_id===this.form.species.value)?console.log("Species item already exists:",this.form.species.value):this.speciesObjects.push({species_id:this.form.species.value,name:this.form.species.text,quantity:this.form.quantity,fromPackage:!1})},deleteFromStorage(e){this.speciesObjects.splice(e,1),console.log("Species item deleted:",e)},removeSafariExtra(e){const t=this.selectedSafariExtras.splice(e,1);t.length>0&&this.init({message:`Removed "${t[0].name}" from safari extras`,color:"info"})},incrementQuantity(e){this.speciesObjects[e]&&this.speciesObjects[e].quantity++},decrementQuantity(e){this.speciesObjects[e]&&this.speciesObjects[e].quantity>1&&this.speciesObjects[e].quantity--},async getSpecies(){try{const e=await this.getSpeciesList();e.status===200&&(this.speciesOptions=e.data.map(t=>({value:t.id,text:t.name})))}catch(e){console.error("Error loading species:",e)}},async getAreas(){try{const e=await this.getAreaList();this.areasOptions=e.data.map(t=>({value:t.id,text:t.name}))}catch(e){console.log(e)}},async getSeasonList(){try{const e=await this.getSeasons();this.seasonsOptions=e.data.map(t=>({value:t.id,text:t.name,selfItem:t}))}catch(e){console.log(e)}},async onSeasonSelected(e){if(this.dateConflictWarning="",this.form.preferred_date=null,this.form.start_date=null,this.form.end_date=null,!e||!e.selfItem){this.seasonMinDate=null,this.seasonMaxDate=null,this.bookedDates=[];return}const t=e.selfItem;t.start_date&&(this.seasonMinDate=new Date(t.start_date)),t.end_date&&(this.seasonMaxDate=new Date(t.end_date)),await this.fetchBookedDates(e.value)},async fetchBookedDates(e,t){this.loadingBookedDates=!0,this.bookedDates=[];try{const c=new URLSearchParams;e&&c.append("season_id",e.toString()),t&&c.append("area_id",t.toString());const o=c.toString()?`?${c.toString()}`:"",p=await X.get(`/sales/booked-dates${o}`);if(p.status===200){const k=Array.isArray(p.data)?p.data:p.data.data||[];this.bookedDates=k.map(u=>{var _;return{start_date:u.start_date,end_date:u.end_date,client_name:u.client_name||((_=u.entity)==null?void 0:_.full_name)||"Unknown Client",area_id:u.area_id}})}}catch(c){console.error("Error fetching booked dates:",c)}finally{this.loadingBookedDates=!1}},checkBookedDateConflict(){this.dateConflictWarning="";const e=this.form.start_date?new Date(this.form.start_date):null,t=this.form.end_date?new Date(this.form.end_date):null,c=this.form.preferred_date?new Date(this.form.preferred_date):null;if(!(!e&&!t&&!c))for(const o of this.bookedDates){const p=new Date(o.start_date),k=new Date(o.end_date);p.setHours(0,0,0,0),k.setHours(23,59,59,999);const u=g=>{if(!g)return!1;const l=new Date(g);return l.setHours(12,0,0,0),l>=p&&l<=k},_=(g,l)=>{if(!g||!l)return!1;const y=new Date(g),b=new Date(l);return y.setHours(0,0,0,0),b.setHours(23,59,59,999),y<=k&&b>=p};if(u(c)||u(e)||u(t)||_(e,t)){const g=new Date(o.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),l=new Date(o.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});this.dateConflictWarning=`The selected dates overlap with a confirmed hunt for "${o.client_name}" (${g} - ${l}). Please inform the client that this time slot may not be available.`;return}}},formatBookingDateRange(e){const t=new Date(e.start_date),c=new Date(e.end_date),o={month:"short",day:"numeric"};return t.getFullYear()!==c.getFullYear()?`${t.toLocaleDateString("en-US",{...o,year:"numeric"})} - ${c.toLocaleDateString("en-US",{...o,year:"numeric"})}`:`${t.toLocaleDateString("en-US",o)} - ${c.toLocaleDateString("en-US",o)}`},calculateAdditionalCost(){var c,o,p;let e=0;const t=(c=this.form.priceListId)==null?void 0:c.selfItem;return t?(this.form.no_of_companions>0&&((o=t.companion_hunter_costs)==null?void 0:o.length)>0&&(e+=this.form.no_of_companions*t.companion_hunter_costs[0].amount),this.form.no_of_observers>0&&((p=t.observer)==null?void 0:p.length)>0&&(e+=this.form.no_of_observers*t.observer[0].amount),e):0},async getPL(){const e=await this.getPriceList();e.status===200?(this.packagesOptions=e.data.data.map(t=>({value:t.id,text:`${t.package_name||`Package ${t.id}`} - ${t.hunting_type||"N/A"} (${t.season_name||"No Season"})`,selfItem:t})),console.log("packagesOptions:",this.packagesOptions)):console.log("Error getting price list")},async populateFormFromPackage(){var t,c,o,p,k;const e=re();if(!this.form.priceListId||!this.form.priceListId.value){e.salesPackagesSpecies=[];return}try{const u=await this.getPriceListById(this.form.priceListId.value);if(console.log("Price list detail response:",u),u.status===200&&u.data.success){const _=u.data.data;if(this.form.priceListId.selfItem=_,(c=(t=_.sales_package)==null?void 0:t.area)!=null&&c.name){const g=this.areasOptions.find(l=>l.text===_.sales_package.area.name);g&&(this.form.area=g)}if((o=_.price_list_type)!=null&&o.duration&&(this.form.no_of_days=_.price_list_type.duration),(p=_.price_list_type)!=null&&p.price_list){const g=_.price_list_type.price_list;g.start_date&&(this.seasonMinDate=new Date(g.start_date)),g.end_date&&(this.seasonMaxDate=new Date(g.end_date));const l=new Date(g.start_date),y=new Date(g.end_date),b=`${l.toLocaleDateString("en-US",{month:"short",year:"numeric"})} - ${y.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`,$=_.season_id;let A=this.seasonsOptions.find(P=>{var v;return(v=P.selfItem)!=null&&v.start_date?new Date(P.selfItem.start_date).getFullYear()===l.getFullYear():!1});if(A||(A={value:$,text:b,selfItem:{start_date:g.start_date,end_date:g.end_date}},this.seasonsOptions.push(A)),this.form.season=A,g.start_date){const P=new Date(g.start_date);this.form.preferred_date=P,this.form.start_date=P,this.form.end_date=P}}if((k=_.sales_package)!=null&&k.species&&Array.isArray(_.sales_package.species)){console.log("Raw species data:",JSON.stringify(_.sales_package.species,null,2)),this.speciesObjects=_.sales_package.species.map(l=>{var b,$;const y=l.species_id||((b=l.species)==null?void 0:b.id)||l.id;return console.log("Species item:",l,"Using species_id:",y),{species_id:y,name:(($=l.species)==null?void 0:$.name)||l.name||"Unknown",quantity:l.quantity||0,fromPackage:!0}});const g=_.sales_package.species.map(l=>{var y,b,$;return{id:l.species_id||((y=l.species)==null?void 0:y.id)||l.id,name:((b=l.species)==null?void 0:b.name)||l.name||"Unknown",scientific_name:(($=l.species)==null?void 0:$.scientific_name)||l.scientific_name||"N/A",quantity:l.quantity||0,requested_quantity:0}});e.salesPackagesSpecies=g,console.log("Populated species:",this.speciesObjects),this.init({message:`Loaded ${g.length} species from the selected package. You can now customize all fields.`,color:"success",position:"bottom-right"})}else console.log("No species array found. Response structure:",_.sales_package),e.salesPackagesSpecies=[],this.init({message:"No species found in the selected package.",color:"warning",position:"bottom-right"});_.safari_extras&&Array.isArray(_.safari_extras)?(this.selectedSafariExtras=_.safari_extras.map(g=>({id:g.id,safari_extras_id:g.id,name:g.name,description:g.description||"",amount:g.amount,charges_per:g.charges_per,currency:g.currency})),console.log("Populated safari extras:",this.selectedSafariExtras)):this.selectedSafariExtras=[]}}catch(u){console.error("Error fetching price list details:",u),this.init({message:"Failed to load package details. Please try again.",color:"danger",position:"bottom-right"}),e.salesPackagesSpecies=[]}},onChange(e,t){console.log("Quantity changed:",e,t);const c=this.salesPackagesSpecies.find(o=>o.id===e);c&&(c.requested_quantity=t,this.salesPackagesSpecies=[...this.salesPackagesSpecies],t>c.quantity?this.init({message:`Warning: Requested quantity (${t}) exceeds available quantity (${c.quantity}) for ${c.name}.`,color:"warning",position:"bottom-right"}):t>0&&this.init({message:`Quantity for ${c.name} has been set to ${t}.`,color:"success",position:"bottom-right"}))},checkDateAllowed(e){if(!this.seasonMinDate&&!this.seasonMaxDate)return!0;const t=new Date(e);t.setHours(0,0,0,0);let c=!0;if(this.seasonMinDate){const o=new Date(this.seasonMinDate);o.setHours(0,0,0,0),t<o&&(c=!1)}if(this.seasonMaxDate&&c){const o=new Date(this.seasonMaxDate);o.setHours(0,0,0,0),t>o&&(c=!1)}return c},isDateInSeasonRange(e){if(!this.seasonMinDate&&!this.seasonMaxDate)return!0;const t=new Date(e);if(t.setHours(0,0,0,0),this.seasonMinDate){const c=new Date(this.seasonMinDate);if(c.setHours(0,0,0,0),t<c)return!1}if(this.seasonMaxDate){const c=new Date(this.seasonMaxDate);if(c.setHours(0,0,0,0),t>c)return!1}return!0},formatDateRange(e,t){if(!e||!t)return"N/A";const c=new Date(e),o=new Date(t),p=c.toLocaleDateString("en-US",{month:"short",year:"numeric"}),k=o.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${p} - ${k}`},formatCurrency(e){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):"$0.00"},formatChargesPer(e){return e?e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):""},getSequenceLabel(e){return{1:"1st",2:"2nd",3:"3rd"}[e]||`${e}th`}}}),$s={class:"flex flex-col md:flex-row gap-3 mb-6 justify-between items-center py-4 px-2 bg-gray-50 rounded-lg"},qs={class:"flex flex-col md:flex-row gap-3 justify-start"},As={key:0,class:"flex gap-3"},Ps={key:1,class:"p-6 bg-white rounded-lg sales-inquiry-wizard"},xs={class:"animate-fade-in"},Ns={class:"mb-6"},Ls={class:"flex items-center gap-2 mb-4"},Es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Os={key:0,class:"mt-4"},Fs={key:0,class:"flex flex-col"},Us={class:"font-semibold"},js={class:"text-sm text-gray-500"},zs={class:"mb-6"},Bs={class:"flex items-center gap-2 mb-4"},Ts={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ms={class:"mb-6"},Rs={class:"flex items-center gap-2 mb-4"},Hs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Qs={class:"animate-fade-in"},Ys={class:"mb-6"},Ws={class:"flex items-center gap-2 mb-4"},Gs={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Js={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ks={key:1,class:"mt-4"},Xs={class:"text-sm font-semibold text-gray-700 mb-2"},Zs={class:"flex flex-wrap gap-2"},ea={class:"animate-fade-in"},ta={class:"mb-6"},sa={class:"flex items-center gap-2 mb-4"},aa={class:"grid grid-cols-1 gap-4 mb-4"},oa={key:0,class:"flex flex-col"},na={class:"font-semibold"},ia={class:"text-sm text-gray-500"},ra={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 text-sm"},la={class:"ml-1 font-medium"},da={class:"ml-1 font-medium"},ca={class:"ml-1 font-medium"},ma={class:"ml-1 font-medium"},ua={class:"ml-1 font-medium"},fa={key:0,class:"mt-2 text-sm"},pa={class:"ml-1 font-medium"},ga={key:1,class:"mt-2"},ya={class:"ml-1 text-xs font-medium"},ha={key:2,class:"mt-3 pt-3 border-t"},_a={class:"va-table-responsive"},ba={class:"va-table va-table--hoverable w-full text-sm"},va={class:"font-medium"},Sa={class:"text-center"},ka={class:"text-right font-semibold"},Ia={key:3,class:"mt-3 pt-3 border-t"},wa={class:"flex flex-wrap gap-1"},Da={class:"font-bold text-lg mb-2 mt-4"},Ca={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Va={class:"flex items-end"},$a={class:"mt-4"},qa={class:"flex items-center gap-2"},Aa={class:"font-semibold"},Pa={class:"flex items-center gap-2"},xa={class:"text-sm font-medium min-w-[30px] text-center"},Na={class:"font-bold text-lg mb-2 mt-4"},La={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},Ea={class:"flex justify-between items-start"},Oa={class:"flex-1"},Fa={class:"font-semibold text-base capitalize"},Ua={class:"text-xs text-gray-600 mt-1"},ja={class:"mt-2 flex items-center gap-2"},za={class:"text-xs text-gray-500"},Ba={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ta={key:0,class:"p-4 bg-blue-50 rounded-lg"},Ma={class:"flex items-center gap-2 mb-2"},Ra={class:"text-2xl font-bold text-primary"},Ha={key:1,class:"p-4 bg-green-50 rounded-lg"},Qa={class:"flex items-center gap-2 mb-2"},Ya={class:"text-2xl font-bold text-success"},Wa={class:"animate-fade-in"},Ga={class:"mb-6"},Ja={class:"flex items-center gap-2 mb-4"},Ka={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Xa={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Za={class:"flex items-center gap-2 mb-2"},eo={class:"text-2xl font-bold text-primary"},to={class:"flex items-center gap-2 mb-2"},so={class:"text-2xl font-bold text-success"},ao={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},oo={class:"animate-fade-in"},no={class:"mb-6"},io={class:"flex items-center gap-2 mb-4"},ro={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},lo={class:"ml-2 font-medium"},co={class:"ml-2 font-medium"},mo={class:"ml-2 font-medium"},uo={class:"ml-2 font-medium"},fo={class:"ml-2 font-medium"},po={class:"ml-2 font-medium"},go={key:0,class:"flex flex-wrap gap-2"},yo={key:1,class:"text-gray-500"},ho={class:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm"},_o={class:"ml-2 font-medium"},bo={class:"ml-2 font-medium"},vo={class:"ml-2 font-medium"},So={class:"ml-2 font-medium"},ko={class:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm"},Io={class:"ml-2 font-medium"},wo={class:"ml-2 font-medium"},Do={class:"ml-2 font-medium"},Co={class:"ml-2 font-medium"},Vo={class:"font-medium"},$o={class:"flex flex-wrap gap-2"},qo={class:"flex justify-between gap-3 p-4"},Ao={class:"flex gap-3"};function Po(e,t,c,o,p,k){const u=D("VaButton"),_=D("SalesInquiryDetails"),g=D("Salesinquirieslist"),l=D("VaIcon"),y=D("VaStepper"),b=D("VaAlert"),$=D("VaRadio"),A=D("VaSelect"),P=D("VaInput"),v=D("VaDateInput"),H=D("VaChip"),T=D("VaCardTitle"),z=D("VaBadge"),r=D("VaCardContent"),m=D("VaCard"),S=D("VaCounter"),I=D("VaDivider"),x=D("VaListItemLabel"),B=D("VaListItemSection"),N=D("VaListItem"),L=D("VaList"),M=D("VaForm");return f(),V(m,{class:"w-full"},{default:n(()=>[a(r,null,{default:n(()=>[s("div",$s,[s("div",qs,[e.showAddSalesInquiriesForm||e.showDetailsPage?(f(),V(u,{key:0,class:"px-6",icon:"arrow_back",size:"large",onClick:e.handleGoBack},{default:n(()=>t[26]||(t[26]=[h(" Go Back ")])),_:1},8,["onClick"])):q("",!0)]),!e.showAddSalesInquiriesForm&&!e.showDetailsPage?(f(),w("div",As,[a(u,{class:"px-6",color:"secondary",round:"",icon:"download",size:"large",onClick:t[0]||(t[0]=E=>e.downloadAllInquiriesPdf())},{default:n(()=>t[27]||(t[27]=[h("Download PDF")])),_:1}),a(u,{class:"px-6",color:"primary",round:"",icon:"add",size:"large",onClick:t[1]||(t[1]=E=>e.toggleAddSalesInquiriesForm())},{default:n(()=>t[28]||(t[28]=[h("Create Enquiry")])),_:1})])):q("",!0)]),e.showDetailsPage?(f(),V(_,{key:0,item:e.selectedInquiryItem},null,8,["item"])):(f(),w(j,{key:1},[e.showAddSalesInquiriesForm?(f(),w("div",Ps,[a(y,{modelValue:e.currentStep,"onUpdate:modelValue":t[3]||(t[3]=E=>e.currentStep=E),steps:e.wizardSteps,color:"primary",class:"mb-6","navigation-disabled":"","controls-hidden":""},{"step-button-0":n(()=>[a(l,{name:"person"})]),"step-button-1":n(()=>[a(l,{name:"event"})]),"step-button-2":n(()=>[a(l,{name:"inventory_2"})]),"step-button-3":n(()=>[a(l,{name:"groups"})]),"step-button-4":n(()=>[a(l,{name:"fact_check"})]),_:1},8,["modelValue","steps"]),a(M,{ref:"formRef",class:"space-y-6"},{default:n(()=>{var E,O,U,F,Z,ee,te,se;return[ne(s("div",xs,[s("div",Ns,[s("div",Ls,[a(l,{name:"person_search",color:"primary",size:"large"}),t[29]||(t[29]=s("h3",{class:"text-xl font-bold text-gray-800"},"Customer Selection",-1))]),a(b,{color:"info",class:"mb-4",border:"left"},{title:n(()=>t[30]||(t[30]=[h("New or Existing Customer?")])),default:n(()=>[t[31]||(t[31]=h(' Select an existing customer to auto-fill their information, or choose "New Customer" to enter details manually. '))]),_:1}),s("div",Es,[a($,{modelValue:e.customerType,"onUpdate:modelValue":t[4]||(t[4]=i=>e.customerType=i),option:"new",label:"New Customer",name:"customerType"},null,8,["modelValue"]),a($,{modelValue:e.customerType,"onUpdate:modelValue":t[5]||(t[5]=i=>e.customerType=i),option:"existing",label:"Existing Customer",name:"customerType"},null,8,["modelValue"])]),e.customerType==="existing"?(f(),w("div",Os,[a(A,{modelValue:e.selectedExistingCustomer,"onUpdate:modelValue":[t[6]||(t[6]=i=>e.selectedExistingCustomer=i),e.populateFormFromCustomer],placeholder:"Search and select an existing customer",label:"Select Customer",options:e.existingCustomersOptions,loading:e.loadingCustomers,searchable:"","highlight-matched-text":"",clearable:""},{content:n(({value:i})=>{var C,R;return[i?(f(),w("div",Fs,[s("span",Us,d(i.text),1),s("span",js,d(((C=i.selfItem)==null?void 0:C.email)||"N/A")+"  "+d(((R=i.selfItem)==null?void 0:R.country)||"N/A"),1)])):q("",!0)]}),_:1},8,["modelValue","options","loading","onUpdate:modelValue"])])):q("",!0)]),s("div",zs,[s("div",Bs,[a(l,{name:"person",color:"primary",size:"large"}),t[32]||(t[32]=s("h3",{class:"text-xl font-bold text-gray-800"},"Basic Information",-1))]),s("div",Ts,[a(P,{modelValue:e.form.full_name,"onUpdate:modelValue":t[7]||(t[7]=i=>e.form.full_name=i),type:"text",placeholder:"Enter your Full name",rules:[i=>i&&i.length>0||"Full name is required"],label:"Full name"},null,8,["modelValue","rules"]),a(A,{modelValue:e.form.country,"onUpdate:modelValue":t[8]||(t[8]=i=>e.form.country=i),placeholder:"Select Country",label:"Country",rules:[i=>i||"Country is required"],options:e.countries,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options"]),a(A,{modelValue:e.form.nationality,"onUpdate:modelValue":t[9]||(t[9]=i=>e.form.nationality=i),placeholder:"Select Client nationality",label:"Client Nationality",rules:[i=>i||"Nationality is required"],options:e.nationality,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options"])])]),s("div",Ms,[s("div",Rs,[a(l,{name:"contact_mail",color:"primary",size:"large"}),t[33]||(t[33]=s("h3",{class:"text-xl font-bold text-gray-800"},"Contact Information",-1))]),s("div",Hs,[a(P,{modelValue:e.form.email,"onUpdate:modelValue":t[10]||(t[10]=i=>e.form.email=i),type:"email",placeholder:"Enter your email",rules:[e.validators.required,e.validators.email],label:"Email"},null,8,["modelValue","rules"]),a(P,{modelValue:e.form.phone,"onUpdate:modelValue":t[11]||(t[11]=i=>e.form.phone=i),type:"text",placeholder:"eg: +971501234567",rules:[e.validators.required,e.validators.tell],label:"Phone"},null,8,["modelValue","rules"]),a(P,{modelValue:e.form.address,"onUpdate:modelValue":t[12]||(t[12]=i=>e.form.address=i),type:"text","max-length":30,placeholder:"Enter your address",rules:[i=>i&&i.length>0||"Address is required"],label:"Address"},null,8,["modelValue","rules"])])])],512),[[ie,e.currentStep===0]]),ne(s("div",Qs,[s("div",Ys,[s("div",Ws,[a(l,{name:"event",color:"primary",size:"large"}),t[34]||(t[34]=s("h3",{class:"text-xl font-bold text-gray-800"},"Season and Dates",-1))]),a(b,{color:"info",class:"mb-4",border:"left"},{title:n(()=>t[35]||(t[35]=[h("Select Season First")])),default:n(()=>[t[36]||(t[36]=h(" Choose your preferred season. This will filter available packages and validate your date selections. "))]),_:1}),s("div",Gs,[a(A,{modelValue:e.form.season,"onUpdate:modelValue":[t[13]||(t[13]=i=>e.form.season=i),e.onSeasonSelected],placeholder:"Select Season",label:"Season",rules:[i=>i||"Season is required"],options:e.seasonsOptions,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options","onUpdate:modelValue"]),a(v,{modelValue:e.form.preferred_date,"onUpdate:modelValue":[t[14]||(t[14]=i=>e.form.preferred_date=i),e.checkBookedDateConflict],label:"Preferred Date",placeholder:"Select Preferred Date",rules:[i=>i||"Preferred Date is required"],"allowed-days":e.checkDateAllowed,disabled:!e.form.season,required:""},null,8,["modelValue","rules","allowed-days","disabled","onUpdate:modelValue"])]),s("div",Js,[a(v,{modelValue:e.form.start_date,"onUpdate:modelValue":[t[15]||(t[15]=i=>e.form.start_date=i),e.checkBookedDateConflict],label:"Start Date",placeholder:"Select Start Date",rules:[i=>i||"Start Date is required"],"allowed-days":e.checkDateAllowed,disabled:!e.form.season,required:""},null,8,["modelValue","rules","allowed-days","disabled","onUpdate:modelValue"]),a(v,{modelValue:e.form.end_date,"onUpdate:modelValue":[t[16]||(t[16]=i=>e.form.end_date=i),e.checkBookedDateConflict],label:"End Date",placeholder:"Select End Date",rules:[i=>i||"End Date is required"],"allowed-days":e.checkDateAllowed,disabled:!e.form.season,required:""},null,8,["modelValue","rules","allowed-days","disabled","onUpdate:modelValue"])]),e.dateConflictWarning?(f(),V(b,{key:0,color:"warning",class:"mt-4",border:"left"},{title:n(()=>[a(l,{name:"warning",class:"mr-1"}),t[37]||(t[37]=h(" Date Conflict Detected "))]),default:n(()=>[h(" "+d(e.dateConflictWarning),1)]),_:1})):q("",!0),e.bookedDatesForSelectedSeason.length>0?(f(),w("div",Ks,[s("div",Xs,[a(l,{name:"event_busy",size:"small",class:"mr-1"}),t[38]||(t[38]=h(" Already Booked Dates in This Season: "))]),s("div",Zs,[(f(!0),w(j,null,Q(e.bookedDatesForSelectedSeason,(i,C)=>(f(),V(H,{key:C,color:"danger",size:"small",outline:""},{default:n(()=>[h(d(e.formatBookingDateRange(i))+" - "+d(i.client_name),1)]),_:2},1024))),128))])])):q("",!0)])],512),[[ie,e.currentStep===1]]),ne(s("div",ea,[s("div",ta,[s("div",sa,[a(l,{name:"inventory_2",color:"primary",size:"large"}),t[39]||(t[39]=s("h3",{class:"text-xl font-bold text-gray-800"},"Package Reference",-1))]),e.filteredPackagesOptions.length===0?(f(),V(b,{key:0,color:"warning",class:"mb-4",border:"left"},{title:n(()=>t[40]||(t[40]=[h("No Packages Available")])),default:n(()=>[t[41]||(t[41]=h(" No packages found for the selected season. You can still add species manually below. "))]),_:1})):(f(),V(b,{key:1,color:"info",class:"mb-4",border:"left"},{title:n(()=>t[42]||(t[42]=[h("Select a Package as Reference")])),default:n(()=>[h(" Showing "+d(e.filteredPackagesOptions.length)+" package(s) available for the selected season. Select a package to auto-fill the form with its details. ",1)]),_:1})),s("div",aa,[a(A,{modelValue:e.form.priceListId,"onUpdate:modelValue":[t[17]||(t[17]=i=>e.form.priceListId=i),e.populateFormFromPackage],placeholder:"Select a Package for Reference (Optional)",label:"Reference Package",options:e.filteredPackagesOptions,searchable:"","highlight-matched-text":"",clearable:"",disabled:e.filteredPackagesOptions.length===0},{content:n(({value:i})=>{var C,R,J,K;return[i?(f(),w("div",oa,[s("span",na,d(i.text),1),s("span",ia,d(((C=i.selfItem)==null?void 0:C.area)||((R=i.selfItem)==null?void 0:R.area_package)||"N/A")+"  "+d(((J=i.selfItem)==null?void 0:J.hunting_type)||"N/A")+"  "+d(((K=i.selfItem)==null?void 0:K.duration)||0)+" days ",1)])):q("",!0)]}),_:1},8,["modelValue","options","disabled","onUpdate:modelValue"]),e.form.priceListId&&e.form.priceListId.selfItem?(f(),V(m,{key:0,outlined:"",class:"mb-4 bg-gray-50"},{default:n(()=>[a(T,{class:"text-sm font-semibold flex items-center gap-2"},{default:n(()=>{var i,C;return[a(l,{name:"info",size:"small",color:"info"}),h(" Price List Details - "+d(((C=(i=e.form.priceListId.selfItem)==null?void 0:i.sales_package)==null?void 0:C.name)||"N/A"),1)]}),_:1}),a(r,null,{default:n(()=>{var i,C,R,J,K,ae,oe,pe,ge,ye,he,_e,be,ve,Se,ke,Ie,we,De,Ce,Ve,$e,qe,Ae,Pe,xe,Ne,Le,Ee;return[s("div",ra,[s("div",null,[t[43]||(t[43]=s("span",{class:"text-gray-600"},"Area:",-1)),s("span",la,d(((R=(C=(i=e.form.priceListId.selfItem)==null?void 0:i.sales_package)==null?void 0:C.area)==null?void 0:R.name)||"N/A"),1)]),s("div",null,[t[44]||(t[44]=s("span",{class:"text-gray-600"},"Hunting Type:",-1)),s("span",da,d(((ae=(K=(J=e.form.priceListId.selfItem)==null?void 0:J.price_list_type)==null?void 0:K.hunting_type)==null?void 0:ae.name)||"N/A"),1)]),s("div",null,[t[45]||(t[45]=s("span",{class:"text-gray-600"},"Regulatory Package:",-1)),s("span",ca,d(((ge=(pe=(oe=e.form.priceListId.selfItem)==null?void 0:oe.sales_package)==null?void 0:pe.regulatory_package)==null?void 0:ge.name)||"N/A"),1)]),s("div",null,[t[46]||(t[46]=s("span",{class:"text-gray-600"},"Duration:",-1)),s("span",ma,d(((he=(ye=e.form.priceListId.selfItem)==null?void 0:ye.price_list_type)==null?void 0:he.duration)||0)+" days",1)]),s("div",null,[t[47]||(t[47]=s("span",{class:"text-gray-600"},"Base Amount:",-1)),s("span",ua,d(((ve=(be=(_e=e.form.priceListId.selfItem)==null?void 0:_e.price_list_type)==null?void 0:be.currency)==null?void 0:ve.symbol)||"$")+d(((ke=(Se=e.form.priceListId.selfItem)==null?void 0:Se.price_list_type)==null?void 0:ke.amount)||"N/A"),1)]),s("div",null,[t[48]||(t[48]=s("span",{class:"text-gray-600"},"Status:",-1)),a(z,{text:(we=(Ie=e.form.priceListId.selfItem)==null?void 0:Ie.price_list_type)!=null&&we.is_active?"Active":"Inactive",color:(Ce=(De=e.form.priceListId.selfItem)==null?void 0:De.price_list_type)!=null&&Ce.is_active?"success":"warning",size:"small"},null,8,["text","color"])])]),(qe=($e=(Ve=e.form.priceListId.selfItem)==null?void 0:Ve.price_list_type)==null?void 0:$e.price_list)!=null&&qe.start_date?(f(),w("div",fa,[t[49]||(t[49]=s("span",{class:"text-gray-600"},"Valid Period:",-1)),s("span",pa,d(e.formatDateRange(e.form.priceListId.selfItem.price_list_type.price_list.start_date,e.form.priceListId.selfItem.price_list_type.price_list.end_date)),1)])):q("",!0),(Ae=e.form.priceListId.selfItem)!=null&&Ae.companion_hunter_costs&&e.form.priceListId.selfItem.companion_hunter_costs.length>0?(f(),w("div",ga,[t[50]||(t[50]=s("span",{class:"text-xs text-gray-600"},"Companion Hunter:",-1)),s("span",ya,d(((Ne=(xe=(Pe=e.form.priceListId.selfItem)==null?void 0:Pe.price_list_type)==null?void 0:xe.currency)==null?void 0:Ne.symbol)||"$")+d(e.form.priceListId.selfItem.companion_hunter_costs[0].amount)+" ("+d(e.form.priceListId.selfItem.companion_hunter_costs[0].days)+" days) ",1)])):q("",!0),(Le=e.form.priceListId.selfItem)!=null&&Le.trophy_fees&&e.form.priceListId.selfItem.trophy_fees.length>0?(f(),w("div",ha,[t[52]||(t[52]=s("div",{class:"text-xs font-semibold text-gray-700 mb-2"},"Trophy Fees:",-1)),s("div",_a,[s("table",ba,[t[51]||(t[51]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Species"),s("th",{class:"text-center"},"Sequence"),s("th",{class:"text-right"},"Price")])],-1)),s("tbody",null,[(f(!0),w(j,null,Q(e.form.priceListId.selfItem.trophy_fees,(W,Te)=>{var Oe,Fe,Ue,je;return f(),w("tr",{key:`trophy-${W.id}-${Te}`},[s("td",va,d(((Oe=W.species)==null?void 0:Oe.name)||"Unknown"),1),s("td",Sa,[a(z,{text:e.getSequenceLabel(W.sequence_order),color:"primary",size:"small"},null,8,["text"])]),s("td",ka,d(((je=(Ue=(Fe=e.form.priceListId.selfItem)==null?void 0:Fe.price_list_type)==null?void 0:Ue.currency)==null?void 0:je.symbol)||"$")+d(W.amount),1)])}),128))])])])])):q("",!0),(Ee=e.form.priceListId.selfItem)!=null&&Ee.upgrade_fees&&e.form.priceListId.selfItem.upgrade_fees.length>0?(f(),w("div",Ia,[t[53]||(t[53]=s("div",{class:"text-xs font-semibold text-gray-700 mb-2"},"Upgrade Fees:",-1)),s("div",wa,[(f(!0),w(j,null,Q(e.form.priceListId.selfItem.upgrade_fees,W=>(f(),V(z,{key:W.id,text:`${W.species_name} (${W.currency_symbol||"$"}${W.amount})`,color:"warning",size:"small"},null,8,["text"]))),128))])])):q("",!0)]}),_:1})]),_:1})):q("",!0)]),s("h3",Da,[a(l,{name:"pets",size:"small",class:"mr-1"}),t[54]||(t[54]=h(" Preferred Species "))]),a(m,{outlined:"",class:"mb-4"},{default:n(()=>[a(r,null,{default:n(()=>[s("div",Ca,[a(A,{modelValue:e.form.species,"onUpdate:modelValue":t[18]||(t[18]=i=>e.form.species=i),label:"Species",options:e.speciesOptions,placeholder:"Select Species",searchable:"","highlight-matched-text":""},null,8,["modelValue","options"]),a(S,{modelValue:e.form.quantity,"onUpdate:modelValue":t[19]||(t[19]=i=>e.form.quantity=i),label:"Quantity","manual-input":"",min:1,max:100},null,8,["modelValue"]),s("div",Va,[a(u,{color:"primary",icon:"add",onClick:t[20]||(t[20]=i=>e.addNewSpeciesItemToStorage())},{default:n(()=>t[55]||(t[55]=[h(" Add Species ")])),_:1})])]),a(I,{class:"my-4"}),s("div",$a,[t[57]||(t[57]=s("div",{class:"text-sm font-semibold mb-3"},"Selected Species",-1)),e.speciesObjects.length>0?(f(),V(L,{key:0,class:"space-y-2"},{default:n(()=>[(f(!0),w(j,null,Q(e.speciesObjects,(i,C)=>(f(),V(N,{key:C,class:"border rounded-lg p-3 hover:shadow-md transition-shadow"},{default:n(()=>[a(B,null,{default:n(()=>[a(x,{class:"flex justify-between items-center"},{default:n(()=>[s("div",qa,[s("span",Aa,d(i.name),1),i.fromPackage?(f(),V(z,{key:0,color:"info",size:"small",text:"from Price List"})):q("",!0)]),s("div",Pa,[a(u,{preset:"plain",icon:"remove",color:"primary",size:"small",disabled:i.quantity<=1,onClick:R=>e.decrementQuantity(C)},null,8,["disabled","onClick"]),s("span",xa,d(i.quantity),1),a(u,{preset:"plain",icon:"add",color:"primary",size:"small",onClick:R=>e.incrementQuantity(C)},null,8,["onClick"]),a(u,{preset:"plain",icon:"delete",color:"danger",size:"small",class:"ml-2",onClick:R=>e.deleteFromStorage(C)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(f(),V(b,{key:1,color:"secondary",border:"left",class:"mb-0"},{default:n(()=>t[56]||(t[56]=[h(" No species selected yet. Add species using the form above or select a reference package. ")])),_:1}))])]),_:1})]),_:1}),e.selectedSafariExtras.length>0?(f(),w(j,{key:2},[s("h3",Na," Safari Extras ("+d(e.selectedSafariExtras.length)+" selected) ",1),a(b,{color:"info",class:"mb-4",border:"left"},{title:n(()=>t[58]||(t[58]=[h("Customize Safari Extras")])),default:n(()=>[t[59]||(t[59]=h(" Remove any safari extras that your client does not require by clicking the delete button. "))]),_:1}),a(m,{outlined:"",class:"mb-4 bg-gray-50"},{default:n(()=>[a(r,null,{default:n(()=>[s("div",La,[(f(!0),w(j,null,Q(e.selectedSafariExtras,(i,C)=>(f(),w("div",{key:i.id,class:"p-3 border rounded-lg bg-white relative group"},[s("div",Ea,[s("div",Oa,[s("div",Fa,d(i.name),1),s("div",Ua,d(i.description),1),s("div",ja,[a(z,{color:"primary",size:"small"},{default:n(()=>{var R;return[h(d(((R=i.currency)==null?void 0:R.symbol)||"$")+d(i.amount),1)]}),_:2},1024),s("span",za,d(e.formatChargesPer(i.charges_per)),1)])]),a(u,{preset:"plain",color:"danger",size:"small",icon:"close",class:"ml-2",title:"Remove this safari extra",onClick:R=>e.removeSafariExtra(C)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})],64)):q("",!0),(O=(E=e.form.priceListId)==null?void 0:E.selfItem)!=null&&O.companion_hunter_costs&&e.form.priceListId.selfItem.companion_hunter_costs.length>0||(F=(U=e.form.priceListId)==null?void 0:U.selfItem)!=null&&F.observer&&e.form.priceListId.selfItem.observer.length>0?(f(),w(j,{key:3},[t[64]||(t[64]=s("h3",{class:"font-bold text-lg mb-2 mt-4"},"Additional Rates (from Price List)",-1)),a(m,{outlined:"",class:"mb-4 bg-gray-50"},{default:n(()=>[a(r,null,{default:n(()=>[s("div",Ba,[e.form.priceListId.selfItem.companion_hunter_costs&&e.form.priceListId.selfItem.companion_hunter_costs.length>0?(f(),w("div",Ta,[s("div",Ma,[a(l,{name:"group",size:"small",color:"primary"}),t[60]||(t[60]=s("span",{class:"font-semibold text-base"},"Companion Hunter",-1))]),s("div",Ra," $"+d(e.form.priceListId.selfItem.companion_hunter_costs[0].amount),1),t[61]||(t[61]=s("div",{class:"text-xs text-gray-600 mt-1"},"per companion",-1))])):q("",!0),e.form.priceListId.selfItem.observer&&e.form.priceListId.selfItem.observer.length>0?(f(),w("div",Ha,[s("div",Qa,[a(l,{name:"visibility",size:"small",color:"success"}),t[62]||(t[62]=s("span",{class:"font-semibold text-base"},"Observer",-1))]),s("div",Ya," $"+d(e.form.priceListId.selfItem.observer[0].amount),1),t[63]||(t[63]=s("div",{class:"text-xs text-gray-600 mt-1"},"per observer",-1))])):q("",!0)])]),_:1})]),_:1})],64)):q("",!0)])],512),[[ie,e.currentStep===2]]),ne(s("div",Wa,[s("div",Ga,[s("div",Ja,[a(l,{name:"groups",color:"primary",size:"large"}),t[65]||(t[65]=s("h3",{class:"text-xl font-bold text-gray-800"},"Hunt Party Details",-1))]),a(b,{color:"info",class:"mb-4",border:"left"},{title:n(()=>t[66]||(t[66]=[h("Party Composition")])),default:n(()=>[t[67]||(t[67]=h(" Specify the number of participants and hunting details for this safari. "))]),_:1}),s("div",Ka,[a(P,{modelValue:e.form.no_of_days,"onUpdate:modelValue":t[21]||(t[21]=i=>e.form.no_of_days=i),label:"Number of Hunting Days",placeholder:"Enter Number of Days",type:"number",rules:[i=>i||"Number of days is required"],required:""},null,8,["modelValue","rules"]),a(A,{modelValue:e.form.area,"onUpdate:modelValue":t[22]||(t[22]=i=>e.form.area=i),placeholder:"Select Area",label:"Hunting Area",rules:[i=>i||"Hunting area is required"],options:e.areasOptions,searchable:"","highlight-matched-text":""},null,8,["modelValue","rules","options"])]),(Z=e.form.priceListId)!=null&&Z.selfItem?(f(),w("div",Xa,[((ee=e.form.priceListId.selfItem.companion_hunter_costs)==null?void 0:ee.length)>0?(f(),V(m,{key:0,outlined:"",class:"bg-blue-50"},{default:n(()=>[a(r,{class:"p-4"},{default:n(()=>{var i,C;return[s("div",Za,[a(l,{name:"group",color:"primary"}),t[68]||(t[68]=s("span",{class:"font-semibold"},"Companion Hunter Rate",-1))]),s("div",eo,d(((C=(i=e.form.priceListId.selfItem.price_list_type)==null?void 0:i.currency)==null?void 0:C.symbol)||"$")+d(e.form.priceListId.selfItem.companion_hunter_costs[0].amount),1),t[69]||(t[69]=s("div",{class:"text-sm text-gray-600 mt-1"},"per companion hunter",-1))]}),_:1})]),_:1})):q("",!0),((te=e.form.priceListId.selfItem.observer)==null?void 0:te.length)>0?(f(),V(m,{key:1,outlined:"",class:"bg-green-50"},{default:n(()=>[a(r,{class:"p-4"},{default:n(()=>{var i,C;return[s("div",to,[a(l,{name:"visibility",color:"success"}),t[70]||(t[70]=s("span",{class:"font-semibold"},"Observer Rate",-1))]),s("div",so,d(((C=(i=e.form.priceListId.selfItem.price_list_type)==null?void 0:i.currency)==null?void 0:C.symbol)||"$")+d(e.form.priceListId.selfItem.observer[0].amount),1),t[71]||(t[71]=s("div",{class:"text-sm text-gray-600 mt-1"},"per observer",-1))]}),_:1})]),_:1})):q("",!0)])):q("",!0),(se=e.form.priceListId)!=null&&se.selfItem?q("",!0):(f(),V(b,{key:1,color:"secondary",class:"mb-4",border:"left"},{title:n(()=>t[72]||(t[72]=[h("No Package Selected")])),default:n(()=>[t[73]||(t[73]=h(" Select a reference package in the previous step to see companion and observer rates. "))]),_:1})),s("div",ao,[a(P,{modelValue:e.form.no_of_observers,"onUpdate:modelValue":t[23]||(t[23]=i=>e.form.no_of_observers=i),label:"Number of Observers (Optional)",placeholder:"Enter Number of Observers",type:"number"},null,8,["modelValue"]),a(P,{modelValue:e.form.no_of_companions,"onUpdate:modelValue":t[24]||(t[24]=i=>e.form.no_of_companions=i),label:"Number of Companions (Optional)",placeholder:"Enter Number of Companions",type:"number"},null,8,["modelValue"])])])],512),[[ie,e.currentStep===3]]),ne(s("div",oo,[s("div",no,[s("div",io,[a(l,{name:"fact_check",color:"primary",size:"large"}),t[74]||(t[74]=s("h3",{class:"text-xl font-bold text-gray-800"},"Review Your Enquiry",-1))]),a(b,{color:"info",class:"mb-4",border:"left"},{title:n(()=>t[75]||(t[75]=[h("Please Review")])),default:n(()=>[t[76]||(t[76]=h(" Review all the information below before submitting your enquiry. "))]),_:1}),a(m,{outlined:"",class:"mb-4"},{default:n(()=>[a(T,{class:"flex items-center gap-2"},{default:n(()=>[a(l,{name:"person",size:"small",color:"primary"}),t[77]||(t[77]=h(" Customer Information "))]),_:1}),a(r,null,{default:n(()=>{var i,C;return[s("div",ro,[s("div",null,[t[78]||(t[78]=s("span",{class:"text-gray-600"},"Full Name:",-1)),s("span",lo,d(e.form.full_name||"N/A"),1)]),s("div",null,[t[79]||(t[79]=s("span",{class:"text-gray-600"},"Country:",-1)),s("span",co,d(((i=e.form.country)==null?void 0:i.text)||"N/A"),1)]),s("div",null,[t[80]||(t[80]=s("span",{class:"text-gray-600"},"Nationality:",-1)),s("span",mo,d(((C=e.form.nationality)==null?void 0:C.text)||"N/A"),1)]),s("div",null,[t[81]||(t[81]=s("span",{class:"text-gray-600"},"Email:",-1)),s("span",uo,d(e.form.email||"N/A"),1)]),s("div",null,[t[82]||(t[82]=s("span",{class:"text-gray-600"},"Phone:",-1)),s("span",fo,d(e.form.phone||"N/A"),1)]),s("div",null,[t[83]||(t[83]=s("span",{class:"text-gray-600"},"Address:",-1)),s("span",po,d(e.form.address||"N/A"),1)])])]}),_:1})]),_:1}),a(m,{outlined:"",class:"mb-4"},{default:n(()=>[a(T,{class:"flex items-center gap-2"},{default:n(()=>[a(l,{name:"pets",size:"small",color:"primary"}),h(" Selected Species ("+d(e.speciesObjects.length)+") ",1)]),_:1}),a(r,null,{default:n(()=>[e.speciesObjects.length>0?(f(),w("div",go,[(f(!0),w(j,null,Q(e.speciesObjects,(i,C)=>(f(),V(z,{key:C,text:`${i.name} (x${i.quantity})`,color:"primary"},null,8,["text"]))),128))])):(f(),w("span",yo,"No species selected"))]),_:1})]),_:1}),a(m,{outlined:"",class:"mb-4"},{default:n(()=>[a(T,{class:"flex items-center gap-2"},{default:n(()=>[a(l,{name:"groups",size:"small",color:"primary"}),t[84]||(t[84]=h(" Hunt Details "))]),_:1}),a(r,null,{default:n(()=>{var i;return[s("div",ho,[s("div",null,[t[85]||(t[85]=s("span",{class:"text-gray-600"},"Hunting Area:",-1)),s("span",_o,d(((i=e.form.area)==null?void 0:i.text)||"N/A"),1)]),s("div",null,[t[86]||(t[86]=s("span",{class:"text-gray-600"},"Number of Days:",-1)),s("span",bo,d(e.form.no_of_days||"N/A"),1)]),s("div",null,[t[87]||(t[87]=s("span",{class:"text-gray-600"},"Observers:",-1)),s("span",vo,d(e.form.no_of_observers||0),1)]),s("div",null,[t[88]||(t[88]=s("span",{class:"text-gray-600"},"Companions:",-1)),s("span",So,d(e.form.no_of_companions||0),1)])])]}),_:1})]),_:1}),a(m,{outlined:"",class:"mb-4"},{default:n(()=>[a(T,{class:"flex items-center gap-2"},{default:n(()=>[a(l,{name:"event",size:"small",color:"primary"}),t[89]||(t[89]=h(" Schedule "))]),_:1}),a(r,null,{default:n(()=>{var i;return[s("div",ko,[s("div",null,[t[90]||(t[90]=s("span",{class:"text-gray-600"},"Season:",-1)),s("span",Io,d(((i=e.form.season)==null?void 0:i.text)||"N/A"),1)]),s("div",null,[t[91]||(t[91]=s("span",{class:"text-gray-600"},"Preferred Date:",-1)),s("span",wo,d(e.formatReviewDate(e.form.preferred_date)),1)]),s("div",null,[t[92]||(t[92]=s("span",{class:"text-gray-600"},"Start Date:",-1)),s("span",Do,d(e.formatReviewDate(e.form.start_date)),1)]),s("div",null,[t[93]||(t[93]=s("span",{class:"text-gray-600"},"End Date:",-1)),s("span",Co,d(e.formatReviewDate(e.form.end_date)),1)])])]}),_:1})]),_:1}),e.form.priceListId?(f(),V(m,{key:0,outlined:"",class:"mb-4 bg-blue-50"},{default:n(()=>[a(T,{class:"flex items-center gap-2"},{default:n(()=>[a(l,{name:"inventory_2",size:"small",color:"info"}),t[94]||(t[94]=h(" Reference Package "))]),_:1}),a(r,null,{default:n(()=>{var i;return[s("span",Vo,d(((i=e.form.priceListId)==null?void 0:i.text)||"N/A"),1)]}),_:1})]),_:1})):q("",!0),e.selectedSafariExtras.length>0?(f(),V(m,{key:1,outlined:"",class:"mb-4"},{default:n(()=>[a(T,{class:"flex items-center gap-2"},{default:n(()=>[a(l,{name:"hiking",size:"small",color:"primary"}),h(" Safari Extras ("+d(e.selectedSafariExtras.length)+") ",1)]),_:1}),a(r,null,{default:n(()=>[s("div",$o,[(f(!0),w(j,null,Q(e.selectedSafariExtras,i=>{var C;return f(),V(z,{key:i.id,text:`${i.name} - ${((C=i.currency)==null?void 0:C.symbol)||"$"}${i.amount}`,color:"success"},null,8,["text"])}),128))])]),_:1})]),_:1})):q("",!0)])],512),[[ie,e.currentStep===4]])]}),_:1},512),a(I,{class:"my-6"}),s("div",qo,[s("div",null,[e.currentStep>0?(f(),V(u,{key:0,preset:"secondary",icon:"arrow_back",onClick:e.previousStep},{default:n(()=>t[95]||(t[95]=[h(" Previous ")])),_:1},8,["onClick"])):q("",!0)]),s("div",Ao,[a(u,{preset:"secondary",onClick:e.handleGoBack},{default:n(()=>t[96]||(t[96]=[h(" Cancel ")])),_:1},8,["onClick"]),e.currentStep<e.wizardSteps.length-1?(f(),V(u,{key:0,color:"primary","icon-right":"arrow_forward",disabled:!e.canProceedToNextStep,"aria-disabled":!e.canProceedToNextStep,class:Ge({"opacity-60 pointer-events-none":!e.canProceedToNextStep}),onClick:e.nextStep},{default:n(()=>t[97]||(t[97]=[h(" Next ")])),_:1},8,["disabled","aria-disabled","class","onClick"])):(f(),V(u,{key:1,loading:e.saving,icon:"save",color:"success",disabled:!e.isValidForm,onClick:t[25]||(t[25]=E=>e.validateForm()&&e.submit())},{default:n(()=>[h(d(e.isEditMode?"Update Enquiry":"Submit Enquiry"),1)]),_:1},8,["loading","disabled"]))])])])):(f(),V(g,{key:0,onDownloadBtnPressed:t[2]||(t[2]=E=>e.downloadPdf(E.selfitem.pdf)),onViewBtnPressed:e.viewInquiries,onEditBtnPressed:e.editInquiry},null,8,["onViewBtnPressed","onEditBtnPressed"]))],64))]),_:1})]),_:1})}const Mo=ue(Vs,[["render",Po],["__scopeId","data-v-9519bb03"]]);export{Mo as default};
//# sourceMappingURL=SalesInquiries-Bjrjik9B.js.map
