{"version":3,"file":"Signup-jTuh9PH7.js","sources":["../../src/pages/auth/Signup.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"form\" @submit.prevent=\"submit\">\n    <h1 class=\"font-semibold text-4xl mb-4\">Sign up</h1>\n    <p class=\"text-base mb-4 leading-5\">\n      Have an account?\n      <RouterLink :to=\"{ name: 'login' }\" class=\"font-semibold text-primary\">Login</RouterLink>\n    </p>\n    <VaInput\n      v-model=\"formData.email\"\n      :rules=\"[\n        (v: any) => !!v || 'Email field is required',\n        (v: any) => /.+@.+\\..+/.test(v as string) || 'Email should be valid',\n      ]\"\n      class=\"mb-4\"\n      label=\"Email\"\n      type=\"email\"\n    />\n\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n      <VaInput\n        ref=\"password1\"\n        v-model=\"formData.password\"\n        :rules=\"passwordRules\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"Password\"\n        messages=\"Password should be 8+ characters: letters, numbers, and special characters.\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n      <VaInput\n        ref=\"password2\"\n        v-model=\"formData.repeatPassword\"\n        :rules=\"[\n          (v: any) => !!v || 'Repeat Password field is required',\n          (v: any) => v === formData.password || 'Passwords don\\'t match',\n        ]\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"Repeat Password\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n    </VaValue>\n\n    <div class=\"flex justify-center mt-4\">\n      <VaButton class=\"w-full\" @click=\"submit\"> Create account</VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useForm, useToast } from 'vuestic-ui'\nimport axios from 'axios' // Import Axios\n// import { text } from 'stream/consumers'\n\nconst { validate } = useForm('form')\nconst { push } = useRouter()\nconst { init } = useToast()\n\nconst formData = reactive({\n  email: '',\n  username: '',\n  password: '',\n  repeatPassword: '',\n  first_name: '',\n  last_name: '',\n})\n\nconst submit = async () => {\n  if (!validate()) {\n    init({\n      message: 'Please fill all required fields',\n      color: 'danger',\n    })\n    return\n  }\n  try {\n    const registerUrl = import.meta.env.VITE_APP_BASE_URL + import.meta.env.VITE_APP_REGISTER_URL\n\n    const data = JSON.stringify({\n      username: formData.email,\n      password: formData.password,\n      password2: formData.repeatPassword,\n      email: formData.email,\n      first_name: 'John',\n      last_name: 'Doe',\n    })\n    const config = {\n      method: 'post',\n      maxBodyLength: Infinity,\n      url: registerUrl,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: data,\n    }\n\n    const response = await axios.request(config)\n\n    if (response.status === 201) {\n      sessionStorage.setItem('access', response.data.access)\n      sessionStorage.setItem('refresh', response.data.access)\n\n      init({\n        message: \"You've successfully signed up\",\n        color: 'success',\n      })\n      push({ name: 'login' })\n    }\n  } catch (error) {\n    init({\n      message: 'Something went wrong, while Creating an account',\n      color: 'danger',\n    })\n  }\n}\n\nconst passwordRules: ((v: string) => boolean | string)[] = [\n  (v: any) => !!v || 'Password field is required',\n  (v: any) => (v && v.length >= 8) || 'Password must be at least 8 characters long',\n  (v: any) => (v && /[A-Za-z]/.test(v as any)) || 'Password must contain at least one letter',\n  (v: any) => (v && /\\d/.test(v as any)) || 'Password must contain at least one number',\n  (v: any) => (v && /[!@#$%^&*(),.?\":{}|<>]/.test(v as any)) || 'Password must contain at least one special character',\n]\n</script>\n"],"names":["validate","useForm","push","useRouter","init","useToast","formData","reactive","submit","registerUrl","data","config","response","axios","passwordRules","v"],"mappings":"yTAwEA,KAAM,CAAE,SAAAA,CAAA,EAAaC,EAAQ,MAAM,EAC7B,CAAE,KAAAC,CAAA,EAASC,EAAA,EACX,CAAE,KAAAC,CAAA,EAASC,EAAA,EAEXC,EAAWC,EAAS,CACxB,MAAO,GACP,SAAU,GACV,SAAU,GACV,eAAgB,GAChB,WAAY,GACZ,UAAW,EAAA,CACZ,EAEKC,EAAS,SAAY,CACzB,GAAI,CAACR,IAAY,CACfI,EAAK,CACH,QAAS,kCACT,MAAO,QAAA,CACR,EACD,MACF,CACA,GAAI,CACF,MAAMK,EAAc,0DAEdC,EAAO,KAAK,UAAU,CAC1B,SAAUJ,EAAS,MACnB,SAAUA,EAAS,SACnB,UAAWA,EAAS,eACpB,MAAOA,EAAS,MAChB,WAAY,OACZ,UAAW,KAAA,CACZ,EACKK,EAAS,CACb,OAAQ,OACR,cAAe,IACf,IAAKF,EACL,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAAC,CAAA,EAGIE,EAAW,MAAMC,EAAM,QAAQF,CAAM,EAEvCC,EAAS,SAAW,MACtB,eAAe,QAAQ,SAAUA,EAAS,KAAK,MAAM,EACrD,eAAe,QAAQ,UAAWA,EAAS,KAAK,MAAM,EAEtDR,EAAK,CACH,QAAS,gCACT,MAAO,SAAA,CACR,EACDF,EAAK,CAAE,KAAM,QAAS,EAE1B,MAAgB,CACdE,EAAK,CACH,QAAS,kDACT,MAAO,QAAA,CACR,CACH,CACF,EAEMU,EAAqD,CACxDC,GAAW,CAAC,CAACA,GAAK,6BAClBA,GAAYA,GAAKA,EAAE,QAAU,GAAM,8CACnCA,GAAYA,GAAK,WAAW,KAAKA,CAAQ,GAAM,4CAC/CA,GAAYA,GAAK,KAAK,KAAKA,CAAQ,GAAM,4CACzCA,GAAYA,GAAK,yBAAyB,KAAKA,CAAQ,GAAM,sDAAA"}