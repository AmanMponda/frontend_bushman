{"version":3,"file":"ManageQuota-C7ZFDQlU.js","sources":["../../src/pages/module-settings/ManageQuota.vue","../../src/pages/module-settings/ManageQuota.vue"],"sourcesContent":["<template>\n  <VaCard class=\"p-6\">\n    <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between\">\n      <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n        <VaButton v-if=\"!showQuotaList\" class=\"px-2 py-2\" icon=\"arrow_back\" size=\"small\" @click=\"toggleQuotaView\">\n          Go Back\n        </VaButton>\n      </div>\n      <VaButtonGroup>\n        <VaButton\n          class=\"px-2 py-2\"\n          color=\"primary\"\n          label=\"Add New Quota\"\n          icon=\"add\"\n          size=\"small\"\n          @click=\"showAddQuotaModal()\"\n        >\n          Add a New Quota\n        </VaButton>\n      </VaButtonGroup>\n    </div>\n\n    <!-- Use ModuleTable for quota list -->\n    <ModuleTable\n      v-if=\"showQuotaList\"\n      :items=\"items\"\n      :columns=\"columns\"\n      :loading=\"loadingQuotas\"\n      btn-view-icon=\"visibility\"\n      :show-edit=\"true\"\n      :show-delete=\"true\"\n      @onView=\"viewQuotaDetails\"\n      @onEdit=\"editQuota\"\n      @onDelete=\"confirmDeleteQuota\"\n    ></ModuleTable>\n\n    <!-- Species Form Section (when showQuotaList is false) -->\n    <div v-else class=\"p-2\">\n      <VaForm ref=\"sformRef\" class=\"mb-6\">\n        <div class=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-4\">\n          <VaValue :default-value=\"false\">\n            <VaSelect\n              v-model=\"sform.salesQuota\"\n              :options=\"quotasOptions\"\n              label=\"Sales Quota\"\n              :rules=\"[(v: any) => !!v || 'Sales Quota is required']\"\n              placeholder=\"Select Sales Quota\"\n              :disabled=\"true\"\n            >\n              <template #appendInner>\n                <VaIcon name=\"av_timer\" size=\"small\" color=\"primary\" />\n              </template>\n            </VaSelect>\n          </VaValue>\n\n          <VaSelect\n            v-model=\"sform.area\"\n            label=\"Hunting Area\"\n            :options=\"areasOptions\"\n            placeholder=\"Select Hunting Area\"\n            :rules=\"[(v: any) => !!v || 'Hunting Area is required']\"\n            required\n          />\n        </div>\n\n        <VaDivider orientation=\"left\" class=\"py-12\">\n          <span caption class=\"px-2\">Add a List of Species</span>\n        </VaDivider>\n\n        <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between\">\n          <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n            <div class=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-4\">\n              <VaSelect\n                v-model=\"sform.id\"\n                label=\"Species\"\n                :options=\"speciesOptions\"\n                placeholder=\"Select Species\"\n                :rules=\"[(v: any) => !!v || 'Species is required']\"\n                required\n                @update:modelValue=\"updateQuantitySelectedSpecies\"\n              />\n\n              <VaCounter v-model=\"sform.quantity\" label=\"Quantity\" manual-input :min=\"1\" :max=\"100\" />\n            </div>\n          </div>\n          <VaButtonGroup>\n            <VaButton\n              class=\"px-0 py-0\"\n              color=\"primary\"\n              icon=\"add\"\n              size=\"small\"\n              round\n              @click=\"addNewSpeciesItemToStorage()\"\n            />\n          </VaButtonGroup>\n        </div>\n      </VaForm>\n\n      <div class=\"mb-6\">\n        <VaList>\n          <VaListLabel v-if=\"speciesObjects.length > 0\" class=\"text-md mb-2 text-left\">Selected Species</VaListLabel>\n          <VaListItem v-for=\"(s, index) in speciesObjects\" :key=\"index\" class=\"list__item\">\n            <VaListItemSection>\n              <VaListItemLabel>\n                Name: {{ s.name }}\n                <VaIcon name=\"delete\" size=\"small\" color=\"primary\" @click=\"deleteFromStorage(index)\" />\n              </VaListItemLabel>\n              <VaListItemLabel caption>Quantity: {{ s.quantity }}</VaListItemLabel>\n            </VaListItemSection>\n          </VaListItem>\n        </VaList>\n      </div>\n\n      <div class=\"mb-6\">\n        <VaButton\n          :disabled=\"!isValidSForm\"\n          color=\"primary\"\n          :loading=\"savingQuotaSpecies\"\n          icon=\"save\"\n          icon-color=\"#fff\"\n          @click=\"validateSForm() && addNewSpeciesToQuota()\"\n        >\n          save\n        </VaButton>\n      </div>\n    </div>\n\n    <!-- Add/Edit Quota Modal -->\n    <VaModal v-model=\"showModal\" z-index=\"1\" :overlay=\"false\" size=\"small\" hide-default-actions @cancel=\"resetModal()\">\n      <VaForm ref=\"formRef\" class=\"p-6\">\n        <h3 class=\"font-bold text-lg mb-4\">{{ isEditing ? 'Edit Quota' : 'Add Quota' }}</h3>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <VaInput\n            v-model=\"form.name\"\n            label=\"Name\"\n            placeholder=\"Enter Quota Name\"\n            type=\"text\"\n            :rules=\"[(v: any) => !!v || 'Name is required']\"\n            required\n          />\n\n          <VaDateInput\n            v-model=\"form.start_date\"\n            label=\"Start Date\"\n            :rules=\"[(v: any) => !!v || 'Start Date is required']\"\n            manual-input\n            placeholder=\"Select a date\"\n          />\n\n          <VaDateInput\n            v-model=\"form.end_date\"\n            label=\"End Date\"\n            :rules=\"[(v: any) => !!v || 'End Date is required']\"\n            manual-input\n            placeholder=\"Select a date\"\n          />\n        </div>\n        <div class=\"mb-4\">\n          <VaButton\n            :loading=\"savingQuota\"\n            :disabled=\"!isValidForm || savingQuota\"\n            color=\"primary\"\n            @click=\"isEditing ? updateQuotaItem() : createNewQuota()\"\n          >\n            {{ isEditing ? 'Update' : 'Save' }}\n          </VaButton>\n          <VaButton class=\"ml-2\" color=\"secondary\" :disabled=\"savingQuota\" @click=\"resetModal()\"> Cancel </VaButton>\n        </div>\n      </VaForm>\n    </VaModal>\n\n    <!-- Delete Confirmation Modal -->\n    <VaModal v-model=\"showDeleteModal\" z-index=\"1\" :overlay=\"false\" size=\"small\" hide-default-actions>\n      <div class=\"p-6\">\n        <h3 class=\"font-bold text-lg mb-4 text-center\">Confirm Delete</h3>\n        <p class=\"mb-6 text-center\">\n          Are you sure you want to delete quota <strong>\"{{ quotaToDelete?.name }}\"</strong>?\n          <br />\n          <span class=\"text-sm text-gray-500\">This action cannot be undone.</span>\n        </p>\n        <div class=\"flex justify-center gap-4\">\n          <VaButton color=\"danger\" :loading=\"deletingQuota\" @click=\"deleteQuotaItem()\"> Delete </VaButton>\n          <VaButton color=\"secondary\" :disabled=\"deletingQuota\" @click=\"cancelDelete()\"> Cancel </VaButton>\n        </div>\n      </div>\n    </VaModal>\n  </VaCard>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue'\nimport { useQuotaStore } from '../../stores/quota-store'\nimport { mapActions } from 'pinia'\nimport { reactive } from 'vue'\nimport { useToast, useForm } from 'vuestic-ui'\nimport handleErrors from '../../utils/errorHandler'\nimport { useSettingsStore } from '../../stores/settings-store'\nimport ModuleTable from './components/ModuleTable.vue'\n\ninterface QuotaItem {\n  id: number\n  name: string\n  start_date: string\n  end_date: string\n  description?: string\n  user_id?: number\n  create_at?: string\n  update_at?: string\n}\n\ninterface Option {\n  value: number | string\n  text: string\n  quantity?: number\n}\n\ninterface FormData {\n  id: number | null\n  name: string\n  start_date: Date | string | null\n  end_date: Date | string | null\n  description: string\n}\n\ninterface SFormData {\n  id: Option | null\n  quantity: number\n  salesQuota: Option | null\n  area: Option | null\n}\n\ninterface ApiResponse {\n  success: boolean\n  data: QuotaItem[]\n  message: string\n  count: number\n}\n\nexport default defineComponent({\n  name: 'QuotaPage',\n  components: {\n    ModuleTable,\n  },\n\n  setup() {\n    const formRef = ref(null) as any\n    const sformRef = ref(null) as any\n\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(formRef)\n\n    const {\n      isValid: isValidSForm,\n      validate: validateSForm,\n      resetValidation: resetValidationSForm,\n      reset: resetSForm,\n    } = useForm(sformRef)\n\n    // Define columns for the ModuleTable\n    const columns = [\n      { key: 'id', label: 'ID', sortable: true },\n      { key: 'name', label: 'NAME', sortable: true },\n      { key: 'start_date', label: 'START DATE', sortable: true },\n      { key: 'end_date', label: 'END DATE', sortable: true },\n      { key: 'actions', label: 'ACTIONS', width: '150px' },\n    ]\n\n    return {\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      isValidSForm,\n      validateSForm,\n      resetValidationSForm,\n      resetForm,\n      resetSForm,\n      formRef,\n      sformRef,\n      columns,\n    }\n  },\n\n  data() {\n    return {\n      items: [] as QuotaItem[],\n      editedItemId: null as number | null,\n      editedItem: null as QuotaItem | null,\n      createdItem: { name: '', start_date: null, end_date: null },\n      toast: useToast(),\n      form: reactive<FormData>({\n        id: null,\n        name: '',\n        start_date: null,\n        end_date: null,\n        description: '',\n      }),\n      sform: reactive<SFormData>({\n        id: null,\n        quantity: 1,\n        salesQuota: null,\n        area: null,\n      }),\n      speciesOptions: [] as Option[],\n      areasOptions: [] as Option[],\n      speciesObjects: [] as any[],\n      showModal: false,\n      showDeleteModal: false,\n      quotasOptions: [] as Option[],\n      showQuotaList: true,\n      quotaItems: [] as any[],\n      savingQuotaSpecies: false,\n      loadingQuotas: false,\n      savingQuota: false,\n      deletingQuota: false,\n      isEditing: false,\n      quotaToDelete: null as QuotaItem | null,\n      currentViewQuota: null as QuotaItem | null,\n    }\n  },\n\n  mounted() {\n    this.getQs()\n    this.getSpeciesItems()\n    this.getAreas()\n  },\n\n  methods: {\n    ...mapActions(useQuotaStore, [\n      'getQuotas',\n      'createQuota',\n      'updateQuota',\n      'deleteQuota',\n      'getSpeciesList',\n      'getAreaList',\n      'createQuotaAreaSpecies',\n    ]),\n\n    ...mapActions(useSettingsStore, ['getLicenceRegulatoryHuntingPackageSpecies']),\n\n    // Helper methods\n    formatDate(date: Date | string | null): string {\n      if (!date) return ''\n      const d = new Date(date)\n      const year = d.getFullYear()\n      const month = String(d.getMonth() + 1).padStart(2, '0')\n      const day = String(d.getDate()).padStart(2, '0')\n      return `${year}-${month}-${day}`\n    },\n\n    formatDisplayDate(date: string | null): string {\n      if (!date) return '-'\n      return new Date(date).toLocaleDateString()\n    },\n\n    generateQuotaYear(startDate: string, endDate: string): string {\n      if (!startDate || !endDate) return ''\n      const startYear = new Date(startDate).getFullYear()\n      const endYear = new Date(endDate).getFullYear()\n      return `${startYear}-${endYear}`\n    },\n\n    // ADD THE MISSING resetModal METHOD\n    resetModal() {\n      this.isEditing = false\n      this.showModal = false\n      this.form.id = null\n      this.form.name = ''\n      this.form.start_date = null\n      this.form.end_date = null\n      this.form.description = ''\n      if (this.formRef) {\n        this.resetValidationForm()\n      }\n    },\n\n    // Toggle between list view and form view\n    toggleQuotaView() {\n      this.showQuotaList = !this.showQuotaList\n      if (this.showQuotaList) {\n        this.currentViewQuota = null\n        this.sform.salesQuota = null\n      }\n    },\n\n    // View quota details (species form) - called from ModuleTable\n    viewQuotaDetails(rowData: QuotaItem) {\n      console.log('View quota details:', rowData)\n      this.showQuotaList = false\n      this.currentViewQuota = rowData\n      this.sform.salesQuota = {\n        value: rowData.id,\n        text: this.generateQuotaYear(rowData.start_date, rowData.end_date) + ` - ${rowData.name}`,\n      }\n      // Load species for this quota\n      this.getSpeciesItems()\n    },\n\n    // Edit quota details (opens modal) - called from ModuleTable\n    editQuota(rowData: QuotaItem) {\n      console.log('Edit quota:', rowData)\n      this.isEditing = true\n      this.form.id = rowData.id\n      this.form.name = rowData.name\n      this.form.start_date = rowData.start_date ? new Date(rowData.start_date) : null\n      this.form.end_date = rowData.end_date ? new Date(rowData.end_date) : null\n      this.form.description = rowData.description || ''\n      this.showModal = true\n    },\n\n    // Delete quota - called from ModuleTable\n    confirmDeleteQuota(rowData: QuotaItem) {\n      console.log('Delete quota:', rowData)\n      this.quotaToDelete = rowData\n      this.showDeleteModal = true\n    },\n\n    cancelDelete() {\n      this.quotaToDelete = null\n      this.showDeleteModal = false\n    },\n\n    async deleteQuotaItem() {\n      if (!this.quotaToDelete) return\n\n      this.deletingQuota = true\n      try {\n        const response = await this.deleteQuota(this.quotaToDelete.id)\n\n        // Check response format\n        const success = response.status === 200 || response.status === 204 || response.data?.success\n\n        if (success) {\n          this.toast.init({\n            message: response.data?.message || 'Quota deleted successfully',\n            color: 'success',\n          })\n\n          // Remove from local arrays\n          this.items = this.items.filter((item) => item.id !== this.quotaToDelete!.id)\n          this.quotasOptions = this.quotasOptions.filter((option) => option.value !== this.quotaToDelete!.id)\n\n          this.cancelDelete()\n        } else {\n          this.toast.init({\n            message: response.data?.message || 'Delete operation failed',\n            color: 'warning',\n          })\n        }\n      } catch (error: any) {\n        console.error('Delete error:', error)\n\n        // If method not allowed, try alternative\n        if (error.response?.status === 405) {\n          this.toast.init({\n            message: 'Delete method not supported by API. Removing locally.',\n            color: 'warning',\n          })\n\n          // Remove from local arrays anyway\n          this.items = this.items.filter((item) => item.id !== this.quotaToDelete!.id)\n          this.quotasOptions = this.quotasOptions.filter((option) => option.value !== this.quotaToDelete!.id)\n\n          this.cancelDelete()\n        } else {\n          this.toast.init({\n            message: error.response?.data?.message || 'Failed to delete quota',\n            color: 'danger',\n          })\n        }\n      } finally {\n        this.deletingQuota = false\n      }\n    },\n\n    async updateQuotaItem() {\n      if (!this.form.id) return\n\n      this.savingQuota = true\n      try {\n        const data = {\n          id: this.form.id,\n          name: this.form.name,\n          start_date: this.formatDate(this.form.start_date),\n          end_date: this.formatDate(this.form.end_date),\n          description: this.form.description,\n        }\n\n        console.log('Updating quota with data:', data)\n\n        const response = await this.updateQuota(data)\n        if (response.status === 200) {\n          this.toast.init({\n            message: response.data.message || 'Quota updated successfully',\n            color: 'success',\n          })\n\n          // Update the item in the local array\n          const index = this.items.findIndex((item) => item.id === this.form.id)\n          if (index !== -1) {\n            const updatedItem = {\n              ...this.items[index],\n              name: this.form.name,\n              start_date: this.formatDate(this.form.start_date),\n              end_date: this.formatDate(this.form.end_date),\n            }\n\n            this.items = [...this.items.slice(0, index), updatedItem, ...this.items.slice(index + 1)]\n\n            // Also update quotasOptions\n            const quotaIndex = this.quotasOptions.findIndex((option) => option.value === this.form.id)\n            if (quotaIndex !== -1) {\n              const result = this.generateQuotaYear(\n                this.formatDate(this.form.start_date),\n                this.formatDate(this.form.end_date),\n              )\n              this.quotasOptions = [\n                ...this.quotasOptions.slice(0, quotaIndex),\n                {\n                  value: this.form.id,\n                  text: `${result} - ${this.form.name}`,\n                },\n                ...this.quotasOptions.slice(quotaIndex + 1),\n              ]\n            }\n          }\n\n          this.resetModal()\n          this.showModal = false\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error)\n        this.toast.init({\n          message: '\\n' + errors.map((error: string, index: number) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      } finally {\n        this.savingQuota = false\n      }\n    },\n\n    showAddQuotaModal() {\n      this.resetModal()\n      this.isEditing = false\n      this.showModal = true\n    },\n\n    // Main quota fetching method\n    async getQs(id: number | null = null) {\n      console.log('Fetching quotas...')\n      this.loadingQuotas = true\n      try {\n        const response = await this.getQuotas(id)\n\n        if (response && response.data) {\n          const apiResponse = response.data as ApiResponse\n\n          if (apiResponse.success === true && Array.isArray(apiResponse.data)) {\n            const quotaItems = apiResponse.data\n\n            this.items = quotaItems.map((item: QuotaItem) => ({\n              id: item.id,\n              name: item.name,\n              start_date: item.start_date,\n              end_date: item.end_date,\n            }))\n\n            this.quotasOptions = quotaItems.map((item: QuotaItem) => {\n              const result = this.generateQuotaYear(item.start_date, item.end_date)\n              return {\n                value: item.id,\n                text: `${result} - ${item.name}`,\n              }\n            })\n          } else {\n            console.error('API response indicates failure or invalid data structure')\n            this.items = []\n            this.quotasOptions = []\n          }\n\n          this.loadingQuotas = false\n        } else {\n          console.error('Invalid response from API')\n          this.items = []\n          this.quotasOptions = []\n          this.loadingQuotas = false\n        }\n      } catch (error: any) {\n        this.loadingQuotas = false\n        console.error('Error fetching quotas:', error)\n\n        this.toast.init({\n          message: 'Failed to load quotas. Please try again.',\n          color: 'danger',\n        })\n      }\n    },\n\n    // Get species items for dropdown\n    async getSpeciesItems() {\n      try {\n        const response = await this.getSpeciesList()\n        const speciesItems = response.data.map((item: { id: number; name: string }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n\n        this.speciesOptions = speciesItems\n      } catch (error: any) {\n        console.log('Error fetching species:', error)\n      }\n    },\n\n    // Get areas for dropdown\n    async getAreas() {\n      try {\n        const response = await this.getAreaList()\n        this.areasOptions = response.data.map((item: { id: number; name: string }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n      } catch (error: any) {\n        console.log('Error fetching areas:', error)\n      }\n    },\n\n    // Reset methods\n    resetEditedItem() {\n      this.editedItem = null\n      this.editedItemId = null\n    },\n\n    resetCreatedItem() {\n      this.createdItem = { name: '', start_date: null, end_date: null }\n    },\n\n    updateQuantitySelectedSpecies(species: Option) {\n      if (species && species.quantity) {\n        this.sform.quantity = species.quantity\n      }\n    },\n\n    addNewSpeciesItemToStorage() {\n      if (!this.sform.id || !this.sform.id.value || !this.sform.id.text || !this.sform.quantity) {\n        console.error('Error: Some required fields are null or undefined.')\n        return\n      }\n\n      if (Number(this.sform.quantity) <= 0) {\n        return\n      }\n\n      const exists = this.speciesObjects.some((species: any) => species.id === this.sform.id!.value)\n\n      if (!exists) {\n        this.speciesObjects.push({\n          id: this.sform.id.value as number,\n          name: this.sform.id.text,\n          quantity: this.sform.quantity,\n        })\n      } else {\n        console.log('Species item already exists:', this.sform.id)\n      }\n    },\n\n    deleteFromStorage(index: number) {\n      this.speciesObjects.splice(index, 1)\n    },\n\n    async addNewSpeciesToQuota() {\n      this.savingQuotaSpecies = true\n      if (this.speciesObjects.length === 0) {\n        this.toast.init({ message: 'Please add at least one species item.', color: 'warning' })\n        this.savingQuotaSpecies = false\n        return\n      }\n\n      if (!this.sform.area || !this.sform.salesQuota) {\n        this.toast.init({ message: 'Please select both area and sales quota.', color: 'warning' })\n        this.savingQuotaSpecies = false\n        return\n      }\n\n      const rdata = {\n        area_id: this.sform.area.value,\n        quota_id: this.sform.salesQuota.value,\n        speciesObjects: this.speciesObjects,\n      }\n\n      try {\n        const response = await this.createQuotaAreaSpecies(rdata)\n        if (response.status === 201) {\n          this.savingQuotaSpecies = false\n          this.toast.init({ message: response.data.message, color: 'success' })\n          this.resetSForm()\n          this.resetCreatedItem()\n          this.speciesObjects = []\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error)\n        this.savingQuotaSpecies = false\n\n        this.toast.init({\n          message: '\\n' + errors.map((error: string, index: number) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      }\n    },\n\n    async createNewQuota() {\n      this.savingQuota = true\n\n      // Simple date formatting\n      const formatDateForApi = (date: any): string => {\n        if (!date) return ''\n\n        if (date instanceof Date) {\n          const year = date.getFullYear()\n          const month = String(date.getMonth() + 1).padStart(2, '0')\n          const day = String(date.getDate()).padStart(2, '0')\n          return `${year}-${month}-${day}`\n        }\n\n        if (typeof date === 'string') {\n          // If already in YYYY-MM-DD format, return as-is\n          if (date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            return date\n          }\n\n          // Try to parse\n          const parsed = new Date(date)\n          if (!isNaN(parsed.getTime())) {\n            const year = parsed.getFullYear()\n            const month = String(parsed.getMonth() + 1).padStart(2, '0')\n            const day = String(parsed.getDate()).padStart(2, '0')\n            return `${year}-${month}-${day}`\n          }\n        }\n\n        return String(date)\n      }\n\n      const quota = {\n        name: this.form.name,\n        start_date: formatDateForApi(this.form.start_date),\n        end_date: formatDateForApi(this.form.end_date),\n        description: this.form.description || '',\n      }\n\n      console.log('Creating quota with data:', quota)\n\n      try {\n        const response = await this.createQuota(quota)\n\n        // Check the response format from the store\n        if (response.success || response.status === 201) {\n          this.savingQuota = false\n          this.toast.init({\n            message: response.message || 'Quota created successfully',\n            color: 'success',\n          })\n          this.resetForm()\n\n          // Refresh the quota list\n          this.getQs()\n\n          this.showModal = false\n          this.resetCreatedItem()\n        } else {\n          this.savingQuota = false\n          const errors = handleErrors(response)\n          this.toast.init({\n            message: '\\n' + errors.map((error: string, index: number) => `${index + 1}. ${error}`).join('\\n'),\n            color: 'danger',\n          })\n        }\n      } catch (error: any) {\n        this.savingQuota = false\n        console.error('Error creating quota:', error)\n\n        this.toast.init({\n          message: error.message || 'Failed to create quota',\n          color: 'danger',\n        })\n      }\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n.modal-content {\n  padding: 16px;\n}\n\n.input-group {\n  margin-bottom: 16px;\n}\n\n.input-label {\n  margin-bottom: 8px;\n  font-weight: bold;\n}\n\n.input-container {\n  display: flex;\n  align-items: center;\n}\n\n.input-container > VaDateInput {\n  margin-right: 8px;\n}\n\n.input-container > VaInput {\n  flex: 1;\n}\n\n/* Make action buttons smaller on mobile */\n@media (max-width: 640px) {\n  .flex.gap-2 {\n    flex-direction: column;\n    gap: 4px;\n  }\n\n  .flex.gap-2 .va-button {\n    width: 100%;\n    justify-content: center;\n  }\n}\n</style>\n","<template>\n  <VaCard class=\"p-6\">\n    <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between\">\n      <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n        <VaButton v-if=\"!showQuotaList\" class=\"px-2 py-2\" icon=\"arrow_back\" size=\"small\" @click=\"toggleQuotaView\">\n          Go Back\n        </VaButton>\n      </div>\n      <VaButtonGroup>\n        <VaButton\n          class=\"px-2 py-2\"\n          color=\"primary\"\n          label=\"Add New Quota\"\n          icon=\"add\"\n          size=\"small\"\n          @click=\"showAddQuotaModal()\"\n        >\n          Add a New Quota\n        </VaButton>\n      </VaButtonGroup>\n    </div>\n\n    <!-- Use ModuleTable for quota list -->\n    <ModuleTable\n      v-if=\"showQuotaList\"\n      :items=\"items\"\n      :columns=\"columns\"\n      :loading=\"loadingQuotas\"\n      btn-view-icon=\"visibility\"\n      :show-edit=\"true\"\n      :show-delete=\"true\"\n      @onView=\"viewQuotaDetails\"\n      @onEdit=\"editQuota\"\n      @onDelete=\"confirmDeleteQuota\"\n    ></ModuleTable>\n\n    <!-- Species Form Section (when showQuotaList is false) -->\n    <div v-else class=\"p-2\">\n      <VaForm ref=\"sformRef\" class=\"mb-6\">\n        <div class=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-4\">\n          <VaValue :default-value=\"false\">\n            <VaSelect\n              v-model=\"sform.salesQuota\"\n              :options=\"quotasOptions\"\n              label=\"Sales Quota\"\n              :rules=\"[(v: any) => !!v || 'Sales Quota is required']\"\n              placeholder=\"Select Sales Quota\"\n              :disabled=\"true\"\n            >\n              <template #appendInner>\n                <VaIcon name=\"av_timer\" size=\"small\" color=\"primary\" />\n              </template>\n            </VaSelect>\n          </VaValue>\n\n          <VaSelect\n            v-model=\"sform.area\"\n            label=\"Hunting Area\"\n            :options=\"areasOptions\"\n            placeholder=\"Select Hunting Area\"\n            :rules=\"[(v: any) => !!v || 'Hunting Area is required']\"\n            required\n          />\n        </div>\n\n        <VaDivider orientation=\"left\" class=\"py-12\">\n          <span caption class=\"px-2\">Add a List of Species</span>\n        </VaDivider>\n\n        <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between\">\n          <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n            <div class=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-4\">\n              <VaSelect\n                v-model=\"sform.id\"\n                label=\"Species\"\n                :options=\"speciesOptions\"\n                placeholder=\"Select Species\"\n                :rules=\"[(v: any) => !!v || 'Species is required']\"\n                required\n                @update:modelValue=\"updateQuantitySelectedSpecies\"\n              />\n\n              <VaCounter v-model=\"sform.quantity\" label=\"Quantity\" manual-input :min=\"1\" :max=\"100\" />\n            </div>\n          </div>\n          <VaButtonGroup>\n            <VaButton\n              class=\"px-0 py-0\"\n              color=\"primary\"\n              icon=\"add\"\n              size=\"small\"\n              round\n              @click=\"addNewSpeciesItemToStorage()\"\n            />\n          </VaButtonGroup>\n        </div>\n      </VaForm>\n\n      <div class=\"mb-6\">\n        <VaList>\n          <VaListLabel v-if=\"speciesObjects.length > 0\" class=\"text-md mb-2 text-left\">Selected Species</VaListLabel>\n          <VaListItem v-for=\"(s, index) in speciesObjects\" :key=\"index\" class=\"list__item\">\n            <VaListItemSection>\n              <VaListItemLabel>\n                Name: {{ s.name }}\n                <VaIcon name=\"delete\" size=\"small\" color=\"primary\" @click=\"deleteFromStorage(index)\" />\n              </VaListItemLabel>\n              <VaListItemLabel caption>Quantity: {{ s.quantity }}</VaListItemLabel>\n            </VaListItemSection>\n          </VaListItem>\n        </VaList>\n      </div>\n\n      <div class=\"mb-6\">\n        <VaButton\n          :disabled=\"!isValidSForm\"\n          color=\"primary\"\n          :loading=\"savingQuotaSpecies\"\n          icon=\"save\"\n          icon-color=\"#fff\"\n          @click=\"validateSForm() && addNewSpeciesToQuota()\"\n        >\n          save\n        </VaButton>\n      </div>\n    </div>\n\n    <!-- Add/Edit Quota Modal -->\n    <VaModal v-model=\"showModal\" z-index=\"1\" :overlay=\"false\" size=\"small\" hide-default-actions @cancel=\"resetModal()\">\n      <VaForm ref=\"formRef\" class=\"p-6\">\n        <h3 class=\"font-bold text-lg mb-4\">{{ isEditing ? 'Edit Quota' : 'Add Quota' }}</h3>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <VaInput\n            v-model=\"form.name\"\n            label=\"Name\"\n            placeholder=\"Enter Quota Name\"\n            type=\"text\"\n            :rules=\"[(v: any) => !!v || 'Name is required']\"\n            required\n          />\n\n          <VaDateInput\n            v-model=\"form.start_date\"\n            label=\"Start Date\"\n            :rules=\"[(v: any) => !!v || 'Start Date is required']\"\n            manual-input\n            placeholder=\"Select a date\"\n          />\n\n          <VaDateInput\n            v-model=\"form.end_date\"\n            label=\"End Date\"\n            :rules=\"[(v: any) => !!v || 'End Date is required']\"\n            manual-input\n            placeholder=\"Select a date\"\n          />\n        </div>\n        <div class=\"mb-4\">\n          <VaButton\n            :loading=\"savingQuota\"\n            :disabled=\"!isValidForm || savingQuota\"\n            color=\"primary\"\n            @click=\"isEditing ? updateQuotaItem() : createNewQuota()\"\n          >\n            {{ isEditing ? 'Update' : 'Save' }}\n          </VaButton>\n          <VaButton class=\"ml-2\" color=\"secondary\" :disabled=\"savingQuota\" @click=\"resetModal()\"> Cancel </VaButton>\n        </div>\n      </VaForm>\n    </VaModal>\n\n    <!-- Delete Confirmation Modal -->\n    <VaModal v-model=\"showDeleteModal\" z-index=\"1\" :overlay=\"false\" size=\"small\" hide-default-actions>\n      <div class=\"p-6\">\n        <h3 class=\"font-bold text-lg mb-4 text-center\">Confirm Delete</h3>\n        <p class=\"mb-6 text-center\">\n          Are you sure you want to delete quota <strong>\"{{ quotaToDelete?.name }}\"</strong>?\n          <br />\n          <span class=\"text-sm text-gray-500\">This action cannot be undone.</span>\n        </p>\n        <div class=\"flex justify-center gap-4\">\n          <VaButton color=\"danger\" :loading=\"deletingQuota\" @click=\"deleteQuotaItem()\"> Delete </VaButton>\n          <VaButton color=\"secondary\" :disabled=\"deletingQuota\" @click=\"cancelDelete()\"> Cancel </VaButton>\n        </div>\n      </div>\n    </VaModal>\n  </VaCard>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue'\nimport { useQuotaStore } from '../../stores/quota-store'\nimport { mapActions } from 'pinia'\nimport { reactive } from 'vue'\nimport { useToast, useForm } from 'vuestic-ui'\nimport handleErrors from '../../utils/errorHandler'\nimport { useSettingsStore } from '../../stores/settings-store'\nimport ModuleTable from './components/ModuleTable.vue'\n\ninterface QuotaItem {\n  id: number\n  name: string\n  start_date: string\n  end_date: string\n  description?: string\n  user_id?: number\n  create_at?: string\n  update_at?: string\n}\n\ninterface Option {\n  value: number | string\n  text: string\n  quantity?: number\n}\n\ninterface FormData {\n  id: number | null\n  name: string\n  start_date: Date | string | null\n  end_date: Date | string | null\n  description: string\n}\n\ninterface SFormData {\n  id: Option | null\n  quantity: number\n  salesQuota: Option | null\n  area: Option | null\n}\n\ninterface ApiResponse {\n  success: boolean\n  data: QuotaItem[]\n  message: string\n  count: number\n}\n\nexport default defineComponent({\n  name: 'QuotaPage',\n  components: {\n    ModuleTable,\n  },\n\n  setup() {\n    const formRef = ref(null) as any\n    const sformRef = ref(null) as any\n\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(formRef)\n\n    const {\n      isValid: isValidSForm,\n      validate: validateSForm,\n      resetValidation: resetValidationSForm,\n      reset: resetSForm,\n    } = useForm(sformRef)\n\n    // Define columns for the ModuleTable\n    const columns = [\n      { key: 'id', label: 'ID', sortable: true },\n      { key: 'name', label: 'NAME', sortable: true },\n      { key: 'start_date', label: 'START DATE', sortable: true },\n      { key: 'end_date', label: 'END DATE', sortable: true },\n      { key: 'actions', label: 'ACTIONS', width: '150px' },\n    ]\n\n    return {\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      isValidSForm,\n      validateSForm,\n      resetValidationSForm,\n      resetForm,\n      resetSForm,\n      formRef,\n      sformRef,\n      columns,\n    }\n  },\n\n  data() {\n    return {\n      items: [] as QuotaItem[],\n      editedItemId: null as number | null,\n      editedItem: null as QuotaItem | null,\n      createdItem: { name: '', start_date: null, end_date: null },\n      toast: useToast(),\n      form: reactive<FormData>({\n        id: null,\n        name: '',\n        start_date: null,\n        end_date: null,\n        description: '',\n      }),\n      sform: reactive<SFormData>({\n        id: null,\n        quantity: 1,\n        salesQuota: null,\n        area: null,\n      }),\n      speciesOptions: [] as Option[],\n      areasOptions: [] as Option[],\n      speciesObjects: [] as any[],\n      showModal: false,\n      showDeleteModal: false,\n      quotasOptions: [] as Option[],\n      showQuotaList: true,\n      quotaItems: [] as any[],\n      savingQuotaSpecies: false,\n      loadingQuotas: false,\n      savingQuota: false,\n      deletingQuota: false,\n      isEditing: false,\n      quotaToDelete: null as QuotaItem | null,\n      currentViewQuota: null as QuotaItem | null,\n    }\n  },\n\n  mounted() {\n    this.getQs()\n    this.getSpeciesItems()\n    this.getAreas()\n  },\n\n  methods: {\n    ...mapActions(useQuotaStore, [\n      'getQuotas',\n      'createQuota',\n      'updateQuota',\n      'deleteQuota',\n      'getSpeciesList',\n      'getAreaList',\n      'createQuotaAreaSpecies',\n    ]),\n\n    ...mapActions(useSettingsStore, ['getLicenceRegulatoryHuntingPackageSpecies']),\n\n    // Helper methods\n    formatDate(date: Date | string | null): string {\n      if (!date) return ''\n      const d = new Date(date)\n      const year = d.getFullYear()\n      const month = String(d.getMonth() + 1).padStart(2, '0')\n      const day = String(d.getDate()).padStart(2, '0')\n      return `${year}-${month}-${day}`\n    },\n\n    formatDisplayDate(date: string | null): string {\n      if (!date) return '-'\n      return new Date(date).toLocaleDateString()\n    },\n\n    generateQuotaYear(startDate: string, endDate: string): string {\n      if (!startDate || !endDate) return ''\n      const startYear = new Date(startDate).getFullYear()\n      const endYear = new Date(endDate).getFullYear()\n      return `${startYear}-${endYear}`\n    },\n\n    // ADD THE MISSING resetModal METHOD\n    resetModal() {\n      this.isEditing = false\n      this.showModal = false\n      this.form.id = null\n      this.form.name = ''\n      this.form.start_date = null\n      this.form.end_date = null\n      this.form.description = ''\n      if (this.formRef) {\n        this.resetValidationForm()\n      }\n    },\n\n    // Toggle between list view and form view\n    toggleQuotaView() {\n      this.showQuotaList = !this.showQuotaList\n      if (this.showQuotaList) {\n        this.currentViewQuota = null\n        this.sform.salesQuota = null\n      }\n    },\n\n    // View quota details (species form) - called from ModuleTable\n    viewQuotaDetails(rowData: QuotaItem) {\n      console.log('View quota details:', rowData)\n      this.showQuotaList = false\n      this.currentViewQuota = rowData\n      this.sform.salesQuota = {\n        value: rowData.id,\n        text: this.generateQuotaYear(rowData.start_date, rowData.end_date) + ` - ${rowData.name}`,\n      }\n      // Load species for this quota\n      this.getSpeciesItems()\n    },\n\n    // Edit quota details (opens modal) - called from ModuleTable\n    editQuota(rowData: QuotaItem) {\n      console.log('Edit quota:', rowData)\n      this.isEditing = true\n      this.form.id = rowData.id\n      this.form.name = rowData.name\n      this.form.start_date = rowData.start_date ? new Date(rowData.start_date) : null\n      this.form.end_date = rowData.end_date ? new Date(rowData.end_date) : null\n      this.form.description = rowData.description || ''\n      this.showModal = true\n    },\n\n    // Delete quota - called from ModuleTable\n    confirmDeleteQuota(rowData: QuotaItem) {\n      console.log('Delete quota:', rowData)\n      this.quotaToDelete = rowData\n      this.showDeleteModal = true\n    },\n\n    cancelDelete() {\n      this.quotaToDelete = null\n      this.showDeleteModal = false\n    },\n\n    async deleteQuotaItem() {\n      if (!this.quotaToDelete) return\n\n      this.deletingQuota = true\n      try {\n        const response = await this.deleteQuota(this.quotaToDelete.id)\n\n        // Check response format\n        const success = response.status === 200 || response.status === 204 || response.data?.success\n\n        if (success) {\n          this.toast.init({\n            message: response.data?.message || 'Quota deleted successfully',\n            color: 'success',\n          })\n\n          // Remove from local arrays\n          this.items = this.items.filter((item) => item.id !== this.quotaToDelete!.id)\n          this.quotasOptions = this.quotasOptions.filter((option) => option.value !== this.quotaToDelete!.id)\n\n          this.cancelDelete()\n        } else {\n          this.toast.init({\n            message: response.data?.message || 'Delete operation failed',\n            color: 'warning',\n          })\n        }\n      } catch (error: any) {\n        console.error('Delete error:', error)\n\n        // If method not allowed, try alternative\n        if (error.response?.status === 405) {\n          this.toast.init({\n            message: 'Delete method not supported by API. Removing locally.',\n            color: 'warning',\n          })\n\n          // Remove from local arrays anyway\n          this.items = this.items.filter((item) => item.id !== this.quotaToDelete!.id)\n          this.quotasOptions = this.quotasOptions.filter((option) => option.value !== this.quotaToDelete!.id)\n\n          this.cancelDelete()\n        } else {\n          this.toast.init({\n            message: error.response?.data?.message || 'Failed to delete quota',\n            color: 'danger',\n          })\n        }\n      } finally {\n        this.deletingQuota = false\n      }\n    },\n\n    async updateQuotaItem() {\n      if (!this.form.id) return\n\n      this.savingQuota = true\n      try {\n        const data = {\n          id: this.form.id,\n          name: this.form.name,\n          start_date: this.formatDate(this.form.start_date),\n          end_date: this.formatDate(this.form.end_date),\n          description: this.form.description,\n        }\n\n        console.log('Updating quota with data:', data)\n\n        const response = await this.updateQuota(data)\n        if (response.status === 200) {\n          this.toast.init({\n            message: response.data.message || 'Quota updated successfully',\n            color: 'success',\n          })\n\n          // Update the item in the local array\n          const index = this.items.findIndex((item) => item.id === this.form.id)\n          if (index !== -1) {\n            const updatedItem = {\n              ...this.items[index],\n              name: this.form.name,\n              start_date: this.formatDate(this.form.start_date),\n              end_date: this.formatDate(this.form.end_date),\n            }\n\n            this.items = [...this.items.slice(0, index), updatedItem, ...this.items.slice(index + 1)]\n\n            // Also update quotasOptions\n            const quotaIndex = this.quotasOptions.findIndex((option) => option.value === this.form.id)\n            if (quotaIndex !== -1) {\n              const result = this.generateQuotaYear(\n                this.formatDate(this.form.start_date),\n                this.formatDate(this.form.end_date),\n              )\n              this.quotasOptions = [\n                ...this.quotasOptions.slice(0, quotaIndex),\n                {\n                  value: this.form.id,\n                  text: `${result} - ${this.form.name}`,\n                },\n                ...this.quotasOptions.slice(quotaIndex + 1),\n              ]\n            }\n          }\n\n          this.resetModal()\n          this.showModal = false\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error)\n        this.toast.init({\n          message: '\\n' + errors.map((error: string, index: number) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      } finally {\n        this.savingQuota = false\n      }\n    },\n\n    showAddQuotaModal() {\n      this.resetModal()\n      this.isEditing = false\n      this.showModal = true\n    },\n\n    // Main quota fetching method\n    async getQs(id: number | null = null) {\n      console.log('Fetching quotas...')\n      this.loadingQuotas = true\n      try {\n        const response = await this.getQuotas(id)\n\n        if (response && response.data) {\n          const apiResponse = response.data as ApiResponse\n\n          if (apiResponse.success === true && Array.isArray(apiResponse.data)) {\n            const quotaItems = apiResponse.data\n\n            this.items = quotaItems.map((item: QuotaItem) => ({\n              id: item.id,\n              name: item.name,\n              start_date: item.start_date,\n              end_date: item.end_date,\n            }))\n\n            this.quotasOptions = quotaItems.map((item: QuotaItem) => {\n              const result = this.generateQuotaYear(item.start_date, item.end_date)\n              return {\n                value: item.id,\n                text: `${result} - ${item.name}`,\n              }\n            })\n          } else {\n            console.error('API response indicates failure or invalid data structure')\n            this.items = []\n            this.quotasOptions = []\n          }\n\n          this.loadingQuotas = false\n        } else {\n          console.error('Invalid response from API')\n          this.items = []\n          this.quotasOptions = []\n          this.loadingQuotas = false\n        }\n      } catch (error: any) {\n        this.loadingQuotas = false\n        console.error('Error fetching quotas:', error)\n\n        this.toast.init({\n          message: 'Failed to load quotas. Please try again.',\n          color: 'danger',\n        })\n      }\n    },\n\n    // Get species items for dropdown\n    async getSpeciesItems() {\n      try {\n        const response = await this.getSpeciesList()\n        const speciesItems = response.data.map((item: { id: number; name: string }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n\n        this.speciesOptions = speciesItems\n      } catch (error: any) {\n        console.log('Error fetching species:', error)\n      }\n    },\n\n    // Get areas for dropdown\n    async getAreas() {\n      try {\n        const response = await this.getAreaList()\n        this.areasOptions = response.data.map((item: { id: number; name: string }) => {\n          return {\n            value: item.id,\n            text: item.name,\n          }\n        })\n      } catch (error: any) {\n        console.log('Error fetching areas:', error)\n      }\n    },\n\n    // Reset methods\n    resetEditedItem() {\n      this.editedItem = null\n      this.editedItemId = null\n    },\n\n    resetCreatedItem() {\n      this.createdItem = { name: '', start_date: null, end_date: null }\n    },\n\n    updateQuantitySelectedSpecies(species: Option) {\n      if (species && species.quantity) {\n        this.sform.quantity = species.quantity\n      }\n    },\n\n    addNewSpeciesItemToStorage() {\n      if (!this.sform.id || !this.sform.id.value || !this.sform.id.text || !this.sform.quantity) {\n        console.error('Error: Some required fields are null or undefined.')\n        return\n      }\n\n      if (Number(this.sform.quantity) <= 0) {\n        return\n      }\n\n      const exists = this.speciesObjects.some((species: any) => species.id === this.sform.id!.value)\n\n      if (!exists) {\n        this.speciesObjects.push({\n          id: this.sform.id.value as number,\n          name: this.sform.id.text,\n          quantity: this.sform.quantity,\n        })\n      } else {\n        console.log('Species item already exists:', this.sform.id)\n      }\n    },\n\n    deleteFromStorage(index: number) {\n      this.speciesObjects.splice(index, 1)\n    },\n\n    async addNewSpeciesToQuota() {\n      this.savingQuotaSpecies = true\n      if (this.speciesObjects.length === 0) {\n        this.toast.init({ message: 'Please add at least one species item.', color: 'warning' })\n        this.savingQuotaSpecies = false\n        return\n      }\n\n      if (!this.sform.area || !this.sform.salesQuota) {\n        this.toast.init({ message: 'Please select both area and sales quota.', color: 'warning' })\n        this.savingQuotaSpecies = false\n        return\n      }\n\n      const rdata = {\n        area_id: this.sform.area.value,\n        quota_id: this.sform.salesQuota.value,\n        speciesObjects: this.speciesObjects,\n      }\n\n      try {\n        const response = await this.createQuotaAreaSpecies(rdata)\n        if (response.status === 201) {\n          this.savingQuotaSpecies = false\n          this.toast.init({ message: response.data.message, color: 'success' })\n          this.resetSForm()\n          this.resetCreatedItem()\n          this.speciesObjects = []\n        }\n      } catch (error: any) {\n        const errors = handleErrors(error)\n        this.savingQuotaSpecies = false\n\n        this.toast.init({\n          message: '\\n' + errors.map((error: string, index: number) => `${index + 1}. ${error}`).join('\\n'),\n          color: 'danger',\n        })\n      }\n    },\n\n    async createNewQuota() {\n      this.savingQuota = true\n\n      // Simple date formatting\n      const formatDateForApi = (date: any): string => {\n        if (!date) return ''\n\n        if (date instanceof Date) {\n          const year = date.getFullYear()\n          const month = String(date.getMonth() + 1).padStart(2, '0')\n          const day = String(date.getDate()).padStart(2, '0')\n          return `${year}-${month}-${day}`\n        }\n\n        if (typeof date === 'string') {\n          // If already in YYYY-MM-DD format, return as-is\n          if (date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            return date\n          }\n\n          // Try to parse\n          const parsed = new Date(date)\n          if (!isNaN(parsed.getTime())) {\n            const year = parsed.getFullYear()\n            const month = String(parsed.getMonth() + 1).padStart(2, '0')\n            const day = String(parsed.getDate()).padStart(2, '0')\n            return `${year}-${month}-${day}`\n          }\n        }\n\n        return String(date)\n      }\n\n      const quota = {\n        name: this.form.name,\n        start_date: formatDateForApi(this.form.start_date),\n        end_date: formatDateForApi(this.form.end_date),\n        description: this.form.description || '',\n      }\n\n      console.log('Creating quota with data:', quota)\n\n      try {\n        const response = await this.createQuota(quota)\n\n        // Check the response format from the store\n        if (response.success || response.status === 201) {\n          this.savingQuota = false\n          this.toast.init({\n            message: response.message || 'Quota created successfully',\n            color: 'success',\n          })\n          this.resetForm()\n\n          // Refresh the quota list\n          this.getQs()\n\n          this.showModal = false\n          this.resetCreatedItem()\n        } else {\n          this.savingQuota = false\n          const errors = handleErrors(response)\n          this.toast.init({\n            message: '\\n' + errors.map((error: string, index: number) => `${index + 1}. ${error}`).join('\\n'),\n            color: 'danger',\n          })\n        }\n      } catch (error: any) {\n        this.savingQuota = false\n        console.error('Error creating quota:', error)\n\n        this.toast.init({\n          message: error.message || 'Failed to create quota',\n          color: 'danger',\n        })\n      }\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\">\n.modal-content {\n  padding: 16px;\n}\n\n.input-group {\n  margin-bottom: 16px;\n}\n\n.input-label {\n  margin-bottom: 8px;\n  font-weight: bold;\n}\n\n.input-container {\n  display: flex;\n  align-items: center;\n}\n\n.input-container > VaDateInput {\n  margin-right: 8px;\n}\n\n.input-container > VaInput {\n  flex: 1;\n}\n\n/* Make action buttons smaller on mobile */\n@media (max-width: 640px) {\n  .flex.gap-2 {\n    flex-direction: column;\n    gap: 4px;\n  }\n\n  .flex.gap-2 .va-button {\n    width: 100%;\n    justify-content: center;\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","ModuleTable","formRef","ref","sformRef","isValidForm","validateForm","resetValidationForm","resetForm","useForm","isValidSForm","validateSForm","resetValidationSForm","resetSForm","useToast","reactive","mapActions","useQuotaStore","useSettingsStore","date","d","year","month","day","startDate","endDate","startYear","endYear","rowData","response","_a","_b","item","option","_c","error","_d","_f","_e","data","index","updatedItem","quotaIndex","result","errors","handleErrors","id","apiResponse","quotaItems","speciesItems","species","rdata","formatDateForApi","parsed","quota","_hoisted_1","_hoisted_2","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createBlock","_component_VaCard","_createElementVNode","_ctx","_createCommentVNode","_component_VaButton","_withCtx","_cache","_createTextVNode","_createVNode","_component_VaButtonGroup","_openBlock","_component_ModuleTable","_createElementBlock","_hoisted_3","_component_VaForm","_component_VaValue","_component_VaSelect","$event","v","_component_VaIcon","_component_VaDivider","_component_VaCounter","_component_VaList","_component_VaListLabel","_Fragment","_renderList","s","_component_VaListItem","_component_VaListItemSection","_component_VaListItemLabel","_toDisplayString","_component_VaModal","_component_VaInput","_component_VaDateInput"],"mappings":"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"}