{"version":3,"file":"Contracts-eyneHkmB.js","sources":["../../src/pages/client/dashboard/components/ContractDetails.vue","../../src/pages/client/dashboard/components/ContractDetails.vue","../../src/pages/client/dashboard/components/ContractForm.vue","../../src/pages/client/dashboard/components/ContractForm.vue","../../src/pages/client/dashboard/Contracts.vue","../../src/pages/client/dashboard/Contracts.vue"],"sourcesContent":["<template>\n  <div class=\"contract-details\">\n    <h1 class=\"contract-title\">Contract Details</h1>\n    <div class=\"contract-info\">\n      <div class=\"info-item\"><strong>Contract Number:</strong> {{ contractItem?.contract_number || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Description:</strong> {{ contractItem?.description || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Start Date:</strong> {{ formatDateTime(contractItem?.start_date) || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>End Date:</strong> {{ formatDateTime(contractItem?.end_date) || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Created At:</strong> {{ formatDateTime(contractItem?.created_at) || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Updated At:</strong> {{ formatDateTime(contractItem?.updated_at) || 'N/A' }}</div>\n    </div>\n\n    <section v-if=\"contractItem?.sales_confirmation_proposal\" class=\"sales-confirmation\">\n      <h2>Sales Confirmation Proposal</h2>\n      <div class=\"proposal-info\">\n        <div class=\"info-item\">\n          <strong>Sales Inquiry ID:</strong> {{ contractItem.sales_confirmation_proposal.sales_inquiry?.id || 'N/A' }}\n        </div>\n        <div class=\"info-item\">\n          <strong>Preferred Date:</strong>\n          {{ formatDateTime(contractItem.sales_confirmation_proposal.preference?.preferred_date) || 'N/A' }}\n        </div>\n        <div class=\"info-item\">\n          <strong>Area:</strong>\n          {{\n            contractItem.sales_confirmation_proposal.area?.length > 0\n              ? contractItem.sales_confirmation_proposal.area[0]?.area?.name\n              : 'N/A'\n          }}\n        </div>\n      </div>\n    </section>\n\n    <section v-if=\"contractItem?.entity\" class=\"client-info\">\n      <h2>Client Information</h2>\n      <div class=\"info-item\"><strong>Full Name:</strong> {{ contractItem.entity.full_name || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Country:</strong> {{ contractItem.entity.country?.name || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Email:</strong> {{ contractItem.entity.contacts?.[0]?.contact || 'N/A' }}</div>\n    </section>\n\n    <section v-if=\"contractItem.price_break_down\" class=\"price-breakdown\">\n      <h2>Price Breakdown</h2>\n      <div>\n        <strong>Total Amount:</strong>\n        {{ contractItem.price_break_down.total_amount.currency?.symbol\n        }}{{ contractItem.price_break_down.total_amount.amount || 'N/A' }}\n      </div>\n      <div>\n        <strong>Number of Companions:</strong>\n        {{ contractItem.price_break_down.companion_cost_details?.number_of_companions || 'N/A' }}\n      </div>\n    </section>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue'\nimport { formatDateTime } from '../../../../services/utils'\n\nexport default defineComponent({\n  props: {\n    contractItem: {\n      type: Object as PropType<any>, // Specify the correct type of the contractItem based on your data structure\n      required: true,\n    },\n  },\n  setup() {\n    return {\n      formatDateTime,\n    }\n  },\n})\n</script>\n\n<style scoped>\n.contract-details {\n  padding: 20px;\n  background: #f9f9f9;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.contract-title {\n  font-size: 24px;\n  margin-bottom: 20px;\n  color: #333;\n}\n\n.info-item {\n  margin: 10px 0;\n}\n\nh2 {\n  border-bottom: 2px solid #eee;\n  margin-top: 30px;\n  padding-bottom: 10px;\n}\n\n.sales-confirmation,\n.client-info,\n.price-breakdown {\n  margin-top: 20px;\n}\n\nstrong {\n  color: #555;\n}\n</style>\n","<template>\n  <div class=\"contract-details\">\n    <h1 class=\"contract-title\">Contract Details</h1>\n    <div class=\"contract-info\">\n      <div class=\"info-item\"><strong>Contract Number:</strong> {{ contractItem?.contract_number || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Description:</strong> {{ contractItem?.description || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Start Date:</strong> {{ formatDateTime(contractItem?.start_date) || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>End Date:</strong> {{ formatDateTime(contractItem?.end_date) || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Created At:</strong> {{ formatDateTime(contractItem?.created_at) || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Updated At:</strong> {{ formatDateTime(contractItem?.updated_at) || 'N/A' }}</div>\n    </div>\n\n    <section v-if=\"contractItem?.sales_confirmation_proposal\" class=\"sales-confirmation\">\n      <h2>Sales Confirmation Proposal</h2>\n      <div class=\"proposal-info\">\n        <div class=\"info-item\">\n          <strong>Sales Inquiry ID:</strong> {{ contractItem.sales_confirmation_proposal.sales_inquiry?.id || 'N/A' }}\n        </div>\n        <div class=\"info-item\">\n          <strong>Preferred Date:</strong>\n          {{ formatDateTime(contractItem.sales_confirmation_proposal.preference?.preferred_date) || 'N/A' }}\n        </div>\n        <div class=\"info-item\">\n          <strong>Area:</strong>\n          {{\n            contractItem.sales_confirmation_proposal.area?.length > 0\n              ? contractItem.sales_confirmation_proposal.area[0]?.area?.name\n              : 'N/A'\n          }}\n        </div>\n      </div>\n    </section>\n\n    <section v-if=\"contractItem?.entity\" class=\"client-info\">\n      <h2>Client Information</h2>\n      <div class=\"info-item\"><strong>Full Name:</strong> {{ contractItem.entity.full_name || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Country:</strong> {{ contractItem.entity.country?.name || 'N/A' }}</div>\n      <div class=\"info-item\"><strong>Email:</strong> {{ contractItem.entity.contacts?.[0]?.contact || 'N/A' }}</div>\n    </section>\n\n    <section v-if=\"contractItem.price_break_down\" class=\"price-breakdown\">\n      <h2>Price Breakdown</h2>\n      <div>\n        <strong>Total Amount:</strong>\n        {{ contractItem.price_break_down.total_amount.currency?.symbol\n        }}{{ contractItem.price_break_down.total_amount.amount || 'N/A' }}\n      </div>\n      <div>\n        <strong>Number of Companions:</strong>\n        {{ contractItem.price_break_down.companion_cost_details?.number_of_companions || 'N/A' }}\n      </div>\n    </section>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue'\nimport { formatDateTime } from '../../../../services/utils'\n\nexport default defineComponent({\n  props: {\n    contractItem: {\n      type: Object as PropType<any>, // Specify the correct type of the contractItem based on your data structure\n      required: true,\n    },\n  },\n  setup() {\n    return {\n      formatDateTime,\n    }\n  },\n})\n</script>\n\n<style scoped>\n.contract-details {\n  padding: 20px;\n  background: #f9f9f9;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.contract-title {\n  font-size: 24px;\n  margin-bottom: 20px;\n  color: #333;\n}\n\n.info-item {\n  margin: 10px 0;\n}\n\nh2 {\n  border-bottom: 2px solid #eee;\n  margin-top: 30px;\n  padding-bottom: 10px;\n}\n\n.sales-confirmation,\n.client-info,\n.price-breakdown {\n  margin-top: 20px;\n}\n\nstrong {\n  color: #555;\n}\n</style>\n","<template>\n  <VaInnerLoading :loading=\"loadingSales\">\n    <VaTabs v-model=\"value\" vertical grow>\n      <template #tabs>\n        <VaTab v-for=\"tab in tabs\" :key=\"tab.title\" :name=\"tab.title\">\n          <VaIcon :name=\"tab.icon\" size=\"small\" class=\"mr-2\" />\n          {{ tab.title }}\n        </VaTab>\n      </template>\n\n      <VaCard square outlined>\n        <VaCardTitle class=\"mb-4\">\n          {{ currentTab.title }}\n        </VaCardTitle>\n        <VaCardContent>\n          <VaForm ref=\"iformRef\">\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n              <VaSelect\n                v-model=\"form.proposal\"\n                :options=\"proposalOptions\"\n                :rules=\"[(value: any) => value || 'Sales confirmation is required']\"\n                placeholder=\"Select confirmation \"\n                label=\"Choose sales confirmation\"\n                @update:modelValue=\"onValueChange\"\n              />\n              <VaSelect\n                v-if=\"currentTab.content === 'companion_contract'\"\n                v-model=\"form.enity_id\"\n                :options=\"companions\"\n                placeholder=\"Select companion (optional)\"\n                label=\"Choose companion\"\n                clearable\n              />\n              <div\n                v-if=\"currentTab.content === 'companion_contract' && companions.length === 0\"\n                class=\"text-sm text-warning italic\"\n              >\n                Companion list unavailable. The contract will use the main client from the sales confirmation.\n              </div>\n            </div>\n\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n              <!-- arrival -->\n              <VaDateInput\n                v-model=\"form.start_date\"\n                placeholder=\"Choose start date\"\n                :rules=\"[(value: any) => value || 'Start date is required']\"\n                label=\"Start Date\"\n              />\n              <VaDateInput\n                v-model=\"form.end_date\"\n                placeholder=\"Choose End date\"\n                :rules=\"[(value: any) => value || 'End date is required']\"\n                label=\"End  Date\"\n              />\n            </div>\n            <!-- description -->\n            <div class=\"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4\">\n              <VaTextarea\n                v-model=\"form.description\"\n                max-length=\"125\"\n                label=\"Short text about something\"\n                counter\n                required-mark\n                :rules=\"[(v: any) => (v && v.length > 0) || 'Required', (v: any) => v && v.length < 125]\"\n              />\n            </div>\n\n            <!-- Document Upload Section -->\n            <div class=\"mb-4 border-t pt-4\">\n              <h3 class=\"text-lg font-semibold mb-4\">Supporting Documents</h3>\n              <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <VaSelect\n                  v-model=\"form.doc_type\"\n                  :options=\"documentTypes\"\n                  placeholder=\"Select document type\"\n                  label=\"Document Type\"\n                  searchable\n                  highlight-matched-text\n                />\n                <VaFileUpload\n                  v-model=\"form.documents\"\n                  upload-button-text=\"Upload Document\"\n                  color=\"secondary\"\n                  label=\"Upload Document\"\n                  dropzone\n                  undo\n                  size=\"50mb\"\n                  file-types=\"image/jpeg, image/png, image/pdf, application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n                  undo-duration=\"500\"\n                  :max-files=\"1\"\n                />\n              </div>\n              <VaButton\n                icon=\"add\"\n                size=\"small\"\n                color=\"secondary\"\n                :disabled=\"!form.doc_type || form.documents.length === 0\"\n                @click=\"addDocument\"\n              >\n                Add Document\n              </VaButton>\n\n              <!-- List of Added Documents -->\n              <div v-if=\"form.uploadedDocuments.length > 0\" class=\"mt-4\">\n                <h4 class=\"font-semibold mb-2\">Added Documents:</h4>\n                <div class=\"space-y-2\">\n                  <div\n                    v-for=\"(doc, index) in form.uploadedDocuments\"\n                    :key=\"index\"\n                    class=\"flex items-center justify-between bg-gray-100 p-3 rounded\"\n                  >\n                    <span>{{ doc.type }}: {{ doc.file.name }}</span>\n                    <VaButton preset=\"plain\" icon=\"delete\" size=\"small\" color=\"danger\" @click=\"removeDocument(index)\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"flex justify-end\">\n              <VaButton :disabled=\"!isValidForm\" @click=\"validateForm() && onSubmit()\"> Submit</VaButton>\n            </div>\n          </VaForm>\n        </VaCardContent>\n      </VaCard>\n    </VaTabs>\n  </VaInnerLoading>\n</template>\n\n<script lang=\"ts\">\nimport { useForm, useToast } from 'vuestic-ui'\nimport { defineComponent, ref, reactive } from 'vue'\nimport { useSalesInquiriesStore } from '../../../../stores/sales-store'\nimport { mapActions, mapState } from 'pinia'\nimport { useContractsStore } from '../../../../stores/contracts-store'\nimport handleErrors from '../../../../utils/errorHandler'\n\nexport default defineComponent({\n  setup() {\n    const { init } = useToast()\n\n    const iformRef = ref(null as any)\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(iformRef)\n\n    const isNotUpBookingSelected = ref(true)\n\n    const onInputChange = (event: any) => {\n      console.log(event)\n      if (event.value == 'prior' || event.value == 'after') {\n        isNotUpBookingSelected.value = false\n      }\n    }\n\n    const form = reactive({\n      proposal: null as any,\n      enity_id: null as any,\n      start_date: null as any,\n      end_date: null as any,\n      description: '',\n      doc_type: null as any,\n      documents: [] as any,\n      uploadedDocuments: [] as any,\n    })\n\n    return {\n      iformRef,\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      resetForm,\n      form,\n      init,\n      onInputChange,\n      isNotUpBookingSelected,\n    }\n  },\n\n  data() {\n    const TABS = [\n      { icon: 'feed', title: 'Main Hunter ', content: 'main_hunter_contract' },\n      { icon: 'feed', title: 'Companion Hunter ', content: 'companion_contract' },\n    ]\n    const packages = [] as any\n    const documentTypes = [\n      {\n        text: 'Travel Packet (Passport Copy)',\n        value: 'Passport_Copy',\n      },\n      {\n        text: 'Travel Packet (Passport Photo)',\n        value: 'Passport_Photo',\n      },\n      {\n        text: 'Visa',\n        value: 'Visa',\n      },\n      {\n        text: 'Gun Permits',\n        value: 'Gun_Permits',\n      },\n      {\n        text: 'CITES Documentation',\n        value: 'CITES_Documentation',\n      },\n      {\n        text: 'Sales Invoice',\n        value: 'sales_invoice',\n      },\n      {\n        text: 'Receipt',\n        value: 'receipt',\n      },\n    ]\n    return {\n      packages,\n      installments: [] as any,\n      regulatoryPackages: [] as any,\n      proposalOptions: [] as any,\n      documentTypes,\n      loadingSales: false,\n      salesItem: null as any,\n      tabs: TABS,\n      value: TABS[0].title,\n    }\n  },\n  computed: {\n    ...mapState(useSalesInquiriesStore, ['companions']),\n\n    currentTab(): any {\n      return this.tabs.find(({ title }) => title === this.value)\n    },\n  },\n\n  mounted() {\n    this.getSalesProposalOptions()\n  },\n\n  methods: {\n    ...mapActions(useContractsStore, ['createContract']),\n    ...mapActions(useSalesInquiriesStore, ['getallSalesConfirmation']),\n\n    ...mapActions(useSalesInquiriesStore, ['getCompanions']),\n    onValueChange(value: any) {\n      if (!value) return\n\n      // Handle both direct object and option structure\n      const selectedItem = value.selfitem || value\n      console.log('Selected proposal full object:', selectedItem)\n\n      this.salesItem = selectedItem\n\n      // Try to fetch companions, but handle gracefully if endpoint fails\n      if (selectedItem?.id) {\n        console.log('Fetching companions for sales_confirmation_id:', selectedItem.id)\n        this.getCompanions(selectedItem.id, true)\n          .then((response: any) => {\n            // Check if this was an error response\n            if (response?.response?.status === 404) {\n              console.warn('Companions endpoint returned 404 - no companions available or endpoint not found')\n              this.init({\n                message: 'Could not load companions list. You can still create a contract without a companion.',\n                color: 'warning',\n              })\n            }\n          })\n          .catch((error: any) => {\n            console.warn('Error fetching companions:', error)\n            // Don't show error to user, just log it\n          })\n      } else {\n        console.warn('Missing proposal ID for fetching companions')\n      }\n    },\n    async onSubmit() {\n      // Extract the actual ID value from the selected proposal\n      // The proposal form field contains the entire option object with { text, value, selfitem }\n      let proposalValue = null\n      let selectedProposal = null\n\n      if (this.form.proposal) {\n        // If it's an option object with value property\n        if (typeof this.form.proposal === 'object' && this.form.proposal.value) {\n          proposalValue = this.form.proposal.value\n          selectedProposal = this.form.proposal.selfitem\n        }\n        // If it's already just the ID\n        else if (typeof this.form.proposal === 'number') {\n          proposalValue = this.form.proposal\n        }\n      }\n\n      let entityValue = null\n      if (this.currentTab?.content === 'companion_contract') {\n        // For companion contracts, companion selection is optional (endpoint not available)\n        // Try to use the selected companion if provided\n        if (this.form.enity_id) {\n          if (typeof this.form.enity_id === 'object' && this.form.enity_id.value) {\n            entityValue = this.form.enity_id.value\n          } else if (typeof this.form.enity_id === 'number') {\n            entityValue = this.form.enity_id\n          }\n        } else {\n          // If no companion selected, use the main client entity\n          entityValue = selectedProposal?.sales_inquiry?.entity?.id || null\n        }\n      } else {\n        // For main hunter contracts, use the entity from the sales inquiry\n        entityValue = selectedProposal?.sales_inquiry?.entity?.id || null\n      }\n\n      // Validate required fields\n      if (!proposalValue) {\n        this.init({ message: 'Sales confirmation is required', color: 'warning' })\n        return\n      }\n\n      if (!selectedProposal || !selectedProposal.id) {\n        this.init({\n          message: 'Invalid sales confirmation selected. Please select again from the list.',\n          color: 'warning',\n        })\n        return\n      }\n\n      if (!this.form.start_date || !this.form.end_date) {\n        this.init({ message: 'Start date and end date are required', color: 'warning' })\n        return\n      }\n\n      if (!entityValue) {\n        this.init({\n          message: 'Entity information is missing. Please select a valid sales confirmation.',\n          color: 'warning',\n        })\n        return\n      }\n\n      // Verify the dates are valid\n      if (new Date(this.form.start_date) >= new Date(this.form.end_date)) {\n        this.init({ message: 'End date must be after start date', color: 'warning' })\n        return\n      }\n\n      const data = {\n        sales_confirmation_proposal_id: proposalValue,\n        entity_id: entityValue,\n        start_date: this.form.start_date,\n        end_date: this.form.end_date,\n        contractor_type: this.currentTab?.content === 'companion_contract' ? 'COMPANION_HUNTER' : 'MAIN_HUNTER',\n        description: this.form.description,\n      }\n\n      console.log('Form submission data:', data)\n      console.log('Selected proposal object:', selectedProposal)\n\n      try {\n        const response: any = await this.createContract(data)\n        if (response.status === 201) {\n          this.init({ message: 'Contract created successfully', color: 'success' })\n          // Reset form after successful submission\n          this.resetForm()\n          this.resetValidationForm()\n        }\n      } catch (error: any) {\n        const errorData = error.response?.data\n        const errorMessage = errorData?.error || errorData?.message || ''\n\n        // Check if it's a duplicate entry constraint error\n        if (errorMessage.includes('Duplicate entry') || errorMessage.includes('constraint')) {\n          this.init({\n            message:\n              'A contract already exists for this sales confirmation and client combination. Please select a different sales confirmation to create a new contract.',\n            color: 'danger',\n          })\n        }\n        // Check if it's a foreign key constraint error\n        else if (errorMessage.includes('FOREIGN KEY')) {\n          this.init({\n            message:\n              'The selected sales confirmation is no longer available. Please refresh and select a different one.',\n            color: 'danger',\n          })\n          // Reload proposals\n          this.getSalesProposalOptions()\n        } else {\n          const errors = handleErrors(error.response)\n          this.init({\n            message: '\\n' + errors.map((error, index) => `${index + 1}. ${error}`).join('\\n'),\n            color: 'danger',\n          })\n        }\n      }\n    },\n\n    // getCompanions(proposalId: any) {\n    //   // TODO: Implement this method\n    //   //\n    // },\n\n    async getSalesProposalOptions() {\n      this.loadingSales = true\n      const response: any = await this.getallSalesConfirmation()\n      if (response && response.status === 200) {\n        this.loadingSales = false\n        const data = Array.isArray(response.data) ? response.data : response.data?.data || []\n        this.proposalOptions = data\n          .filter((item: any) => item && item.id)\n          .map((item: any) => {\n            // Prioritize:\n            // 1. actual entity.full_name from sales_inquiry relationship\n            // 2. fallback to client_name from API\n            // 3. fallback to unknown\n            const clientName = item.sales_inquiry?.entity?.full_name || item.client_name || 'Unknown Client'\n            const proposalId = item.id\n            return {\n              text: `#${proposalId} - ${clientName}`,\n              value: item.id,\n              selfitem: item,\n            }\n          })\n      } else {\n        this.loadingSales = false\n      }\n    },\n\n    addDocument() {\n      if (this.form.doc_type && this.form.documents.length > 0) {\n        const docType = this.form.doc_type.text || this.form.doc_type\n        this.form.uploadedDocuments.push({\n          type: docType,\n          file: this.form.documents[0],\n        })\n        // Reset the upload fields\n        this.form.doc_type = null\n        this.form.documents = []\n        this.init({ message: 'Document added successfully', color: 'success' })\n      }\n    },\n\n    removeDocument(index: number) {\n      this.form.uploadedDocuments.splice(index, 1)\n      this.init({ message: 'Document removed', color: 'info' })\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.sales-inquiry {\n  margin: 20px;\n}\n\n.split-demo {\n  & .custom-grabber {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--va-background-element);\n  }\n}\n</style>\n","<template>\n  <VaInnerLoading :loading=\"loadingSales\">\n    <VaTabs v-model=\"value\" vertical grow>\n      <template #tabs>\n        <VaTab v-for=\"tab in tabs\" :key=\"tab.title\" :name=\"tab.title\">\n          <VaIcon :name=\"tab.icon\" size=\"small\" class=\"mr-2\" />\n          {{ tab.title }}\n        </VaTab>\n      </template>\n\n      <VaCard square outlined>\n        <VaCardTitle class=\"mb-4\">\n          {{ currentTab.title }}\n        </VaCardTitle>\n        <VaCardContent>\n          <VaForm ref=\"iformRef\">\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n              <VaSelect\n                v-model=\"form.proposal\"\n                :options=\"proposalOptions\"\n                :rules=\"[(value: any) => value || 'Sales confirmation is required']\"\n                placeholder=\"Select confirmation \"\n                label=\"Choose sales confirmation\"\n                @update:modelValue=\"onValueChange\"\n              />\n              <VaSelect\n                v-if=\"currentTab.content === 'companion_contract'\"\n                v-model=\"form.enity_id\"\n                :options=\"companions\"\n                placeholder=\"Select companion (optional)\"\n                label=\"Choose companion\"\n                clearable\n              />\n              <div\n                v-if=\"currentTab.content === 'companion_contract' && companions.length === 0\"\n                class=\"text-sm text-warning italic\"\n              >\n                Companion list unavailable. The contract will use the main client from the sales confirmation.\n              </div>\n            </div>\n\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n              <!-- arrival -->\n              <VaDateInput\n                v-model=\"form.start_date\"\n                placeholder=\"Choose start date\"\n                :rules=\"[(value: any) => value || 'Start date is required']\"\n                label=\"Start Date\"\n              />\n              <VaDateInput\n                v-model=\"form.end_date\"\n                placeholder=\"Choose End date\"\n                :rules=\"[(value: any) => value || 'End date is required']\"\n                label=\"End  Date\"\n              />\n            </div>\n            <!-- description -->\n            <div class=\"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4\">\n              <VaTextarea\n                v-model=\"form.description\"\n                max-length=\"125\"\n                label=\"Short text about something\"\n                counter\n                required-mark\n                :rules=\"[(v: any) => (v && v.length > 0) || 'Required', (v: any) => v && v.length < 125]\"\n              />\n            </div>\n\n            <!-- Document Upload Section -->\n            <div class=\"mb-4 border-t pt-4\">\n              <h3 class=\"text-lg font-semibold mb-4\">Supporting Documents</h3>\n              <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <VaSelect\n                  v-model=\"form.doc_type\"\n                  :options=\"documentTypes\"\n                  placeholder=\"Select document type\"\n                  label=\"Document Type\"\n                  searchable\n                  highlight-matched-text\n                />\n                <VaFileUpload\n                  v-model=\"form.documents\"\n                  upload-button-text=\"Upload Document\"\n                  color=\"secondary\"\n                  label=\"Upload Document\"\n                  dropzone\n                  undo\n                  size=\"50mb\"\n                  file-types=\"image/jpeg, image/png, image/pdf, application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n                  undo-duration=\"500\"\n                  :max-files=\"1\"\n                />\n              </div>\n              <VaButton\n                icon=\"add\"\n                size=\"small\"\n                color=\"secondary\"\n                :disabled=\"!form.doc_type || form.documents.length === 0\"\n                @click=\"addDocument\"\n              >\n                Add Document\n              </VaButton>\n\n              <!-- List of Added Documents -->\n              <div v-if=\"form.uploadedDocuments.length > 0\" class=\"mt-4\">\n                <h4 class=\"font-semibold mb-2\">Added Documents:</h4>\n                <div class=\"space-y-2\">\n                  <div\n                    v-for=\"(doc, index) in form.uploadedDocuments\"\n                    :key=\"index\"\n                    class=\"flex items-center justify-between bg-gray-100 p-3 rounded\"\n                  >\n                    <span>{{ doc.type }}: {{ doc.file.name }}</span>\n                    <VaButton preset=\"plain\" icon=\"delete\" size=\"small\" color=\"danger\" @click=\"removeDocument(index)\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"flex justify-end\">\n              <VaButton :disabled=\"!isValidForm\" @click=\"validateForm() && onSubmit()\"> Submit</VaButton>\n            </div>\n          </VaForm>\n        </VaCardContent>\n      </VaCard>\n    </VaTabs>\n  </VaInnerLoading>\n</template>\n\n<script lang=\"ts\">\nimport { useForm, useToast } from 'vuestic-ui'\nimport { defineComponent, ref, reactive } from 'vue'\nimport { useSalesInquiriesStore } from '../../../../stores/sales-store'\nimport { mapActions, mapState } from 'pinia'\nimport { useContractsStore } from '../../../../stores/contracts-store'\nimport handleErrors from '../../../../utils/errorHandler'\n\nexport default defineComponent({\n  setup() {\n    const { init } = useToast()\n\n    const iformRef = ref(null as any)\n    const {\n      isValid: isValidForm,\n      validate: validateForm,\n      resetValidation: resetValidationForm,\n      reset: resetForm,\n    } = useForm(iformRef)\n\n    const isNotUpBookingSelected = ref(true)\n\n    const onInputChange = (event: any) => {\n      console.log(event)\n      if (event.value == 'prior' || event.value == 'after') {\n        isNotUpBookingSelected.value = false\n      }\n    }\n\n    const form = reactive({\n      proposal: null as any,\n      enity_id: null as any,\n      start_date: null as any,\n      end_date: null as any,\n      description: '',\n      doc_type: null as any,\n      documents: [] as any,\n      uploadedDocuments: [] as any,\n    })\n\n    return {\n      iformRef,\n      isValidForm,\n      validateForm,\n      resetValidationForm,\n      resetForm,\n      form,\n      init,\n      onInputChange,\n      isNotUpBookingSelected,\n    }\n  },\n\n  data() {\n    const TABS = [\n      { icon: 'feed', title: 'Main Hunter ', content: 'main_hunter_contract' },\n      { icon: 'feed', title: 'Companion Hunter ', content: 'companion_contract' },\n    ]\n    const packages = [] as any\n    const documentTypes = [\n      {\n        text: 'Travel Packet (Passport Copy)',\n        value: 'Passport_Copy',\n      },\n      {\n        text: 'Travel Packet (Passport Photo)',\n        value: 'Passport_Photo',\n      },\n      {\n        text: 'Visa',\n        value: 'Visa',\n      },\n      {\n        text: 'Gun Permits',\n        value: 'Gun_Permits',\n      },\n      {\n        text: 'CITES Documentation',\n        value: 'CITES_Documentation',\n      },\n      {\n        text: 'Sales Invoice',\n        value: 'sales_invoice',\n      },\n      {\n        text: 'Receipt',\n        value: 'receipt',\n      },\n    ]\n    return {\n      packages,\n      installments: [] as any,\n      regulatoryPackages: [] as any,\n      proposalOptions: [] as any,\n      documentTypes,\n      loadingSales: false,\n      salesItem: null as any,\n      tabs: TABS,\n      value: TABS[0].title,\n    }\n  },\n  computed: {\n    ...mapState(useSalesInquiriesStore, ['companions']),\n\n    currentTab(): any {\n      return this.tabs.find(({ title }) => title === this.value)\n    },\n  },\n\n  mounted() {\n    this.getSalesProposalOptions()\n  },\n\n  methods: {\n    ...mapActions(useContractsStore, ['createContract']),\n    ...mapActions(useSalesInquiriesStore, ['getallSalesConfirmation']),\n\n    ...mapActions(useSalesInquiriesStore, ['getCompanions']),\n    onValueChange(value: any) {\n      if (!value) return\n\n      // Handle both direct object and option structure\n      const selectedItem = value.selfitem || value\n      console.log('Selected proposal full object:', selectedItem)\n\n      this.salesItem = selectedItem\n\n      // Try to fetch companions, but handle gracefully if endpoint fails\n      if (selectedItem?.id) {\n        console.log('Fetching companions for sales_confirmation_id:', selectedItem.id)\n        this.getCompanions(selectedItem.id, true)\n          .then((response: any) => {\n            // Check if this was an error response\n            if (response?.response?.status === 404) {\n              console.warn('Companions endpoint returned 404 - no companions available or endpoint not found')\n              this.init({\n                message: 'Could not load companions list. You can still create a contract without a companion.',\n                color: 'warning',\n              })\n            }\n          })\n          .catch((error: any) => {\n            console.warn('Error fetching companions:', error)\n            // Don't show error to user, just log it\n          })\n      } else {\n        console.warn('Missing proposal ID for fetching companions')\n      }\n    },\n    async onSubmit() {\n      // Extract the actual ID value from the selected proposal\n      // The proposal form field contains the entire option object with { text, value, selfitem }\n      let proposalValue = null\n      let selectedProposal = null\n\n      if (this.form.proposal) {\n        // If it's an option object with value property\n        if (typeof this.form.proposal === 'object' && this.form.proposal.value) {\n          proposalValue = this.form.proposal.value\n          selectedProposal = this.form.proposal.selfitem\n        }\n        // If it's already just the ID\n        else if (typeof this.form.proposal === 'number') {\n          proposalValue = this.form.proposal\n        }\n      }\n\n      let entityValue = null\n      if (this.currentTab?.content === 'companion_contract') {\n        // For companion contracts, companion selection is optional (endpoint not available)\n        // Try to use the selected companion if provided\n        if (this.form.enity_id) {\n          if (typeof this.form.enity_id === 'object' && this.form.enity_id.value) {\n            entityValue = this.form.enity_id.value\n          } else if (typeof this.form.enity_id === 'number') {\n            entityValue = this.form.enity_id\n          }\n        } else {\n          // If no companion selected, use the main client entity\n          entityValue = selectedProposal?.sales_inquiry?.entity?.id || null\n        }\n      } else {\n        // For main hunter contracts, use the entity from the sales inquiry\n        entityValue = selectedProposal?.sales_inquiry?.entity?.id || null\n      }\n\n      // Validate required fields\n      if (!proposalValue) {\n        this.init({ message: 'Sales confirmation is required', color: 'warning' })\n        return\n      }\n\n      if (!selectedProposal || !selectedProposal.id) {\n        this.init({\n          message: 'Invalid sales confirmation selected. Please select again from the list.',\n          color: 'warning',\n        })\n        return\n      }\n\n      if (!this.form.start_date || !this.form.end_date) {\n        this.init({ message: 'Start date and end date are required', color: 'warning' })\n        return\n      }\n\n      if (!entityValue) {\n        this.init({\n          message: 'Entity information is missing. Please select a valid sales confirmation.',\n          color: 'warning',\n        })\n        return\n      }\n\n      // Verify the dates are valid\n      if (new Date(this.form.start_date) >= new Date(this.form.end_date)) {\n        this.init({ message: 'End date must be after start date', color: 'warning' })\n        return\n      }\n\n      const data = {\n        sales_confirmation_proposal_id: proposalValue,\n        entity_id: entityValue,\n        start_date: this.form.start_date,\n        end_date: this.form.end_date,\n        contractor_type: this.currentTab?.content === 'companion_contract' ? 'COMPANION_HUNTER' : 'MAIN_HUNTER',\n        description: this.form.description,\n      }\n\n      console.log('Form submission data:', data)\n      console.log('Selected proposal object:', selectedProposal)\n\n      try {\n        const response: any = await this.createContract(data)\n        if (response.status === 201) {\n          this.init({ message: 'Contract created successfully', color: 'success' })\n          // Reset form after successful submission\n          this.resetForm()\n          this.resetValidationForm()\n        }\n      } catch (error: any) {\n        const errorData = error.response?.data\n        const errorMessage = errorData?.error || errorData?.message || ''\n\n        // Check if it's a duplicate entry constraint error\n        if (errorMessage.includes('Duplicate entry') || errorMessage.includes('constraint')) {\n          this.init({\n            message:\n              'A contract already exists for this sales confirmation and client combination. Please select a different sales confirmation to create a new contract.',\n            color: 'danger',\n          })\n        }\n        // Check if it's a foreign key constraint error\n        else if (errorMessage.includes('FOREIGN KEY')) {\n          this.init({\n            message:\n              'The selected sales confirmation is no longer available. Please refresh and select a different one.',\n            color: 'danger',\n          })\n          // Reload proposals\n          this.getSalesProposalOptions()\n        } else {\n          const errors = handleErrors(error.response)\n          this.init({\n            message: '\\n' + errors.map((error, index) => `${index + 1}. ${error}`).join('\\n'),\n            color: 'danger',\n          })\n        }\n      }\n    },\n\n    // getCompanions(proposalId: any) {\n    //   // TODO: Implement this method\n    //   //\n    // },\n\n    async getSalesProposalOptions() {\n      this.loadingSales = true\n      const response: any = await this.getallSalesConfirmation()\n      if (response && response.status === 200) {\n        this.loadingSales = false\n        const data = Array.isArray(response.data) ? response.data : response.data?.data || []\n        this.proposalOptions = data\n          .filter((item: any) => item && item.id)\n          .map((item: any) => {\n            // Prioritize:\n            // 1. actual entity.full_name from sales_inquiry relationship\n            // 2. fallback to client_name from API\n            // 3. fallback to unknown\n            const clientName = item.sales_inquiry?.entity?.full_name || item.client_name || 'Unknown Client'\n            const proposalId = item.id\n            return {\n              text: `#${proposalId} - ${clientName}`,\n              value: item.id,\n              selfitem: item,\n            }\n          })\n      } else {\n        this.loadingSales = false\n      }\n    },\n\n    addDocument() {\n      if (this.form.doc_type && this.form.documents.length > 0) {\n        const docType = this.form.doc_type.text || this.form.doc_type\n        this.form.uploadedDocuments.push({\n          type: docType,\n          file: this.form.documents[0],\n        })\n        // Reset the upload fields\n        this.form.doc_type = null\n        this.form.documents = []\n        this.init({ message: 'Document added successfully', color: 'success' })\n      }\n    },\n\n    removeDocument(index: number) {\n      this.form.uploadedDocuments.splice(index, 1)\n      this.init({ message: 'Document removed', color: 'info' })\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.sales-inquiry {\n  margin: 20px;\n}\n\n.split-demo {\n  & .custom-grabber {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--va-background-element);\n  }\n}\n</style>\n","<template>\n  <VaCard>\n    <VaCardContent>\n      <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between px-4 py-2\">\n        <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n          <VaButton\n            v-if=\"showDetails || showAddContractForm\"\n            class=\"px-2 py-2\"\n            icon=\"arrow_back\"\n            size=\"small\"\n            @click=\"gotBack()\"\n          >\n            Go Back\n          </VaButton>\n        </div>\n        <VaButtonGroup v-if=\"!showAddContractForm && !showDetails\">\n          <VaButton\n            class=\"px-2 py-2\"\n            color=\"primary\"\n            label=\"Add New Quota\"\n            round\n            present=\"secondary\"\n            border-color=\"primary\"\n            icon=\"add\"\n            size=\"small\"\n            @click=\"toggleAddSalesInquiriesForm()\"\n            >Create Contract</VaButton\n          >\n        </VaButtonGroup>\n      </div>\n\n      <template v-if=\"!showDetails\">\n        <template v-if=\"!showAddContractForm\">\n          <VaTabs v-model=\"value\" vertical grow>\n            <template #tabs>\n              <VaTab\n                v-for=\"tab in tabs\"\n                :key=\"tab.title\"\n                :name=\"tab.title\"\n                class=\"px-4 py-2\"\n                @click=\"\n                  getContracts(currentTab.content === 'componions_contracts' ? 'COMPANION_HUNTER' : 'MAIN_HUNTER')\n                \"\n              >\n                <VaIcon :name=\"tab.icon\" size=\"small\" class=\"mr-2\" />\n                {{ tab.title }}\n              </VaTab>\n            </template>\n            <VaCard square outlined :stripe=\"false\">\n              <VaCardTitle>\n                <VaIcon :name=\"currentTab.icon\" size=\"small\" class=\"mr-2\" color=\"background-element\" />\n                {{ currentTab.title }}\n              </VaCardTitle>\n              <VaCardContent>\n                <template v-if=\"currentTab.content === 'main_hunters_contracts'\">\n                  <VaDataTable :items=\"contracts\" :columns=\"columns\" :loading=\"loadingContracts\">\n                    <template #cell(actions)=\"{ rowData }\">\n                      <VaButton\n                        preset=\"plain\"\n                        icon=\"download\"\n                        :disabled=\"!rowData.pdf\"\n                        @click=\"downloadPdf(rowData.pdf)\"\n                      ></VaButton>\n                      <VaButton preset=\"plain\" icon=\"visibility\" @click=\"viewContract(rowData.selfitem)\"></VaButton>\n                    </template>\n                  </VaDataTable>\n                </template>\n                <template v-if=\"currentTab.content === 'componions_contracts'\">\n                  <VaDataTable :items=\"contracts\" :columns=\"columns\" :loading=\"loadingContracts\">\n                    <template #cell(actions)=\"{ rowData }\">\n                      <VaButton\n                        preset=\"plain\"\n                        icon=\"download\"\n                        :disabled=\"!rowData.pdf\"\n                        @click=\"downloadPdf(rowData.pdf)\"\n                      ></VaButton>\n                      <VaButton preset=\"plain\" icon=\"visibility\" @click=\"viewContract(rowData.selfitem)\"></VaButton>\n                    </template>\n                  </VaDataTable>\n                </template>\n              </VaCardContent>\n            </VaCard>\n          </VaTabs>\n        </template>\n        <template v-else>\n          <ContractForm> </ContractForm>\n        </template>\n      </template>\n      <template v-else>\n        <ContractDetails :contract-item=\"item\"></ContractDetails>\n      </template>\n    </VaCardContent>\n  </VaCard>\n</template>\n\n<script lang=\"ts\">\nimport { mapActions, mapState } from 'pinia'\nimport { defineComponent } from 'vue'\nimport { useContractsStore } from '../../../stores/contracts-store'\nimport downloadPdf from '../../../utils/pdfDownloader'\nimport ContractDetails from './components/ContractDetails.vue'\nimport ContractForm from './components/ContractForm.vue'\n\nexport default defineComponent({\n  components: {\n    ContractDetails,\n    ContractForm,\n  },\n  data() {\n    const TABS = [\n      { icon: 'feed', title: \"Main Hunter's \", content: 'main_hunters_contracts' },\n      { icon: 'feed', title: 'Componions ', content: 'componions_contracts' },\n    ]\n    const columns = [\n      { key: 'contract_number', sortable: true },\n      { key: 'client_name', sortable: true },\n      { key: 'start_date', sortable: true },\n      { key: 'end_date', sortable: true },\n      { key: 'created_at', sortable: true },\n      { key: 'actions', label: 'Actions' },\n    ]\n\n    return {\n      columns,\n      item: null as any,\n      showDetails: false,\n      showAddContractForm: false,\n      tabs: TABS,\n      value: TABS[0].title,\n    }\n  },\n  computed: {\n    ...mapState(useContractsStore, ['contracts', 'loadingContracts']),\n    currentTab(): any {\n      return this.tabs.find(({ title }) => title === this.value)\n    },\n  },\n  mounted() {\n    this.getContracts()\n  },\n  methods: {\n    ...mapActions(useContractsStore, ['getContracts']),\n\n    async downloadPdf(pdfUrl: string) {\n      if (!pdfUrl) {\n        alert('PDF is not available for this contract yet.')\n        return\n      }\n      try {\n        await downloadPdf(pdfUrl, 'contract.pdf')\n      } catch (error: any) {\n        console.error('PDF download error:', error)\n        const message = error?.message || 'Unknown error'\n\n        if (message.includes('500')) {\n          alert(\n            'The PDF generation service is temporarily unavailable.\\n\\nPlease try again in a few moments. If the problem persists, contact support.',\n          )\n        } else if (message.includes('404')) {\n          alert('The PDF file was not found on the server. The contract may not have been processed yet.')\n        } else {\n          alert('Failed to download PDF. Please try again or contact support.\\n\\nError: ' + message)\n        }\n      }\n    },\n\n    viewContract(contract: any) {\n      this.item = contract\n      this.showDetails = true\n      this.showAddContractForm = false\n    },\n\n    gotBack() {\n      this.getContracts()\n\n      this.showDetails = false\n      this.showAddContractForm = false\n    },\n\n    toggleAddSalesInquiriesForm() {\n      this.showDetails = false\n      this.showAddContractForm = !this.showAddContractForm\n    },\n  },\n})\n</script>\n","<template>\n  <VaCard>\n    <VaCardContent>\n      <div class=\"flex flex-col md:flex-row gap-2 mb-2 justify-between px-4 py-2\">\n        <div class=\"flex flex-col md:flex-row gap-2 justify-start\">\n          <VaButton\n            v-if=\"showDetails || showAddContractForm\"\n            class=\"px-2 py-2\"\n            icon=\"arrow_back\"\n            size=\"small\"\n            @click=\"gotBack()\"\n          >\n            Go Back\n          </VaButton>\n        </div>\n        <VaButtonGroup v-if=\"!showAddContractForm && !showDetails\">\n          <VaButton\n            class=\"px-2 py-2\"\n            color=\"primary\"\n            label=\"Add New Quota\"\n            round\n            present=\"secondary\"\n            border-color=\"primary\"\n            icon=\"add\"\n            size=\"small\"\n            @click=\"toggleAddSalesInquiriesForm()\"\n            >Create Contract</VaButton\n          >\n        </VaButtonGroup>\n      </div>\n\n      <template v-if=\"!showDetails\">\n        <template v-if=\"!showAddContractForm\">\n          <VaTabs v-model=\"value\" vertical grow>\n            <template #tabs>\n              <VaTab\n                v-for=\"tab in tabs\"\n                :key=\"tab.title\"\n                :name=\"tab.title\"\n                class=\"px-4 py-2\"\n                @click=\"\n                  getContracts(currentTab.content === 'componions_contracts' ? 'COMPANION_HUNTER' : 'MAIN_HUNTER')\n                \"\n              >\n                <VaIcon :name=\"tab.icon\" size=\"small\" class=\"mr-2\" />\n                {{ tab.title }}\n              </VaTab>\n            </template>\n            <VaCard square outlined :stripe=\"false\">\n              <VaCardTitle>\n                <VaIcon :name=\"currentTab.icon\" size=\"small\" class=\"mr-2\" color=\"background-element\" />\n                {{ currentTab.title }}\n              </VaCardTitle>\n              <VaCardContent>\n                <template v-if=\"currentTab.content === 'main_hunters_contracts'\">\n                  <VaDataTable :items=\"contracts\" :columns=\"columns\" :loading=\"loadingContracts\">\n                    <template #cell(actions)=\"{ rowData }\">\n                      <VaButton\n                        preset=\"plain\"\n                        icon=\"download\"\n                        :disabled=\"!rowData.pdf\"\n                        @click=\"downloadPdf(rowData.pdf)\"\n                      ></VaButton>\n                      <VaButton preset=\"plain\" icon=\"visibility\" @click=\"viewContract(rowData.selfitem)\"></VaButton>\n                    </template>\n                  </VaDataTable>\n                </template>\n                <template v-if=\"currentTab.content === 'componions_contracts'\">\n                  <VaDataTable :items=\"contracts\" :columns=\"columns\" :loading=\"loadingContracts\">\n                    <template #cell(actions)=\"{ rowData }\">\n                      <VaButton\n                        preset=\"plain\"\n                        icon=\"download\"\n                        :disabled=\"!rowData.pdf\"\n                        @click=\"downloadPdf(rowData.pdf)\"\n                      ></VaButton>\n                      <VaButton preset=\"plain\" icon=\"visibility\" @click=\"viewContract(rowData.selfitem)\"></VaButton>\n                    </template>\n                  </VaDataTable>\n                </template>\n              </VaCardContent>\n            </VaCard>\n          </VaTabs>\n        </template>\n        <template v-else>\n          <ContractForm> </ContractForm>\n        </template>\n      </template>\n      <template v-else>\n        <ContractDetails :contract-item=\"item\"></ContractDetails>\n      </template>\n    </VaCardContent>\n  </VaCard>\n</template>\n\n<script lang=\"ts\">\nimport { mapActions, mapState } from 'pinia'\nimport { defineComponent } from 'vue'\nimport { useContractsStore } from '../../../stores/contracts-store'\nimport downloadPdf from '../../../utils/pdfDownloader'\nimport ContractDetails from './components/ContractDetails.vue'\nimport ContractForm from './components/ContractForm.vue'\n\nexport default defineComponent({\n  components: {\n    ContractDetails,\n    ContractForm,\n  },\n  data() {\n    const TABS = [\n      { icon: 'feed', title: \"Main Hunter's \", content: 'main_hunters_contracts' },\n      { icon: 'feed', title: 'Componions ', content: 'componions_contracts' },\n    ]\n    const columns = [\n      { key: 'contract_number', sortable: true },\n      { key: 'client_name', sortable: true },\n      { key: 'start_date', sortable: true },\n      { key: 'end_date', sortable: true },\n      { key: 'created_at', sortable: true },\n      { key: 'actions', label: 'Actions' },\n    ]\n\n    return {\n      columns,\n      item: null as any,\n      showDetails: false,\n      showAddContractForm: false,\n      tabs: TABS,\n      value: TABS[0].title,\n    }\n  },\n  computed: {\n    ...mapState(useContractsStore, ['contracts', 'loadingContracts']),\n    currentTab(): any {\n      return this.tabs.find(({ title }) => title === this.value)\n    },\n  },\n  mounted() {\n    this.getContracts()\n  },\n  methods: {\n    ...mapActions(useContractsStore, ['getContracts']),\n\n    async downloadPdf(pdfUrl: string) {\n      if (!pdfUrl) {\n        alert('PDF is not available for this contract yet.')\n        return\n      }\n      try {\n        await downloadPdf(pdfUrl, 'contract.pdf')\n      } catch (error: any) {\n        console.error('PDF download error:', error)\n        const message = error?.message || 'Unknown error'\n\n        if (message.includes('500')) {\n          alert(\n            'The PDF generation service is temporarily unavailable.\\n\\nPlease try again in a few moments. If the problem persists, contact support.',\n          )\n        } else if (message.includes('404')) {\n          alert('The PDF file was not found on the server. The contract may not have been processed yet.')\n        } else {\n          alert('Failed to download PDF. Please try again or contact support.\\n\\nError: ' + message)\n        }\n      }\n    },\n\n    viewContract(contract: any) {\n      this.item = contract\n      this.showDetails = true\n      this.showAddContractForm = false\n    },\n\n    gotBack() {\n      this.getContracts()\n\n      this.showDetails = false\n      this.showAddContractForm = false\n    },\n\n    toggleAddSalesInquiriesForm() {\n      this.showDetails = false\n      this.showAddContractForm = !this.showAddContractForm\n    },\n  },\n})\n</script>\n"],"names":["_sfc_main$2","defineComponent","formatDateTime","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_15","_hoisted_16","_hoisted_17","_openBlock","_createElementBlock","_cache","_createElementVNode","_createTextVNode","_toDisplayString","_a","_ctx","_b","_c","_d","_e","_f","_g","_hoisted_9","_h","_i","_j","_l","_k","_createCommentVNode","_m","_hoisted_14","_n","_p","_o","_hoisted_18","_q","_r","_sfc_main$1","init","useToast","iformRef","ref","isValidForm","validateForm","resetValidationForm","resetForm","useForm","isNotUpBookingSelected","onInputChange","event","form","reactive","TABS","mapState","useSalesInquiriesStore","title","mapActions","useContractsStore","value","selectedItem","response","error","proposalValue","selectedProposal","entityValue","data","errorData","errorMessage","errors","handleErrors","index","item","clientName","docType","_createBlock","_component_VaInnerLoading","_createVNode","_component_VaTabs","$event","_withCtx","_Fragment","_renderList","tab","_component_VaTab","_component_VaIcon","_component_VaCard","_component_VaCardTitle","_component_VaCardContent","_component_VaForm","_component_VaSelect","_component_VaDateInput","_component_VaTextarea","v","_component_VaFileUpload","_component_VaButton","doc","_sfc_main","ContractDetails","ContractForm","pdfUrl","downloadPdf","message","contract","_component_VaButtonGroup","_component_ContractDetails","_component_ContractForm","_component_VaDataTable","rowData"],"mappings":"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"}